function Jv(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function vp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xp={exports:{}},Zo={},wp={exports:{}},H={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hi=Symbol.for("react.element"),Xv=Symbol.for("react.portal"),Zv=Symbol.for("react.fragment"),ex=Symbol.for("react.strict_mode"),tx=Symbol.for("react.profiler"),nx=Symbol.for("react.provider"),rx=Symbol.for("react.context"),sx=Symbol.for("react.forward_ref"),ix=Symbol.for("react.suspense"),ox=Symbol.for("react.memo"),lx=Symbol.for("react.lazy"),Ud=Symbol.iterator;function ax(t){return t===null||typeof t!="object"?null:(t=Ud&&t[Ud]||t["@@iterator"],typeof t=="function"?t:null)}var _p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Cp=Object.assign,bp={};function Yr(t,e,n){this.props=t,this.context=e,this.refs=bp,this.updater=n||_p}Yr.prototype.isReactComponent={};Yr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Np(){}Np.prototype=Yr.prototype;function Kc(t,e,n){this.props=t,this.context=e,this.refs=bp,this.updater=n||_p}var Yc=Kc.prototype=new Np;Yc.constructor=Kc;Cp(Yc,Yr.prototype);Yc.isPureReactComponent=!0;var zd=Array.isArray,Sp=Object.prototype.hasOwnProperty,Jc={current:null},Ep={key:!0,ref:!0,__self:!0,__source:!0};function Ip(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Sp.call(e,r)&&!Ep.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:hi,type:t,key:i,ref:o,props:s,_owner:Jc.current}}function cx(t,e){return{$$typeof:hi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xc(t){return typeof t=="object"&&t!==null&&t.$$typeof===hi}function ux(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $d=/\/+/g;function Ul(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ux(""+t.key):e.toString(36)}function qi(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case hi:case Xv:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ul(o,0):r,zd(s)?(n="",t!=null&&(n=t.replace($d,"$&/")+"/"),qi(s,e,n,"",function(u){return u})):s!=null&&(Xc(s)&&(s=cx(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace($d,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",zd(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+Ul(i,a);o+=qi(i,e,n,c,s)}else if(c=ax(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+Ul(i,a++),o+=qi(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ki(t,e,n){if(t==null)return t;var r=[],s=0;return qi(t,r,"","",function(i){return e.call(n,i,s++)}),r}function dx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ze={current:null},Gi={transition:null},hx={ReactCurrentDispatcher:ze,ReactCurrentBatchConfig:Gi,ReactCurrentOwner:Jc};function kp(){throw Error("act(...) is not supported in production builds of React.")}H.Children={map:ki,forEach:function(t,e,n){ki(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ki(t,function(){e++}),e},toArray:function(t){return ki(t,function(e){return e})||[]},only:function(t){if(!Xc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};H.Component=Yr;H.Fragment=Zv;H.Profiler=tx;H.PureComponent=Kc;H.StrictMode=ex;H.Suspense=ix;H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hx;H.act=kp;H.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Cp({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Jc.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)Sp.call(e,c)&&!Ep.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:hi,type:t.type,key:s,ref:i,props:r,_owner:o}};H.createContext=function(t){return t={$$typeof:rx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:nx,_context:t},t.Consumer=t};H.createElement=Ip;H.createFactory=function(t){var e=Ip.bind(null,t);return e.type=t,e};H.createRef=function(){return{current:null}};H.forwardRef=function(t){return{$$typeof:sx,render:t}};H.isValidElement=Xc;H.lazy=function(t){return{$$typeof:lx,_payload:{_status:-1,_result:t},_init:dx}};H.memo=function(t,e){return{$$typeof:ox,type:t,compare:e===void 0?null:e}};H.startTransition=function(t){var e=Gi.transition;Gi.transition={};try{t()}finally{Gi.transition=e}};H.unstable_act=kp;H.useCallback=function(t,e){return ze.current.useCallback(t,e)};H.useContext=function(t){return ze.current.useContext(t)};H.useDebugValue=function(){};H.useDeferredValue=function(t){return ze.current.useDeferredValue(t)};H.useEffect=function(t,e){return ze.current.useEffect(t,e)};H.useId=function(){return ze.current.useId()};H.useImperativeHandle=function(t,e,n){return ze.current.useImperativeHandle(t,e,n)};H.useInsertionEffect=function(t,e){return ze.current.useInsertionEffect(t,e)};H.useLayoutEffect=function(t,e){return ze.current.useLayoutEffect(t,e)};H.useMemo=function(t,e){return ze.current.useMemo(t,e)};H.useReducer=function(t,e,n){return ze.current.useReducer(t,e,n)};H.useRef=function(t){return ze.current.useRef(t)};H.useState=function(t){return ze.current.useState(t)};H.useSyncExternalStore=function(t,e,n){return ze.current.useSyncExternalStore(t,e,n)};H.useTransition=function(){return ze.current.useTransition()};H.version="18.3.1";wp.exports=H;var _=wp.exports;const Zc=vp(_),fx=Jv({__proto__:null,default:Zc},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var px=_,mx=Symbol.for("react.element"),gx=Symbol.for("react.fragment"),yx=Object.prototype.hasOwnProperty,vx=px.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xx={key:!0,ref:!0,__self:!0,__source:!0};function jp(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)yx.call(e,r)&&!xx.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:mx,type:t,key:i,ref:o,props:s,_owner:vx.current}}Zo.Fragment=gx;Zo.jsx=jp;Zo.jsxs=jp;xp.exports=Zo;var l=xp.exports,Da={},Tp={exports:{}},it={},Ap={exports:{}},Dp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,F){var z=P.length;P.push(F);e:for(;0<z;){var R=z-1>>>1,M=P[R];if(0<s(M,F))P[R]=F,P[z]=M,z=R;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var F=P[0],z=P.pop();if(z!==F){P[0]=z;e:for(var R=0,M=P.length,pe=M>>>1;R<pe;){var Se=2*(R+1)-1,Ln=P[Se],gt=Se+1,tn=P[gt];if(0>s(Ln,z))gt<M&&0>s(tn,Ln)?(P[R]=tn,P[gt]=z,R=gt):(P[R]=Ln,P[Se]=z,R=Se);else if(gt<M&&0>s(tn,z))P[R]=tn,P[gt]=z,R=gt;else break e}}return F}function s(P,F){var z=P.sortIndex-F.sortIndex;return z!==0?z:P.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],h=1,d=null,f=3,g=!1,x=!1,p=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(P){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=P)r(u),F.sortIndex=F.expirationTime,e(c,F);else break;F=n(u)}}function C(P){if(p=!1,v(P),!x)if(n(c)!==null)x=!0,fr(b);else{var F=n(u);F!==null&&at(C,F.startTime-P)}}function b(P,F){x=!1,p&&(p=!1,y(N),N=-1),g=!0;var z=f;try{for(v(F),d=n(c);d!==null&&(!(d.expirationTime>F)||P&&!B());){var R=d.callback;if(typeof R=="function"){d.callback=null,f=d.priorityLevel;var M=R(d.expirationTime<=F);F=t.unstable_now(),typeof M=="function"?d.callback=M:d===n(c)&&r(c),v(F)}else r(c);d=n(c)}if(d!==null)var pe=!0;else{var Se=n(u);Se!==null&&at(C,Se.startTime-F),pe=!1}return pe}finally{d=null,f=z,g=!1}}var S=!1,k=null,N=-1,T=5,j=-1;function B(){return!(t.unstable_now()-j<T)}function Q(){if(k!==null){var P=t.unstable_now();j=P;var F=!0;try{F=k(!0,P)}finally{F?ue():(S=!1,k=null)}}else S=!1}var ue;if(typeof m=="function")ue=function(){m(Q)};else if(typeof MessageChannel<"u"){var Mn=new MessageChannel,We=Mn.port2;Mn.port1.onmessage=Q,ue=function(){We.postMessage(null)}}else ue=function(){w(Q,0)};function fr(P){k=P,S||(S=!0,ue())}function at(P,F){N=w(function(){P(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,fr(b))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var z=f;f=F;try{return P()}finally{f=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,F){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var z=f;f=P;try{return F()}finally{f=z}},t.unstable_scheduleCallback=function(P,F,z){var R=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?R+z:R):z=R,P){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=z+M,P={id:h++,callback:F,priorityLevel:P,startTime:z,expirationTime:M,sortIndex:-1},z>R?(P.sortIndex=z,e(u,P),n(c)===null&&P===n(u)&&(p?(y(N),N=-1):p=!0,at(C,z-R))):(P.sortIndex=M,e(c,P),x||g||(x=!0,fr(b))),P},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(P){var F=f;return function(){var z=f;f=F;try{return P.apply(this,arguments)}finally{f=z}}}})(Dp);Ap.exports=Dp;var wx=Ap.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _x=_,rt=wx;function E(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pp=new Set,Bs={};function lr(t,e){Fr(t,e),Fr(t+"Capture",e)}function Fr(t,e){for(Bs[t]=e,t=0;t<e.length;t++)Pp.add(e[t])}var Vt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pa=Object.prototype.hasOwnProperty,Cx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wd={},Vd={};function bx(t){return Pa.call(Vd,t)?!0:Pa.call(Wd,t)?!1:Cx.test(t)?Vd[t]=!0:(Wd[t]=!0,!1)}function Nx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Sx(t,e,n,r){if(e===null||typeof e>"u"||Nx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $e(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Te={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Te[t]=new $e(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Te[e]=new $e(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Te[t]=new $e(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Te[t]=new $e(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Te[t]=new $e(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Te[t]=new $e(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Te[t]=new $e(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Te[t]=new $e(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Te[t]=new $e(t,5,!1,t.toLowerCase(),null,!1,!1)});var eu=/[\-:]([a-z])/g;function tu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(eu,tu);Te[e]=new $e(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(eu,tu);Te[e]=new $e(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(eu,tu);Te[e]=new $e(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Te[t]=new $e(t,1,!1,t.toLowerCase(),null,!1,!1)});Te.xlinkHref=new $e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Te[t]=new $e(t,1,!1,t.toLowerCase(),null,!0,!0)});function nu(t,e,n,r){var s=Te.hasOwnProperty(e)?Te[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Sx(e,n,s,r)&&(n=null),r||s===null?bx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var en=_x.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ji=Symbol.for("react.element"),yr=Symbol.for("react.portal"),vr=Symbol.for("react.fragment"),ru=Symbol.for("react.strict_mode"),Ra=Symbol.for("react.profiler"),Rp=Symbol.for("react.provider"),Op=Symbol.for("react.context"),su=Symbol.for("react.forward_ref"),Oa=Symbol.for("react.suspense"),Ma=Symbol.for("react.suspense_list"),iu=Symbol.for("react.memo"),sn=Symbol.for("react.lazy"),Mp=Symbol.for("react.offscreen"),Hd=Symbol.iterator;function os(t){return t===null||typeof t!="object"?null:(t=Hd&&t[Hd]||t["@@iterator"],typeof t=="function"?t:null)}var ce=Object.assign,zl;function ws(t){if(zl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zl=e&&e[1]||""}return`
`+zl+t}var $l=!1;function Wl(t,e){if(!t||$l)return"";$l=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{$l=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ws(t):""}function Ex(t){switch(t.tag){case 5:return ws(t.type);case 16:return ws("Lazy");case 13:return ws("Suspense");case 19:return ws("SuspenseList");case 0:case 2:case 15:return t=Wl(t.type,!1),t;case 11:return t=Wl(t.type.render,!1),t;case 1:return t=Wl(t.type,!0),t;default:return""}}function La(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vr:return"Fragment";case yr:return"Portal";case Ra:return"Profiler";case ru:return"StrictMode";case Oa:return"Suspense";case Ma:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Op:return(t.displayName||"Context")+".Consumer";case Rp:return(t._context.displayName||"Context")+".Provider";case su:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case iu:return e=t.displayName||null,e!==null?e:La(t.type)||"Memo";case sn:e=t._payload,t=t._init;try{return La(t(e))}catch{}}return null}function Ix(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return La(e);case 8:return e===ru?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Lp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function kx(t){var e=Lp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ti(t){t._valueTracker||(t._valueTracker=kx(t))}function Fp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Lp(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function oo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Fa(t,e){var n=e.checked;return ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Qd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Sn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Bp(t,e){e=e.checked,e!=null&&nu(t,"checked",e,!1)}function Ba(t,e){Bp(t,e);var n=Sn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ua(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ua(t,e.type,Sn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ua(t,e,n){(e!=="number"||oo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var _s=Array.isArray;function Tr(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Sn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function za(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(E(92));if(_s(n)){if(1<n.length)throw Error(E(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Sn(n)}}function Up(t,e){var n=Sn(e.value),r=Sn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Kd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function zp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $a(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?zp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ai,$p=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ai=Ai||document.createElement("div"),Ai.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ai.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Us(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ns={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jx=["Webkit","ms","Moz","O"];Object.keys(Ns).forEach(function(t){jx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ns[e]=Ns[t]})});function Wp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ns.hasOwnProperty(t)&&Ns[t]?(""+e).trim():e+"px"}function Vp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Wp(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Tx=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wa(t,e){if(e){if(Tx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function Va(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ha=null;function ou(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qa=null,Ar=null,Dr=null;function Yd(t){if(t=mi(t)){if(typeof Qa!="function")throw Error(E(280));var e=t.stateNode;e&&(e=sl(e),Qa(t.stateNode,t.type,e))}}function Hp(t){Ar?Dr?Dr.push(t):Dr=[t]:Ar=t}function Qp(){if(Ar){var t=Ar,e=Dr;if(Dr=Ar=null,Yd(t),e)for(t=0;t<e.length;t++)Yd(e[t])}}function qp(t,e){return t(e)}function Gp(){}var Vl=!1;function Kp(t,e,n){if(Vl)return t(e,n);Vl=!0;try{return qp(t,e,n)}finally{Vl=!1,(Ar!==null||Dr!==null)&&(Gp(),Qp())}}function zs(t,e){var n=t.stateNode;if(n===null)return null;var r=sl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(E(231,e,typeof n));return n}var qa=!1;if(Vt)try{var ls={};Object.defineProperty(ls,"passive",{get:function(){qa=!0}}),window.addEventListener("test",ls,ls),window.removeEventListener("test",ls,ls)}catch{qa=!1}function Ax(t,e,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Ss=!1,lo=null,ao=!1,Ga=null,Dx={onError:function(t){Ss=!0,lo=t}};function Px(t,e,n,r,s,i,o,a,c){Ss=!1,lo=null,Ax.apply(Dx,arguments)}function Rx(t,e,n,r,s,i,o,a,c){if(Px.apply(this,arguments),Ss){if(Ss){var u=lo;Ss=!1,lo=null}else throw Error(E(198));ao||(ao=!0,Ga=u)}}function ar(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Yp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Jd(t){if(ar(t)!==t)throw Error(E(188))}function Ox(t){var e=t.alternate;if(!e){if(e=ar(t),e===null)throw Error(E(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Jd(s),t;if(i===r)return Jd(s),e;i=i.sibling}throw Error(E(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(E(189))}}if(n.alternate!==r)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?t:e}function Jp(t){return t=Ox(t),t!==null?Xp(t):null}function Xp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Xp(t);if(e!==null)return e;t=t.sibling}return null}var Zp=rt.unstable_scheduleCallback,Xd=rt.unstable_cancelCallback,Mx=rt.unstable_shouldYield,Lx=rt.unstable_requestPaint,fe=rt.unstable_now,Fx=rt.unstable_getCurrentPriorityLevel,lu=rt.unstable_ImmediatePriority,em=rt.unstable_UserBlockingPriority,co=rt.unstable_NormalPriority,Bx=rt.unstable_LowPriority,tm=rt.unstable_IdlePriority,el=null,Dt=null;function Ux(t){if(Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(el,t,void 0,(t.current.flags&128)===128)}catch{}}var bt=Math.clz32?Math.clz32:Wx,zx=Math.log,$x=Math.LN2;function Wx(t){return t>>>=0,t===0?32:31-(zx(t)/$x|0)|0}var Di=64,Pi=4194304;function Cs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function uo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Cs(a):(i&=o,i!==0&&(r=Cs(i)))}else o=n&~s,o!==0?r=Cs(o):i!==0&&(r=Cs(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-bt(e),s=1<<n,r|=t[n],e&=~s;return r}function Vx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-bt(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=Vx(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function Ka(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function nm(){var t=Di;return Di<<=1,!(Di&4194240)&&(Di=64),t}function Hl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-bt(e),t[e]=n}function Qx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-bt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function au(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-bt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var K=0;function rm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var sm,cu,im,om,lm,Ya=!1,Ri=[],fn=null,pn=null,mn=null,$s=new Map,Ws=new Map,ln=[],qx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zd(t,e){switch(t){case"focusin":case"focusout":fn=null;break;case"dragenter":case"dragleave":pn=null;break;case"mouseover":case"mouseout":mn=null;break;case"pointerover":case"pointerout":$s.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ws.delete(e.pointerId)}}function as(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=mi(e),e!==null&&cu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Gx(t,e,n,r,s){switch(e){case"focusin":return fn=as(fn,t,e,n,r,s),!0;case"dragenter":return pn=as(pn,t,e,n,r,s),!0;case"mouseover":return mn=as(mn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return $s.set(i,as($s.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ws.set(i,as(Ws.get(i)||null,t,e,n,r,s)),!0}return!1}function am(t){var e=$n(t.target);if(e!==null){var n=ar(e);if(n!==null){if(e=n.tag,e===13){if(e=Yp(n),e!==null){t.blockedOn=e,lm(t.priority,function(){im(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ki(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ja(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ha=r,n.target.dispatchEvent(r),Ha=null}else return e=mi(n),e!==null&&cu(e),t.blockedOn=n,!1;e.shift()}return!0}function eh(t,e,n){Ki(t)&&n.delete(e)}function Kx(){Ya=!1,fn!==null&&Ki(fn)&&(fn=null),pn!==null&&Ki(pn)&&(pn=null),mn!==null&&Ki(mn)&&(mn=null),$s.forEach(eh),Ws.forEach(eh)}function cs(t,e){t.blockedOn===e&&(t.blockedOn=null,Ya||(Ya=!0,rt.unstable_scheduleCallback(rt.unstable_NormalPriority,Kx)))}function Vs(t){function e(s){return cs(s,t)}if(0<Ri.length){cs(Ri[0],t);for(var n=1;n<Ri.length;n++){var r=Ri[n];r.blockedOn===t&&(r.blockedOn=null)}}for(fn!==null&&cs(fn,t),pn!==null&&cs(pn,t),mn!==null&&cs(mn,t),$s.forEach(e),Ws.forEach(e),n=0;n<ln.length;n++)r=ln[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ln.length&&(n=ln[0],n.blockedOn===null);)am(n),n.blockedOn===null&&ln.shift()}var Pr=en.ReactCurrentBatchConfig,ho=!0;function Yx(t,e,n,r){var s=K,i=Pr.transition;Pr.transition=null;try{K=1,uu(t,e,n,r)}finally{K=s,Pr.transition=i}}function Jx(t,e,n,r){var s=K,i=Pr.transition;Pr.transition=null;try{K=4,uu(t,e,n,r)}finally{K=s,Pr.transition=i}}function uu(t,e,n,r){if(ho){var s=Ja(t,e,n,r);if(s===null)ta(t,e,r,fo,n),Zd(t,r);else if(Gx(s,t,e,n,r))r.stopPropagation();else if(Zd(t,r),e&4&&-1<qx.indexOf(t)){for(;s!==null;){var i=mi(s);if(i!==null&&sm(i),i=Ja(t,e,n,r),i===null&&ta(t,e,r,fo,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ta(t,e,r,null,n)}}var fo=null;function Ja(t,e,n,r){if(fo=null,t=ou(r),t=$n(t),t!==null)if(e=ar(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Yp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fo=t,null}function cm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fx()){case lu:return 1;case em:return 4;case co:case Bx:return 16;case tm:return 536870912;default:return 16}default:return 16}}var cn=null,du=null,Yi=null;function um(){if(Yi)return Yi;var t,e=du,n=e.length,r,s="value"in cn?cn.value:cn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Yi=s.slice(t,1<r?1-r:void 0)}function Ji(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Oi(){return!0}function th(){return!1}function ot(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Oi:th,this.isPropagationStopped=th,this}return ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Oi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Oi)},persist:function(){},isPersistent:Oi}),e}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hu=ot(Jr),pi=ce({},Jr,{view:0,detail:0}),Xx=ot(pi),Ql,ql,us,tl=ce({},pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==us&&(us&&t.type==="mousemove"?(Ql=t.screenX-us.screenX,ql=t.screenY-us.screenY):ql=Ql=0,us=t),Ql)},movementY:function(t){return"movementY"in t?t.movementY:ql}}),nh=ot(tl),Zx=ce({},tl,{dataTransfer:0}),e0=ot(Zx),t0=ce({},pi,{relatedTarget:0}),Gl=ot(t0),n0=ce({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),r0=ot(n0),s0=ce({},Jr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),i0=ot(s0),o0=ce({},Jr,{data:0}),rh=ot(o0),l0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},c0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=c0[t])?!!e[t]:!1}function fu(){return u0}var d0=ce({},pi,{key:function(t){if(t.key){var e=l0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ji(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?a0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fu,charCode:function(t){return t.type==="keypress"?Ji(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ji(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),h0=ot(d0),f0=ce({},tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sh=ot(f0),p0=ce({},pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fu}),m0=ot(p0),g0=ce({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),y0=ot(g0),v0=ce({},tl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),x0=ot(v0),w0=[9,13,27,32],pu=Vt&&"CompositionEvent"in window,Es=null;Vt&&"documentMode"in document&&(Es=document.documentMode);var _0=Vt&&"TextEvent"in window&&!Es,dm=Vt&&(!pu||Es&&8<Es&&11>=Es),ih=" ",oh=!1;function hm(t,e){switch(t){case"keyup":return w0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xr=!1;function C0(t,e){switch(t){case"compositionend":return fm(e);case"keypress":return e.which!==32?null:(oh=!0,ih);case"textInput":return t=e.data,t===ih&&oh?null:t;default:return null}}function b0(t,e){if(xr)return t==="compositionend"||!pu&&hm(t,e)?(t=um(),Yi=du=cn=null,xr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return dm&&e.locale!=="ko"?null:e.data;default:return null}}var N0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!N0[t.type]:e==="textarea"}function pm(t,e,n,r){Hp(r),e=po(e,"onChange"),0<e.length&&(n=new hu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Is=null,Hs=null;function S0(t){Sm(t,0)}function nl(t){var e=Cr(t);if(Fp(e))return t}function E0(t,e){if(t==="change")return e}var mm=!1;if(Vt){var Kl;if(Vt){var Yl="oninput"in document;if(!Yl){var ah=document.createElement("div");ah.setAttribute("oninput","return;"),Yl=typeof ah.oninput=="function"}Kl=Yl}else Kl=!1;mm=Kl&&(!document.documentMode||9<document.documentMode)}function ch(){Is&&(Is.detachEvent("onpropertychange",gm),Hs=Is=null)}function gm(t){if(t.propertyName==="value"&&nl(Hs)){var e=[];pm(e,Hs,t,ou(t)),Kp(S0,e)}}function I0(t,e,n){t==="focusin"?(ch(),Is=e,Hs=n,Is.attachEvent("onpropertychange",gm)):t==="focusout"&&ch()}function k0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nl(Hs)}function j0(t,e){if(t==="click")return nl(e)}function T0(t,e){if(t==="input"||t==="change")return nl(e)}function A0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Et=typeof Object.is=="function"?Object.is:A0;function Qs(t,e){if(Et(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Pa.call(e,s)||!Et(t[s],e[s]))return!1}return!0}function uh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function dh(t,e){var n=uh(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=uh(n)}}function ym(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ym(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function vm(){for(var t=window,e=oo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=oo(t.document)}return e}function mu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function D0(t){var e=vm(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ym(n.ownerDocument.documentElement,n)){if(r!==null&&mu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=dh(n,i);var o=dh(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var P0=Vt&&"documentMode"in document&&11>=document.documentMode,wr=null,Xa=null,ks=null,Za=!1;function hh(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Za||wr==null||wr!==oo(r)||(r=wr,"selectionStart"in r&&mu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ks&&Qs(ks,r)||(ks=r,r=po(Xa,"onSelect"),0<r.length&&(e=new hu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=wr)))}function Mi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _r={animationend:Mi("Animation","AnimationEnd"),animationiteration:Mi("Animation","AnimationIteration"),animationstart:Mi("Animation","AnimationStart"),transitionend:Mi("Transition","TransitionEnd")},Jl={},xm={};Vt&&(xm=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);function rl(t){if(Jl[t])return Jl[t];if(!_r[t])return t;var e=_r[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in xm)return Jl[t]=e[n];return t}var wm=rl("animationend"),_m=rl("animationiteration"),Cm=rl("animationstart"),bm=rl("transitionend"),Nm=new Map,fh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(t,e){Nm.set(t,e),lr(e,[t])}for(var Xl=0;Xl<fh.length;Xl++){var Zl=fh[Xl],R0=Zl.toLowerCase(),O0=Zl[0].toUpperCase()+Zl.slice(1);Dn(R0,"on"+O0)}Dn(wm,"onAnimationEnd");Dn(_m,"onAnimationIteration");Dn(Cm,"onAnimationStart");Dn("dblclick","onDoubleClick");Dn("focusin","onFocus");Dn("focusout","onBlur");Dn(bm,"onTransitionEnd");Fr("onMouseEnter",["mouseout","mouseover"]);Fr("onMouseLeave",["mouseout","mouseover"]);Fr("onPointerEnter",["pointerout","pointerover"]);Fr("onPointerLeave",["pointerout","pointerover"]);lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lr("onBeforeInput",["compositionend","keypress","textInput","paste"]);lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),M0=new Set("cancel close invalid load scroll toggle".split(" ").concat(bs));function ph(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Rx(r,e,void 0,t),t.currentTarget=null}function Sm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;ph(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;ph(s,a,u),i=c}}}if(ao)throw t=Ga,ao=!1,Ga=null,t}function re(t,e){var n=e[sc];n===void 0&&(n=e[sc]=new Set);var r=t+"__bubble";n.has(r)||(Em(e,t,2,!1),n.add(r))}function ea(t,e,n){var r=0;e&&(r|=4),Em(n,t,r,e)}var Li="_reactListening"+Math.random().toString(36).slice(2);function qs(t){if(!t[Li]){t[Li]=!0,Pp.forEach(function(n){n!=="selectionchange"&&(M0.has(n)||ea(n,!1,t),ea(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Li]||(e[Li]=!0,ea("selectionchange",!1,e))}}function Em(t,e,n,r){switch(cm(e)){case 1:var s=Yx;break;case 4:s=Jx;break;default:s=uu}n=s.bind(null,e,n,t),s=void 0,!qa||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ta(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=$n(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Kp(function(){var u=i,h=ou(n),d=[];e:{var f=Nm.get(t);if(f!==void 0){var g=hu,x=t;switch(t){case"keypress":if(Ji(n)===0)break e;case"keydown":case"keyup":g=h0;break;case"focusin":x="focus",g=Gl;break;case"focusout":x="blur",g=Gl;break;case"beforeblur":case"afterblur":g=Gl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=nh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=e0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=m0;break;case wm:case _m:case Cm:g=r0;break;case bm:g=y0;break;case"scroll":g=Xx;break;case"wheel":g=x0;break;case"copy":case"cut":case"paste":g=i0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=sh}var p=(e&4)!==0,w=!p&&t==="scroll",y=p?f!==null?f+"Capture":null:f;p=[];for(var m=u,v;m!==null;){v=m;var C=v.stateNode;if(v.tag===5&&C!==null&&(v=C,y!==null&&(C=zs(m,y),C!=null&&p.push(Gs(m,C,v)))),w)break;m=m.return}0<p.length&&(f=new g(f,x,null,n,h),d.push({event:f,listeners:p}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Ha&&(x=n.relatedTarget||n.fromElement)&&($n(x)||x[Ht]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(x=n.relatedTarget||n.toElement,g=u,x=x?$n(x):null,x!==null&&(w=ar(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=u),g!==x)){if(p=nh,C="onMouseLeave",y="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(p=sh,C="onPointerLeave",y="onPointerEnter",m="pointer"),w=g==null?f:Cr(g),v=x==null?f:Cr(x),f=new p(C,m+"leave",g,n,h),f.target=w,f.relatedTarget=v,C=null,$n(h)===u&&(p=new p(y,m+"enter",x,n,h),p.target=v,p.relatedTarget=w,C=p),w=C,g&&x)t:{for(p=g,y=x,m=0,v=p;v;v=mr(v))m++;for(v=0,C=y;C;C=mr(C))v++;for(;0<m-v;)p=mr(p),m--;for(;0<v-m;)y=mr(y),v--;for(;m--;){if(p===y||y!==null&&p===y.alternate)break t;p=mr(p),y=mr(y)}p=null}else p=null;g!==null&&mh(d,f,g,p,!1),x!==null&&w!==null&&mh(d,w,x,p,!0)}}e:{if(f=u?Cr(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var b=E0;else if(lh(f))if(mm)b=T0;else{b=k0;var S=I0}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=j0);if(b&&(b=b(t,u))){pm(d,b,n,h);break e}S&&S(t,f,u),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&Ua(f,"number",f.value)}switch(S=u?Cr(u):window,t){case"focusin":(lh(S)||S.contentEditable==="true")&&(wr=S,Xa=u,ks=null);break;case"focusout":ks=Xa=wr=null;break;case"mousedown":Za=!0;break;case"contextmenu":case"mouseup":case"dragend":Za=!1,hh(d,n,h);break;case"selectionchange":if(P0)break;case"keydown":case"keyup":hh(d,n,h)}var k;if(pu)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else xr?hm(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(dm&&n.locale!=="ko"&&(xr||N!=="onCompositionStart"?N==="onCompositionEnd"&&xr&&(k=um()):(cn=h,du="value"in cn?cn.value:cn.textContent,xr=!0)),S=po(u,N),0<S.length&&(N=new rh(N,t,null,n,h),d.push({event:N,listeners:S}),k?N.data=k:(k=fm(n),k!==null&&(N.data=k)))),(k=_0?C0(t,n):b0(t,n))&&(u=po(u,"onBeforeInput"),0<u.length&&(h=new rh("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=k))}Sm(d,e)})}function Gs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function po(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=zs(t,n),i!=null&&r.unshift(Gs(t,i,s)),i=zs(t,e),i!=null&&r.push(Gs(t,i,s))),t=t.return}return r}function mr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function mh(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=zs(n,i),c!=null&&o.unshift(Gs(n,c,a))):s||(c=zs(n,i),c!=null&&o.push(Gs(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var L0=/\r\n?/g,F0=/\u0000|\uFFFD/g;function gh(t){return(typeof t=="string"?t:""+t).replace(L0,`
`).replace(F0,"")}function Fi(t,e,n){if(e=gh(e),gh(t)!==e&&n)throw Error(E(425))}function mo(){}var ec=null,tc=null;function nc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rc=typeof setTimeout=="function"?setTimeout:void 0,B0=typeof clearTimeout=="function"?clearTimeout:void 0,yh=typeof Promise=="function"?Promise:void 0,U0=typeof queueMicrotask=="function"?queueMicrotask:typeof yh<"u"?function(t){return yh.resolve(null).then(t).catch(z0)}:rc;function z0(t){setTimeout(function(){throw t})}function na(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Vs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Vs(e)}function gn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function vh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xr=Math.random().toString(36).slice(2),At="__reactFiber$"+Xr,Ks="__reactProps$"+Xr,Ht="__reactContainer$"+Xr,sc="__reactEvents$"+Xr,$0="__reactListeners$"+Xr,W0="__reactHandles$"+Xr;function $n(t){var e=t[At];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ht]||n[At]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=vh(t);t!==null;){if(n=t[At])return n;t=vh(t)}return e}t=n,n=t.parentNode}return null}function mi(t){return t=t[At]||t[Ht],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Cr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(E(33))}function sl(t){return t[Ks]||null}var ic=[],br=-1;function Pn(t){return{current:t}}function se(t){0>br||(t.current=ic[br],ic[br]=null,br--)}function te(t,e){br++,ic[br]=t.current,t.current=e}var En={},Me=Pn(En),qe=Pn(!1),Yn=En;function Br(t,e){var n=t.type.contextTypes;if(!n)return En;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ge(t){return t=t.childContextTypes,t!=null}function go(){se(qe),se(Me)}function xh(t,e,n){if(Me.current!==En)throw Error(E(168));te(Me,e),te(qe,n)}function Im(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(E(108,Ix(t)||"Unknown",s));return ce({},n,r)}function yo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||En,Yn=Me.current,te(Me,t),te(qe,qe.current),!0}function wh(t,e,n){var r=t.stateNode;if(!r)throw Error(E(169));n?(t=Im(t,e,Yn),r.__reactInternalMemoizedMergedChildContext=t,se(qe),se(Me),te(Me,t)):se(qe),te(qe,n)}var Ft=null,il=!1,ra=!1;function km(t){Ft===null?Ft=[t]:Ft.push(t)}function V0(t){il=!0,km(t)}function Rn(){if(!ra&&Ft!==null){ra=!0;var t=0,e=K;try{var n=Ft;for(K=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ft=null,il=!1}catch(s){throw Ft!==null&&(Ft=Ft.slice(t+1)),Zp(lu,Rn),s}finally{K=e,ra=!1}}return null}var Nr=[],Sr=0,vo=null,xo=0,ct=[],ut=0,Jn=null,Bt=1,Ut="";function Fn(t,e){Nr[Sr++]=xo,Nr[Sr++]=vo,vo=t,xo=e}function jm(t,e,n){ct[ut++]=Bt,ct[ut++]=Ut,ct[ut++]=Jn,Jn=t;var r=Bt;t=Ut;var s=32-bt(r)-1;r&=~(1<<s),n+=1;var i=32-bt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Bt=1<<32-bt(e)+s|n<<s|r,Ut=i+t}else Bt=1<<i|n<<s|r,Ut=t}function gu(t){t.return!==null&&(Fn(t,1),jm(t,1,0))}function yu(t){for(;t===vo;)vo=Nr[--Sr],Nr[Sr]=null,xo=Nr[--Sr],Nr[Sr]=null;for(;t===Jn;)Jn=ct[--ut],ct[ut]=null,Ut=ct[--ut],ct[ut]=null,Bt=ct[--ut],ct[ut]=null}var tt=null,et=null,ie=!1,wt=null;function Tm(t,e){var n=dt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function _h(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,tt=t,et=gn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,tt=t,et=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Jn!==null?{id:Bt,overflow:Ut}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=dt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,tt=t,et=null,!0):!1;default:return!1}}function oc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lc(t){if(ie){var e=et;if(e){var n=e;if(!_h(t,e)){if(oc(t))throw Error(E(418));e=gn(n.nextSibling);var r=tt;e&&_h(t,e)?Tm(r,n):(t.flags=t.flags&-4097|2,ie=!1,tt=t)}}else{if(oc(t))throw Error(E(418));t.flags=t.flags&-4097|2,ie=!1,tt=t}}}function Ch(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tt=t}function Bi(t){if(t!==tt)return!1;if(!ie)return Ch(t),ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!nc(t.type,t.memoizedProps)),e&&(e=et)){if(oc(t))throw Am(),Error(E(418));for(;e;)Tm(t,e),e=gn(e.nextSibling)}if(Ch(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(E(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){et=gn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}et=null}}else et=tt?gn(t.stateNode.nextSibling):null;return!0}function Am(){for(var t=et;t;)t=gn(t.nextSibling)}function Ur(){et=tt=null,ie=!1}function vu(t){wt===null?wt=[t]:wt.push(t)}var H0=en.ReactCurrentBatchConfig;function ds(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var r=n.stateNode}if(!r)throw Error(E(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,t))}return t}function Ui(t,e){throw t=Object.prototype.toString.call(e),Error(E(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function bh(t){var e=t._init;return e(t._payload)}function Dm(t){function e(y,m){if(t){var v=y.deletions;v===null?(y.deletions=[m],y.flags|=16):v.push(m)}}function n(y,m){if(!t)return null;for(;m!==null;)e(y,m),m=m.sibling;return null}function r(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function s(y,m){return y=wn(y,m),y.index=0,y.sibling=null,y}function i(y,m,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<m?(y.flags|=2,m):v):(y.flags|=2,m)):(y.flags|=1048576,m)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,m,v,C){return m===null||m.tag!==6?(m=ua(v,y.mode,C),m.return=y,m):(m=s(m,v),m.return=y,m)}function c(y,m,v,C){var b=v.type;return b===vr?h(y,m,v.props.children,C,v.key):m!==null&&(m.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===sn&&bh(b)===m.type)?(C=s(m,v.props),C.ref=ds(y,m,v),C.return=y,C):(C=so(v.type,v.key,v.props,null,y.mode,C),C.ref=ds(y,m,v),C.return=y,C)}function u(y,m,v,C){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=da(v,y.mode,C),m.return=y,m):(m=s(m,v.children||[]),m.return=y,m)}function h(y,m,v,C,b){return m===null||m.tag!==7?(m=Gn(v,y.mode,C,b),m.return=y,m):(m=s(m,v),m.return=y,m)}function d(y,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ua(""+m,y.mode,v),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ji:return v=so(m.type,m.key,m.props,null,y.mode,v),v.ref=ds(y,null,m),v.return=y,v;case yr:return m=da(m,y.mode,v),m.return=y,m;case sn:var C=m._init;return d(y,C(m._payload),v)}if(_s(m)||os(m))return m=Gn(m,y.mode,v,null),m.return=y,m;Ui(y,m)}return null}function f(y,m,v,C){var b=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return b!==null?null:a(y,m,""+v,C);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ji:return v.key===b?c(y,m,v,C):null;case yr:return v.key===b?u(y,m,v,C):null;case sn:return b=v._init,f(y,m,b(v._payload),C)}if(_s(v)||os(v))return b!==null?null:h(y,m,v,C,null);Ui(y,v)}return null}function g(y,m,v,C,b){if(typeof C=="string"&&C!==""||typeof C=="number")return y=y.get(v)||null,a(m,y,""+C,b);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ji:return y=y.get(C.key===null?v:C.key)||null,c(m,y,C,b);case yr:return y=y.get(C.key===null?v:C.key)||null,u(m,y,C,b);case sn:var S=C._init;return g(y,m,v,S(C._payload),b)}if(_s(C)||os(C))return y=y.get(v)||null,h(m,y,C,b,null);Ui(m,C)}return null}function x(y,m,v,C){for(var b=null,S=null,k=m,N=m=0,T=null;k!==null&&N<v.length;N++){k.index>N?(T=k,k=null):T=k.sibling;var j=f(y,k,v[N],C);if(j===null){k===null&&(k=T);break}t&&k&&j.alternate===null&&e(y,k),m=i(j,m,N),S===null?b=j:S.sibling=j,S=j,k=T}if(N===v.length)return n(y,k),ie&&Fn(y,N),b;if(k===null){for(;N<v.length;N++)k=d(y,v[N],C),k!==null&&(m=i(k,m,N),S===null?b=k:S.sibling=k,S=k);return ie&&Fn(y,N),b}for(k=r(y,k);N<v.length;N++)T=g(k,y,N,v[N],C),T!==null&&(t&&T.alternate!==null&&k.delete(T.key===null?N:T.key),m=i(T,m,N),S===null?b=T:S.sibling=T,S=T);return t&&k.forEach(function(B){return e(y,B)}),ie&&Fn(y,N),b}function p(y,m,v,C){var b=os(v);if(typeof b!="function")throw Error(E(150));if(v=b.call(v),v==null)throw Error(E(151));for(var S=b=null,k=m,N=m=0,T=null,j=v.next();k!==null&&!j.done;N++,j=v.next()){k.index>N?(T=k,k=null):T=k.sibling;var B=f(y,k,j.value,C);if(B===null){k===null&&(k=T);break}t&&k&&B.alternate===null&&e(y,k),m=i(B,m,N),S===null?b=B:S.sibling=B,S=B,k=T}if(j.done)return n(y,k),ie&&Fn(y,N),b;if(k===null){for(;!j.done;N++,j=v.next())j=d(y,j.value,C),j!==null&&(m=i(j,m,N),S===null?b=j:S.sibling=j,S=j);return ie&&Fn(y,N),b}for(k=r(y,k);!j.done;N++,j=v.next())j=g(k,y,N,j.value,C),j!==null&&(t&&j.alternate!==null&&k.delete(j.key===null?N:j.key),m=i(j,m,N),S===null?b=j:S.sibling=j,S=j);return t&&k.forEach(function(Q){return e(y,Q)}),ie&&Fn(y,N),b}function w(y,m,v,C){if(typeof v=="object"&&v!==null&&v.type===vr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ji:e:{for(var b=v.key,S=m;S!==null;){if(S.key===b){if(b=v.type,b===vr){if(S.tag===7){n(y,S.sibling),m=s(S,v.props.children),m.return=y,y=m;break e}}else if(S.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===sn&&bh(b)===S.type){n(y,S.sibling),m=s(S,v.props),m.ref=ds(y,S,v),m.return=y,y=m;break e}n(y,S);break}else e(y,S);S=S.sibling}v.type===vr?(m=Gn(v.props.children,y.mode,C,v.key),m.return=y,y=m):(C=so(v.type,v.key,v.props,null,y.mode,C),C.ref=ds(y,m,v),C.return=y,y=C)}return o(y);case yr:e:{for(S=v.key;m!==null;){if(m.key===S)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(y,m.sibling),m=s(m,v.children||[]),m.return=y,y=m;break e}else{n(y,m);break}else e(y,m);m=m.sibling}m=da(v,y.mode,C),m.return=y,y=m}return o(y);case sn:return S=v._init,w(y,m,S(v._payload),C)}if(_s(v))return x(y,m,v,C);if(os(v))return p(y,m,v,C);Ui(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(y,m.sibling),m=s(m,v),m.return=y,y=m):(n(y,m),m=ua(v,y.mode,C),m.return=y,y=m),o(y)):n(y,m)}return w}var zr=Dm(!0),Pm=Dm(!1),wo=Pn(null),_o=null,Er=null,xu=null;function wu(){xu=Er=_o=null}function _u(t){var e=wo.current;se(wo),t._currentValue=e}function ac(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Rr(t,e){_o=t,xu=Er=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(He=!0),t.firstContext=null)}function pt(t){var e=t._currentValue;if(xu!==t)if(t={context:t,memoizedValue:e,next:null},Er===null){if(_o===null)throw Error(E(308));Er=t,_o.dependencies={lanes:0,firstContext:t}}else Er=Er.next=t;return e}var Wn=null;function Cu(t){Wn===null?Wn=[t]:Wn.push(t)}function Rm(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Cu(e)):(n.next=s.next,s.next=n),e.interleaved=n,Qt(t,r)}function Qt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var on=!1;function bu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Om(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $t(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,q&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Qt(t,n)}return s=r.interleaved,s===null?(e.next=e,Cu(r)):(e.next=s.next,s.next=e),r.interleaved=e,Qt(t,n)}function Xi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,au(t,n)}}function Nh(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Co(t,e,n,r){var s=t.updateQueue;on=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,h=u=c=null,a=i;do{var f=a.lane,g=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,p=a;switch(f=e,g=n,p.tag){case 1:if(x=p.payload,typeof x=="function"){d=x.call(g,d,f);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=p.payload,f=typeof x=="function"?x.call(g,d,f):x,f==null)break e;d=ce({},d,f);break e;case 2:on=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=g,c=d):h=h.next=g,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Zn|=o,t.lanes=o,t.memoizedState=d}}function Sh(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(E(191,s));s.call(r)}}}var gi={},Pt=Pn(gi),Ys=Pn(gi),Js=Pn(gi);function Vn(t){if(t===gi)throw Error(E(174));return t}function Nu(t,e){switch(te(Js,e),te(Ys,t),te(Pt,gi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$a(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$a(e,t)}se(Pt),te(Pt,e)}function $r(){se(Pt),se(Ys),se(Js)}function Mm(t){Vn(Js.current);var e=Vn(Pt.current),n=$a(e,t.type);e!==n&&(te(Ys,t),te(Pt,n))}function Su(t){Ys.current===t&&(se(Pt),se(Ys))}var le=Pn(0);function bo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sa=[];function Eu(){for(var t=0;t<sa.length;t++)sa[t]._workInProgressVersionPrimary=null;sa.length=0}var Zi=en.ReactCurrentDispatcher,ia=en.ReactCurrentBatchConfig,Xn=0,ae=null,ye=null,_e=null,No=!1,js=!1,Xs=0,Q0=0;function De(){throw Error(E(321))}function Iu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Et(t[n],e[n]))return!1;return!0}function ku(t,e,n,r,s,i){if(Xn=i,ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zi.current=t===null||t.memoizedState===null?Y0:J0,t=n(r,s),js){i=0;do{if(js=!1,Xs=0,25<=i)throw Error(E(301));i+=1,_e=ye=null,e.updateQueue=null,Zi.current=X0,t=n(r,s)}while(js)}if(Zi.current=So,e=ye!==null&&ye.next!==null,Xn=0,_e=ye=ae=null,No=!1,e)throw Error(E(300));return t}function ju(){var t=Xs!==0;return Xs=0,t}function Tt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _e===null?ae.memoizedState=_e=t:_e=_e.next=t,_e}function mt(){if(ye===null){var t=ae.alternate;t=t!==null?t.memoizedState:null}else t=ye.next;var e=_e===null?ae.memoizedState:_e.next;if(e!==null)_e=e,ye=t;else{if(t===null)throw Error(E(310));ye=t,t={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},_e===null?ae.memoizedState=_e=t:_e=_e.next=t}return _e}function Zs(t,e){return typeof e=="function"?e(t):e}function oa(t){var e=mt(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=ye,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var h=u.lane;if((Xn&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,ae.lanes|=h,Zn|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,Et(r,e.memoizedState)||(He=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ae.lanes|=i,Zn|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function la(t){var e=mt(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Et(i,e.memoizedState)||(He=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Lm(){}function Fm(t,e){var n=ae,r=mt(),s=e(),i=!Et(r.memoizedState,s);if(i&&(r.memoizedState=s,He=!0),r=r.queue,Tu(zm.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||_e!==null&&_e.memoizedState.tag&1){if(n.flags|=2048,ei(9,Um.bind(null,n,r,s,e),void 0,null),be===null)throw Error(E(349));Xn&30||Bm(n,e,s)}return s}function Bm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ae.updateQueue,e===null?(e={lastEffect:null,stores:null},ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Um(t,e,n,r){e.value=n,e.getSnapshot=r,$m(e)&&Wm(t)}function zm(t,e,n){return n(function(){$m(e)&&Wm(t)})}function $m(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Et(t,n)}catch{return!0}}function Wm(t){var e=Qt(t,1);e!==null&&Nt(e,t,1,-1)}function Eh(t){var e=Tt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zs,lastRenderedState:t},e.queue=t,t=t.dispatch=K0.bind(null,ae,t),[e.memoizedState,t]}function ei(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ae.updateQueue,e===null?(e={lastEffect:null,stores:null},ae.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Vm(){return mt().memoizedState}function eo(t,e,n,r){var s=Tt();ae.flags|=t,s.memoizedState=ei(1|e,n,void 0,r===void 0?null:r)}function ol(t,e,n,r){var s=mt();r=r===void 0?null:r;var i=void 0;if(ye!==null){var o=ye.memoizedState;if(i=o.destroy,r!==null&&Iu(r,o.deps)){s.memoizedState=ei(e,n,i,r);return}}ae.flags|=t,s.memoizedState=ei(1|e,n,i,r)}function Ih(t,e){return eo(8390656,8,t,e)}function Tu(t,e){return ol(2048,8,t,e)}function Hm(t,e){return ol(4,2,t,e)}function Qm(t,e){return ol(4,4,t,e)}function qm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Gm(t,e,n){return n=n!=null?n.concat([t]):null,ol(4,4,qm.bind(null,e,t),n)}function Au(){}function Km(t,e){var n=mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Iu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ym(t,e){var n=mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Iu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Jm(t,e,n){return Xn&21?(Et(n,e)||(n=nm(),ae.lanes|=n,Zn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,He=!0),t.memoizedState=n)}function q0(t,e){var n=K;K=n!==0&&4>n?n:4,t(!0);var r=ia.transition;ia.transition={};try{t(!1),e()}finally{K=n,ia.transition=r}}function Xm(){return mt().memoizedState}function G0(t,e,n){var r=xn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Zm(t))eg(e,n);else if(n=Rm(t,e,n,r),n!==null){var s=Be();Nt(n,t,r,s),tg(n,e,r)}}function K0(t,e,n){var r=xn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zm(t))eg(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Et(a,o)){var c=e.interleaved;c===null?(s.next=s,Cu(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Rm(t,e,s,r),n!==null&&(s=Be(),Nt(n,t,r,s),tg(n,e,r))}}function Zm(t){var e=t.alternate;return t===ae||e!==null&&e===ae}function eg(t,e){js=No=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function tg(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,au(t,n)}}var So={readContext:pt,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useInsertionEffect:De,useLayoutEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useMutableSource:De,useSyncExternalStore:De,useId:De,unstable_isNewReconciler:!1},Y0={readContext:pt,useCallback:function(t,e){return Tt().memoizedState=[t,e===void 0?null:e],t},useContext:pt,useEffect:Ih,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,eo(4194308,4,qm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return eo(4194308,4,t,e)},useInsertionEffect:function(t,e){return eo(4,2,t,e)},useMemo:function(t,e){var n=Tt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Tt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=G0.bind(null,ae,t),[r.memoizedState,t]},useRef:function(t){var e=Tt();return t={current:t},e.memoizedState=t},useState:Eh,useDebugValue:Au,useDeferredValue:function(t){return Tt().memoizedState=t},useTransition:function(){var t=Eh(!1),e=t[0];return t=q0.bind(null,t[1]),Tt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ae,s=Tt();if(ie){if(n===void 0)throw Error(E(407));n=n()}else{if(n=e(),be===null)throw Error(E(349));Xn&30||Bm(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Ih(zm.bind(null,r,i,t),[t]),r.flags|=2048,ei(9,Um.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Tt(),e=be.identifierPrefix;if(ie){var n=Ut,r=Bt;n=(r&~(1<<32-bt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Xs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Q0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},J0={readContext:pt,useCallback:Km,useContext:pt,useEffect:Tu,useImperativeHandle:Gm,useInsertionEffect:Hm,useLayoutEffect:Qm,useMemo:Ym,useReducer:oa,useRef:Vm,useState:function(){return oa(Zs)},useDebugValue:Au,useDeferredValue:function(t){var e=mt();return Jm(e,ye.memoizedState,t)},useTransition:function(){var t=oa(Zs)[0],e=mt().memoizedState;return[t,e]},useMutableSource:Lm,useSyncExternalStore:Fm,useId:Xm,unstable_isNewReconciler:!1},X0={readContext:pt,useCallback:Km,useContext:pt,useEffect:Tu,useImperativeHandle:Gm,useInsertionEffect:Hm,useLayoutEffect:Qm,useMemo:Ym,useReducer:la,useRef:Vm,useState:function(){return la(Zs)},useDebugValue:Au,useDeferredValue:function(t){var e=mt();return ye===null?e.memoizedState=t:Jm(e,ye.memoizedState,t)},useTransition:function(){var t=la(Zs)[0],e=mt().memoizedState;return[t,e]},useMutableSource:Lm,useSyncExternalStore:Fm,useId:Xm,unstable_isNewReconciler:!1};function vt(t,e){if(t&&t.defaultProps){e=ce({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function cc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ce({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ll={isMounted:function(t){return(t=t._reactInternals)?ar(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Be(),s=xn(t),i=$t(r,s);i.payload=e,n!=null&&(i.callback=n),e=yn(t,i,s),e!==null&&(Nt(e,t,s,r),Xi(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Be(),s=xn(t),i=$t(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=yn(t,i,s),e!==null&&(Nt(e,t,s,r),Xi(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Be(),r=xn(t),s=$t(n,r);s.tag=2,e!=null&&(s.callback=e),e=yn(t,s,r),e!==null&&(Nt(e,t,r,n),Xi(e,t,r))}};function kh(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Qs(n,r)||!Qs(s,i):!0}function ng(t,e,n){var r=!1,s=En,i=e.contextType;return typeof i=="object"&&i!==null?i=pt(i):(s=Ge(e)?Yn:Me.current,r=e.contextTypes,i=(r=r!=null)?Br(t,s):En),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ll,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function jh(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ll.enqueueReplaceState(e,e.state,null)}function uc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},bu(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=pt(i):(i=Ge(e)?Yn:Me.current,s.context=Br(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(cc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ll.enqueueReplaceState(s,s.state,null),Co(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Wr(t,e){try{var n="",r=e;do n+=Ex(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function aa(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function dc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Z0=typeof WeakMap=="function"?WeakMap:Map;function rg(t,e,n){n=$t(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Io||(Io=!0,_c=r),dc(t,e)},n}function sg(t,e,n){n=$t(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){dc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){dc(t,e),typeof r!="function"&&(vn===null?vn=new Set([this]):vn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Th(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Z0;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=fw.bind(null,t,e,n),e.then(t,t))}function Ah(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Dh(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$t(-1,1),e.tag=2,yn(n,e,1))),n.lanes|=1),t)}var ew=en.ReactCurrentOwner,He=!1;function Le(t,e,n,r){e.child=t===null?Pm(e,null,n,r):zr(e,t.child,n,r)}function Ph(t,e,n,r,s){n=n.render;var i=e.ref;return Rr(e,s),r=ku(t,e,n,r,i,s),n=ju(),t!==null&&!He?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qt(t,e,s)):(ie&&n&&gu(e),e.flags|=1,Le(t,e,r,s),e.child)}function Rh(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Bu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,ig(t,e,i,r,s)):(t=so(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Qs,n(o,r)&&t.ref===e.ref)return qt(t,e,s)}return e.flags|=1,t=wn(i,r),t.ref=e.ref,t.return=e,e.child=t}function ig(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Qs(i,r)&&t.ref===e.ref)if(He=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(He=!0);else return e.lanes=t.lanes,qt(t,e,s)}return hc(t,e,n,r,s)}function og(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},te(kr,Xe),Xe|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,te(kr,Xe),Xe|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,te(kr,Xe),Xe|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,te(kr,Xe),Xe|=r;return Le(t,e,s,n),e.child}function lg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hc(t,e,n,r,s){var i=Ge(n)?Yn:Me.current;return i=Br(e,i),Rr(e,s),n=ku(t,e,n,r,i,s),r=ju(),t!==null&&!He?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qt(t,e,s)):(ie&&r&&gu(e),e.flags|=1,Le(t,e,n,s),e.child)}function Oh(t,e,n,r,s){if(Ge(n)){var i=!0;yo(e)}else i=!1;if(Rr(e,s),e.stateNode===null)to(t,e),ng(e,n,r),uc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=pt(u):(u=Ge(n)?Yn:Me.current,u=Br(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&jh(e,o,r,u),on=!1;var f=e.memoizedState;o.state=f,Co(e,r,o,s),c=e.memoizedState,a!==r||f!==c||qe.current||on?(typeof h=="function"&&(cc(e,n,h,r),c=e.memoizedState),(a=on||kh(e,n,a,r,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Om(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:vt(e.type,a),o.props=u,d=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=pt(c):(c=Ge(n)?Yn:Me.current,c=Br(e,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==c)&&jh(e,o,r,c),on=!1,f=e.memoizedState,o.state=f,Co(e,r,o,s);var x=e.memoizedState;a!==d||f!==x||qe.current||on?(typeof g=="function"&&(cc(e,n,g,r),x=e.memoizedState),(u=on||kh(e,n,u,r,f,x,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return fc(t,e,n,r,i,s)}function fc(t,e,n,r,s,i){lg(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&wh(e,n,!1),qt(t,e,i);r=e.stateNode,ew.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=zr(e,t.child,null,i),e.child=zr(e,null,a,i)):Le(t,e,a,i),e.memoizedState=r.state,s&&wh(e,n,!0),e.child}function ag(t){var e=t.stateNode;e.pendingContext?xh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&xh(t,e.context,!1),Nu(t,e.containerInfo)}function Mh(t,e,n,r,s){return Ur(),vu(s),e.flags|=256,Le(t,e,n,r),e.child}var pc={dehydrated:null,treeContext:null,retryLane:0};function mc(t){return{baseLanes:t,cachePool:null,transitions:null}}function cg(t,e,n){var r=e.pendingProps,s=le.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),te(le,s&1),t===null)return lc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ul(o,r,0,null),t=Gn(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=mc(n),e.memoizedState=pc,t):Du(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return tw(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=wn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=wn(a,i):(i=Gn(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?mc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=pc,r}return i=t.child,t=i.sibling,r=wn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Du(t,e){return e=ul({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zi(t,e,n,r){return r!==null&&vu(r),zr(e,t.child,null,n),t=Du(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function tw(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=aa(Error(E(422))),zi(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ul({mode:"visible",children:r.children},s,0,null),i=Gn(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&zr(e,t.child,null,o),e.child.memoizedState=mc(o),e.memoizedState=pc,i);if(!(e.mode&1))return zi(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(E(419)),r=aa(i,r,void 0),zi(t,e,o,r)}if(a=(o&t.childLanes)!==0,He||a){if(r=be,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Qt(t,s),Nt(r,t,s,-1))}return Fu(),r=aa(Error(E(421))),zi(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=pw.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,et=gn(s.nextSibling),tt=e,ie=!0,wt=null,t!==null&&(ct[ut++]=Bt,ct[ut++]=Ut,ct[ut++]=Jn,Bt=t.id,Ut=t.overflow,Jn=e),e=Du(e,r.children),e.flags|=4096,e)}function Lh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ac(t.return,e,n)}function ca(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ug(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Le(t,e,r.children,n),r=le.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Lh(t,n,e);else if(t.tag===19)Lh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(te(le,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&bo(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ca(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&bo(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ca(e,!0,n,null,i);break;case"together":ca(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function to(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Zn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(E(153));if(e.child!==null){for(t=e.child,n=wn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=wn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function nw(t,e,n){switch(e.tag){case 3:ag(e),Ur();break;case 5:Mm(e);break;case 1:Ge(e.type)&&yo(e);break;case 4:Nu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;te(wo,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(te(le,le.current&1),e.flags|=128,null):n&e.child.childLanes?cg(t,e,n):(te(le,le.current&1),t=qt(t,e,n),t!==null?t.sibling:null);te(le,le.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ug(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),te(le,le.current),r)break;return null;case 22:case 23:return e.lanes=0,og(t,e,n)}return qt(t,e,n)}var dg,gc,hg,fg;dg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gc=function(){};hg=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Vn(Pt.current);var i=null;switch(n){case"input":s=Fa(t,s),r=Fa(t,r),i=[];break;case"select":s=ce({},s,{value:void 0}),r=ce({},r,{value:void 0}),i=[];break;case"textarea":s=za(t,s),r=za(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=mo)}Wa(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Bs.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Bs.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&re("scroll",t),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};fg=function(t,e,n,r){n!==r&&(e.flags|=4)};function hs(t,e){if(!ie)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Pe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function rw(t,e,n){var r=e.pendingProps;switch(yu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pe(e),null;case 1:return Ge(e.type)&&go(),Pe(e),null;case 3:return r=e.stateNode,$r(),se(qe),se(Me),Eu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Bi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wt!==null&&(Nc(wt),wt=null))),gc(t,e),Pe(e),null;case 5:Su(e);var s=Vn(Js.current);if(n=e.type,t!==null&&e.stateNode!=null)hg(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(E(166));return Pe(e),null}if(t=Vn(Pt.current),Bi(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[At]=e,r[Ks]=i,t=(e.mode&1)!==0,n){case"dialog":re("cancel",r),re("close",r);break;case"iframe":case"object":case"embed":re("load",r);break;case"video":case"audio":for(s=0;s<bs.length;s++)re(bs[s],r);break;case"source":re("error",r);break;case"img":case"image":case"link":re("error",r),re("load",r);break;case"details":re("toggle",r);break;case"input":Qd(r,i),re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},re("invalid",r);break;case"textarea":Gd(r,i),re("invalid",r)}Wa(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Fi(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Fi(r.textContent,a,t),s=["children",""+a]):Bs.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&re("scroll",r)}switch(n){case"input":Ti(r),qd(r,i,!0);break;case"textarea":Ti(r),Kd(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=mo)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=zp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[At]=e,t[Ks]=r,dg(t,e,!1,!1),e.stateNode=t;e:{switch(o=Va(n,r),n){case"dialog":re("cancel",t),re("close",t),s=r;break;case"iframe":case"object":case"embed":re("load",t),s=r;break;case"video":case"audio":for(s=0;s<bs.length;s++)re(bs[s],t);s=r;break;case"source":re("error",t),s=r;break;case"img":case"image":case"link":re("error",t),re("load",t),s=r;break;case"details":re("toggle",t),s=r;break;case"input":Qd(t,r),s=Fa(t,r),re("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ce({},r,{value:void 0}),re("invalid",t);break;case"textarea":Gd(t,r),s=za(t,r),re("invalid",t);break;default:s=r}Wa(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?Vp(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&$p(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Us(t,c):typeof c=="number"&&Us(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Bs.hasOwnProperty(i)?c!=null&&i==="onScroll"&&re("scroll",t):c!=null&&nu(t,i,c,o))}switch(n){case"input":Ti(t),qd(t,r,!1);break;case"textarea":Ti(t),Kd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Sn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Tr(t,!!r.multiple,i,!1):r.defaultValue!=null&&Tr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=mo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pe(e),null;case 6:if(t&&e.stateNode!=null)fg(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(E(166));if(n=Vn(Js.current),Vn(Pt.current),Bi(e)){if(r=e.stateNode,n=e.memoizedProps,r[At]=e,(i=r.nodeValue!==n)&&(t=tt,t!==null))switch(t.tag){case 3:Fi(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fi(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[At]=e,e.stateNode=r}return Pe(e),null;case 13:if(se(le),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ie&&et!==null&&e.mode&1&&!(e.flags&128))Am(),Ur(),e.flags|=98560,i=!1;else if(i=Bi(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(E(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(E(317));i[At]=e}else Ur(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pe(e),i=!1}else wt!==null&&(Nc(wt),wt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||le.current&1?xe===0&&(xe=3):Fu())),e.updateQueue!==null&&(e.flags|=4),Pe(e),null);case 4:return $r(),gc(t,e),t===null&&qs(e.stateNode.containerInfo),Pe(e),null;case 10:return _u(e.type._context),Pe(e),null;case 17:return Ge(e.type)&&go(),Pe(e),null;case 19:if(se(le),i=e.memoizedState,i===null)return Pe(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)hs(i,!1);else{if(xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=bo(t),o!==null){for(e.flags|=128,hs(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return te(le,le.current&1|2),e.child}t=t.sibling}i.tail!==null&&fe()>Vr&&(e.flags|=128,r=!0,hs(i,!1),e.lanes=4194304)}else{if(!r)if(t=bo(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),hs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ie)return Pe(e),null}else 2*fe()-i.renderingStartTime>Vr&&n!==1073741824&&(e.flags|=128,r=!0,hs(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=fe(),e.sibling=null,n=le.current,te(le,r?n&1|2:n&1),e):(Pe(e),null);case 22:case 23:return Lu(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xe&1073741824&&(Pe(e),e.subtreeFlags&6&&(e.flags|=8192)):Pe(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function sw(t,e){switch(yu(e),e.tag){case 1:return Ge(e.type)&&go(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $r(),se(qe),se(Me),Eu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Su(e),null;case 13:if(se(le),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(E(340));Ur()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return se(le),null;case 4:return $r(),null;case 10:return _u(e.type._context),null;case 22:case 23:return Lu(),null;case 24:return null;default:return null}}var $i=!1,Oe=!1,iw=typeof WeakSet=="function"?WeakSet:Set,D=null;function Ir(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){de(t,e,r)}else n.current=null}function yc(t,e,n){try{n()}catch(r){de(t,e,r)}}var Fh=!1;function ow(t,e){if(ec=ho,t=vm(),mu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var g;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===t)break t;if(f===n&&++u===s&&(a=o),f===i&&++h===r&&(c=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tc={focusedElem:t,selectionRange:n},ho=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var p=x.memoizedProps,w=x.memoizedState,y=e.stateNode,m=y.getSnapshotBeforeUpdate(e.elementType===e.type?p:vt(e.type,p),w);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(C){de(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return x=Fh,Fh=!1,x}function Ts(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&yc(e,n,i)}s=s.next}while(s!==r)}}function al(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function pg(t){var e=t.alternate;e!==null&&(t.alternate=null,pg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[At],delete e[Ks],delete e[sc],delete e[$0],delete e[W0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function mg(t){return t.tag===5||t.tag===3||t.tag===4}function Bh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mo));else if(r!==4&&(t=t.child,t!==null))for(xc(t,e,n),t=t.sibling;t!==null;)xc(t,e,n),t=t.sibling}function wc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(wc(t,e,n),t=t.sibling;t!==null;)wc(t,e,n),t=t.sibling}var Ee=null,xt=!1;function nn(t,e,n){for(n=n.child;n!==null;)gg(t,e,n),n=n.sibling}function gg(t,e,n){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(el,n)}catch{}switch(n.tag){case 5:Oe||Ir(n,e);case 6:var r=Ee,s=xt;Ee=null,nn(t,e,n),Ee=r,xt=s,Ee!==null&&(xt?(t=Ee,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ee.removeChild(n.stateNode));break;case 18:Ee!==null&&(xt?(t=Ee,n=n.stateNode,t.nodeType===8?na(t.parentNode,n):t.nodeType===1&&na(t,n),Vs(t)):na(Ee,n.stateNode));break;case 4:r=Ee,s=xt,Ee=n.stateNode.containerInfo,xt=!0,nn(t,e,n),Ee=r,xt=s;break;case 0:case 11:case 14:case 15:if(!Oe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&yc(n,e,o),s=s.next}while(s!==r)}nn(t,e,n);break;case 1:if(!Oe&&(Ir(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){de(n,e,a)}nn(t,e,n);break;case 21:nn(t,e,n);break;case 22:n.mode&1?(Oe=(r=Oe)||n.memoizedState!==null,nn(t,e,n),Oe=r):nn(t,e,n);break;default:nn(t,e,n)}}function Uh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new iw),e.forEach(function(r){var s=mw.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function yt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ee=a.stateNode,xt=!1;break e;case 3:Ee=a.stateNode.containerInfo,xt=!0;break e;case 4:Ee=a.stateNode.containerInfo,xt=!0;break e}a=a.return}if(Ee===null)throw Error(E(160));gg(i,o,s),Ee=null,xt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){de(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yg(e,t),e=e.sibling}function yg(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yt(e,t),jt(t),r&4){try{Ts(3,t,t.return),al(3,t)}catch(p){de(t,t.return,p)}try{Ts(5,t,t.return)}catch(p){de(t,t.return,p)}}break;case 1:yt(e,t),jt(t),r&512&&n!==null&&Ir(n,n.return);break;case 5:if(yt(e,t),jt(t),r&512&&n!==null&&Ir(n,n.return),t.flags&32){var s=t.stateNode;try{Us(s,"")}catch(p){de(t,t.return,p)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Bp(s,i),Va(a,o);var u=Va(a,i);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?Vp(s,d):h==="dangerouslySetInnerHTML"?$p(s,d):h==="children"?Us(s,d):nu(s,h,d,u)}switch(a){case"input":Ba(s,i);break;case"textarea":Up(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Tr(s,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?Tr(s,!!i.multiple,i.defaultValue,!0):Tr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ks]=i}catch(p){de(t,t.return,p)}}break;case 6:if(yt(e,t),jt(t),r&4){if(t.stateNode===null)throw Error(E(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(p){de(t,t.return,p)}}break;case 3:if(yt(e,t),jt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Vs(e.containerInfo)}catch(p){de(t,t.return,p)}break;case 4:yt(e,t),jt(t);break;case 13:yt(e,t),jt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ou=fe())),r&4&&Uh(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Oe=(u=Oe)||h,yt(e,t),Oe=u):yt(e,t),jt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(D=t,h=t.child;h!==null;){for(d=D=h;D!==null;){switch(f=D,g=f.child,f.tag){case 0:case 11:case 14:case 15:Ts(4,f,f.return);break;case 1:Ir(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(p){de(r,n,p)}}break;case 5:Ir(f,f.return);break;case 22:if(f.memoizedState!==null){$h(d);continue}}g!==null?(g.return=f,D=g):$h(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Wp("display",o))}catch(p){de(t,t.return,p)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(p){de(t,t.return,p)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:yt(e,t),jt(t),r&4&&Uh(t);break;case 21:break;default:yt(e,t),jt(t)}}function jt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(mg(n)){var r=n;break e}n=n.return}throw Error(E(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Us(s,""),r.flags&=-33);var i=Bh(t);wc(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Bh(t);xc(t,a,o);break;default:throw Error(E(161))}}catch(c){de(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lw(t,e,n){D=t,vg(t)}function vg(t,e,n){for(var r=(t.mode&1)!==0;D!==null;){var s=D,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||$i;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Oe;a=$i;var u=Oe;if($i=o,(Oe=c)&&!u)for(D=s;D!==null;)o=D,c=o.child,o.tag===22&&o.memoizedState!==null?Wh(s):c!==null?(c.return=o,D=c):Wh(s);for(;i!==null;)D=i,vg(i),i=i.sibling;D=s,$i=a,Oe=u}zh(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,D=i):zh(t)}}function zh(t){for(;D!==null;){var e=D;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Oe||al(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Oe)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:vt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Sh(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Sh(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Vs(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}Oe||e.flags&512&&vc(e)}catch(f){de(e,e.return,f)}}if(e===t){D=null;break}if(n=e.sibling,n!==null){n.return=e.return,D=n;break}D=e.return}}function $h(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var n=e.sibling;if(n!==null){n.return=e.return,D=n;break}D=e.return}}function Wh(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{al(4,e)}catch(c){de(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){de(e,s,c)}}var i=e.return;try{vc(e)}catch(c){de(e,i,c)}break;case 5:var o=e.return;try{vc(e)}catch(c){de(e,o,c)}}}catch(c){de(e,e.return,c)}if(e===t){D=null;break}var a=e.sibling;if(a!==null){a.return=e.return,D=a;break}D=e.return}}var aw=Math.ceil,Eo=en.ReactCurrentDispatcher,Pu=en.ReactCurrentOwner,ft=en.ReactCurrentBatchConfig,q=0,be=null,ge=null,ke=0,Xe=0,kr=Pn(0),xe=0,ti=null,Zn=0,cl=0,Ru=0,As=null,Ve=null,Ou=0,Vr=1/0,Lt=null,Io=!1,_c=null,vn=null,Wi=!1,un=null,ko=0,Ds=0,Cc=null,no=-1,ro=0;function Be(){return q&6?fe():no!==-1?no:no=fe()}function xn(t){return t.mode&1?q&2&&ke!==0?ke&-ke:H0.transition!==null?(ro===0&&(ro=nm()),ro):(t=K,t!==0||(t=window.event,t=t===void 0?16:cm(t.type)),t):1}function Nt(t,e,n,r){if(50<Ds)throw Ds=0,Cc=null,Error(E(185));fi(t,n,r),(!(q&2)||t!==be)&&(t===be&&(!(q&2)&&(cl|=n),xe===4&&an(t,ke)),Ke(t,r),n===1&&q===0&&!(e.mode&1)&&(Vr=fe()+500,il&&Rn()))}function Ke(t,e){var n=t.callbackNode;Hx(t,e);var r=uo(t,t===be?ke:0);if(r===0)n!==null&&Xd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Xd(n),e===1)t.tag===0?V0(Vh.bind(null,t)):km(Vh.bind(null,t)),U0(function(){!(q&6)&&Rn()}),n=null;else{switch(rm(r)){case 1:n=lu;break;case 4:n=em;break;case 16:n=co;break;case 536870912:n=tm;break;default:n=co}n=Eg(n,xg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function xg(t,e){if(no=-1,ro=0,q&6)throw Error(E(327));var n=t.callbackNode;if(Or()&&t.callbackNode!==n)return null;var r=uo(t,t===be?ke:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=jo(t,r);else{e=r;var s=q;q|=2;var i=_g();(be!==t||ke!==e)&&(Lt=null,Vr=fe()+500,qn(t,e));do try{dw();break}catch(a){wg(t,a)}while(!0);wu(),Eo.current=i,q=s,ge!==null?e=0:(be=null,ke=0,e=xe)}if(e!==0){if(e===2&&(s=Ka(t),s!==0&&(r=s,e=bc(t,s))),e===1)throw n=ti,qn(t,0),an(t,r),Ke(t,fe()),n;if(e===6)an(t,r);else{if(s=t.current.alternate,!(r&30)&&!cw(s)&&(e=jo(t,r),e===2&&(i=Ka(t),i!==0&&(r=i,e=bc(t,i))),e===1))throw n=ti,qn(t,0),an(t,r),Ke(t,fe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(E(345));case 2:Bn(t,Ve,Lt);break;case 3:if(an(t,r),(r&130023424)===r&&(e=Ou+500-fe(),10<e)){if(uo(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Be(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=rc(Bn.bind(null,t,Ve,Lt),e);break}Bn(t,Ve,Lt);break;case 4:if(an(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-bt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*aw(r/1960))-r,10<r){t.timeoutHandle=rc(Bn.bind(null,t,Ve,Lt),r);break}Bn(t,Ve,Lt);break;case 5:Bn(t,Ve,Lt);break;default:throw Error(E(329))}}}return Ke(t,fe()),t.callbackNode===n?xg.bind(null,t):null}function bc(t,e){var n=As;return t.current.memoizedState.isDehydrated&&(qn(t,e).flags|=256),t=jo(t,e),t!==2&&(e=Ve,Ve=n,e!==null&&Nc(e)),t}function Nc(t){Ve===null?Ve=t:Ve.push.apply(Ve,t)}function cw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Et(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function an(t,e){for(e&=~Ru,e&=~cl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-bt(e),r=1<<n;t[n]=-1,e&=~r}}function Vh(t){if(q&6)throw Error(E(327));Or();var e=uo(t,0);if(!(e&1))return Ke(t,fe()),null;var n=jo(t,e);if(t.tag!==0&&n===2){var r=Ka(t);r!==0&&(e=r,n=bc(t,r))}if(n===1)throw n=ti,qn(t,0),an(t,e),Ke(t,fe()),n;if(n===6)throw Error(E(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Bn(t,Ve,Lt),Ke(t,fe()),null}function Mu(t,e){var n=q;q|=1;try{return t(e)}finally{q=n,q===0&&(Vr=fe()+500,il&&Rn())}}function er(t){un!==null&&un.tag===0&&!(q&6)&&Or();var e=q;q|=1;var n=ft.transition,r=K;try{if(ft.transition=null,K=1,t)return t()}finally{K=r,ft.transition=n,q=e,!(q&6)&&Rn()}}function Lu(){Xe=kr.current,se(kr)}function qn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,B0(n)),ge!==null)for(n=ge.return;n!==null;){var r=n;switch(yu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&go();break;case 3:$r(),se(qe),se(Me),Eu();break;case 5:Su(r);break;case 4:$r();break;case 13:se(le);break;case 19:se(le);break;case 10:_u(r.type._context);break;case 22:case 23:Lu()}n=n.return}if(be=t,ge=t=wn(t.current,null),ke=Xe=e,xe=0,ti=null,Ru=cl=Zn=0,Ve=As=null,Wn!==null){for(e=0;e<Wn.length;e++)if(n=Wn[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Wn=null}return t}function wg(t,e){do{var n=ge;try{if(wu(),Zi.current=So,No){for(var r=ae.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}No=!1}if(Xn=0,_e=ye=ae=null,js=!1,Xs=0,Pu.current=null,n===null||n.return===null){xe=1,ti=e,ge=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=ke,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=Ah(o);if(g!==null){g.flags&=-257,Dh(g,o,a,i,e),g.mode&1&&Th(i,u,e),e=g,c=u;var x=e.updateQueue;if(x===null){var p=new Set;p.add(c),e.updateQueue=p}else x.add(c);break e}else{if(!(e&1)){Th(i,u,e),Fu();break e}c=Error(E(426))}}else if(ie&&a.mode&1){var w=Ah(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Dh(w,o,a,i,e),vu(Wr(c,a));break e}}i=c=Wr(c,a),xe!==4&&(xe=2),As===null?As=[i]:As.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=rg(i,c,e);Nh(i,y);break e;case 1:a=c;var m=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(vn===null||!vn.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=sg(i,a,e);Nh(i,C);break e}}i=i.return}while(i!==null)}bg(n)}catch(b){e=b,ge===n&&n!==null&&(ge=n=n.return);continue}break}while(!0)}function _g(){var t=Eo.current;return Eo.current=So,t===null?So:t}function Fu(){(xe===0||xe===3||xe===2)&&(xe=4),be===null||!(Zn&268435455)&&!(cl&268435455)||an(be,ke)}function jo(t,e){var n=q;q|=2;var r=_g();(be!==t||ke!==e)&&(Lt=null,qn(t,e));do try{uw();break}catch(s){wg(t,s)}while(!0);if(wu(),q=n,Eo.current=r,ge!==null)throw Error(E(261));return be=null,ke=0,xe}function uw(){for(;ge!==null;)Cg(ge)}function dw(){for(;ge!==null&&!Mx();)Cg(ge)}function Cg(t){var e=Sg(t.alternate,t,Xe);t.memoizedProps=t.pendingProps,e===null?bg(t):ge=e,Pu.current=null}function bg(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=sw(n,e),n!==null){n.flags&=32767,ge=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xe=6,ge=null;return}}else if(n=rw(n,e,Xe),n!==null){ge=n;return}if(e=e.sibling,e!==null){ge=e;return}ge=e=t}while(e!==null);xe===0&&(xe=5)}function Bn(t,e,n){var r=K,s=ft.transition;try{ft.transition=null,K=1,hw(t,e,n,r)}finally{ft.transition=s,K=r}return null}function hw(t,e,n,r){do Or();while(un!==null);if(q&6)throw Error(E(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(E(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Qx(t,i),t===be&&(ge=be=null,ke=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wi||(Wi=!0,Eg(co,function(){return Or(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ft.transition,ft.transition=null;var o=K;K=1;var a=q;q|=4,Pu.current=null,ow(t,n),yg(n,t),D0(tc),ho=!!ec,tc=ec=null,t.current=n,lw(n),Lx(),q=a,K=o,ft.transition=i}else t.current=n;if(Wi&&(Wi=!1,un=t,ko=s),i=t.pendingLanes,i===0&&(vn=null),Ux(n.stateNode),Ke(t,fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Io)throw Io=!1,t=_c,_c=null,t;return ko&1&&t.tag!==0&&Or(),i=t.pendingLanes,i&1?t===Cc?Ds++:(Ds=0,Cc=t):Ds=0,Rn(),null}function Or(){if(un!==null){var t=rm(ko),e=ft.transition,n=K;try{if(ft.transition=null,K=16>t?16:t,un===null)var r=!1;else{if(t=un,un=null,ko=0,q&6)throw Error(E(331));var s=q;for(q|=4,D=t.current;D!==null;){var i=D,o=i.child;if(D.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(D=u;D!==null;){var h=D;switch(h.tag){case 0:case 11:case 15:Ts(8,h,i)}var d=h.child;if(d!==null)d.return=h,D=d;else for(;D!==null;){h=D;var f=h.sibling,g=h.return;if(pg(h),h===u){D=null;break}if(f!==null){f.return=g,D=f;break}D=g}}}var x=i.alternate;if(x!==null){var p=x.child;if(p!==null){x.child=null;do{var w=p.sibling;p.sibling=null,p=w}while(p!==null)}}D=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,D=o;else e:for(;D!==null;){if(i=D,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ts(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,D=y;break e}D=i.return}}var m=t.current;for(D=m;D!==null;){o=D;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,D=v;else e:for(o=m;D!==null;){if(a=D,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:al(9,a)}}catch(b){de(a,a.return,b)}if(a===o){D=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,D=C;break e}D=a.return}}if(q=s,Rn(),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(el,t)}catch{}r=!0}return r}finally{K=n,ft.transition=e}}return!1}function Hh(t,e,n){e=Wr(n,e),e=rg(t,e,1),t=yn(t,e,1),e=Be(),t!==null&&(fi(t,1,e),Ke(t,e))}function de(t,e,n){if(t.tag===3)Hh(t,t,n);else for(;e!==null;){if(e.tag===3){Hh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vn===null||!vn.has(r))){t=Wr(n,t),t=sg(e,t,1),e=yn(e,t,1),t=Be(),e!==null&&(fi(e,1,t),Ke(e,t));break}}e=e.return}}function fw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Be(),t.pingedLanes|=t.suspendedLanes&n,be===t&&(ke&n)===n&&(xe===4||xe===3&&(ke&130023424)===ke&&500>fe()-Ou?qn(t,0):Ru|=n),Ke(t,e)}function Ng(t,e){e===0&&(t.mode&1?(e=Pi,Pi<<=1,!(Pi&130023424)&&(Pi=4194304)):e=1);var n=Be();t=Qt(t,e),t!==null&&(fi(t,e,n),Ke(t,n))}function pw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ng(t,n)}function mw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(e),Ng(t,n)}var Sg;Sg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qe.current)He=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return He=!1,nw(t,e,n);He=!!(t.flags&131072)}else He=!1,ie&&e.flags&1048576&&jm(e,xo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;to(t,e),t=e.pendingProps;var s=Br(e,Me.current);Rr(e,n),s=ku(null,e,r,t,s,n);var i=ju();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ge(r)?(i=!0,yo(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,bu(e),s.updater=ll,e.stateNode=s,s._reactInternals=e,uc(e,r,t,n),e=fc(null,e,r,!0,i,n)):(e.tag=0,ie&&i&&gu(e),Le(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(to(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=yw(r),t=vt(r,t),s){case 0:e=hc(null,e,r,t,n);break e;case 1:e=Oh(null,e,r,t,n);break e;case 11:e=Ph(null,e,r,t,n);break e;case 14:e=Rh(null,e,r,vt(r.type,t),n);break e}throw Error(E(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vt(r,s),hc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vt(r,s),Oh(t,e,r,s,n);case 3:e:{if(ag(e),t===null)throw Error(E(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Om(t,e),Co(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Wr(Error(E(423)),e),e=Mh(t,e,r,n,s);break e}else if(r!==s){s=Wr(Error(E(424)),e),e=Mh(t,e,r,n,s);break e}else for(et=gn(e.stateNode.containerInfo.firstChild),tt=e,ie=!0,wt=null,n=Pm(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ur(),r===s){e=qt(t,e,n);break e}Le(t,e,r,n)}e=e.child}return e;case 5:return Mm(e),t===null&&lc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,nc(r,s)?o=null:i!==null&&nc(r,i)&&(e.flags|=32),lg(t,e),Le(t,e,o,n),e.child;case 6:return t===null&&lc(e),null;case 13:return cg(t,e,n);case 4:return Nu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=zr(e,null,r,n):Le(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vt(r,s),Ph(t,e,r,s,n);case 7:return Le(t,e,e.pendingProps,n),e.child;case 8:return Le(t,e,e.pendingProps.children,n),e.child;case 12:return Le(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,te(wo,r._currentValue),r._currentValue=o,i!==null)if(Et(i.value,o)){if(i.children===s.children&&!qe.current){e=qt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=$t(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),ac(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(E(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ac(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Le(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Rr(e,n),s=pt(s),r=r(s),e.flags|=1,Le(t,e,r,n),e.child;case 14:return r=e.type,s=vt(r,e.pendingProps),s=vt(r.type,s),Rh(t,e,r,s,n);case 15:return ig(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vt(r,s),to(t,e),e.tag=1,Ge(r)?(t=!0,yo(e)):t=!1,Rr(e,n),ng(e,r,s),uc(e,r,s,n),fc(null,e,r,!0,t,n);case 19:return ug(t,e,n);case 22:return og(t,e,n)}throw Error(E(156,e.tag))};function Eg(t,e){return Zp(t,e)}function gw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dt(t,e,n,r){return new gw(t,e,n,r)}function Bu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yw(t){if(typeof t=="function")return Bu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===su)return 11;if(t===iu)return 14}return 2}function wn(t,e){var n=t.alternate;return n===null?(n=dt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function so(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Bu(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case vr:return Gn(n.children,s,i,e);case ru:o=8,s|=8;break;case Ra:return t=dt(12,n,e,s|2),t.elementType=Ra,t.lanes=i,t;case Oa:return t=dt(13,n,e,s),t.elementType=Oa,t.lanes=i,t;case Ma:return t=dt(19,n,e,s),t.elementType=Ma,t.lanes=i,t;case Mp:return ul(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Rp:o=10;break e;case Op:o=9;break e;case su:o=11;break e;case iu:o=14;break e;case sn:o=16,r=null;break e}throw Error(E(130,t==null?t:typeof t,""))}return e=dt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Gn(t,e,n,r){return t=dt(7,t,r,e),t.lanes=n,t}function ul(t,e,n,r){return t=dt(22,t,r,e),t.elementType=Mp,t.lanes=n,t.stateNode={isHidden:!1},t}function ua(t,e,n){return t=dt(6,t,null,e),t.lanes=n,t}function da(t,e,n){return e=dt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vw(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hl(0),this.expirationTimes=Hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hl(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uu(t,e,n,r,s,i,o,a,c){return t=new vw(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=dt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bu(i),t}function xw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Ig(t){if(!t)return En;t=t._reactInternals;e:{if(ar(t)!==t||t.tag!==1)throw Error(E(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ge(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(t.tag===1){var n=t.type;if(Ge(n))return Im(t,n,e)}return e}function kg(t,e,n,r,s,i,o,a,c){return t=Uu(n,r,!0,t,s,i,o,a,c),t.context=Ig(null),n=t.current,r=Be(),s=xn(n),i=$t(r,s),i.callback=e??null,yn(n,i,s),t.current.lanes=s,fi(t,s,r),Ke(t,r),t}function dl(t,e,n,r){var s=e.current,i=Be(),o=xn(s);return n=Ig(n),e.context===null?e.context=n:e.pendingContext=n,e=$t(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=yn(s,e,o),t!==null&&(Nt(t,s,o,i),Xi(t,s,o)),o}function To(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zu(t,e){Qh(t,e),(t=t.alternate)&&Qh(t,e)}function ww(){return null}var jg=typeof reportError=="function"?reportError:function(t){console.error(t)};function $u(t){this._internalRoot=t}hl.prototype.render=$u.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(E(409));dl(t,e,null,null)};hl.prototype.unmount=$u.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;er(function(){dl(null,t,null,null)}),e[Ht]=null}};function hl(t){this._internalRoot=t}hl.prototype.unstable_scheduleHydration=function(t){if(t){var e=om();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ln.length&&e!==0&&e<ln[n].priority;n++);ln.splice(n,0,t),n===0&&am(t)}};function Wu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qh(){}function _w(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=To(o);i.call(u)}}var o=kg(e,r,t,0,null,!1,!1,"",qh);return t._reactRootContainer=o,t[Ht]=o.current,qs(t.nodeType===8?t.parentNode:t),er(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=To(c);a.call(u)}}var c=Uu(t,0,!1,null,null,!1,!1,"",qh);return t._reactRootContainer=c,t[Ht]=c.current,qs(t.nodeType===8?t.parentNode:t),er(function(){dl(e,c,n,r)}),c}function pl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=To(o);a.call(c)}}dl(e,o,t,s)}else o=_w(n,e,t,s,r);return To(o)}sm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Cs(e.pendingLanes);n!==0&&(au(e,n|1),Ke(e,fe()),!(q&6)&&(Vr=fe()+500,Rn()))}break;case 13:er(function(){var r=Qt(t,1);if(r!==null){var s=Be();Nt(r,t,1,s)}}),zu(t,1)}};cu=function(t){if(t.tag===13){var e=Qt(t,134217728);if(e!==null){var n=Be();Nt(e,t,134217728,n)}zu(t,134217728)}};im=function(t){if(t.tag===13){var e=xn(t),n=Qt(t,e);if(n!==null){var r=Be();Nt(n,t,e,r)}zu(t,e)}};om=function(){return K};lm=function(t,e){var n=K;try{return K=t,e()}finally{K=n}};Qa=function(t,e,n){switch(e){case"input":if(Ba(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=sl(r);if(!s)throw Error(E(90));Fp(r),Ba(r,s)}}}break;case"textarea":Up(t,n);break;case"select":e=n.value,e!=null&&Tr(t,!!n.multiple,e,!1)}};qp=Mu;Gp=er;var Cw={usingClientEntryPoint:!1,Events:[mi,Cr,sl,Hp,Qp,Mu]},fs={findFiberByHostInstance:$n,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bw={bundleType:fs.bundleType,version:fs.version,rendererPackageName:fs.rendererPackageName,rendererConfig:fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:en.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Jp(t),t===null?null:t.stateNode},findFiberByHostInstance:fs.findFiberByHostInstance||ww,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vi.isDisabled&&Vi.supportsFiber)try{el=Vi.inject(bw),Dt=Vi}catch{}}it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cw;it.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wu(e))throw Error(E(200));return xw(t,e,null,n)};it.createRoot=function(t,e){if(!Wu(t))throw Error(E(299));var n=!1,r="",s=jg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Uu(t,1,!1,null,null,n,!1,r,s),t[Ht]=e.current,qs(t.nodeType===8?t.parentNode:t),new $u(e)};it.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(E(188)):(t=Object.keys(t).join(","),Error(E(268,t)));return t=Jp(e),t=t===null?null:t.stateNode,t};it.flushSync=function(t){return er(t)};it.hydrate=function(t,e,n){if(!fl(e))throw Error(E(200));return pl(null,t,e,!0,n)};it.hydrateRoot=function(t,e,n){if(!Wu(t))throw Error(E(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=jg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=kg(e,null,t,1,n??null,s,!1,i,o),t[Ht]=e.current,qs(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new hl(e)};it.render=function(t,e,n){if(!fl(e))throw Error(E(200));return pl(null,t,e,!1,n)};it.unmountComponentAtNode=function(t){if(!fl(t))throw Error(E(40));return t._reactRootContainer?(er(function(){pl(null,null,t,!1,function(){t._reactRootContainer=null,t[Ht]=null})}),!0):!1};it.unstable_batchedUpdates=Mu;it.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!fl(n))throw Error(E(200));if(t==null||t._reactInternals===void 0)throw Error(E(38));return pl(t,e,n,!1,r)};it.version="18.3.1-next-f1338f8080-20240426";function Tg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Tg)}catch(t){console.error(t)}}Tg(),Tp.exports=it;var Nw=Tp.exports,Gh=Nw;Da.createRoot=Gh.createRoot,Da.hydrateRoot=Gh.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ao(){return Ao=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ao.apply(this,arguments)}var dn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(dn||(dn={}));const Kh="popstate";function Sw(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:c=""}=yi(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Sc("",{pathname:o,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");a=u===-1?c:c.slice(0,u)}return a+"#"+(typeof i=="string"?i:Ag(i))}function r(s,i){Vu(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return Iw(e,n,r,t)}function Je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Vu(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ew(){return Math.random().toString(36).substr(2,8)}function Yh(t,e){return{usr:t.state,key:t.key,idx:e}}function Sc(t,e,n,r){return n===void 0&&(n=null),Ao({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?yi(e):e,{state:n,key:e&&e.key||r||Ew()})}function Ag(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function yi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Iw(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=dn.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(Ao({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=dn.Pop;let w=h(),y=w==null?null:w-u;u=w,c&&c({action:a,location:p.location,delta:y})}function f(w,y){a=dn.Push;let m=Sc(p.location,w,y);n&&n(m,w),u=h()+1;let v=Yh(m,u),C=p.createHref(m);try{o.pushState(v,"",C)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;s.location.assign(C)}i&&c&&c({action:a,location:p.location,delta:1})}function g(w,y){a=dn.Replace;let m=Sc(p.location,w,y);n&&n(m,w),u=h();let v=Yh(m,u),C=p.createHref(m);o.replaceState(v,"",C),i&&c&&c({action:a,location:p.location,delta:0})}function x(w){let y=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof w=="string"?w:Ag(w);return m=m.replace(/ $/,"%20"),Je(y,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,y)}let p={get action(){return a},get location(){return t(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Kh,d),c=w,()=>{s.removeEventListener(Kh,d),c=null}},createHref(w){return e(s,w)},createURL:x,encodeLocation(w){let y=x(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:g,go(w){return o.go(w)}};return p}var Jh;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Jh||(Jh={}));function kw(t,e,n){return n===void 0&&(n="/"),jw(t,e,n,!1)}function jw(t,e,n,r){let s=typeof e=="string"?yi(e):e,i=Rg(s.pathname||"/",n);if(i==null)return null;let o=Dg(t);Tw(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=zw(i);a=Bw(o[c],u,r)}return a}function Dg(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Je(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Mr([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(Je(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Dg(i.children,e,h,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:Lw(u,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of Pg(i.path))s(i,o,c)}),e}function Pg(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Pg(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function Tw(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Fw(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Aw=/^:[\w-]+$/,Dw=3,Pw=2,Rw=1,Ow=10,Mw=-2,Xh=t=>t==="*";function Lw(t,e){let n=t.split("/"),r=n.length;return n.some(Xh)&&(r+=Mw),e&&(r+=Pw),n.filter(s=>!Xh(s)).reduce((s,i)=>s+(Aw.test(i)?Dw:i===""?Rw:Ow),r)}function Fw(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Bw(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",d=Zh({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),f=c.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=Zh({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Mr([i,d.pathname]),pathnameBase:$w(Mr([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=Mr([i,d.pathnameBase]))}return o}function Zh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Uw(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,h,d)=>{let{paramName:f,isOptional:g}=h;if(f==="*"){let p=a[d]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const x=a[d];return g&&!x?u[f]=void 0:u[f]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function Uw(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Vu(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function zw(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vu(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Rg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Mr=t=>t.join("/").replace(/\/\/+/g,"/"),$w=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function Ww(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Og=["post","put","patch","delete"];new Set(Og);const Vw=["get",...Og];new Set(Vw);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Do(){return Do=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Do.apply(this,arguments)}const Hw=_.createContext(null),Qw=_.createContext(null),Mg=_.createContext(null),ml=_.createContext(null),gl=_.createContext({outlet:null,matches:[],isDataRoute:!1}),Lg=_.createContext(null);function Hu(){return _.useContext(ml)!=null}function qw(){return Hu()||Je(!1),_.useContext(ml).location}function Gw(t,e){return Kw(t,e)}function Kw(t,e,n,r){Hu()||Je(!1);let{navigator:s}=_.useContext(Mg),{matches:i}=_.useContext(gl),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=qw(),h;if(e){var d;let w=typeof e=="string"?yi(e):e;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||Je(!1),h=w}else h=u;let f=h.pathname||"/",g=f;if(c!=="/"){let w=c.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=kw(t,{pathname:g}),p=e_(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Mr([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Mr([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&p?_.createElement(ml.Provider,{value:{location:Do({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:dn.Pop}},p):p}function Yw(){let t=s_(),e=Ww(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:s},n):null,null)}const Jw=_.createElement(Yw,null);class Xw extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(gl.Provider,{value:this.props.routeContext},_.createElement(Lg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Zw(t){let{routeContext:e,match:n,children:r}=t,s=_.useContext(Hw);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(gl.Provider,{value:e},r)}function e_(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Je(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:g}=n,x=d.route.loader&&f[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||x){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let g,x=!1,p=null,w=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,p=d.route.errorElement||Jw,c&&(u<0&&f===0?(x=!0,w=null):u===f&&(x=!0,w=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),m=()=>{let v;return g?v=p:x?v=w:d.route.Component?v=_.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=h,_.createElement(Zw,{match:d,routeContext:{outlet:h,matches:y,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?_.createElement(Xw,{location:n.location,revalidation:n.revalidation,component:p,error:g,children:m(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):m()},null)}var Ec=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ec||{});function t_(t){let e=_.useContext(Qw);return e||Je(!1),e}function n_(t){let e=_.useContext(gl);return e||Je(!1),e}function r_(t){let e=n_(),n=e.matches[e.matches.length-1];return n.route.id||Je(!1),n.route.id}function s_(){var t;let e=_.useContext(Lg),n=t_(Ec.UseRouteError),r=r_(Ec.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}const ef={};function i_(t,e){ef[e]||(ef[e]=!0,console.warn(e))}const tf=(t,e,n)=>i_(t,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function o_(t,e){t!=null&&t.v7_startTransition||tf("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&!e&&tf("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function Re(t){Je(!1)}function l_(t){let{basename:e="/",children:n=null,location:r,navigationType:s=dn.Pop,navigator:i,static:o=!1,future:a}=t;Hu()&&Je(!1);let c=e.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:c,navigator:i,static:o,future:Do({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=yi(r));let{pathname:h="/",search:d="",hash:f="",state:g=null,key:x="default"}=r,p=_.useMemo(()=>{let w=Rg(h,c);return w==null?null:{location:{pathname:w,search:d,hash:f,state:g,key:x},navigationType:s}},[c,h,d,f,g,x,s]);return p==null?null:_.createElement(Mg.Provider,{value:u},_.createElement(ml.Provider,{children:n,value:p}))}function a_(t){let{children:e,location:n}=t;return Gw(Ic(e),n)}new Promise(()=>{});function Ic(t,e){e===void 0&&(e=[]);let n=[];return _.Children.forEach(t,(r,s)=>{if(!_.isValidElement(r))return;let i=[...e,s];if(r.type===_.Fragment){n.push.apply(n,Ic(r.props.children,i));return}r.type!==Re&&Je(!1),!r.props.index||!r.props.children||Je(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ic(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const c_="6";try{window.__reactRouterVersion=c_}catch{}const u_="startTransition",nf=fx[u_];function d_(t){let{basename:e,children:n,future:r,window:s}=t,i=_.useRef();i.current==null&&(i.current=Sw({window:s,v5Compat:!0}));let o=i.current,[a,c]=_.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=_.useCallback(d=>{u&&nf?nf(()=>c(d)):c(d)},[c,u]);return _.useLayoutEffect(()=>o.listen(h),[o,h]),_.useEffect(()=>o_(r),[r]),_.createElement(l_,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var rf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(rf||(rf={}));var sf;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(sf||(sf={}));const ps=""+new URL("bubble-Dy97b3Cx.png",import.meta.url).href,ms=""+new URL("Pencil-shUlLtKB.png",import.meta.url).href,Fg=""+new URL("select-DKsCgP1g.png",import.meta.url).href,J=({items:t,onSelect:e,style:n,columns:r,all:s,ICON:i,name:o})=>{const[a,c]=_.useState(!1),[u,h]=_.useState(""),[d,f]=_.useState(""),[g,x]=_.useState(""),p=b=>{b.preventDefault(),c(!0)},w=(b,S)=>{b.stopPropagation(),b.preventDefault(),e(s?S:S.shortForm||S.name||S.Name),c(!1)},y=b=>{b.stopPropagation(),b.preventDefault(),c(!1),h(""),f(""),x("")},m=()=>{f(""),x("")},v=b=>{const[S,k,N]=b.split("/");return new Date(`${N}-${k}-${S}`)},C=t.filter(b=>{const S=r.some(k=>String(b[k.key]||"").toLowerCase().includes(u.toLowerCase()));if(o==="invoiceList"&&d&&g){const k=v(b.date);if(isNaN(k))return!1;const N=new Date(d),T=new Date(g),j=k>=N&&k<=T;return S&&j}return S});return l.jsxs("div",{className:`absolute ${n.top} ]`,children:[l.jsx("button",{onClick:p,type:"button",children:l.jsx("img",{src:i||Fg,className:`${i?"w-6 h-6":"w-4 h-4"}`,alt:"Select"})}),a&&l.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex justify-center items-center z-50",onClick:y,children:l.jsxs("div",{className:"bg-background  rounded-lg shadow-lg p-6 w-[50vw] max-w-full max-h-[80vh] overflow-auto",onClick:b=>b.stopPropagation(),children:[l.jsx("h2",{className:"text-lg font-semibold mb-4 text-center text-blue-800 italic ",children:"Select an Item"}),l.jsx("input",{type:"text",value:u,onChange:b=>h(b.target.value),className:"border py-1 px-2 mb-4 w-full",placeholder:"Search"}),o==="invoiceList"&&l.jsxs("div",{className:"mb-4 flex items-center",children:[l.jsxs("label",{className:"mr-2",children:["From:",l.jsx("input",{type:"date",value:d,onChange:b=>f(b.target.value),className:"border p-2 mx-2"})]}),l.jsxs("label",{children:["To:",l.jsx("input",{type:"date",value:g,onChange:b=>x(b.target.value),className:"border p-2 mx-2"})]}),l.jsx("button",{onClick:m,type:"button",className:"ml-4 px-4 py-2 bg-blue-500 text-white rounded",children:"Reset"})]}),l.jsxs("table",{className:"w-full table-auto ",children:[l.jsx("thead",{className:"bg-blue-800 text-white text-sm ",children:l.jsx("tr",{className:"",children:r.map(b=>l.jsx("th",{className:"px-4 font-medium border",children:b.label},b.key))})}),l.jsx("tbody",{className:"bg-blue-100 ",children:C.length>0?C.map(b=>l.jsx("tr",{className:"cursor-pointer  hover:bg-orange-300",onClick:S=>w(S,b),children:r.map(S=>l.jsx("td",{className:"px-4 py-1 border",children:b[S.key]||""},S.key))},b.id||b.shortForm)):l.jsx("tr",{children:l.jsx("td",{colSpan:r.length,className:"px-4 py-2 text-center",children:"No results found"})})})]}),l.jsx("button",{onClick:y,type:"button",className:"mt-4 px-4 py-2 bg-red-500 text-white rounded",children:"Close"})]})})]})};var of={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I=function(t,e){if(!t)throw Zr(e)},Zr=function(t){return new Error("Firebase Database ("+Bg.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},h_=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Qu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let f=(a&15)<<2|u>>6,g=u&63;c||(g=64,o||(f=64)),r.push(n[h],n[d],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ug(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):h_(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||d==null)throw new f_;const f=i<<2|a>>4;if(r.push(f),u!==64){const g=a<<4&240|u>>2;if(r.push(g),d!==64){const x=u<<6&192|d;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class f_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zg=function(t){const e=Ug(t);return Qu.encodeByteArray(e,!0)},Po=function(t){return zg(t).replace(/\./g,"")},kc=function(t){try{return Qu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(t){return $g(void 0,t)}function $g(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!m_(n)||(t[n]=$g(t[n],e[n]));return t}function m_(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_=()=>g_().__FIREBASE_DEFAULTS__,v_=()=>{if(typeof process>"u"||typeof of>"u")return;const t=of.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},x_=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&kc(t[1]);return e&&JSON.parse(e)},Wg=()=>{try{return y_()||v_()||x_()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},w_=t=>{var e,n;return(n=(e=Wg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},__=t=>{const e=w_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Vg=()=>{var t;return(t=Wg())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Po(JSON.stringify(n)),Po(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Hg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(b_())}function N_(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function S_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Qg(){return Bg.NODE_ADMIN===!0}function qg(){try{return typeof indexedDB=="object"}catch{return!1}}function Gg(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function E_(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="FirebaseError";class cr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=I_,Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yl.prototype.create)}}class yl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?k_(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new cr(s,a,r)}}function k_(t,e){return t.replace(j_,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const j_=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(t){return JSON.parse(t)}function ve(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=ni(kc(i[0])||""),n=ni(kc(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},T_=function(t){const e=Kg(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},A_=function(t){const e=Kg(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function tr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function lf(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ro(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function Oo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(af(i)&&af(o)){if(!Oo(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function af(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,h;for(let d=0;d<80;d++){d<40?d<20?(u=a^i&(o^a),h=1518500249):(u=i^o^a,h=1859775393):d<60?(u=i&o|a&(i|o),h=2400959708):(u=i^o^a,h=3395469782);const f=(s<<5|s>>>27)+u+c+h+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function vl(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,I(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},xl=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_=1e3,M_=2,L_=4*60*60*1e3,F_=.5;function cf(t,e=O_,n=M_){const r=e*Math.pow(n,t),s=Math.round(F_*r*(Math.random()-.5)*2);return Math.min(L_,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t){return t&&t._delegate?t._delegate:t}class Gt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new es;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(z_(e))try{this.getOrInitializeService({instanceIdentifier:Un})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Un){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Un){return this.instances.has(e)}getOptions(e=Un){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:U_(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Un){return this.component?this.component.multipleInstances?e:Un:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function U_(t){return t===Un?void 0:t}function z_(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new B_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Z||(Z={}));const W_={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},V_=Z.INFO,H_={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},Q_=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=H_[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qu{constructor(e){this.name=e,this._logLevel=V_,this._logHandler=Q_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?W_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}}const q_=(t,e)=>e.some(n=>t instanceof n);let uf,df;function G_(){return uf||(uf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function K_(){return df||(df=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yg=new WeakMap,jc=new WeakMap,Jg=new WeakMap,ha=new WeakMap,Gu=new WeakMap;function Y_(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(_n(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Yg.set(n,t)}).catch(()=>{}),Gu.set(e,t),e}function J_(t){if(jc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});jc.set(t,e)}let Tc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Jg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _n(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function X_(t){Tc=t(Tc)}function Z_(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(fa(this),e,...n);return Jg.set(r,e.sort?e.sort():[e]),_n(r)}:K_().includes(t)?function(...e){return t.apply(fa(this),e),_n(Yg.get(this))}:function(...e){return _n(t.apply(fa(this),e))}}function eC(t){return typeof t=="function"?Z_(t):(t instanceof IDBTransaction&&J_(t),q_(t,G_())?new Proxy(t,Tc):t)}function _n(t){if(t instanceof IDBRequest)return Y_(t);if(ha.has(t))return ha.get(t);const e=eC(t);return e!==t&&(ha.set(t,e),Gu.set(e,t)),e}const fa=t=>Gu.get(t);function Xg(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=_n(o);return r&&o.addEventListener("upgradeneeded",c=>{r(_n(o.result),c.oldVersion,c.newVersion,_n(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const tC=["get","getKey","getAll","getAllKeys","count"],nC=["put","add","delete","clear"],pa=new Map;function hf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pa.get(e))return pa.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=nC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||tC.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return pa.set(e,i),i}X_(t=>({...t,get:(e,n,r)=>hf(e,n)||t.get(e,n,r),has:(e,n)=>!!hf(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function sC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ac="@firebase/app",ff="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt=new qu("@firebase/app"),iC="@firebase/app-compat",oC="@firebase/analytics-compat",lC="@firebase/analytics",aC="@firebase/app-check-compat",cC="@firebase/app-check",uC="@firebase/auth",dC="@firebase/auth-compat",hC="@firebase/database",fC="@firebase/data-connect",pC="@firebase/database-compat",mC="@firebase/functions",gC="@firebase/functions-compat",yC="@firebase/installations",vC="@firebase/installations-compat",xC="@firebase/messaging",wC="@firebase/messaging-compat",_C="@firebase/performance",CC="@firebase/performance-compat",bC="@firebase/remote-config",NC="@firebase/remote-config-compat",SC="@firebase/storage",EC="@firebase/storage-compat",IC="@firebase/firestore",kC="@firebase/vertexai-preview",jC="@firebase/firestore-compat",TC="firebase",AC="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc="[DEFAULT]",DC={[Ac]:"fire-core",[iC]:"fire-core-compat",[lC]:"fire-analytics",[oC]:"fire-analytics-compat",[cC]:"fire-app-check",[aC]:"fire-app-check-compat",[uC]:"fire-auth",[dC]:"fire-auth-compat",[hC]:"fire-rtdb",[fC]:"fire-data-connect",[pC]:"fire-rtdb-compat",[mC]:"fire-fn",[gC]:"fire-fn-compat",[yC]:"fire-iid",[vC]:"fire-iid-compat",[xC]:"fire-fcm",[wC]:"fire-fcm-compat",[_C]:"fire-perf",[CC]:"fire-perf-compat",[bC]:"fire-rc",[NC]:"fire-rc-compat",[SC]:"fire-gcs",[EC]:"fire-gcs-compat",[IC]:"fire-fst",[jC]:"fire-fst-compat",[kC]:"fire-vertex","fire-js":"fire-js",[TC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=new Map,PC=new Map,Pc=new Map;function pf(t,e){try{t.container.addComponent(e)}catch(n){Kt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function In(t){const e=t.name;if(Pc.has(e))return Kt.debug(`There were multiple attempts to register component ${e}.`),!1;Pc.set(e,t);for(const n of Mo.values())pf(n,t);for(const n of PC.values())pf(n,t);return!0}function vi(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cn=new yl("app","Firebase",RC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=AC;function Zg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Dc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Cn.create("bad-app-name",{appName:String(s)});if(n||(n=Vg()),!n)throw Cn.create("no-options");const i=Mo.get(s);if(i){if(Oo(n,i.options)&&Oo(r,i.config))return i;throw Cn.create("duplicate-app",{appName:s})}const o=new $_(s);for(const c of Pc.values())o.addComponent(c);const a=new OC(n,r,o);return Mo.set(s,a),a}function ey(t=Dc){const e=Mo.get(t);if(!e&&t===Dc&&Vg())return Zg();if(!e)throw Cn.create("no-app",{appName:t});return e}function Rt(t,e,n){var r;let s=(r=DC[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kt.warn(a.join(" "));return}In(new Gt(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="firebase-heartbeat-database",FC=1,ri="firebase-heartbeat-store";let ma=null;function ty(){return ma||(ma=Xg(LC,FC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ri)}catch(n){console.warn(n)}}}}).catch(t=>{throw Cn.create("idb-open",{originalErrorMessage:t.message})})),ma}async function BC(t){try{const n=(await ty()).transaction(ri),r=await n.objectStore(ri).get(ny(t));return await n.done,r}catch(e){if(e instanceof cr)Kt.warn(e.message);else{const n=Cn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kt.warn(n.message)}}}async function mf(t,e){try{const r=(await ty()).transaction(ri,"readwrite");await r.objectStore(ri).put(e,ny(t)),await r.done}catch(n){if(n instanceof cr)Kt.warn(n.message);else{const r=Cn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Kt.warn(r.message)}}}function ny(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=1024,zC=30*24*60*60*1e3;class $C{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new VC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=gf();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=zC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Kt.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=gf(),{heartbeatsToSend:r,unsentEntries:s}=WC(this._heartbeatsCache.heartbeats),i=Po(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Kt.warn(n),""}}}function gf(){return new Date().toISOString().substring(0,10)}function WC(t,e=UC){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),yf(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),yf(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class VC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qg()?Gg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await BC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return mf(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return mf(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function yf(t){return Po(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(t){In(new Gt("platform-logger",e=>new rC(e),"PRIVATE")),In(new Gt("heartbeat",e=>new $C(e),"PRIVATE")),Rt(Ac,ff,t),Rt(Ac,ff,"esm2017"),Rt("fire-js","")}HC("");var vf={};const xf="@firebase/database",wf="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ry="";function QC(t){ry=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ve(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:ni(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return It(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new qC(e)}}catch{}return new GC},Hn=sy("localStorage"),KC=sy("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=new qu("@firebase/database"),iy=function(){let t=1;return function(){return t++}}(),oy=function(t){const e=R_(t),n=new P_;n.update(e);const r=n.digest();return Qu.encodeByteArray(r)},xi=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=xi.apply(null,r):typeof r=="object"?e+=ve(r):e+=r,e+=" "}return e};let Ps=null,_f=!0;const YC=function(t,e){I(!e,"Can't turn on custom loggers persistently."),Lr.logLevel=Z.VERBOSE,Ps=Lr.log.bind(Lr)},Ie=function(...t){if(_f===!0&&(_f=!1,Ps===null&&KC.get("logging_enabled")===!0&&YC()),Ps){const e=xi.apply(null,t);Ps(e)}},wi=function(t){return function(...e){Ie(t,...e)}},Rc=function(...t){const e="FIREBASE INTERNAL ERROR: "+xi(...t);Lr.error(e)},Yt=function(...t){const e=`FIREBASE FATAL ERROR: ${xi(...t)}`;throw Lr.error(e),new Error(e)},Ue=function(...t){const e="FIREBASE WARNING: "+xi(...t);Lr.warn(e)},JC=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ue("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ku=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},XC=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},nr="[MIN_NAME]",kn="[MAX_NAME]",ur=function(t,e){if(t===e)return 0;if(t===nr||e===kn)return-1;if(e===nr||t===kn)return 1;{const n=Cf(t),r=Cf(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},ZC=function(t,e){return t===e?0:t<e?-1:1},gs=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ve(e))},Yu=function(t){if(typeof t!="object"||t===null)return ve(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ve(e[r]),n+=":",n+=Yu(t[e[r]]);return n+="}",n},ly=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function Ae(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const ay=function(t){I(!Ku(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const h=u.join("");let d="";for(c=0;c<64;c+=8){let f=parseInt(h.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},eb=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},tb=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function nb(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const rb=new RegExp("^-?(0*)\\d{1,10}$"),sb=-2147483648,ib=2147483647,Cf=function(t){if(rb.test(t)){const e=Number(t);if(e>=sb&&e<=ib)return e}return null},ts=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Ue("Exception was thrown by user callback.",n),e},Math.floor(0))}},ob=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Rs=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ue(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ie("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ue(e)}}class io{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}io.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju="5",cy="v",uy="s",dy="r",hy="f",fy=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,py="ls",my="p",Oc="ac",gy="websocket",yy="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Hn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Hn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function cb(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function xy(t,e,n){I(typeof e=="string","typeof type must == string"),I(typeof n=="object","typeof params must == object");let r;if(e===gy)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===yy)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);cb(t)&&(n.ns=t.namespace);const s=[];return Ae(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(){this.counters_={}}incrementCounter(e,n=1){It(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return p_(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga={},ya={};function Xu(t){const e=t.toString();return ga[e]||(ga[e]=new ub),ga[e]}function db(t,e){const n=t.toString();return ya[n]||(ya[n]=e()),ya[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&ts(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf="start",fb="close",pb="pLPCommand",mb="pRTLPCB",wy="id",_y="pw",Cy="ser",gb="cb",yb="seg",vb="ts",xb="d",wb="dframe",by=1870,Ny=30,_b=by-Ny,Cb=25e3,bb=3e4;class jr{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=wi(e),this.stats_=Xu(n),this.urlFn=c=>(this.appCheckToken&&(c[Oc]=this.appCheckToken),xy(n,yy,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new hb(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(bb)),XC(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Zu((...i)=>{const[o,a,c,u,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===bf)this.id=a,this.password=c;else if(o===fb)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[bf]="t",r[Cy]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[gb]=this.scriptTagHolder.uniqueCallbackIdentifier),r[cy]=Ju,this.transportSessionId&&(r[uy]=this.transportSessionId),this.lastSessionId&&(r[py]=this.lastSessionId),this.applicationId&&(r[my]=this.applicationId),this.appCheckToken&&(r[Oc]=this.appCheckToken),typeof location<"u"&&location.hostname&&fy.test(location.hostname)&&(r[dy]=hy);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){jr.forceAllow_=!0}static forceDisallow(){jr.forceDisallow_=!0}static isAvailable(){return jr.forceAllow_?!0:!jr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!eb()&&!tb()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ve(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=zg(n),s=ly(r,_b);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[wb]="t",r[wy]=e,r[_y]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ve(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Zu{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=iy(),window[pb+this.uniqueCallbackIdentifier]=e,window[mb+this.uniqueCallbackIdentifier]=n,this.myIFrame=Zu.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ie("frame writing exception"),a.stack&&Ie(a.stack),Ie(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ie("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[wy]=this.myID,e[_y]=this.myPW,e[Cy]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Ny+r.length<=by;){const o=this.pendingSegs.shift();r=r+"&"+yb+s+"="+o.seg+"&"+vb+s+"="+o.ts+"&"+xb+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(Cb)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ie("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb=16384,Sb=45e3;let Lo=null;typeof MozWebSocket<"u"?Lo=MozWebSocket:typeof WebSocket<"u"&&(Lo=WebSocket);class _t{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=wi(this.connId),this.stats_=Xu(n),this.connURL=_t.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[cy]=Ju,typeof location<"u"&&location.hostname&&fy.test(location.hostname)&&(o[dy]=hy),n&&(o[uy]=n),r&&(o[py]=r),s&&(o[Oc]=s),i&&(o[my]=i),xy(e,gy,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hn.set("previous_websocket_failure",!0);try{let r;Qg(),this.mySock=new Lo(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){_t.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Lo!==null&&!_t.forceDisallow_}static previouslyFailed(){return Hn.isInMemoryStorage||Hn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Hn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=ni(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(I(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=ve(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=ly(n,Nb);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Sb))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}_t.responsesRequiredToBeHealthy=2;_t.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[jr,_t]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=_t&&_t.isAvailable();let r=n&&!_t.previouslyFailed();if(e.webSocketOnly&&(n||Ue("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[_t];else{const s=this.transports_=[];for(const i of si.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);si.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}si.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=6e4,Ib=5e3,kb=10*1024,jb=100*1024,va="t",Nf="d",Tb="s",Sf="r",Ab="e",Ef="o",If="a",kf="n",jf="p",Db="h";class Pb{constructor(e,n,r,s,i,o,a,c,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=wi("c:"+this.id+":"),this.transportManager_=new si(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Rs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>jb?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>kb?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(va in e){const n=e[va];n===If?this.upgradeIfSecondaryHealthy_():n===Sf?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Ef&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=gs("t",e),r=gs("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:jf,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:If,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:kf,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=gs("t",e),r=gs("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=gs(va,e);if(Nf in e){const r=e[Nf];if(n===Db){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===kf){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Tb?this.onConnectionShutdown_(r):n===Sf?this.onReset_(r):n===Ab?Rc("Server Error: "+r):n===Ef?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Rc("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Ju!==r&&Ue("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Rs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Eb))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Rs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Ib))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:jf,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e){this.allowedEvents_=e,this.listeners_={},I(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){I(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo extends Ey{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Hg()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Fo}getInitialEvent(e){return I(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf=32,Af=768;class Y{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function G(){return new Y("")}function $(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function jn(t){return t.pieces_.length-t.pieceNum_}function ee(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Y(t.pieces_,e)}function ed(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Rb(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ii(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Iy(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Y(e,0)}function he(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Y)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Y(n,0)}function W(t){return t.pieceNum_>=t.pieces_.length}function Fe(t,e){const n=$(t),r=$(e);if(n===null)return e;if(n===r)return Fe(ee(t),ee(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ob(t,e){const n=ii(t,0),r=ii(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=ur(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function td(t,e){if(jn(t)!==jn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ht(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(jn(t)>jn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Mb{constructor(e,n){this.errorPrefix_=n,this.parts_=ii(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=xl(this.parts_[r]);ky(this)}}function Lb(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=xl(e),ky(t)}function Fb(t){const e=t.parts_.pop();t.byteLength_-=xl(e),t.parts_.length>0&&(t.byteLength_-=1)}function ky(t){if(t.byteLength_>Af)throw new Error(t.errorPrefix_+"has a key path longer than "+Af+" bytes ("+t.byteLength_+").");if(t.parts_.length>Tf)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Tf+") or object contains a cycle "+zn(t))}function zn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd extends Ey{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new nd}getInitialEvent(e){return I(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=1e3,Bb=60*5*1e3,Df=30*1e3,Ub=1.3,zb=3e4,$b="server_kill",Pf=3;class Wt extends Sy{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Wt.nextPersistentConnectionId_++,this.log_=wi("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ys,this.maxReconnectDelay_=Bb,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Qg())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");nd.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Fo.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(ve(i)),I(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new es,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),I(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),I(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,u=a.s;Wt.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&It(e,"w")){const r=tr(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Ue(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||A_(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Df)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=T_(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),I(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ve(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Rc("Unrecognized action received from server: "+ve(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){I(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ys,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ys,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>zb&&(this.reconnectDelay_=ys),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Ub)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Wt.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},u=function(d){I(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?Ie("getToken() completed but was canceled"):(Ie("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,a=new Pb(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,g=>{Ue(g+" ("+this.repoInfo_.toString()+")"),this.interrupt($b)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Ue(d),c())}}}interrupt(e){Ie("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ie("Resuming connection for reason: "+e),delete this.interruptReasons_[e],lf(this.interruptReasons_)&&(this.reconnectDelay_=ys,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>Yu(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Y(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Ie("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Pf&&(this.reconnectDelay_=Df,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ie("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Pf&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+ry.replace(/\./g,"-")]=1,Hg()?e["framework.cordova"]=1:S_()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Fo.getInstance().currentlyOnline();return lf(this.interruptReasons_)&&e}}Wt.nextPersistentConnectionId_=0;Wt.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new V(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new V(nr,e),s=new V(nr,n);return this.compare(r,s)!==0}minPost(){return V.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hi;class jy extends wl{static get __EMPTY_NODE(){return Hi}static set __EMPTY_NODE(e){Hi=e}compare(e,n){return ur(e.name,n.name)}isDefinedOn(e){throw Zr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return V.MIN}maxPost(){return new V(kn,Hi)}makePost(e,n){return I(typeof e=="string","KeyIndex indexValue must always be a string."),new V(e,Hi)}toString(){return".key"}}const Kn=new jy;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ce{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ce.RED,this.left=s??Qe.EMPTY_NODE,this.right=i??Qe.EMPTY_NODE}copy(e,n,r,s,i){return new Ce(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Qe.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Qe.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ce.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ce.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ce.RED=!0;Ce.BLACK=!1;class Wb{copy(e,n,r,s,i){return this}insert(e,n,r){return new Ce(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Qe{constructor(e,n=Qe.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Qe(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ce.BLACK,null,null))}remove(e){return new Qe(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ce.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Qi(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Qi(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Qi(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Qi(this.root_,null,this.comparator_,!0,e)}}Qe.EMPTY_NODE=new Wb;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t,e){return ur(t.name,e.name)}function rd(t,e){return ur(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mc;function Hb(t){Mc=t}const Ty=function(t){return typeof t=="number"?"number:"+ay(t):"string:"+t},Ay=function(t){if(t.isLeafNode()){const e=t.val();I(typeof e=="string"||typeof e=="number"||typeof e=="object"&&It(e,".sv"),"Priority must be a string or number.")}else I(t===Mc||t.isEmpty(),"priority of unexpected type.");I(t===Mc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rf;class we{constructor(e,n=we.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,I(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Ay(this.priorityNode_)}static set __childrenNodeConstructor(e){Rf=e}static get __childrenNodeConstructor(){return Rf}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new we(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:we.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return W(e)?this:$(e)===".priority"?this.priorityNode_:we.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:we.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=$(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(I(r!==".priority"||jn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,we.__childrenNodeConstructor.EMPTY_NODE.updateChild(ee(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ty(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=ay(this.value_):e+=this.value_,this.lazyHash_=oy(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===we.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof we.__childrenNodeConstructor?-1:(I(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=we.VALUE_TYPE_ORDER.indexOf(n),i=we.VALUE_TYPE_ORDER.indexOf(r);return I(s>=0,"Unknown leaf type: "+n),I(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}we.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dy,Py;function Qb(t){Dy=t}function qb(t){Py=t}class Gb extends wl{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?ur(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return V.MIN}maxPost(){return new V(kn,new we("[PRIORITY-POST]",Py))}makePost(e,n){const r=Dy(e);return new V(n,new we("[PRIORITY-POST]",r))}toString(){return".priority"}}const oe=new Gb;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=Math.log(2);class Yb{constructor(e){const n=i=>parseInt(Math.log(i)/Kb,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Bo=function(t,e,n,r){t.sort(e);const s=function(c,u){const h=u-c;let d,f;if(h===0)return null;if(h===1)return d=t[c],f=n?n(d):d,new Ce(f,d.node,Ce.BLACK,null,null);{const g=parseInt(h/2,10)+c,x=s(c,g),p=s(g+1,u);return d=t[g],f=n?n(d):d,new Ce(f,d.node,Ce.BLACK,x,p)}},i=function(c){let u=null,h=null,d=t.length;const f=function(x,p){const w=d-x,y=d;d-=x;const m=s(w+1,y),v=t[w],C=n?n(v):v;g(new Ce(C,v.node,p,null,m))},g=function(x){u?(u.left=x,u=x):(h=x,u=x)};for(let x=0;x<c.count;++x){const p=c.nextBitIsOne(),w=Math.pow(2,c.count-(x+1));p?f(w,Ce.BLACK):(f(w,Ce.BLACK),f(w,Ce.RED))}return h},o=new Yb(t.length),a=i(o);return new Qe(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xa;const gr={};class zt{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return I(gr&&oe,"ChildrenNode.ts has not been loaded"),xa=xa||new zt({".priority":gr},{".priority":oe}),xa}get(e){const n=tr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Qe?n:null}hasIndex(e){return It(this.indexSet_,e.toString())}addIndex(e,n){I(e!==Kn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(V.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=Bo(r,e.getCompare()):a=gr;const c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;const h=Object.assign({},this.indexes_);return h[c]=a,new zt(h,u)}addToIndexes(e,n){const r=Ro(this.indexes_,(s,i)=>{const o=tr(this.indexSet_,i);if(I(o,"Missing index implementation for "+i),s===gr)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(V.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),Bo(a,o.getCompare())}else return gr;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new V(e.name,a))),c.insert(e,e.node)}});return new zt(r,this.indexSet_)}removeFromIndexes(e,n){const r=Ro(this.indexes_,s=>{if(s===gr)return s;{const i=n.get(e.name);return i?s.remove(new V(e.name,i)):s}});return new zt(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vs;class L{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Ay(this.priorityNode_),this.children_.isEmpty()&&I(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return vs||(vs=new L(new Qe(rd),null,zt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||vs}updatePriority(e){return this.children_.isEmpty()?this:new L(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?vs:n}}getChild(e){const n=$(e);return n===null?this:this.getImmediateChild(n).getChild(ee(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(I(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new V(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?vs:this.priorityNode_;return new L(s,o,i)}}updateChild(e,n){const r=$(e);if(r===null)return n;{I($(e)!==".priority"||jn(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(ee(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(oe,(o,a)=>{n[o]=a.val(e),r++,i&&L.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Ty(this.getPriority().val())+":"),this.forEachChild(oe,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":oy(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new V(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new V(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new V(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,V.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,V.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===_i?-1:0}withIndex(e){if(e===Kn||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new L(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Kn||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(oe),s=n.getIterator(oe);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Kn?null:this.indexMap_.get(e.toString())}}L.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Jb extends L{constructor(){super(new Qe(rd),L.EMPTY_NODE,zt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return L.EMPTY_NODE}isEmpty(){return!1}}const _i=new Jb;Object.defineProperties(V,{MIN:{value:new V(nr,L.EMPTY_NODE)},MAX:{value:new V(kn,_i)}});jy.__EMPTY_NODE=L.EMPTY_NODE;we.__childrenNodeConstructor=L;Hb(_i);qb(_i);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=!0;function me(t,e=null){if(t===null)return L.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),I(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new we(n,me(e))}if(!(t instanceof Array)&&Xb){const n=[];let r=!1;if(Ae(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=me(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new V(o,c)))}}),n.length===0)return L.EMPTY_NODE;const i=Bo(n,Vb,o=>o.name,rd);if(r){const o=Bo(n,oe.getCompare());return new L(i,me(e),new zt({".priority":o},{".priority":oe}))}else return new L(i,me(e),zt.Default)}else{let n=L.EMPTY_NODE;return Ae(t,(r,s)=>{if(It(t,r)&&r.substring(0,1)!=="."){const i=me(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(me(e))}}Qb(me);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd extends wl{constructor(e){super(),this.indexPath_=e,I(!W(e)&&$(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?ur(e.name,n.name):i}makePost(e,n){const r=me(e),s=L.EMPTY_NODE.updateChild(this.indexPath_,r);return new V(n,s)}maxPost(){const e=L.EMPTY_NODE.updateChild(this.indexPath_,_i);return new V(kn,e)}toString(){return ii(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb extends wl{compare(e,n){const r=e.node.compareTo(n.node);return r===0?ur(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return V.MIN}maxPost(){return V.MAX}makePost(e,n){const r=me(e);return new V(n,r)}toString(){return".value"}}const Ry=new Zb;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t){return{type:"value",snapshotNode:t}}function Hr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function oi(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function li(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function eN(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){I(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(oi(n,a)):I(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Hr(n,r)):o.trackChildChange(li(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(oe,(s,i)=>{n.hasChild(s)||r.trackChildChange(oi(s,i))}),n.isLeafNode()||n.forEachChild(oe,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(li(s,i,o))}else r.trackChildChange(Hr(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?L.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.indexedFilter_=new id(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ai.getStartPost_(e),this.endPost_=ai.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new V(n,r))||(r=L.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=L.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(L.EMPTY_NODE);const i=this;return n.forEachChild(oe,(o,a)=>{i.matches(new V(o,a))||(s=s.updateImmediateChild(o,L.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new ai(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new V(n,r))||(r=L.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=L.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=L.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(L.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,L.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(f,g)=>d(g,f)}else o=this.index_.getCompare();const a=e;I(a.numChildren()===this.limit_,"");const c=new V(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let f=s.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const g=f==null?1:o(f,c);if(h&&!r.isEmpty()&&g>=0)return i!=null&&i.trackChildChange(li(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(oi(n,d));const p=a.updateImmediateChild(n,L.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange(Hr(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}}else return r.isEmpty()?e:h&&o(u,c)>=0?(i!=null&&(i.trackChildChange(oi(u.name,u.node)),i.trackChildChange(Hr(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,L.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=oe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return I(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return I(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:nr}hasEnd(){return this.endSet_}getIndexEndValue(){return I(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return I(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:kn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return I(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===oe}copy(){const e=new od;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function nN(t){return t.loadsAllData()?new id(t.getIndex()):t.hasLimit()?new tN(t):new ai(t)}function rN(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function sN(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function iN(t,e){const n=t.copy();return n.index_=e,n}function Of(t){const e={};if(t.isDefault())return e;let n;if(t.index_===oe?n="$priority":t.index_===Ry?n="$value":t.index_===Kn?n="$key":(I(t.index_ instanceof sd,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ve(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=ve(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ve(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ve(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ve(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Mf(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==oe&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo extends Sy{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=wi("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(I(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=Uo.getListenId_(e,r),a={};this.listens_[o]=a;const c=Of(e._queryParams);this.restRequest_(i+".json",c,(u,h)=>{let d=h;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(i,d,!1,r),tr(this.listens_,o)===a){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",s(f,null)}})}unlisten(e,n){const r=Uo.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Of(e._queryParams),r=e._path.toString(),s=new es;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+D_(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=ni(a.responseText)}catch{Ue("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Ue("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(){this.rootNode_=L.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(){return{value:null,children:new Map}}function My(t,e,n){if(W(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=$(e);t.children.has(r)||t.children.set(r,zo());const s=t.children.get(r);e=ee(e),My(s,e,n)}}function Lc(t,e,n){t.value!==null?n(e,t.value):lN(t,(r,s)=>{const i=new Y(e.toString()+"/"+r);Lc(s,i,n)})}function lN(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ae(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf=10*1e3,cN=30*1e3,uN=5*60*1e3;class dN{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new aN(e);const r=Lf+(cN-Lf)*Math.random();Rs(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Ae(e,(s,i)=>{i>0&&It(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Rs(this.reportStats_.bind(this),Math.floor(Math.random()*2*uN))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ct||(Ct={}));function ld(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ad(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function cd(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Ct.ACK_USER_WRITE,this.source=ld()}operationForChild(e){if(W(this.path)){if(this.affectedTree.value!=null)return I(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Y(e));return new $o(G(),n,this.revert)}}else return I($(this.path)===e,"operationForChild called for unrelated child."),new $o(ee(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n){this.source=e,this.path=n,this.type=Ct.LISTEN_COMPLETE}operationForChild(e){return W(this.path)?new ci(this.source,G()):new ci(this.source,ee(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Ct.OVERWRITE}operationForChild(e){return W(this.path)?new rr(this.source,G(),this.snap.getImmediateChild(e)):new rr(this.source,ee(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Ct.MERGE}operationForChild(e){if(W(this.path)){const n=this.children.subtree(new Y(e));return n.isEmpty()?null:n.value?new rr(this.source,G(),n.value):new Qr(this.source,G(),n)}else return I($(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Qr(this.source,ee(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(W(e))return this.isFullyInitialized()&&!this.filtered_;const n=$(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function fN(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(eN(o.childName,o.snapshotNode))}),xs(t,s,"child_removed",e,r,n),xs(t,s,"child_added",e,r,n),xs(t,s,"child_moved",i,r,n),xs(t,s,"child_changed",e,r,n),xs(t,s,"value",e,r,n),s}function xs(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>mN(t,a,c)),o.forEach(a=>{const c=pN(t,a,i);s.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function pN(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function mN(t,e,n){if(e.childName==null||n.childName==null)throw Zr("Should only compare child_ events.");const r=new V(e.childName,e.snapshotNode),s=new V(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(t,e){return{eventCache:t,serverCache:e}}function Os(t,e,n,r){return _l(new Tn(e,n,r),t.serverCache)}function Ly(t,e,n,r){return _l(t.eventCache,new Tn(e,n,r))}function Wo(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function sr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wa;const gN=()=>(wa||(wa=new Qe(ZC)),wa);class X{constructor(e,n=gN()){this.value=e,this.children=n}static fromObject(e){let n=new X(null);return Ae(e,(r,s)=>{n=n.set(new Y(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:G(),value:this.value};if(W(e))return null;{const r=$(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(ee(e),n);return i!=null?{path:he(new Y(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(W(e))return this;{const n=$(e),r=this.children.get(n);return r!==null?r.subtree(ee(e)):new X(null)}}set(e,n){if(W(e))return new X(n,this.children);{const r=$(e),i=(this.children.get(r)||new X(null)).set(ee(e),n),o=this.children.insert(r,i);return new X(this.value,o)}}remove(e){if(W(e))return this.children.isEmpty()?new X(null):new X(null,this.children);{const n=$(e),r=this.children.get(n);if(r){const s=r.remove(ee(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new X(null):new X(this.value,i)}else return this}}get(e){if(W(e))return this.value;{const n=$(e),r=this.children.get(n);return r?r.get(ee(e)):null}}setTree(e,n){if(W(e))return n;{const r=$(e),i=(this.children.get(r)||new X(null)).setTree(ee(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new X(this.value,o)}}fold(e){return this.fold_(G(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(he(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,G(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(W(e))return null;{const i=$(e),o=this.children.get(i);return o?o.findOnPath_(ee(e),he(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,G(),n)}foreachOnPath_(e,n,r){if(W(e))return this;{this.value&&r(n,this.value);const s=$(e),i=this.children.get(s);return i?i.foreachOnPath_(ee(e),he(n,s),r):new X(null)}}foreach(e){this.foreach_(G(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(he(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.writeTree_=e}static empty(){return new St(new X(null))}}function Ms(t,e,n){if(W(e))return new St(new X(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Fe(s,e);return i=i.updateChild(o,n),new St(t.writeTree_.set(s,i))}else{const s=new X(n),i=t.writeTree_.setTree(e,s);return new St(i)}}}function Fc(t,e,n){let r=t;return Ae(n,(s,i)=>{r=Ms(r,he(e,s),i)}),r}function Ff(t,e){if(W(e))return St.empty();{const n=t.writeTree_.setTree(e,new X(null));return new St(n)}}function Bc(t,e){return dr(t,e)!=null}function dr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Fe(n.path,e)):null}function Bf(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(oe,(r,s)=>{e.push(new V(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new V(r,s.value))}),e}function bn(t,e){if(W(e))return t;{const n=dr(t,e);return n!=null?new St(new X(n)):new St(t.writeTree_.subtree(e))}}function Uc(t){return t.writeTree_.isEmpty()}function qr(t,e){return Fy(G(),t.writeTree_,e)}function Fy(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(I(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=Fy(he(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(he(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t,e){return $y(e,t)}function yN(t,e,n,r,s){I(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Ms(t.visibleWrites,e,n)),t.lastWriteId=r}function vN(t,e,n,r){I(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Fc(t.visibleWrites,e,n),t.lastWriteId=r}function xN(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function wN(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);I(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&_N(a,r.path)?s=!1:ht(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return CN(t),!0;if(r.snap)t.visibleWrites=Ff(t.visibleWrites,r.path);else{const a=r.children;Ae(a,c=>{t.visibleWrites=Ff(t.visibleWrites,he(r.path,c))})}return!0}else return!1}function _N(t,e){if(t.snap)return ht(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ht(he(t.path,n),e))return!0;return!1}function CN(t){t.visibleWrites=By(t.allWrites,bN,G()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function bN(t){return t.visible}function By(t,e,n){let r=St.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)ht(n,o)?(a=Fe(n,o),r=Ms(r,a,i.snap)):ht(o,n)&&(a=Fe(o,n),r=Ms(r,G(),i.snap.getChild(a)));else if(i.children){if(ht(n,o))a=Fe(n,o),r=Fc(r,a,i.children);else if(ht(o,n))if(a=Fe(o,n),W(a))r=Fc(r,G(),i.children);else{const c=tr(i.children,$(a));if(c){const u=c.getChild(ee(a));r=Ms(r,G(),u)}}}else throw Zr("WriteRecord should have .snap or .children")}}return r}function Uy(t,e,n,r,s){if(!r&&!s){const i=dr(t.visibleWrites,e);if(i!=null)return i;{const o=bn(t.visibleWrites,e);if(Uc(o))return n;if(n==null&&!Bc(o,G()))return null;{const a=n||L.EMPTY_NODE;return qr(o,a)}}}else{const i=bn(t.visibleWrites,e);if(!s&&Uc(i))return n;if(!s&&n==null&&!Bc(i,G()))return null;{const o=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(ht(u.path,e)||ht(e,u.path))},a=By(t.allWrites,o,e),c=n||L.EMPTY_NODE;return qr(a,c)}}}function NN(t,e,n){let r=L.EMPTY_NODE;const s=dr(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(oe,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=bn(t.visibleWrites,e);return n.forEachChild(oe,(o,a)=>{const c=qr(bn(i,new Y(o)),a);r=r.updateImmediateChild(o,c)}),Bf(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=bn(t.visibleWrites,e);return Bf(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function SN(t,e,n,r,s){I(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=he(e,n);if(Bc(t.visibleWrites,i))return null;{const o=bn(t.visibleWrites,i);return Uc(o)?s.getChild(n):qr(o,s.getChild(n))}}function EN(t,e,n,r){const s=he(e,n),i=dr(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=bn(t.visibleWrites,s);return qr(o,r.getNode().getImmediateChild(n))}else return null}function IN(t,e){return dr(t.visibleWrites,e)}function kN(t,e,n,r,s,i,o){let a;const c=bn(t.visibleWrites,e),u=dr(c,G());if(u!=null)a=u;else if(n!=null)a=qr(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),f=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let g=f.getNext();for(;g&&h.length<s;)d(g,r)!==0&&h.push(g),g=f.getNext();return h}else return[]}function jN(){return{visibleWrites:St.empty(),allWrites:[],lastWriteId:-1}}function Vo(t,e,n,r){return Uy(t.writeTree,t.treePath,e,n,r)}function ud(t,e){return NN(t.writeTree,t.treePath,e)}function Uf(t,e,n,r){return SN(t.writeTree,t.treePath,e,n,r)}function Ho(t,e){return IN(t.writeTree,he(t.treePath,e))}function TN(t,e,n,r,s,i){return kN(t.writeTree,t.treePath,e,n,r,s,i)}function dd(t,e,n){return EN(t.writeTree,t.treePath,e,n)}function zy(t,e){return $y(he(t.treePath,e),t.writeTree)}function $y(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;I(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),I(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,li(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,oi(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Hr(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,li(r,e.snapshotNode,s.oldSnap));else throw Zr("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Wy=new DN;class hd{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Tn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return dd(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:sr(this.viewCache_),i=TN(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(t){return{filter:t}}function RN(t,e){I(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),I(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function ON(t,e,n,r,s){const i=new AN;let o,a;if(n.type===Ct.OVERWRITE){const u=n;u.source.fromUser?o=zc(t,e,u.path,u.snap,r,s,i):(I(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!W(u.path),o=Qo(t,e,u.path,u.snap,r,s,a,i))}else if(n.type===Ct.MERGE){const u=n;u.source.fromUser?o=LN(t,e,u.path,u.children,r,s,i):(I(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=$c(t,e,u.path,u.children,r,s,a,i))}else if(n.type===Ct.ACK_USER_WRITE){const u=n;u.revert?o=UN(t,e,u.path,r,s,i):o=FN(t,e,u.path,u.affectedTree,r,s,i)}else if(n.type===Ct.LISTEN_COMPLETE)o=BN(t,e,n.path,r,i);else throw Zr("Unknown operation type: "+n.type);const c=i.getChanges();return MN(e,o,c),{viewCache:o,changes:c}}function MN(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=Wo(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(Oy(Wo(e)))}}function Vy(t,e,n,r,s,i){const o=e.eventCache;if(Ho(r,n)!=null)return e;{let a,c;if(W(n))if(I(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=sr(e),h=u instanceof L?u:L.EMPTY_NODE,d=ud(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const u=Vo(r,sr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=$(n);if(u===".priority"){I(jn(n)===1,"Can't have a priority with additional path components");const h=o.getNode();c=e.serverCache.getNode();const d=Uf(r,n,h,c);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=ee(n);let d;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();const f=Uf(r,n,o.getNode(),c);f!=null?d=o.getNode().getImmediateChild(u).updateChild(h,f):d=o.getNode().getImmediateChild(u)}else d=dd(r,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,h,s,i):a=o.getNode()}}return Os(e,a,o.isFullyInitialized()||W(n),t.filter.filtersNodes())}}function Qo(t,e,n,r,s,i,o,a){const c=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(W(n))u=h.updateFullNode(c.getNode(),r,null);else if(h.filtersNodes()&&!c.isFiltered()){const g=c.getNode().updateChild(n,r);u=h.updateFullNode(c.getNode(),g,null)}else{const g=$(n);if(!c.isCompleteForPath(n)&&jn(n)>1)return e;const x=ee(n),w=c.getNode().getImmediateChild(g).updateChild(x,r);g===".priority"?u=h.updatePriority(c.getNode(),w):u=h.updateChild(c.getNode(),g,w,x,Wy,null)}const d=Ly(e,u,c.isFullyInitialized()||W(n),h.filtersNodes()),f=new hd(s,d,i);return Vy(t,d,n,s,f,a)}function zc(t,e,n,r,s,i,o){const a=e.eventCache;let c,u;const h=new hd(s,e,i);if(W(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Os(e,u,!0,t.filter.filtersNodes());else{const d=$(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=Os(e,u,a.isFullyInitialized(),a.isFiltered());else{const f=ee(n),g=a.getNode().getImmediateChild(d);let x;if(W(f))x=r;else{const p=h.getCompleteChild(d);p!=null?ed(f)===".priority"&&p.getChild(Iy(f)).isEmpty()?x=p:x=p.updateChild(f,r):x=L.EMPTY_NODE}if(g.equals(x))c=e;else{const p=t.filter.updateChild(a.getNode(),d,x,f,h,o);c=Os(e,p,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function zf(t,e){return t.eventCache.isCompleteForChild(e)}function LN(t,e,n,r,s,i,o){let a=e;return r.foreach((c,u)=>{const h=he(n,c);zf(e,$(h))&&(a=zc(t,a,h,u,s,i,o))}),r.foreach((c,u)=>{const h=he(n,c);zf(e,$(h))||(a=zc(t,a,h,u,s,i,o))}),a}function $f(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function $c(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;W(n)?u=r:u=new X(null).setTree(n,r);const h=e.serverCache.getNode();return u.children.inorderTraversal((d,f)=>{if(h.hasChild(d)){const g=e.serverCache.getNode().getImmediateChild(d),x=$f(t,g,f);c=Qo(t,c,new Y(d),x,s,i,o,a)}}),u.children.inorderTraversal((d,f)=>{const g=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!h.hasChild(d)&&!g){const x=e.serverCache.getNode().getImmediateChild(d),p=$f(t,x,f);c=Qo(t,c,new Y(d),p,s,i,o,a)}}),c}function FN(t,e,n,r,s,i,o){if(Ho(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(W(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Qo(t,e,n,c.getNode().getChild(n),s,i,a,o);if(W(n)){let u=new X(null);return c.getNode().forEachChild(Kn,(h,d)=>{u=u.set(new Y(h),d)}),$c(t,e,n,u,s,i,a,o)}else return e}else{let u=new X(null);return r.foreach((h,d)=>{const f=he(n,h);c.isCompleteForPath(f)&&(u=u.set(h,c.getNode().getChild(f)))}),$c(t,e,n,u,s,i,a,o)}}function BN(t,e,n,r,s){const i=e.serverCache,o=Ly(e,i.getNode(),i.isFullyInitialized()||W(n),i.isFiltered());return Vy(t,o,n,r,Wy,s)}function UN(t,e,n,r,s,i){let o;if(Ho(r,n)!=null)return e;{const a=new hd(r,e,s),c=e.eventCache.getNode();let u;if(W(n)||$(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Vo(r,sr(e));else{const d=e.serverCache.getNode();I(d instanceof L,"serverChildren would be complete if leaf node"),h=ud(r,d)}h=h,u=t.filter.updateFullNode(c,h,i)}else{const h=$(n);let d=dd(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),d!=null?u=t.filter.updateChild(c,h,d,ee(n),a,i):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(c,h,L.EMPTY_NODE,ee(n),a,i):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Vo(r,sr(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||Ho(r,G())!=null,Os(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new id(r.getIndex()),i=nN(r);this.processor_=PN(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(L.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(L.EMPTY_NODE,a.getNode(),null),h=new Tn(c,o.isFullyInitialized(),s.filtersNodes()),d=new Tn(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=_l(d,h),this.eventGenerator_=new hN(this.query_)}get query(){return this.query_}}function $N(t){return t.viewCache_.serverCache.getNode()}function WN(t){return Wo(t.viewCache_)}function VN(t,e){const n=sr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!W(e)&&!n.getImmediateChild($(e)).isEmpty())?n.getChild(e):null}function Wf(t){return t.eventRegistrations_.length===0}function HN(t,e){t.eventRegistrations_.push(e)}function Vf(t,e,n){const r=[];if(n){I(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Hf(t,e,n,r){e.type===Ct.MERGE&&e.source.queryId!==null&&(I(sr(t.viewCache_),"We should always have a full cache before handling merges"),I(Wo(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=ON(t.processor_,s,e,n,r);return RN(t.processor_,i.viewCache),I(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,Hy(t,i.changes,i.viewCache.eventCache.getNode(),null)}function QN(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(oe,(i,o)=>{r.push(Hr(i,o))}),n.isFullyInitialized()&&r.push(Oy(n.getNode())),Hy(t,r,n.getNode(),e)}function Hy(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return fN(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qo;class Qy{constructor(){this.views=new Map}}function qN(t){I(!qo,"__referenceConstructor has already been defined"),qo=t}function GN(){return I(qo,"Reference.ts has not been loaded"),qo}function KN(t){return t.views.size===0}function fd(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return I(i!=null,"SyncTree gave us an op for an invalid query."),Hf(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(Hf(o,e,n,r));return i}}function qy(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=Vo(n,s?r:null),c=!1;a?c=!0:r instanceof L?(a=ud(n,r),c=!1):(a=L.EMPTY_NODE,c=!1);const u=_l(new Tn(a,c,!1),new Tn(r,s,!1));return new zN(e,u)}return o}function YN(t,e,n,r,s,i){const o=qy(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),HN(o,n),QN(o,n)}function JN(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=An(t);if(s==="default")for(const[c,u]of t.views.entries())o=o.concat(Vf(u,n,r)),Wf(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||i.push(u.query));else{const c=t.views.get(s);c&&(o=o.concat(Vf(c,n,r)),Wf(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!An(t)&&i.push(new(GN())(e._repo,e._path)),{removed:i,events:o}}function Gy(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Nn(t,e){let n=null;for(const r of t.views.values())n=n||VN(r,e);return n}function Ky(t,e){if(e._queryParams.loadsAllData())return bl(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Yy(t,e){return Ky(t,e)!=null}function An(t){return bl(t)!=null}function bl(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Go;function XN(t){I(!Go,"__referenceConstructor has already been defined"),Go=t}function ZN(){return I(Go,"Reference.ts has not been loaded"),Go}let e1=1;class Qf{constructor(e){this.listenProvider_=e,this.syncPointTree_=new X(null),this.pendingWriteTree_=jN(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function pd(t,e,n,r,s){return yN(t.pendingWriteTree_,e,n,r,s),s?ns(t,new rr(ld(),e,n)):[]}function t1(t,e,n,r){vN(t.pendingWriteTree_,e,n,r);const s=X.fromObject(n);return ns(t,new Qr(ld(),e,s))}function hn(t,e,n=!1){const r=xN(t.pendingWriteTree_,e);if(wN(t.pendingWriteTree_,e)){let i=new X(null);return r.snap!=null?i=i.set(G(),!0):Ae(r.children,o=>{i=i.set(new Y(o),!0)}),ns(t,new $o(r.path,i,n))}else return[]}function Ci(t,e,n){return ns(t,new rr(ad(),e,n))}function n1(t,e,n){const r=X.fromObject(n);return ns(t,new Qr(ad(),e,r))}function r1(t,e){return ns(t,new ci(ad(),e))}function s1(t,e,n){const r=md(t,n);if(r){const s=gd(r),i=s.path,o=s.queryId,a=Fe(i,e),c=new ci(cd(o),a);return yd(t,i,c)}else return[]}function Ko(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||Yy(o,e))){const c=JN(o,e,n,r);KN(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=c.removed;if(a=c.events,!s){const h=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(f,g)=>An(g));if(h&&!d){const f=t.syncPointTree_.subtree(i);if(!f.isEmpty()){const g=l1(f);for(let x=0;x<g.length;++x){const p=g[x],w=p.query,y=ev(t,p);t.listenProvider_.startListening(Ls(w),ui(t,w),y.hashFn,y.onComplete)}}}!d&&u.length>0&&!r&&(h?t.listenProvider_.stopListening(Ls(e),null):u.forEach(f=>{const g=t.queryToTagMap.get(Sl(f));t.listenProvider_.stopListening(Ls(f),g)}))}a1(t,u)}return a}function Jy(t,e,n,r){const s=md(t,r);if(s!=null){const i=gd(s),o=i.path,a=i.queryId,c=Fe(o,e),u=new rr(cd(a),c,n);return yd(t,o,u)}else return[]}function i1(t,e,n,r){const s=md(t,r);if(s){const i=gd(s),o=i.path,a=i.queryId,c=Fe(o,e),u=X.fromObject(n),h=new Qr(cd(a),c,u);return yd(t,o,h)}else return[]}function Wc(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(f,g)=>{const x=Fe(f,s);i=i||Nn(g,x),o=o||An(g)});let a=t.syncPointTree_.get(s);a?(o=o||An(a),i=i||Nn(a,G())):(a=new Qy,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=L.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((g,x)=>{const p=Nn(x,G());p&&(i=i.updateImmediateChild(g,p))}));const u=Yy(a,e);if(!u&&!e._queryParams.loadsAllData()){const f=Sl(e);I(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const g=c1();t.queryToTagMap.set(f,g),t.tagToQueryMap.set(g,f)}const h=Cl(t.pendingWriteTree_,s);let d=YN(a,e,n,h,i,c);if(!u&&!o&&!r){const f=Ky(a,e);d=d.concat(u1(t,e,f))}return d}function Nl(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=Fe(o,e),u=Nn(a,c);if(u)return u});return Uy(s,e,i,n,!0)}function o1(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,h)=>{const d=Fe(u,n);r=r||Nn(h,d)});let s=t.syncPointTree_.get(n);s?r=r||Nn(s,G()):(s=new Qy,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new Tn(r,!0,!1):null,a=Cl(t.pendingWriteTree_,e._path),c=qy(s,e,a,i?o.getNode():L.EMPTY_NODE,i);return WN(c)}function ns(t,e){return Xy(e,t.syncPointTree_,null,Cl(t.pendingWriteTree_,G()))}function Xy(t,e,n,r){if(W(t.path))return Zy(t,e,n,r);{const s=e.get(G());n==null&&s!=null&&(n=Nn(s,G()));let i=[];const o=$(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const u=n?n.getImmediateChild(o):null,h=zy(r,o);i=i.concat(Xy(a,c,u,h))}return s&&(i=i.concat(fd(s,t,r,n))),i}}function Zy(t,e,n,r){const s=e.get(G());n==null&&s!=null&&(n=Nn(s,G()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,u=zy(r,o),h=t.operationForChild(o);h&&(i=i.concat(Zy(h,a,c,u)))}),s&&(i=i.concat(fd(s,t,r,n))),i}function ev(t,e){const n=e.query,r=ui(t,n);return{hashFn:()=>($N(e)||L.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?s1(t,n._path,r):r1(t,n._path);{const i=nb(s,n);return Ko(t,n,null,i)}}}}function ui(t,e){const n=Sl(e);return t.queryToTagMap.get(n)}function Sl(t){return t._path.toString()+"$"+t._queryIdentifier}function md(t,e){return t.tagToQueryMap.get(e)}function gd(t){const e=t.indexOf("$");return I(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Y(t.substr(0,e))}}function yd(t,e,n){const r=t.syncPointTree_.get(e);I(r,"Missing sync point for query tag that we're tracking");const s=Cl(t.pendingWriteTree_,e);return fd(r,n,s,null)}function l1(t){return t.fold((e,n,r)=>{if(n&&An(n))return[bl(n)];{let s=[];return n&&(s=Gy(n)),Ae(r,(i,o)=>{s=s.concat(o)}),s}})}function Ls(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(ZN())(t._repo,t._path):t}function a1(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Sl(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function c1(){return e1++}function u1(t,e,n){const r=e._path,s=ui(t,e),i=ev(t,n),o=t.listenProvider_.startListening(Ls(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)I(!An(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((u,h,d)=>{if(!W(u)&&h&&An(h))return[bl(h).query];{let f=[];return h&&(f=f.concat(Gy(h).map(g=>g.query))),Ae(d,(g,x)=>{f=f.concat(x)}),f}});for(let u=0;u<c.length;++u){const h=c[u];t.listenProvider_.stopListening(Ls(h),ui(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new vd(n)}node(){return this.node_}}class xd{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=he(this.path_,e);return new xd(this.syncTree_,n)}node(){return Nl(this.syncTree_,this.path_)}}const d1=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},qf=function(t,e,n){if(!t||typeof t!="object")return t;if(I(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return h1(t[".sv"],e,n);if(typeof t[".sv"]=="object")return f1(t[".sv"],e);I(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},h1=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:I(!1,"Unexpected server value: "+t)}},f1=function(t,e,n){t.hasOwnProperty("increment")||I(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&I(!1,"Unexpected increment value: "+r);const s=e.node();if(I(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},tv=function(t,e,n,r){return _d(e,new xd(n,t),r)},wd=function(t,e,n){return _d(t,new vd(e),n)};function _d(t,e,n){const r=t.getPriority().val(),s=qf(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=qf(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new we(a,me(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new we(s))),o.forEachChild(oe,(a,c)=>{const u=_d(c,e.getImmediateChild(a),n);u!==c&&(i=i.updateImmediateChild(a,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function El(t,e){let n=e instanceof Y?e:new Y(e),r=t,s=$(n);for(;s!==null;){const i=tr(r.node.children,s)||{children:{},childCount:0};r=new Cd(s,r,i),n=ee(n),s=$(n)}return r}function hr(t){return t.node.value}function bd(t,e){t.node.value=e,Vc(t)}function nv(t){return t.node.childCount>0}function p1(t){return hr(t)===void 0&&!nv(t)}function Il(t,e){Ae(t.node.children,(n,r)=>{e(new Cd(n,t,r))})}function rv(t,e,n,r){n&&!r&&e(t),Il(t,s=>{rv(s,e,!0,r)}),n&&r&&e(t)}function m1(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function bi(t){return new Y(t.parent===null?t.name:bi(t.parent)+"/"+t.name)}function Vc(t){t.parent!==null&&g1(t.parent,t.name,t)}function g1(t,e,n){const r=p1(n),s=It(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,Vc(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,Vc(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=/[\[\].#$\/\u0000-\u001F\u007F]/,v1=/[\[\].#$\u0000-\u001F\u007F]/,_a=10*1024*1024,Nd=function(t){return typeof t=="string"&&t.length!==0&&!y1.test(t)},sv=function(t){return typeof t=="string"&&t.length!==0&&!v1.test(t)},x1=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),sv(t)},Yo=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Ku(t)||t&&typeof t=="object"&&It(t,".sv")},Ni=function(t,e,n,r){r&&e===void 0||Si(vl(t,"value"),e,n)},Si=function(t,e,n){const r=n instanceof Y?new Mb(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+zn(r));if(typeof e=="function")throw new Error(t+"contains a function "+zn(r)+" with contents = "+e.toString());if(Ku(e))throw new Error(t+"contains "+e.toString()+" "+zn(r));if(typeof e=="string"&&e.length>_a/3&&xl(e)>_a)throw new Error(t+"contains a string greater than "+_a+" utf8 bytes "+zn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(Ae(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!Nd(o)))throw new Error(t+" contains an invalid key ("+o+") "+zn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Lb(r,o),Si(t,a,r),Fb(r)}),s&&i)throw new Error(t+' contains ".value" child '+zn(r)+" in addition to actual children.")}},w1=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=ii(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!Nd(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(Ob);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&ht(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},_1=function(t,e,n,r){const s=vl(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];Ae(e,(o,a)=>{const c=new Y(o);if(Si(s,a,he(n,c)),ed(c)===".priority"&&!Yo(a))throw new Error(s+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(c)}),w1(s,i)},Sd=function(t,e,n,r){if(!sv(n))throw new Error(vl(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},C1=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Sd(t,e,n)},kl=function(t,e){if($(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},b1=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Nd(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!x1(n))throw new Error(vl(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function jl(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!td(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function iv(t,e,n){jl(t,n),ov(t,r=>td(r,e))}function st(t,e,n){jl(t,n),ov(t,r=>ht(r,e)||ht(e,r))}function ov(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(S1(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function S1(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Ps&&Ie("event: "+n.toString()),ts(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1="repo_interrupt",I1=25;class k1{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new N1,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zo(),this.transactionQueueTree_=new Cd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function j1(t,e,n){if(t.stats_=Xu(t.repoInfo_),t.forceRestClient_||ob())t.server_=new Uo(t.repoInfo_,(r,s,i,o)=>{Gf(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Kf(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ve(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Wt(t.repoInfo_,e,(r,s,i,o)=>{Gf(t,r,s,i,o)},r=>{Kf(t,r)},r=>{T1(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=db(t.repoInfo_,()=>new dN(t.stats_,t.server_)),t.infoData_=new oN,t.infoSyncTree_=new Qf({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Ci(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Ed(t,"connected",!1),t.serverSyncTree_=new Qf({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const u=o(a,c);st(t.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function lv(t){const n=t.infoData_.getNode(new Y(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Ei(t){return d1({timestamp:lv(t)})}function Gf(t,e,n,r,s){t.dataUpdateCount++;const i=new Y(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=Ro(n,u=>me(u));o=i1(t.serverSyncTree_,i,c,s)}else{const c=me(n);o=Jy(t.serverSyncTree_,i,c,s)}else if(r){const c=Ro(n,u=>me(u));o=n1(t.serverSyncTree_,i,c)}else{const c=me(n);o=Ci(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=Gr(t,i)),st(t.eventQueue_,a,o)}function Kf(t,e){Ed(t,"connected",e),e===!1&&R1(t)}function T1(t,e){Ae(e,(n,r)=>{Ed(t,n,r)})}function Ed(t,e,n){const r=new Y("/.info/"+e),s=me(n);t.infoData_.updateSnapshot(r,s);const i=Ci(t.infoSyncTree_,r,s);st(t.eventQueue_,r,i)}function Tl(t){return t.nextWriteId_++}function A1(t,e,n){const r=o1(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=me(s).withIndex(e._queryParams.getIndex());Wc(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Ci(t.serverSyncTree_,e._path,i);else{const a=ui(t.serverSyncTree_,e);o=Jy(t.serverSyncTree_,e._path,i,a)}return st(t.eventQueue_,e._path,o),Ko(t.serverSyncTree_,e,n,null,!0),i},s=>(rs(t,"get for query "+ve(e)+" failed: "+s),Promise.reject(new Error(s))))}function D1(t,e,n,r,s){rs(t,"set",{path:e.toString(),value:n,priority:r});const i=Ei(t),o=me(n,r),a=Nl(t.serverSyncTree_,e),c=wd(o,a,i),u=Tl(t),h=pd(t.serverSyncTree_,e,c,u,!0);jl(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(f,g)=>{const x=f==="ok";x||Ue("set at "+e+" failed: "+f);const p=hn(t.serverSyncTree_,u,!x);st(t.eventQueue_,e,p),Hc(t,s,f,g)});const d=kd(t,e);Gr(t,d),st(t.eventQueue_,d,[])}function P1(t,e,n,r){rs(t,"update",{path:e.toString(),value:n});let s=!0;const i=Ei(t),o={};if(Ae(n,(a,c)=>{s=!1,o[a]=tv(he(e,a),me(c),t.serverSyncTree_,i)}),s)Ie("update() called with empty data.  Don't do anything."),Hc(t,r,"ok",void 0);else{const a=Tl(t),c=t1(t.serverSyncTree_,e,o,a);jl(t.eventQueue_,c),t.server_.merge(e.toString(),n,(u,h)=>{const d=u==="ok";d||Ue("update at "+e+" failed: "+u);const f=hn(t.serverSyncTree_,a,!d),g=f.length>0?Gr(t,e):e;st(t.eventQueue_,g,f),Hc(t,r,u,h)}),Ae(n,u=>{const h=kd(t,he(e,u));Gr(t,h)}),st(t.eventQueue_,e,[])}}function R1(t){rs(t,"onDisconnectEvents");const e=Ei(t),n=zo();Lc(t.onDisconnect_,G(),(s,i)=>{const o=tv(s,i,t.serverSyncTree_,e);My(n,s,o)});let r=[];Lc(n,G(),(s,i)=>{r=r.concat(Ci(t.serverSyncTree_,s,i));const o=kd(t,s);Gr(t,o)}),t.onDisconnect_=zo(),st(t.eventQueue_,G(),r)}function O1(t,e,n){let r;$(e._path)===".info"?r=Wc(t.infoSyncTree_,e,n):r=Wc(t.serverSyncTree_,e,n),iv(t.eventQueue_,e._path,r)}function M1(t,e,n){let r;$(e._path)===".info"?r=Ko(t.infoSyncTree_,e,n):r=Ko(t.serverSyncTree_,e,n),iv(t.eventQueue_,e._path,r)}function L1(t){t.persistentConnection_&&t.persistentConnection_.interrupt(E1)}function rs(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ie(n,...e)}function Hc(t,e,n,r){e&&ts(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function F1(t,e,n,r,s,i){rs(t,"transaction on "+e);const o={path:e,update:n,onComplete:r,status:null,order:iy(),applyLocally:i,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=Id(t,e,void 0);o.currentInputSnapshot=a;const c=o.update(a.val());if(c===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Si("transaction failed: Data returned ",c,o.path),o.status=0;const u=El(t.transactionQueueTree_,e),h=hr(u)||[];h.push(o),bd(u,h);let d;typeof c=="object"&&c!==null&&It(c,".priority")?(d=tr(c,".priority"),I(Yo(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(Nl(t.serverSyncTree_,e)||L.EMPTY_NODE).getPriority().val();const f=Ei(t),g=me(c,d),x=wd(g,a,f);o.currentOutputSnapshotRaw=g,o.currentOutputSnapshotResolved=x,o.currentWriteId=Tl(t);const p=pd(t.serverSyncTree_,e,x,o.currentWriteId,o.applyLocally);st(t.eventQueue_,e,p),Al(t,t.transactionQueueTree_)}}function Id(t,e,n){return Nl(t.serverSyncTree_,e,n)||L.EMPTY_NODE}function Al(t,e=t.transactionQueueTree_){if(e||Dl(t,e),hr(e)){const n=cv(t,e);I(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&B1(t,bi(e),n)}else nv(e)&&Il(e,n=>{Al(t,n)})}function B1(t,e,n){const r=n.map(u=>u.currentWriteId),s=Id(t,e,r);let i=s;const o=s.hash();for(let u=0;u<n.length;u++){const h=n[u];I(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Fe(e,h.path);i=i.updateChild(d,h.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,u=>{rs(t,"transaction put response",{path:c.toString(),status:u});let h=[];if(u==="ok"){const d=[];for(let f=0;f<n.length;f++)n[f].status=2,h=h.concat(hn(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Dl(t,El(t.transactionQueueTree_,e)),Al(t,t.transactionQueueTree_),st(t.eventQueue_,e,h);for(let f=0;f<d.length;f++)ts(d[f])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Ue("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}Gr(t,e)}},o)}function Gr(t,e){const n=av(t,e),r=bi(n),s=cv(t,n);return U1(t,s,r),r}function U1(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],u=Fe(n,c.path);let h=!1,d;if(I(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)h=!0,d=c.abortReason,s=s.concat(hn(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=I1)h=!0,d="maxretry",s=s.concat(hn(t.serverSyncTree_,c.currentWriteId,!0));else{const f=Id(t,c.path,o);c.currentInputSnapshot=f;const g=e[a].update(f.val());if(g!==void 0){Si("transaction failed: Data returned ",g,c.path);let x=me(g);typeof g=="object"&&g!=null&&It(g,".priority")||(x=x.updatePriority(f.getPriority()));const w=c.currentWriteId,y=Ei(t),m=wd(x,f,y);c.currentOutputSnapshotRaw=x,c.currentOutputSnapshotResolved=m,c.currentWriteId=Tl(t),o.splice(o.indexOf(w),1),s=s.concat(pd(t.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally)),s=s.concat(hn(t.serverSyncTree_,w,!0))}else h=!0,d="nodata",s=s.concat(hn(t.serverSyncTree_,c.currentWriteId,!0))}st(t.eventQueue_,n,s),s=[],h&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Dl(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)ts(r[a]);Al(t,t.transactionQueueTree_)}function av(t,e){let n,r=t.transactionQueueTree_;for(n=$(e);n!==null&&hr(r)===void 0;)r=El(r,n),e=ee(e),n=$(e);return r}function cv(t,e){const n=[];return uv(t,e,n),n.sort((r,s)=>r.order-s.order),n}function uv(t,e,n){const r=hr(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Il(e,s=>{uv(t,s,n)})}function Dl(t,e){const n=hr(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,bd(e,n.length>0?n:void 0)}Il(e,r=>{Dl(t,r)})}function kd(t,e){const n=bi(av(t,e)),r=El(t.transactionQueueTree_,e);return m1(r,s=>{Ca(t,s)}),Ca(t,r),rv(r,s=>{Ca(t,s)}),n}function Ca(t,e){const n=hr(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(I(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(I(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(hn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?bd(e,void 0):n.length=i+1,st(t.eventQueue_,bi(e),s);for(let o=0;o<r.length;o++)ts(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function $1(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ue(`Invalid query segment '${n}' in query '${t}'`)}return e}const Yf=function(t,e){const n=W1(t),r=n.namespace;n.domain==="firebase.com"&&Yt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Yt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||JC();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new vy(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Y(n.pathString)}},W1=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(s=z1(t.substring(h,d)));const f=$1(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const g=e.slice(0,u);if(g.toLowerCase()==="localhost")n="localhost";else if(g.split(".").length<=2)n=g;else{const x=e.indexOf(".");r=e.substring(0,x).toLowerCase(),n=e.substring(x+1),i=r}"ns"in f&&(i=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",V1=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=Jf.charAt(n%64),n=Math.floor(n/64);I(n===0,"Cannot push at time == 0");let o=i.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=Jf.charAt(e[s]);return I(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ve(this.snapshot.exportVal())}}class Q1{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return I(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return W(this._path)?null:ed(this._path)}get ref(){return new Ot(this._repo,this._path)}get _queryIdentifier(){const e=Mf(this._queryParams),n=Yu(e);return n==="{}"?"default":n}get _queryObject(){return Mf(this._queryParams)}isEqual(e){if(e=kt(e),!(e instanceof ss))return!1;const n=this._repo===e._repo,r=td(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Rb(this._path)}}function q1(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function jd(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Kn){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==nr)throw new Error(r);if(typeof e!="string")throw new Error(s)}if(t.hasEnd()){if(t.getIndexEndName()!==kn)throw new Error(r);if(typeof n!="string")throw new Error(s)}}else if(t.getIndex()===oe){if(e!=null&&!Yo(e)||n!=null&&!Yo(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(I(t.getIndex()instanceof sd||t.getIndex()===Ry,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function hv(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ot extends ss{constructor(e,n){super(e,n,new od,!1)}get parent(){const e=Iy(this._path);return e===null?null:new Ot(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Kr{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Y(e),r=di(this.ref,e);return new Kr(this._node.getChild(n),r,oe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new Kr(s,di(this.ref,r),oe)))}hasChild(e){const n=new Y(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function A(t,e){return t=kt(t),t._checkNotDeleted("ref"),e!==void 0?di(t._root,e):t._root}function di(t,e){return t=kt(t),$(t._path)===null?C1("child","path",e):Sd("child","path",e),new Ot(t._repo,he(t._path,e))}function Mt(t,e){t=kt(t),kl("push",t._path),Ni("push",e,t._path,!0);const n=lv(t._repo),r=V1(n),s=di(t,r),i=di(t,r);let o;return o=Promise.resolve(i),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function On(t){return kl("remove",t._path),lt(t,null)}function lt(t,e){t=kt(t),kl("set",t._path),Ni("set",e,t._path,!1);const n=new es;return D1(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function je(t,e){_1("update",e,t._path);const n=new es;return P1(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function U(t){t=kt(t);const e=new dv(()=>{}),n=new Pl(e);return A1(t._repo,t,n).then(r=>new Kr(r,new Ot(t._repo,t._path),t._queryParams.getIndex()))}class Pl{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new H1("value",this,new Kr(e.snapshotNode,new Ot(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Q1(this,e,n):null}matches(e){return e instanceof Pl?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function G1(t,e,n,r,s){const i=new dv(n,void 0),o=new Pl(i);return O1(t._repo,t,o),()=>M1(t._repo,t,o)}function K1(t,e,n,r){return G1(t,"value",e)}class Rl{}class Y1 extends Rl{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){Ni("endAt",this._value,e._path,!0);const n=sN(e._queryParams,this._value,this._key);if(hv(n),jd(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ss(e._repo,e._path,n,e._orderByCalled)}}class J1 extends Rl{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){Ni("startAt",this._value,e._path,!0);const n=rN(e._queryParams,this._value,this._key);if(hv(n),jd(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ss(e._repo,e._path,n,e._orderByCalled)}}class X1 extends Rl{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){q1(e,"orderByChild");const n=new Y(this._path);if(W(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new sd(n),s=iN(e._queryParams,r);return jd(s),new ss(e._repo,e._path,s,!0)}}function Jt(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Sd("orderByChild","path",t),new X1(t)}class Z1 extends Rl{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(Ni("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Y1(this._value,this._key)._apply(new J1(this._value,this._key)._apply(e))}}function Xt(t,e){return new Z1(t,e)}function Zt(t,...e){let n=kt(t);for(const r of e)n=r._apply(n);return n}qN(Ot);XN(Ot);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="FIREBASE_DATABASE_EMULATOR_HOST",Qc={};let tS=!1;function nS(t,e,n,r){t.repoInfo_=new vy(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function rS(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Yt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ie("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Yf(i,s),a=o.repoInfo,c;typeof process<"u"&&vf&&(c=vf[eS]),c?(i=`http://${c}?ns=${a.namespace}`,o=Yf(i,s),a=o.repoInfo):o.repoInfo.secure;const u=new ab(t.name,t.options,e);b1("Invalid Firebase Database URL",o),W(o.path)||Yt("Database URL must point to the root of a Firebase Database (not including a child path).");const h=iS(a,t,u,new lb(t.name,n));return new oS(h,t)}function sS(t,e){const n=Qc[e];(!n||n[t.key]!==t)&&Yt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),L1(t),delete n[t.key]}function iS(t,e,n,r){let s=Qc[e.name];s||(s={},Qc[e.name]=s);let i=s[t.toURLString()];return i&&Yt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new k1(t,tS,n,r),s[t.toURLString()]=i,i}class oS{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(j1(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ot(this._repo,G())),this._rootInternal}_delete(){return this._rootInternal!==null&&(sS(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Yt("Cannot call "+e+" on a deleted database.")}}function fv(t=ey(),e){const n=vi(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=__("database");r&&lS(n,...r)}return n}function lS(t,e,n,r={}){t=kt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Yt("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Yt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new io(io.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:C_(r.mockUserToken,t.app.options.projectId);i=new io(o)}nS(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(t){QC(MC),In(new Gt("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return rS(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Rt(xf,wf,t),Rt(xf,wf,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function Ii(t,e,n){var r;if(t=kt(t),kl("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const s=(r=void 0)!==null&&r!==void 0?r:!0,i=new es,o=(c,u,h)=>{let d=null;c?i.reject(c):(d=new Kr(h,new Ot(t._repo,t._path),oe),i.resolve(new cS(u,d)))},a=K1(t,()=>{});return F1(t._repo,t._path,e,o,a,s),i.promise}Wt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Wt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};aS();var uS="firebase",dS="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rt(uS,dS,"app");const pv="@firebase/installations",Td="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv=1e4,gv=`w:${Td}`,yv="FIS_v2",hS="https://firebaseinstallations.googleapis.com/v1",fS=60*60*1e3,pS="installations",mS="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ir=new yl(pS,mS,gS);function vv(t){return t instanceof cr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv({projectId:t}){return`${hS}/projects/${t}/installations`}function wv(t){return{token:t.token,requestStatus:2,expiresIn:vS(t.expiresIn),creationTime:Date.now()}}async function _v(t,e){const r=(await e.json()).error;return ir.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Cv({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function yS(t,{refreshToken:e}){const n=Cv(t);return n.append("Authorization",xS(e)),n}async function bv(t){const e=await t();return e.status>=500&&e.status<600?t():e}function vS(t){return Number(t.replace("s","000"))}function xS(t){return`${yv} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wS({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=xv(t),s=Cv(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:n,authVersion:yv,appId:t.appId,sdkVersion:gv},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await bv(()=>fetch(r,a));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:wv(u.authToken)}}else throw await _v("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=/^[cdef][\w-]{21}$/,qc="";function bS(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=NS(t);return CS.test(n)?n:qc}catch{return qc}}function NS(t){return _S(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=new Map;function Ev(t,e){const n=Ol(t);Iv(n,e),SS(n,e)}function Iv(t,e){const n=Sv.get(t);if(n)for(const r of n)r(e)}function SS(t,e){const n=ES();n&&n.postMessage({key:t,fid:e}),IS()}let Qn=null;function ES(){return!Qn&&"BroadcastChannel"in self&&(Qn=new BroadcastChannel("[Firebase] FID Change"),Qn.onmessage=t=>{Iv(t.data.key,t.data.fid)}),Qn}function IS(){Sv.size===0&&Qn&&(Qn.close(),Qn=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="firebase-installations-database",jS=1,or="firebase-installations-store";let ba=null;function Ad(){return ba||(ba=Xg(kS,jS,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(or)}}})),ba}async function Jo(t,e){const n=Ol(t),s=(await Ad()).transaction(or,"readwrite"),i=s.objectStore(or),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&Ev(t,e.fid),e}async function kv(t){const e=Ol(t),r=(await Ad()).transaction(or,"readwrite");await r.objectStore(or).delete(e),await r.done}async function Ml(t,e){const n=Ol(t),s=(await Ad()).transaction(or,"readwrite"),i=s.objectStore(or),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&Ev(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dd(t){let e;const n=await Ml(t.appConfig,r=>{const s=TS(r),i=AS(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===qc?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function TS(t){const e=t||{fid:bS(),registrationStatus:0};return jv(e)}function AS(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(ir.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=DS(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:PS(t)}:{installationEntry:e}}async function DS(t,e){try{const n=await wS(t,e);return Jo(t.appConfig,n)}catch(n){throw vv(n)&&n.customData.serverCode===409?await kv(t.appConfig):await Jo(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function PS(t){let e=await Xf(t.appConfig);for(;e.registrationStatus===1;)await Nv(100),e=await Xf(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Dd(t);return r||n}return e}function Xf(t){return Ml(t,e=>{if(!e)throw ir.create("installation-not-found");return jv(e)})}function jv(t){return RS(t)?{fid:t.fid,registrationStatus:0}:t}function RS(t){return t.registrationStatus===1&&t.registrationTime+mv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OS({appConfig:t,heartbeatServiceProvider:e},n){const r=MS(t,n),s=yS(t,n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:gv,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await bv(()=>fetch(r,a));if(c.ok){const u=await c.json();return wv(u)}else throw await _v("Generate Auth Token",c)}function MS(t,{fid:e}){return`${xv(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pd(t,e=!1){let n;const r=await Ml(t.appConfig,i=>{if(!Tv(i))throw ir.create("not-registered");const o=i.authToken;if(!e&&BS(o))return i;if(o.requestStatus===1)return n=LS(t,e),i;{if(!navigator.onLine)throw ir.create("app-offline");const a=zS(i);return n=FS(t,a),a}});return n?await n:r.authToken}async function LS(t,e){let n=await Zf(t.appConfig);for(;n.authToken.requestStatus===1;)await Nv(100),n=await Zf(t.appConfig);const r=n.authToken;return r.requestStatus===0?Pd(t,e):r}function Zf(t){return Ml(t,e=>{if(!Tv(e))throw ir.create("not-registered");const n=e.authToken;return $S(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function FS(t,e){try{const n=await OS(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Jo(t.appConfig,r),n}catch(n){if(vv(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await kv(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Jo(t.appConfig,r)}throw n}}function Tv(t){return t!==void 0&&t.registrationStatus===2}function BS(t){return t.requestStatus===2&&!US(t)}function US(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+fS}function zS(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function $S(t){return t.requestStatus===1&&t.requestTime+mv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WS(t){const e=t,{installationEntry:n,registrationPromise:r}=await Dd(e);return r?r.catch(console.error):Pd(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VS(t,e=!1){const n=t;return await HS(n),(await Pd(n,e)).token}async function HS(t){const{registrationPromise:e}=await Dd(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t){if(!t||!t.options)throw Na("App Configuration");if(!t.name)throw Na("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Na(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Na(t){return ir.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="installations",qS="installations-internal",GS=t=>{const e=t.getProvider("app").getImmediate(),n=QS(e),r=vi(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},KS=t=>{const e=t.getProvider("app").getImmediate(),n=vi(e,Av).getImmediate();return{getId:()=>WS(n),getToken:s=>VS(n,s)}};function YS(){In(new Gt(Av,GS,"PUBLIC")),In(new Gt(qS,KS,"PRIVATE"))}YS();Rt(pv,Td);Rt(pv,Td,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="analytics",JS="firebase_id",XS="origin",ZS=60*1e3,eE="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Rd="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye=new qu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},nt=new yl("analytics","Analytics",tE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(t){if(!t.startsWith(Rd)){const e=nt.create("invalid-gtag-resource",{gtagURL:t});return Ye.warn(e.message),""}return t}function Dv(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function rE(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function sE(t,e){const n=rE("firebase-js-sdk-policy",{createScriptURL:nE}),r=document.createElement("script"),s=`${Rd}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function iE(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function oE(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const c=(await Dv(n)).find(u=>u.measurementId===s);c&&await e[c.appId]}}catch(a){Ye.error(a)}t("config",s,i)}async function lE(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await Dv(n);for(const c of o){const u=a.find(d=>d.measurementId===c),h=u&&e[u.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Ye.error(i)}}function aE(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,c]=o;await lE(t,e,n,a,c)}else if(i==="config"){const[a,c]=o;await oE(t,e,n,r,a,c)}else if(i==="consent"){const[a,c]=o;t("consent",a,c)}else if(i==="get"){const[a,c,u]=o;t("get",a,c,u)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){Ye.error(a)}}return s}function cE(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=aE(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function uE(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Rd)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE=30,hE=1e3;class fE{constructor(e={},n=hE){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Pv=new fE;function pE(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function mE(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:pE(r)},i=eE.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw nt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function gE(t,e=Pv,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw nt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw nt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new xE;return setTimeout(async()=>{a.abort()},ZS),Rv({appId:r,apiKey:s,measurementId:i},o,a,e)}async function Rv(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=Pv){var i;const{appId:o,measurementId:a}=t;try{await yE(r,e)}catch(c){if(a)return Ye.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw c}try{const c=await mE(t);return s.deleteThrottleMetadata(o),c}catch(c){const u=c;if(!vE(u)){if(s.deleteThrottleMetadata(o),a)return Ye.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw c}const h=Number((i=u==null?void 0:u.customData)===null||i===void 0?void 0:i.httpStatus)===503?cf(n,s.intervalMillis,dE):cf(n,s.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(o,d),Ye.debug(`Calling attemptFetch again in ${h} millis`),Rv(t,d,r,s)}}function yE(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(nt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function vE(t){if(!(t instanceof cr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class xE{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function wE(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _E(){if(qg())try{await Gg()}catch(t){return Ye.warn(nt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ye.warn(nt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function CE(t,e,n,r,s,i,o){var a;const c=gE(t);c.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&Ye.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Ye.error(g)),e.push(c);const u=_E().then(g=>{if(g)return r.getId()}),[h,d]=await Promise.all([c,u]);uE(i)||sE(i,h.measurementId),s("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[XS]="firebase",f.update=!0,d!=null&&(f[JS]=d),s("config",h.measurementId,f),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e){this.app=e}_delete(){return delete Fs[this.app.options.appId],Promise.resolve()}}let Fs={},ep=[];const tp={};let Sa="dataLayer",NE="gtag",np,Ov,rp=!1;function SE(){const t=[];if(N_()&&t.push("This is a browser extension environment."),E_()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=nt.create("invalid-analytics-context",{errorInfo:e});Ye.warn(n.message)}}function EE(t,e,n){SE();const r=t.options.appId;if(!r)throw nt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ye.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw nt.create("no-api-key");if(Fs[r]!=null)throw nt.create("already-exists",{id:r});if(!rp){iE(Sa);const{wrappedGtag:i,gtagCore:o}=cE(Fs,ep,tp,Sa,NE);Ov=i,np=o,rp=!0}return Fs[r]=CE(t,ep,tp,e,np,Sa,n),new bE(t)}function IE(t=ey()){t=kt(t);const e=vi(t,Xo);return e.isInitialized()?e.getImmediate():kE(t)}function kE(t,e={}){const n=vi(t,Xo);if(n.isInitialized()){const s=n.getImmediate();if(Oo(e,n.getOptions()))return s;throw nt.create("already-initialized")}return n.initialize({options:e})}function jE(t,e,n,r){t=kt(t),wE(Ov,Fs[t.app.options.appId],e,n,r).catch(s=>Ye.error(s))}const sp="@firebase/analytics",ip="0.10.8";function TE(){In(new Gt(Xo,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return EE(r,s,n)},"PUBLIC")),In(new Gt("analytics-internal",t,"PRIVATE")),Rt(sp,ip),Rt(sp,ip,"esm2017");function t(e){try{const n=e.getProvider(Xo).getImmediate();return{logEvent:(r,s,i)=>jE(n,r,s,i)}}catch(n){throw nt.create("interop-component-reg-failed",{reason:n})}}}TE();const AE={apiKey:"AIzaSyCIZn8NmNqICZqkEevSpjTA33FhATJ_Dak",authDomain:"sherazpos.firebaseapp.com",databaseURL:"https://sherazpos-default-rtdb.firebaseio.com",projectId:"sherazpos",storageBucket:"sherazpos.appspot.com",messagingSenderId:"597415567946",appId:"1:597415567946:web:9eb38d977357f825273cb3",measurementId:"G-56K9B8HK61"},Od=Zg(AE);IE(Od);const Ne=fv(Od),O=fv(Od),DE=async t=>{try{const e=A(Ne,"areas/"),n=Mt(e);if((await Ii(e,s=>{if(s=s||{},!Object.values(s).some(i=>i.name.toLowerCase()===t.name.toLowerCase()||i.shortForm.toLowerCase()===t.shortForm.toLowerCase()))return s[n.key]={...t,id:n.key},s})).committed)return await lt(n,{...t,id:n.key}),n.key;throw new Error("Area already exists.")}catch(e){throw console.error("Failed to add area:",e),new Error("Failed to add area")}},Md=async()=>{try{const t=A(Ne,"areas/"),e=await U(t);if(e.exists()){const n=[];return e.forEach(r=>{const s=r.val();n.push({id:r.key,...s})}),n}else return console.log("No areas found."),[]}catch(t){throw console.error("Failed to retrieve areas:",t),new Error("Failed to retrieve areas")}},PE=async t=>{try{const e=A(Ne,"areas"),n=await U(e);if(n.exists()){let r=null;if(n.forEach(s=>{s.val().shortForm===t&&(r=s.key)}),r){const s=A(Ne,`areas/${r}`);await lt(s,null),console.log(`Area with ID ${t} has been deleted.`)}else console.log(`No area found with ID ${t}.`)}else console.log("No areas found.")}catch(e){throw console.error("Failed to delete area:",e),new Error("Failed to delete area")}},op=async t=>{try{t.discount=isNaN(t.discount)?0:t.discount;const e=Mt(A(O,"cashInvoices"));t.id=e.key,await lt(e,t);for(const n of t.products){const r=Zt(A(O,"products"),Jt("productCode"),Xt(n.productCode)),i=(await U(r)).val();if(i){const o=Object.keys(i)[0],a=i[o],u=(isNaN(a.quantity)?0:parseInt(a.quantity))-parseInt(n.quantity);await je(A(O,`products/${o}`),{quantity:u})}}return console.log("Cash Invoice Added"),t.id}catch(e){console.error("Failed to add cash invoice and update product quantities:",e)}},RE=async(t,e)=>{try{const n=A(O,`cashInvoices/${t}`),s=(await U(n)).val();if(!s)throw new Error("Invoice not found");if(s.products&&s.products.length>0)for(const i of s.products){const o=Zt(A(O,"products"),Jt("productCode"),Xt(i.productCode)),c=(await U(o)).val();if(c){const u=Object.keys(c)[0],h=c[u],f=(isNaN(h.quantity)?0:Number(h.quantity||0))-Number(i.quantity||0);await je(A(O,`products/${u}`),{quantity:f})}}if(await je(n,e),e.products)for(const i of e.products){const o=Zt(A(O,"products"),Jt("productCode"),Xt(i.productCode)),c=(await U(o)).val();if(c){const u=Object.keys(c)[0],h=c[u],f=(isNaN(h.quantity)?0:Number(h.quantity||0))-Number(i.quantity);await je(A(O,`products/${u}`),{quantity:f})}}}catch(n){console.error("Failed to update cash invoice and product quantities:",n)}},OE=async t=>{try{const e=A(O,`cashInvoices/${t}`),r=(await U(e)).val();if(!r)throw new Error("Invoice not found");if(r.products&&r.products.length>0)for(const s of r.products){const i=Zt(A(O,"products"),Jt("productCode"),Xt(s.productCode)),a=(await U(i)).val();if(a){const c=Object.keys(a)[0],u=a[c],d=(isNaN(u.quantity)?0:Number(u.quantity))-Number(s.quantity);await je(A(O,`products/${c}`),{quantity:d})}}await On(e)}catch(e){console.error("Failed to delete cash invoice and revert product quantities:",e)}},Mv=async()=>{try{const t=A(O,"cashInvoices"),e=await U(t);return e.val()?Object.values(e.val()):[]}catch(t){console.error("Failed to retrieve cash invoices:",t)}},ME=async t=>{try{const e=A(O,"cashInvoices"),n=await U(e);return(n.val()?Object.values(n.val()):[]).filter(i=>i.products.some(o=>o.productCode===t))}catch(e){return console.error("Failed to retrieve cash invoices by product code:",e),[]}},LE=async t=>{try{const e=Mt(A(O,"customers"));return await lt(e,{...t,id:e.key}),e.key}catch(e){console.error("Failed to add customer:",e)}},FE=async()=>{try{const t=await U(A(O,"customers"));return t.exists()?Object.values(t.val()):[]}catch(t){console.error("Failed to retrieve customers:",t)}},BE=async()=>{try{const t=Zt(A(O,"customers"),Jt("accountType"),Xt("Supplier")),e=await U(t);return e.exists()?Object.values(e.val()):[]}catch(t){return console.error("Failed to retrieve suppliers:",t),[]}},UE=async()=>{try{const t=Zt(A(O,"customers"),Jt("accountType"),Xt("Customer")),e=await U(t);return e.exists()?Object.values(e.val()):[]}catch(t){return console.error("Failed to retrieve customers:",t),[]}},zE=async(t,e)=>{try{const n=A(O,`customers/${t}`);await je(n,e)}catch(n){console.error("Failed to update customer:",n)}},$E=async t=>{try{const e=A(O,`customers/${t}`);await On(e)}catch(e){console.error("Failed to delete customer:",e)}},lp=async t=>{try{t.discount=isNaN(t.discount)?0:t.discount;const e=A(O,"deliveryNotes"),n=Mt(e);await lt(n,t);const r=t.products.map(async s=>{if(s.productCode&&s.productCode!==""){const i=Zt(A(O,"products"),Jt("productCode"),Xt(s.productCode)),o=await U(i);if(o.exists()){const a=o.val(),c=Object.keys(a)[0],h=(isNaN(a.quantity)?0:parseInt(a.quantity))-parseInt(s.quantity);await je(A(O,`products/${c}`),{quantity:h})}}});return await Promise.all(r),n.key}catch(e){console.error("Failed to add delivery note and update product quantities:",e)}},Lv=async(t,e)=>{try{const n=A(O,`deliveryNotes/${t}`),r=await U(n);if(!r.exists())throw new Error("Delivery note not found");const s=r.val();let i=[];s.products&&s.products.length>0&&(i=s.products.map(async a=>{const c=Zt(A(O,"products"),Jt("productCode"),Xt(a.productCode)),u=await U(c);if(u.exists()){const h=u.val(),f=(isNaN(h.quantity)?0:Number(h.quantity||0))+Number(a.quantity),g=Object.keys(h)[0];await je(A(O,`products/${g}`),{quantity:f})}}));let o=[];e.products&&e.products.length>0&&(o=e.products.map(async a=>{const c=Zt(A(O,"products"),Jt("productCode"),Xt(a.productCode)),u=await U(c);if(u.exists()){const h=u.val(),f=(isNaN(h.quantity)?0:Number(h.quantity))-Number(a.quantity),g=Object.keys(h)[0];await je(A(O,`products/${g}`),{quantity:f})}})),await Promise.all([...i,...o]),await je(n,e)}catch(n){console.error("Failed to update delivery note and product quantities:",n)}},WE=async t=>{try{const e=A(O,`deliveryNotes/${t}`),n=await U(e);if(!n.exists())throw new Error("Delivery note not found");const r=n.val();let s=[];r.products&&r.products.length>0&&(s=r.products.map(async i=>{const o=A(O,`products/${i.productCode}`),a=await U(o);if(a.exists()){const c=a.val(),h=(isNaN(c.quantity)?0:Number(c.quantity))-Number(i.quantity),d=Object.keys(c)[0];await je(A(O,`products/${d}`),{quantity:h})}})),await On(e),await Promise.all(s)}catch(e){console.error("Failed to delete delivery note and revert product quantities:",e)}},Fv=async()=>{try{const t=await U(A(O,"deliveryNotes"));return t.exists()?Object.entries(t.val()).map(([e,n])=>({id:e,...n})):[]}catch(t){console.error("Failed to retrieve delivery notes:",t)}},VE=async t=>{try{const e=await U(A(O,"deliveryNotes")),n=e.exists()?e.val():{};return Object.keys(n).flatMap(s=>{const i=n[s];return i.products.filter(a=>a.productCode===t).map(a=>({...i,...a}))})}catch(e){return console.error("Failed to retrieve delivery notes:",e),[]}},ap=async t=>{try{t.discount=isNaN(t.discount)?0:t.discount;const e=Mt(A(O,"quotations"));return await lt(e,t),e.key}catch(e){console.error("Failed to add quotation:",e)}},HE=async(t,e)=>{try{console.log(t),await je(A(O,`quotations/${t}`),e)}catch(n){console.error("Failed to update quotation:",n)}},Ea=async t=>{try{await On(A(O,`quotations/${t}`))}catch(e){console.error("Failed to delete quotation:",e)}},Ll=async()=>{try{const t=A(O,"quotations"),e=await U(t);return e.exists()?Object.entries(e.val()).map(([n,r])=>({id:n,...r})):[]}catch(t){console.error("Failed to get all quotations:",t)}},QE=async t=>{try{return(await Ll()).flatMap(r=>r.products.filter(i=>i.productCode===t).map(i=>({...r,...i})))}catch(e){return console.error("Failed to retrieve quotations:",e),[]}},Ld=async t=>{const e=t.toLowerCase();try{const r=(await U(A(O,"products"))).val();return r?Object.values(r).find(i=>i.productCode===e):null}catch(n){return console.error("Failed to retrieve product:",n),null}},qE=async t=>{try{const e=t.productCode.toLowerCase();if(await Ld(e)){alert("Product already exists with this code");return}const n=Mt(A(O,"products")),r=n.key,s=(t.alternatives||[]).filter(i=>i.productCode&&i.productCode.trim()!=="");if(await lt(n,{...t,id:r,productCode:e,alternatives:s}),s.length>0)for(let i of s){const a=(await U(A(O,"products"))).val(),c=Object.values(a).find(u=>u.productCode===i.productCode);if(c){const u=A(O,`products/${c.id}`);await Ii(u,h=>(h&&h.alternatives.push({productCode:e,brand:t.brand,name:t.name,sellingPrice1:t.sellingPrice1}),h))}}return r}catch(e){console.error("Failed to add product and manage alternatives:",e)}},Bv=async()=>{try{const t=await U(A(O,"products"));return t.exists()?Object.values(t.val()):[]}catch(t){return console.error("Failed to retrieve products:",t),[]}},GE=async(t,e)=>{try{const n=A(O,`products/${t}`),s=(await U(n)).val();if(!s)throw new Error(`Product with ID ${t} not found`);const i=s.productCode,o=(e.alternatives||[]).filter(a=>a.productCode&&a.productCode.trim()!=="");await je(n,e);for(let a of o){const u=(await U(A(O,"products"))).val(),h=Object.values(u).find(d=>d.productCode===a.productCode);if(h){const d=A(O,`products/${h.id}`);await Ii(d,f=>(f&&(f.alternatives=f.alternatives.filter(g=>g.productCode!==i),f.alternatives.push({productCode:i,brand:e.brand||s.brand,name:e.name||s.name,sellingPrice1:e.sellingPrice1||s.sellingPrice1})),f))}}}catch(n){console.error("Failed to update product and manage alternatives:",n)}},KE=async t=>{try{const n=(await U(A(O,`products/${t}`))).val();if(!n)throw new Error(`Product with ID ${t} not found`);const r=n.productCode,s=n.alternatives||[];for(let i of s){const a=(await U(A(O,"products"))).val(),c=Object.values(a).find(u=>u.productCode===i.productCode);if(c){const u=A(O,`products/${c.id}`);await Ii(u,h=>(h&&(h.alternatives=h.alternatives.filter(d=>d.productCode!==r)),h))}}await On(A(O,`products/${t}`))}catch(e){console.error("Failed to delete product and manage alternatives:",e)}},YE=async t=>{try{const e=A(Ne,"categories"),n=Mt(e);return await lt(n,{id:n.key,name:t.name,shortForm:t.shortForm,subCategories:t.subCategories||[]}),n.key}catch(e){throw console.error("Failed to add category:",e),new Error("Failed to add category")}},Fl=async()=>{try{const t=A(Ne,"categories"),e=await U(t);if(e.exists()){const n=[];return e.forEach(r=>{const s=r.val();n.push({id:r.key,...s})}),n}else return console.log("No categories found."),[]}catch(t){throw console.error("Failed to retrieve categories:",t),new Error("Failed to retrieve categories")}},JE=async(t,e)=>{try{const n=A(Ne,`categories/${t}/subCategories`),r=Mt(n);await lt(r,{name:e.name,shortForm:e.shortForm})}catch(n){throw console.error("Failed to add subcategory:",n),new Error("Failed to add subcategory")}},XE=async()=>{try{const t=A(Ne,"categories"),e=await U(t),n=[];return e.exists()?(e.forEach(r=>{const s=r.key,i=A(Ne,`categories/${s}/subCategories`);U(i).then(o=>{o.exists()?o.forEach(a=>{const c=a.val();n.push({id:a.key,...c,categoryId:s})}):console.log(`No subcategories found for category ${s}.`)})}),n):(console.log("No categories found."),[])}catch(t){throw console.error("Failed to retrieve subcategories:",t),new Error("Failed to retrieve subcategories")}},ZE=async t=>{try{const e=A(Ne,"categories"),n=await U(e);if(n.exists()){let r=!1;n.forEach(s=>{if(s.val().shortForm===t){const o=A(Ne,`categories/${s.key}`);On(o),r=!0,console.log(`Deleted category with name: ${t}`)}}),r||console.log(`No category found with name: ${t}`)}else console.log("No categories found.")}catch(e){throw console.error("Failed to delete category:",e),new Error("Failed to delete category")}},eI=async t=>{try{const e=A(Ne,"categories"),n=await U(e);if(n.exists()){let r=[],s=!1;n.forEach(i=>{const o=i.key,a=A(Ne,`categories/${o}/subCategories`);r.push(U(a).then(c=>{if(c.exists()){let u=!1;c.forEach(h=>{if(h.key===t){const d=A(Ne,`categories/${o}/subCategories/${t}`);On(d),u=!0,s=!0,console.log(`Deleted subcategory with ID: "${t}" in category ID: "${o}"`)}}),u||console.log(`No subcategory found with ID: "${t}" in category ID: "${o}".`)}else console.log(`No subcategories found in category ID: "${o}".`)}))}),await Promise.all(r),s||console.log(`No subcategory found with ID: "${t}" in any category.`)}else console.log("No categories found.")}catch(e){throw console.error("Failed to delete subcategory:",e),new Error("Failed to delete subcategory")}},tI=({machines:t,onSelectMachine:e})=>l.jsxs("select",{onChange:n=>e(n.target.value),className:"w-full border p-1 mb-2",children:[l.jsx("option",{value:"",children:"Select Machine"}),t.map(n=>l.jsxs("option",{value:n.id,children:[n.shortForm," : ",n.name]},n.id))]}),nI=({submachines:t,onSelectSubmachine:e})=>l.jsxs("select",{onChange:n=>e(n.target.value),className:"w-full border p-1 mb-2",children:[l.jsx("option",{value:"",children:"Select Submachine"}),t.map(n=>l.jsxs("option",{value:n.shortForm,children:[n.shortForm," : ",n.name]},n.shortForm))]}),rI=({products:t,onSelectProduct:e})=>{const n=Object.keys(t.length>0?t[0]:{}),r=["alternatives","appliedModels","picture"],s=n.filter(o=>!r.includes(o)),i=o=>{e(o)};return l.jsxs("table",{className:"min-w-full max-w-full overflow-auto  border ",style:{zIndex:500},children:[l.jsx("thead",{children:l.jsx("tr",{className:"text-white bg-blue-800",children:s.map((o,a)=>l.jsx("th",{className:"py-1 px-4 text-sm font-normal border-b text-left",children:o.replace(/([A-Z])/g," $1").replace(/^./,c=>c.toUpperCase())},a))})}),l.jsx("tbody",{className:"bg-blue-100 ",children:t.map((o,a)=>l.jsx("tr",{className:"cursor-pointer hover:bg-gray-100 py-1 text-sm ",onClick:()=>i(o),children:s.map((c,u)=>l.jsx("td",{className:"py-2 px-4 border-b",children:typeof o[c]=="string"&&o[c].length>10?o[c].substring(0,10)+"...":o[c]},u))},a))})]})},is=({onProductSelect:t,productCode:e})=>{const[n,r]=_.useState(null),[s,i]=_.useState(null),[o,a]=_.useState([]);_.useEffect(()=>{(async()=>{const k=await Fl();a(k)})()},[]);const[c,u]=_.useState([]),[h,d]=_.useState(""),[f,g]=_.useState(""),[x,p]=_.useState(""),[w,y]=_.useState("");_.useEffect(()=>{(async()=>{const k=await Bv();u(k)})()},[]);const m=c.filter(S=>n&&!S.appliedModels.some(N=>N.make.toLowerCase()===n.shortForm.toLowerCase())||s&&!S.appliedModels.some(N=>N.type.toLowerCase()===s.shortForm.toLowerCase())?!1:S.name.toLowerCase().includes(h.toLowerCase())&&S.uniqueId.toLowerCase().includes(x.toLowerCase())&&S.productCode.toLowerCase().includes(w.toLowerCase())),v=S=>{const k=o.find(N=>N.id===parseInt(S));r(k),i(null)},C=S=>{const k=n.subCategories.find(N=>N.shortForm===S);i(k)},b=S=>{t(S)};return l.jsxs("div",{className:"flex min-h-[70vh] max-h-[70vh] bg-background scrollbar relative",style:{zIndex:100},children:[l.jsxs("div",{className:"w-[15%] p-4",children:[l.jsx("h2",{className:"font-bold mb-2",children:"Machines"}),l.jsx(tI,{machines:o,onSelectMachine:v}),n&&l.jsx(nI,{submachines:n.subCategories,onSelectSubmachine:C})]}),l.jsxs("div",{className:"w-[85%] p-4",children:[l.jsx("h2",{className:"mb-2",children:"Products"}),l.jsxs("div",{className:"mb-2 flex gap-2",children:[l.jsx("input",{type:"text",placeholder:"Search by Product Name",value:h,onChange:S=>d(S.target.value),className:"w-full border p-2 mb-2"}),l.jsx("input",{type:"text",placeholder:"Search by Product Code",value:e||w,onChange:S=>y(S.target.value),className:"w-full border p-2 mb-2"}),l.jsx("input",{type:"text",placeholder:"Search by OEM Code",value:f,onChange:S=>g(S.target.value),className:"w-full border p-2 mb-2"}),l.jsx("input",{type:"text",placeholder:"Search by Unique ID",value:x,onChange:S=>p(S.target.value),className:"w-full border p-2 mb-2"})]}),l.jsx("div",{className:"overflow-auto",style:{maxHeight:"50vh"},children:l.jsx(rI,{products:m,onSelectProduct:b})})]})]})};function Uv({formData:t,onDataChange:e,Rows:n,mode:r}){const[s,i]=_.useState([]),[o,a]=_.useState(1),[c,u]=_.useState(!1),[h,d]=_.useState(null);_.useEffect(()=>{if(n&&n.length>0){i(n);const m=Math.max(...n.map(v=>v.siNo));a(m+1)}},[n]);const f=()=>{const m={siNo:o,type:"",productCode:"",brand:"",description:"",unit:"",quantity:1,gAmount:0,discount:0,totalVat:0,id:""},v=[...s,m];i(v),a(o+1),e(v)},g=m=>{const v=s.filter((C,b)=>b!==m);i(v),e(v)},x=(m,v,C)=>{const b=s.map((S,k)=>k===m?{...S,[v]:C}:S);i(b),e(b)},p=m=>{d(m),u(!0)},w=()=>{u(!1),d(null)},y=m=>{if(h!==null){let v=!1,C=s.map((b,S)=>S===h?{...b,brand:m.brand,description:m.name,unit:m.basicUnit,totalVat:Number(m.vatType),productCode:m.productCode,gAmount:Number(m.sellingPrice1),id:m.id}:S!==h&&b.productCode===m.productCode?(v=!0,{...b,quantity:b.quantity+1}):b);v&&(C=C.filter((b,S)=>S!==h)),i(C),e(C)}w()};return l.jsxs("div",{className:"mt-6 min-h-[10vh] w-[98%] mx-auto",children:[l.jsx("button",{onClick:f,className:"bg-white text-black border-gray-300 border  px-6 py-2 mb-3 focus:scale-95",type:"button",children:"Add Product"}),l.jsx("div",{className:"min-h-[30vh] max-h-[30vh] scrollbar overflow-auto bg-blue-100",children:l.jsxs("table",{className:"w-full border-collapse border border-gray-300 bg-blue-100",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-blue-900 text-white",children:[l.jsx("th",{className:"border border-gray-300 px-1 italic font-bold text-sm bg-yellow-100 text-black",children:"S.I No"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Type"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Product Code"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Brand"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Description"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Unit"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Quantity"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"G. Amount"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Discount %"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Total VAT %"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Actions"})]})}),l.jsx("tbody",{children:s.map((m,v)=>l.jsxs("tr",{children:[l.jsx("td",{className:"border min-w-20 border-gray-300 text-center",children:m.siNo}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:m.type,onChange:C=>x(v,"type",C.target.value),className:"bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:m.productCode,onClick:()=>p(v),readOnly:!0,className:"w-full bg-transparent outline-none cursor-pointer focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:m.brand,onChange:C=>x(v,"brand",C.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:m.description,onChange:C=>x(v,"description",C.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:m.unit,onChange:C=>x(v,"unit",C.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:m.quantity,min:0,onChange:C=>x(v,"quantity",C.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:m.gAmount,min:0,onChange:C=>x(v,"gAmount",C.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:m.discount,min:0,onChange:C=>x(v,"discount",C.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:m.totalVat,min:0,onChange:C=>x(v,"totalVat",C.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 py-1 text-center px-1",children:l.jsx("button",{onClick:()=>g(v),className:"text-red-500",type:"button",children:"Delete"})})]},m.siNo))})]})}),c&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background",children:[l.jsx("button",{className:"text-red-500 mb-2",type:"button",onClick:w,children:"Close"}),l.jsx(is,{onProductSelect:y})]})})]})}const sI=({mode:t,formData:e,totalDetails:n,onPaymentChange:r})=>{const[s,i]=_.useState(0),[o,a]=_.useState(0),[c,u]=_.useState(n.total||0);_.useEffect(()=>{if(e.payment==="Both"&&!isNaN(c)&&!isNaN(s)){const d=Math.max(c-s,0);a(d),console.log("Calculated Credit Amount:",d),r({cashAmount:s,creditAmount:d}),console.log("Passing to Parent - Cash Amount:",s,"Credit Amount:",d)}},[s,c,e.payment]);const h=d=>{const f=parseFloat(d.target.value)||0;f>c?(i(c),console.log("Cash Amount exceeded total, set to Total Amount:",c)):(i(f),console.log("Updated Cash Amount:",f))};return e.payment!=="Both"?null:l.jsxs("div",{className:"flex items-center col-span-2 gap-4",children:[l.jsxs("div",{className:"flex relative items-center flex-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"Cash Amount:"}),l.jsx("input",{type:"number",value:s||"",onChange:h,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!=="delete"?"bg-white":""}`,disabled:t==="delete",min:"0",max:c,step:"0.01"})]}),l.jsxs("div",{className:"flex relative items-center flex-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"Credit Amount:"}),l.jsx("input",{type:"number",value:o||"",className:"h-7 px-1 border border-gray-600 w-full ml-1 bg-gray-100",readOnly:!0})]})]})};function iI(t){if(!(t instanceof Date))throw new Error("Input must be a Date object");const e=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return`${e}/${n}/${r}`}function zv({mode:t,initialInvoice:e}){_.useState("unPaid");const[n,r]=_.useState(t||"none"),[s,i]=_.useState(e||null),[o,a]=_.useState(!1),[c,u]=_.useState([]),[h,d]=_.useState([]),[f,g]=_.useState([]),[x,p]=_.useState([]),[w,y]=_.useState([]),[m,v]=_.useState(!1),[C,b]=_.useState(!1),S=async()=>{const B=await Mv();g(B);const Q=await Fv();y(Q);const ue=await Ll();p(ue)};_.useEffect(()=>{const B=async()=>{const Q=await Md();u(Q);const ue=await UE();d(ue)};S(),B()},[]);const k=B=>{var ue,Mn;const Q={...B,type:((ue=B.type)==null?void 0:ue.toLowerCase())||null,status:((Mn=B.status)==null?void 0:Mn.toLowerCase())||"unpaid"};i(Q),a(!1),v(Q.status==="paid"),console.log("Selected Invoice:",Q)},N=B=>{r(B),i(null),a(B==="edit")},T=async()=>{var Q;if(!s)return;const B=(Q=s.invoiceType)==null?void 0:Q.toLowerCase();if(console.log("Invoice type:",B),B==="delivery")try{i(ue=>({...ue,status:"paid"})),v(!0),await Lv(s.id,{...s,status:"paid"}),await S(),alert("Invoice marked as paid successfully")}catch(ue){console.error("Error updating invoice status:",ue),alert("Error updating invoice status")}},j=()=>{b(B=>!B),C||r("add")};return l.jsx("div",{children:l.jsxs("div",{className:"w-[98%] mx-auto",children:[l.jsxs("nav",{className:"flex gap-1",children:[!C&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>N("add"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Add"}),l.jsx("button",{onClick:()=>N("edit"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Edit"}),l.jsx("button",{onClick:()=>N("delete"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Delete"})]}),l.jsx("button",{onClick:j,className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:C?"Hide Quotation Table":"Show Quotation Table"})]}),l.jsxs(l.Fragment,{children:[n==="none"&&l.jsx(Ia,{mode:"delete",initialInvoice:{},areas:c,customers:h,cb:S}),(n==="edit"||n==="delete")&&!s&&l.jsxs("div",{className:"h-[94vh] w-[85%] mx-auto mt-6 flex justify-between",children:[l.jsxs("div",{className:"relative",children:["Select Invoice: ",l.jsx("input",{type:"text"}),l.jsx(J,{items:f,onSelect:k,style:{top:"top-[3px] left-[92%]"},columns:[{key:"id",label:"Id"},{key:"accountName",label:"Customer"},{key:"DocNo",label:"DocNo"},{key:"date",label:"Date"},{key:"total",label:"Total"}],name:"invoiceList",all:!0})]}),l.jsxs("div",{className:"relative",children:["Select Quotation: ",l.jsx("input",{type:"text"}),l.jsx(J,{items:x,onSelect:k,style:{top:"top-[3px] left-[92%]"},columns:[{key:"id",label:"Id"},{key:"accountName",label:"Customer"},{key:"DocNo",label:"DocNo"},{key:"date",label:"Date"},{key:"total",label:"Total"}],name:"invoiceList",all:!0})]}),l.jsxs("div",{className:"relative",children:["Select Delivery Note: ",l.jsx("input",{type:"text"}),l.jsx(J,{items:w,onSelect:k,style:{top:"top-[3px] left-[92%]"},columns:[{key:"id",label:"Id"},{key:"accountName",label:"Customer"},{key:"DocNo",label:"DocNo"},{key:"date",label:"Date"},{key:"total",label:"Total"}],name:"invoiceList",all:!0})]})]}),n==="add"&&l.jsx(Ia,{mode:"add",initialInvoice:{terms:"Cash",branch:2,LOC:2,date:iI(new Date(Date.now()))},areas:c,customers:h,cb:S,showQuotationTable:C}),(n==="edit"||n==="delete")&&s&&l.jsx(Ia,{mode:n,initialInvoice:s,areas:c,customers:h,cb:S}),s&&(s.invoiceType==="Delivery"||s.invoiceType==="delivery")&&l.jsx("button",{onClick:T,className:`mt-1 text-white px-4 py-2 w-full ${m?"bg-gray-500":"bg-blue-500"}`,disabled:s.status==="paid",children:"Mark as Paid"})]})]})})}const oI=[{shortForm:"UAE",name:"Dirham"},{shortForm:"USD",name:"American Dollar"}],lI=[{shortForm:"Cash",name:"Cash Invoice"},{shortForm:"Delivery",name:"Delivery Note"},{shortForm:"Quotation",name:"Quotation"}],aI=[{name:"Salesman 1"},{name:"Salesman 2"},{name:"Salesman 3"},{name:"Salesman 4"}],cI=[{name:"Cash"},{name:"Credit Card"},{name:"Both"}],uI=[{name:"Local"},{name:"International"}],ne={id:"",terms:"Cash",LOC:"",DocNo:"",date:new Date(Date.now()),accCode:"",accountName:"",refNo:"",curr:"",rate:"",docType:"",note:"",docNo1:"",sMan:"",MDoc:"",cashAmount:0,creditAmount:0,payment:"Cash",delPlace:"",area:"",type:"",PONo:"",total:0,products:[]},rn={grossTotal:0,discount:0,disAmount:0,vatAmount:0,total:0,netTotal:0};function Ia({mode:t,initialInvoice:e,fullheight:n,areas:r,customers:s,cb:i,showQuotationTable:o}){const[a,c]=_.useState(ne),[u,h]=_.useState("Cash"),[d,f]=_.useState(!1),[g,x]=_.useState(e.invoiceType||null),[p,w]=_.useState(rn),[y,m]=_.useState({cashAmount:0,creditAmount:0}),[v,C]=_.useState([]);_.useEffect(()=>{(async()=>{const M=await Ll();C(M)})()},[]);const b=R=>{f(R),p.extraDiscount=R,p.netTotal=(p.total-p.disAmount-R).toFixed(3)},S=R=>{m(R),c(M=>({...M,cashAmount:R.cashAmount,creditAmount:R.creditAmount}))},k=R=>{c(M=>({...M,accountName:R}))},N=R=>{c(M=>({...M,curr:R}))},T=R=>{c(M=>({...M,docType:R})),h(R)},j=R=>{c(M=>({...M,sMan:R}))},B=R=>{c(M=>({...M,payment:R}))},Q=R=>{c(M=>({...M,area:R.name}))},ue=R=>{c(M=>({...M,type:R}))},Mn=R=>{let M=0,pe=0,Se=0,Ln=0,gt=0,tn=0;R.forEach(pr=>{const Bl=Number(pr.gAmount||0)*pr.quantity,qv=Number(pr.totalVat||0),Gv=Number(pr.discount||0);M+=Bl;let Bd=Number((Bl*qv/100).toFixed(3));Ln+=Bd;let Kv=Number((Bl+Bd).toFixed(3)),Yv=Number((Kv*Gv/100).toFixed(3));Se+=Yv}),pe=Number((Se/M*100).toFixed(3)),gt=(M+Ln).toFixed(3),tn=(gt-Se-d).toFixed(3),console.log("Extra Discount: "+d),console.log("netTotatl: "+tn),w({extraDiscount:d,grossTotal:M,discount:pe,disAmount:Se,vatAmount:Ln,total:gt,netTotal:tn}),c(pr=>({...pr,products:R}))};_.useEffect(()=>{c(R=>({...R,id:e.id||ne.id,terms:e.terms||ne.terms,LOC:e.LOC||ne.LOC,DocNo:e.DocNo||ne.DocNo,date:e.date||ne.date,accCode:e.accCode||ne.accCode,accountName:e.accountName||"",refNo:e.refNo||ne.refNo,curr:e.curr||ne.curr,rate:e.rate|ne.rate,docType:e.docType|ne.docType,note:e.note||ne.note,docNo1:e.docNo1||ne.docNo1,sMan:e.sMan||ne.sMan,MDoc:e.MDoc||ne.MDoc,payment:e.payment||ne.payment,cashAmount:e.cashAmount||ne.cashAmount,creditAmount:e.creditAmount||ne.creditAmount,delPlace:e.delPlace||ne.delPlace,area:e.area||ne.area,PONo:e.PONo||ne.PONo,type:e.type||ne.type,products:e.products||ne.products,total:e.total||ne.total})),w({grossTotal:e.grossTotal||rn.grossTotal,discount:e.discount||rn.discount,disAmount:e.disAmount||rn.disAmount,vatAmount:e.vatAmount||rn.vatAmount,total:e.total||rn.total,netTotal:e.netTotal||rn.netTotal}),h(e.invoiceType||"Cash"),x(e.invoiceType||null)},[e]);const We=R=>{const{name:M,value:pe}=R.target;c(Se=>({...Se,[M]:pe}))},fr=async R=>{R.preventDefault();const{id:M,...pe}=a;if(t==="add")window.electron.ipcRenderer.send("open-invoice-window",{...pe,...p}),u==="Cash"?(await op({...pe,...p,invoiceType:u}),alert("Cash Invoice Created")):u==="Delivery"?(await lp({...pe,...p,invoiceType:u}),alert("Delivery Note Created")):(await ap({...pe,...p,invoiceType:u}),await ap({...pe,...p,invoiceType:u}),alert("Quotation Created"));else if(t==="edit"){console.log(u+" "+g);let Se=!0;g==="Cash"&&u==="Cash"&&await RE(M,{...pe,...p}),g==="Delivery"&&u==="Delivery"&&await Lv(M,{...pe,...p}),g==="Quotation"&&u==="Quotation"?await HE(M,{...pe,...p}):g==="Quotation"&&u==="Cash"?(await op({...pe,...p,invoiceType:u}),await Ea(M)):g==="Quotation"&&u==="Delivery"?(await lp({...pe,...p,invoiceType:u}),await Ea(M)):(Se=!1,alert("Cannot change invoice type...")),Se&&alert("Updated Invoice")}else t==="delete"&&(u==="Cash"?(await OE(M),alert("Cash Invoice deleted")):u==="Delivery"?(await WE(M),alert("Delivery Note deleted")):u==="Quotation"&&(await Ea(M),alert("Quotation deleted")));c(ne),w(rn),i&&i()},[at,P]=_.useState(t==="delete"),F=R=>Math.floor(R);_.useEffect(()=>{w(R=>({...R,total:F(p.total)}))},[p.total]);const z=R=>{c(M=>({...M,products:[...M.products,...R.products]})),e.products=a.products};return l.jsxs("form",{onSubmit:fr,className:`${n?"min-h-[100vh]  ":"min-h-[92vh]"}`,children:[l.jsx("div",{className:"mx-auto",children:l.jsxs("div",{className:"flex items-center w-[30%] mx-auto",children:[l.jsx("span",{className:"w-[35%] text-right inline-block",children:"Invoice Type:"}),l.jsxs("select",{name:"invoiceType",value:u,onChange:R=>h(R.target.value),className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete",children:[l.jsx("option",{value:"Cash",children:"Cash Invoice"}),l.jsx("option",{value:"Delivery",children:"Delivery Note"}),l.jsx("option",{value:"Quotation",children:"Quotation"})]})]})}),l.jsxs("div",{className:`w-[96%] mx-auto  grid grid-cols-6 gap-3 p-3 ${n?"mt-0":"mt-10"}`,children:[l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[35%] text-right inline-block",children:"Terms:"}),l.jsx("input",{type:"text",name:"terms",value:a.terms,onChange:We,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[50%] text-right inline-block",children:"Branch:"}),l.jsx("input",{type:"text",name:"branch",value:2,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:!0})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[13%] text-right inline-block",children:"Name:"}),l.jsx("input",{type:"text",name:"name",value:"Main Branch",className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:!0})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"LOC:"}),l.jsx("input",{type:"text",name:"LOC",value:a.LOC,onChange:We,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Doc.No:"}),l.jsx("input",{type:"number",name:"DocNo",value:a.DocNo,onChange:We,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[30%] text-right inline-block",children:"Date:"}),l.jsx("input",{type:"text",value:a.date,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:!0})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[36%] text-right inline-block",children:"Acc.Code:"}),l.jsx("input",{type:"text",name:"accCode",value:a.accCode,onChange:We,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2 relative",children:[l.jsx("span",{className:"w-[13%] text-right inline-block",children:"Name:"}),l.jsx("input",{type:"text",value:a.accountName,onChange:k,className:`h-7 px-1 border border-gray-600  w-full ml-1  ${t!="delete"?"bg-white":""} `,disabled:!0}),!at&&l.jsx(J,{items:s,onSelect:k,style:{top:"top-1 left-[95%]"},columns:[{key:"name",label:"Name"},{key:"address",label:"Address"},{key:"mobile",label:"Mobile"},{key:"email",label:"Email"},{key:"description",label:"Description"},{key:"SAL",label:"SAL#"},{key:"area",label:"Area"},{key:"vatCode",label:"VAT code"},{key:"TmId",label:"TmID"}]})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Ref No:"}),l.jsx("input",{type:"text",name:"refNo",value:a.refNo,onChange:We,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1 relative",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Curr:"}),l.jsx("input",{type:"text",name:"curr",value:a.curr,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}    `,disabled:!0}),!at&&l.jsx(J,{items:oI,onSelect:N,style:{top:"top-1 left-[93%]"},columns:[{key:"shortForm",label:"Short Form"},{key:"name",label:"Name"}]})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[30%] text-right inline-block",children:"Rate:"}),l.jsx("input",{type:"text",name:"rate",value:a.rate,onChange:We,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block text-nowrap",children:"Doc Type:"}),l.jsx("input",{type:"text",name:"Invoice Type",value:u,onChange:We,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0}),!at&&l.jsx(J,{items:lI,onSelect:T,style:{top:"top-1 left-[92%]"},columns:[{key:"shortForm",label:"Type"},{key:"name",label:"Name"}]})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[13%] text-right inline-block",children:"Note:"}),l.jsx("input",{type:"text",name:"note",value:a.note,onChange:We,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Doc No:"}),l.jsx("input",{type:"text",name:"docNo1",value:a.docNo1,onChange:We,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"S.Man:"}),l.jsx("input",{type:"text",name:"sMan",value:a.sMan,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0}),!at&&l.jsx(J,{items:aI,onSelect:j,style:{top:"top-1 left-[93%]"},columns:[{key:"name",label:"Name"}]})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[30%] text-right inline-block",children:"MDoc:"}),l.jsx("input",{type:"Number",name:"MDoc",value:a.MDoc,onChange:We,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"Payment:"}),l.jsx("input",{type:"text",name:"payment",value:a.payment,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0}),!at&&l.jsx(J,{items:cI,onSelect:B,style:{top:"top-1 left-[92%]"},columns:[{key:"name",label:"Mode of Payment"}]})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[28%] text-right inline-block",children:"DelPlace:"}),l.jsx("input",{type:"text",name:"delPlace",value:a.delPlace,onChange:We,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"Area:"}),l.jsx("input",{type:"text",name:"area",value:a.area,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0}),!at&&l.jsx(J,{items:r,onSelect:Q,style:{top:"top-1 left-[92%]"},columns:[{key:"name",label:"Area Name"},{key:"shortForm",label:"Area ShortForm"}],all:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"PO No:"}),l.jsx("input",{type:"Number",name:"PONo",value:a.PONo,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:at,onChange:We})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Type:"}),l.jsx("input",{type:"text",name:"type",value:a.type,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0}),!at&&l.jsx(J,{items:uI,onSelect:ue,style:{top:"top-1 left-[93%]"},columns:[{key:"name",label:"Name"}]})]})]}),o&&l.jsx("div",{className:"mt-4",children:l.jsxs("div",{className:"relative w-[274px]",children:["Select Quotation: ",l.jsx("input",{type:"text"}),l.jsx(J,{items:v,onSelect:z,style:{top:"top-[3px] left-[92%]"},columns:[{key:"id",label:"Id"},{key:"accountName",label:"Customer"},{key:"DocNo",label:"DocNo"},{key:"date",label:"Date"},{key:"total",label:"Total"}],name:"invoiceList",all:!0,className:"mt-10"})]})}),l.jsx("div",{children:l.jsx(Uv,{formData:a,onDataChange:Mn,Rows:a.products,mode:t})}),l.jsxs("div",{className:"grid grid-cols-4 gap-3 mt-4 mb-4",children:[l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Gross Total:"}),l.jsx("input",{value:p.grossTotal||0,name:"grossTotal",className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Discount%:"}),l.jsx("input",{type:"number",value:p.discount||0,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Amount:"}),l.jsx("input",{type:"number",name:"",value:p.disAmount||0,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Extra Discount:"}),l.jsx("input",{type:"number",name:"",className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,onChange:R=>b(R.target.value)})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Net Total:"}),l.jsx("input",{type:"number",name:"",value:p.netTotal||0,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Vat Amount:"}),l.jsx("input",{type:"number",name:"",value:p.vatAmount||0,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Total:"}),console.log(p.total),l.jsx("input",{type:"number",value:F(p.total)||0,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!=="delete"?"bg-white":""}`,disabled:!0})]}),l.jsx(sI,{mode:t,formData:a,totalDetails:p,onPaymentChange:S})]}),!(t==="delete"&&!Object.keys(e).length===0)&&l.jsx("div",{className:"flex space-x-2 mt-2",children:l.jsxs("button",{type:"submit",onClick:fr,className:"bg-white px-5 py-1 w-full border border-gray-100",children:[t," Invoice"]})})]})}const dI=()=>l.jsx("div",{children:l.jsx("div",{className:"border border-gray-400 ",children:l.jsxs("ul",{className:"flex gap-2 ml-6",children:[l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openCashInvoice")},className:"nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-95",children:l.jsxs("li",{className:"flex w-full h-full",children:[l.jsx("img",{src:ps,className:"lg:w-5 nah-h mr-1 w-4 lg:mr-5"}),"Quotation"]})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openInvoiceViewer")},className:"ml-1 mr-8    nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-75 transition-all",children:l.jsx("img",{src:ms,className:"lg:w-4 nav-ph w-3 "})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openPurchaseInvoice")},className:"nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-95",children:l.jsxs("li",{className:"flex w-full h-full",children:[l.jsx("img",{src:ps,className:"lg:w-5  mr-1 w-4 nah-h lg:mr-5"}),"Sales Order"]})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openInvoiceViewer")},className:"ml-1 mr-8    nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-75 transition-all",children:l.jsx("img",{src:ms,className:"lg:w-4 w-3 nav-ph"})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openCashInvoice")},className:"nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-95",children:l.jsxs("li",{className:"flex w-full h-full",children:[l.jsx("img",{src:ps,className:"lg:w-5 mr-1 w-4 nah-h lg:mr-5"}),"Delivery Note"]})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openInvoiceViewer")},className:"ml-1 mr-8    nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-75 transition-all",children:l.jsx("img",{src:ms,className:"lg:w-4 w-3 nav-ph"})}),l.jsx("button",{className:"nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-95",onClick:()=>{window.electron.ipcRenderer.send("openCashInvoice")},children:l.jsxs("li",{className:"flex w-full h-full",children:[l.jsx("img",{src:ps,className:"lg:w-5 mr-1 w-4 nah-h lg:mr-5"}),"Cash Invoice"]})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openInvoiceViewer")},className:"ml-1 mr-8 nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-75 transition-all",children:l.jsx("img",{src:ms,className:"lg:w-4 w-3 nav-ph"})}),l.jsx("button",{className:"nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-95",onClick:()=>{window.electron.ipcRenderer.send("openReturn")},children:l.jsxs("li",{className:"flex w-full h-full",children:[l.jsx("img",{src:ps,className:"lg:w-5 mr-1 w-4 nah-h lg:mr-5"}),"Product Return"]})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openReturn")},className:"ml-1 mr-8 nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-75 transition-all",children:l.jsx("img",{src:ms,className:"lg:w-4 w-3 nav-ph"})})]})})}),hI=""+new URL("open-092cw3Jk.png",import.meta.url).href,fI=({selectedProduct:t,setSelectedProduct:e})=>{const[n,r]=_.useState(!1),s=()=>{r(!0)},i=()=>{r(!1)};_.useEffect(()=>(window.addEventListener("keydown",c=>{c.code==="Escape"&&n&&i()}),()=>window.addEventListener("keydown",c=>{c.code==="Escape"&&n&&i()})),[n]);const o=c=>{e(c),i()},a=async c=>{const{value:u}=c.target;e(d=>({...d,productCode:u}));const h=await Ld(u);h&&e(h)};return l.jsx(l.Fragment,{children:l.jsxs("div",{className:"w-[96%] font-medium mx-auto gap-8  flex justify-between",children:[l.jsxs("div",{className:"flex flex-col gap-1  2xl:w-[30%] w-[50%]",children:[l.jsxs("div",{className:"flex w-full ",children:[l.jsx("span",{className:"font-bold w-[35%] 2xl:w-[25%] text-blue-800 text-sm",children:"Product Code:"}),l.jsxs("div",{className:"text-sm 2xl:w-[75%] w-[65%] border uppercase bg-blue-100 border-gray-600 px-1 flex items-center justify-between",children:[l.jsx("input",{type:"text",className:"bg-transparent w-full outline-none",value:t.productCode||"",onChange:a}),l.jsx("button",{onClick:s,children:l.jsx("img",{src:hI,alt:"Open Search",className:"w-4 h-4"})})]})]}),n&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center ",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background  ",children:[l.jsx("button",{className:"text-red-500 mb-2",onClick:i,children:"Close"}),l.jsx(is,{onProductSelect:o})]})}),l.jsxs("div",{className:"flex border  w-full",children:[l.jsx("span",{className:"font-bold w-[35%] 2xl:w-[25%]  text-blue-800 text-sm",children:"Description:"}),l.jsx("div",{className:"text-sm   2xl:w-[75%]  w-[65%]   border  uppercase bg-white border-gray-600 px-1 ",children:t.description||"NA"})]}),l.jsxs("div",{className:"flex border  w-full",children:[l.jsx("span",{className:"font-bold w-[35%] 2xl:w-[25%]  text-red-950 text-sm",children:"Specification:"}),l.jsx("div",{className:"text-sm h-14 overflow-y-scroll 2xl:w-[75%]  w-[65%]   border  uppercase bg-blue-100 border-gray-600 px-1 ",children:t.description2||"NA"})]}),l.jsxs("div",{className:"flex border justify-between  items-center",children:[l.jsxs("div",{className:`flex justify-between    items-center  2xl:w-[40%] \r
                        w-[50%]  2xl:gap-0  gap-8`,children:[l.jsx("span",{className:"font-bold text-center text-red-950 text-sm 2xl:w-[90%] w-full   ",children:"Pack Qty:"}),l.jsx("div",{className:"bg-white w-[6rem] border border-gray-600 px-1",children:t.quantity||"NA"})]}),l.jsxs("div",{className:"flex justify-between items-center w-[40%]",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"Unit:"}),l.jsx("div",{className:"bg-white w-24 border border-gray-600 px-1",children:t.basicUnit||"NA"})]})]}),l.jsxs("div",{className:"flex border  w-full",children:[l.jsx("span",{className:"font-bold w-[35%] 2xl:w-[25%]  text-red-950 text-sm",children:"Max Order:"}),l.jsx("div",{className:"text-sm  2xl:w-[75%]  w-[65%]   border  uppercase bg-white border-gray-600 px-1 text-right ",children:t.maxOrder||"NA"})]}),l.jsxs("div",{className:"flex border  w-full",children:[l.jsx("span",{className:"font-bold w-[35%] 2xl:w-[25%]  text-red-950 text-sm",children:"Re-Order:"}),l.jsx("div",{className:"text-sm  2xl:w-[75%]  w-[65%]   border  uppercase bg-white border-gray-600 px-1 text-right ",children:t.reOrder||"NA"})]})]}),l.jsxs("div",{className:"flex flex-col gap-2  2xl:w-[30%] w-[50%] ",children:[l.jsxs("div",{className:"flex items-center   justify-center    ",children:[l.jsx("span",{className:"text-sm 2xl:w-[20%] w-[30%] font-bold text-center  text-red-950",children:"OEM No:"}),l.jsx("div",{className:" ml-1 text-sm     w-[80%]  border  uppercase bg-white border-gray-600 px-1",children:"0"})]}),l.jsxs("div",{className:"flex items-center  justify-center    ",children:[l.jsx("span",{className:"text-sm  2xl:w-[20%] w-[30%] text-center font-bold   text-red-950",children:"Lst Suppl:"}),l.jsx("div",{className:" ml-1 text-sm     w-[80%]  border  uppercase bg-white border-gray-600 px-1",children:t.lastSupplier||"NA"})]}),l.jsxs("div",{className:"flex justify-between ",children:[l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[4.8rem]  text-center font-bold   text-red-950",children:"Lst Pur.Cst:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white w-[40%]  border  uppercase  border-gray-600 px-1",children:t.lastPurCost||"NA"})]}),l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[3.8rem]  text-center font-bold   text-red-950",children:"AvgCost:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white  w-[70%] border  uppercase  border-gray-600 px-1",children:t.averageCost||"NA"})]})]}),l.jsx("div",{children:l.jsxs("div",{className:"flex items-center  justify-center    ",children:[l.jsx("span",{className:"text-sm 2xl:w-[20%] w-[30%]  font-bold text-left  text-red-950",children:"Sell Price2:"}),l.jsx("div",{className:" ml-1 text-sm text-right  w-[80%]  border  uppercase bg-white border-gray-600 px-1",children:t.sellingPrice2||"NA"})]})}),l.jsxs("div",{className:"flex justify-between ",children:[l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[4.8rem]  text-center font-bold   text-red-950",children:"Sell Price1:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white w-[40%]  border  uppercase  border-gray-600 px-1",children:t.sellingPrice1||"NA"})]}),l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[3.8rem]  text-center font-bold   text-red-950",children:"Margin%:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white  w-[70%] border  uppercase  border-gray-600 px-1",children:t.averageCost&&t.sellingPrice1?(t.sellingPrice1-t.averageCost)/100:0})]})]}),l.jsxs("div",{className:"flex justify-between ",children:[l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[4.8rem]  text-right font-bold   text-red-950",children:"Vat out:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white w-[40%]  border  uppercase  border-gray-600 px-1",children:t.vatType||"NA"})]}),l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[3.8rem]  text-right font-bold   text-red-950",children:"%:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white  w-[70%] border  uppercase  border-gray-600 px-1",children:"0"})]})]}),l.jsxs("div",{className:"flex items-center  justify-center    ",children:[l.jsx("span",{className:"text-sm  2xl:w-[20%] w-[50%] text-center font-bold   text-red-950",children:"vat Price:"}),l.jsx("div",{className:" ml-1 text-sm      w-[80%]  border  uppercase bg-white border-gray-600 px-1",children:"Local purchase"})]})]}),l.jsxs("div",{className:"flex flex-col  gap-[5px] 2xl:w-[30%] w-[50%] ",children:[l.jsxs("div",{className:"flex items-center w-full ",children:[l.jsx("span",{className:"text-sm 2xl:w-[12%] w-[30%]  font-bold  text-red-950",children:"Brand:"}),l.jsx("div",{className:"  text-sm   mr-1  2xl:w-[30%] w-[40%]  border  uppercase bg-white border-gray-600 px-1",children:t.brand||"NA"}),l.jsx("div",{className:"  text-sm     w-[60%]  border  uppercase bg-white border-gray-600 px-1",children:t.brand||"NA"})]}),l.jsxs("div",{className:"flex gap-3   ",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"Dept:"}),l.jsx("div",{className:"  text-sm     w-[90%]  border  uppercase bg-white border-gray-600 px-1",children:t.department||"NA"})]}),l.jsxs("div",{className:"flex w-full justify-between  items-center",children:[l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm  ",children:"Group:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:t.category||"NA"})]}),l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"Sub.Grp:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:t.subCategory||"NA"})]})]}),l.jsxs("div",{className:"flex w-full justify-between  items-center",children:[l.jsxs("div",{className:"flex justify-between gap-6 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm  ",children:"Loc:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:"2"})]}),l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"Stk.Typ:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:"HY"})]})]}),l.jsxs("div",{className:"flex w-full justify-between  items-center",children:[l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm  ",children:"Origin:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:t.origin||"NA"})]}),l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-blue-800 text-sm",children:"Unq.ID:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:t.uniqueId||"NA"})]})]}),l.jsxs("div",{className:"flex w-full justify-between  items-center",children:[l.jsxs("div",{className:"flex justify-between gap-5 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm  ",children:"ETA:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:"//"})]}),l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"ETD:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:"//"})]})]}),l.jsxs("div",{className:"flex w-full justify-between  items-center",children:[l.jsxs("div",{className:"flex justify-between -ml-5 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm  ",children:"Prod Type:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:"HY"})]}),l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"Qty"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:t.quantity||"NA"})]})]})]})]})})},Ze=({name:t,data:e,columns:n,highlightColumn:r,height:s,handleRowClick:i})=>{const o=c=>typeof c!="string"?c:c.length>13?c.slice(0,13)+"...":c,a=n.length>0?n:[];return l.jsxs("div",{className:`${s?"h-80":"min-h-full"} bg-blue-100 max-h-52 overflow-auto scrollbar`,children:[l.jsx("div",{className:"bg-gray-500 font-semibold text-sm mb-2 text-white text-center uppercase",children:t}),l.jsx("div",{className:"max-h-52",children:l.jsxs("table",{className:"w-full ",children:[l.jsx("thead",{children:l.jsx("tr",{children:a.map((c,u)=>l.jsx("th",{className:`text-left text-sm px-2 py-0 border-r-2 border-r-gray-400 ${u===0?"bg-yellow-200 italic font-bold":"bg-blue-800 text-white font-medium"}`,children:c.header},u))})}),l.jsx("tbody",{children:e.length>0?e.map((c,u)=>l.jsx("tr",{onClick:()=>i&&i(c),children:a.map((h,d)=>{var f;return l.jsx("td",{className:`px-2 py-1 font-semibold border-r-2 border-r-gray-300 text-[0.85rem] uppercase whitespace-nowrap ${u===0&&h.key===r?"bg-orange-400":""}`,children:h.render?h.render(c):o(((f=c[h.key])==null?void 0:f.toString())||"")},d)})},u)):l.jsx("tr",{children:a.map((c,u)=>l.jsx("td",{className:"px-2 py-1 border-r-2 border-r-gray-300 text-[0.85rem] uppercase whitespace-nowrap",children:""},u))})})]})})]})},pI=async t=>{try{const e=Mt(A(O,"purchaseInvoices")),n=e.key;await lt(e,{...t,id:n});for(const r of t.products){const s=A(O,`products/${r.productCode}`),i=await U(s);if(i.exists()){const o=i.val(),a=(parseInt(o.quantity)||0)+parseInt(r.quantity);await je(s,{quantity:a,lastSupplier:t.supplierName,lastPurCost:parseFloat(r.price)})}else console.warn(`Product with productCode ${r.productCode} not found.`)}return n}catch(e){throw console.error("Failed to add purchase invoice and update product quantities:",e),e}},mI=async(t,e)=>{try{const n=A(O,`purchaseInvoices/${t}`),r=await U(n);if(!r.exists())throw new Error(`Purchase invoice with ID ${t} not found.`);const s=r.val(),i=new Map(s.products.map(o=>[o.productCode,o]));for(const o of e.products){const a=i.get(o.productCode),c=Number(o.quantity)-(a?Number(a.quantity):0),u=A(O,`products/${o.productCode}`),h=await U(u);if(h.exists()){const d=h.val();await je(u,{quantity:Number(d.quantity||0)+Number(c)})}else console.warn(`Product with productCode ${o.productCode} not found.`)}await je(n,e)}catch(n){throw console.error("Failed to update purchase invoice and adjust product quantities:",n),n}},$v=async()=>{try{const t=await U(A(O,"purchaseInvoices"));return t.exists()?Object.values(t.val()):[]}catch(t){throw console.error("Failed to retrieve purchase invoices:",t),t}},gI=async t=>{try{await On(A(O,`purchaseInvoices/${t}`))}catch(e){throw console.error("Failed to delete purchase invoice:",e),e}},yI=async t=>{try{const e=await U(A(O,"purchaseInvoices"));return e.exists()?Object.values(e.val()).flatMap(s=>s.products.filter(i=>i.productCode===t).map(i=>({id:s.id,invoiceNo:s.invoiceNo,supplierName:s.supplierName,supplierId:s.supplierId,date:s.date,productCode:i.productCode,name:i.name,quantity:i.quantity,price:i.price,total:Number(i.quantity)*Number(i.price)}))):[]}catch(e){throw console.error("Failed to retrieve purchase invoices with product details:",e),e}},vI=""+new URL("example-I_cYwQiU.png",import.meta.url).href;_.createContext();const cp=()=>{const[t,e]=_.useState({salesPersonID:0,salesPerson:"",productNo:"",name:"",supplierName:"",oemCode:"",uniqueId:"",description:"",specification:"",packQty:"HY",unit:"HY",maxOrder:0,reOrder:0,oemNo:0,lstSuppl:"Local purchase",lstPurCst:14.78,avgCost:14.78,sellPrice2:0,sellPrice1:14.78,margin:0,vatOut:14.78,vatPrice:"Local purchase",brand:"Origin",dept:0,group:"HY",subGrp:"HY",loc:"HY",stkTyp:"HY",origin:"HY",eta:"",etd:"",prodType:"HY",qty:"HY",alternatives:[],appliedModels:[]}),[n,r]=_.useState([]),[s,i]=_.useState([]),[o,a]=_.useState([]),[c,u]=_.useState([]);_.useContext(Fd),_.useEffect(()=>{t&&(async()=>{const g=await ME(t.productCode);r(g);const x=await QE(t.productCode);i(x);const p=await VE(t.productCode);a(p);const w=await yI(t.productCode);u(w)})()},[t]);const h=async f=>{if(!f)return;const g=await Ld(f);e(g)},d=[];return l.jsxs("div",{className:"bg-background min-h-[100vh]",children:[l.jsx(dI,{}),l.jsx("div",{className:"border-b border-t border-b-gray-300 border-t-gray-300",children:l.jsxs("div",{className:"xl:w-[100%] w-[100%] m-auto flex items-center justify-between gap-4 flex-nowrap",children:[l.jsxs("div",{className:"w-[15%] flex items-center",children:[l.jsxs("label",{htmlFor:"Branch",className:"text-sm font-semibold",children:["Branch:"," "]}),l.jsx("input",{type:"text",id:"Branch",className:"outline-none border border-gray-700 w-[60%] text-center ml-2 bg-white font-semibold",value:2,disabled:!0})]}),l.jsxs("div",{className:"w-[20%] flex items-center",children:[l.jsxs("label",{htmlFor:"Name",className:"text-sm font-semibold",children:["Name:"," "]}),l.jsx("input",{type:"text",id:"Name",className:"outline-none border border-gray-700 w-[70%] ml-2 bg-white px-2 font-semibold",value:t.name,disabled:!0})]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsx("a",{href:"/",className:"text-blue-500 underline text-xs",children:"edit"}),l.jsx("a",{href:"/",className:"text-blue-500 underline text-xs",children:"Product transactions"}),l.jsx("a",{href:"/",className:"text-blue-500 underline text-xs",children:"Transaction Search"}),l.jsx("a",{href:"/",className:"text-blue-500 underline text-xs",children:"Product Search"}),l.jsx("a",{href:"/",className:"text-blue-500 underline text-xs",children:"Duplicate"})]})]})}),l.jsxs("div",{className:"flex mt-5",children:[l.jsx("div",{className:"w-[76%]",children:l.jsx(fI,{selectedProduct:t,setSelectedProduct:e})}),l.jsx("div",{className:"w-[22%] border  mr-2",children:l.jsx(Ze,{name:"Multilocation",data:d,columns:[{key:"station",header:"Station"},{key:"lastPrice",header:"Last Price"},{key:"qty",header:"Qty"},{key:"location",header:"Location"}],highlightColumn:"station",heighValue:10})})]}),l.jsxs("div",{className:"mt-5",children:[l.jsxs("div",{className:"w-[97%] max-h-[20vh] flex justify-between 2xl:gap-0 gap-4 mx-auto",children:[l.jsxs("div",{className:"w-[12%] 2xl:w-[15%] flex flex-col items-center justify-center overflow-hidden",children:[l.jsx("div",{className:"w-full min-h-5 bg-gray-500"}),l.jsx("div",{className:"w-80 h-56 bg-no-repeat",style:{backgroundPosition:"center",backgroundSize:"contain",backgroundImage:`url(${t.picture||vI})`}})]}),l.jsx("div",{className:"w-[14.5%] 2xl:w-[22%]",children:l.jsx(Ze,{name:"Applied Model",data:t.appliedModels,columns:[{key:"make",header:"Make"},{key:"type",header:"Type"},{key:"remarks",header:"Remarks"}],highlightColumn:"Make"})}),l.jsx("div",{className:"w-40%",children:l.jsx(Ze,{name:"Purchase History",data:c,columns:[{key:"Br",header:"Br"},{key:"id",header:"GRN.No"},{key:"date",header:"Pur.Date"},{key:"Type",header:"Type"},{key:"supplierName",header:"Supplier Name"},{key:"quantity",header:"Qty"},{key:"price",header:"Unit Price"},{key:"total",header:"Total"}],highlightColumn:"UnitPrice"})}),l.jsx("div",{className:"w-[30%] 2xl:w-[23%]",children:l.jsx(Ze,{name:"Product Details",data:t.alternatives,columns:[{key:"productCode",header:"Product Code"},{key:"brand",header:"Brand"},{key:"name",header:"Product Name"},{key:"sellingPrice1",header:"Selling"}],handleRowClick:f=>{h(f.productCode)},highlightColumn:"productCode"})})]}),l.jsxs("div",{className:"w-[97%] flex min-h-[30vh] justify-between mx-auto mt-8",children:[l.jsx("div",{className:"w-[33%]",children:l.jsx(Ze,{name:"Quotation History",data:s,columns:[{key:"Br",header:"Br"},{key:"id",header:"Qutn.No"},{key:"date",header:"Qutn Date"},{key:"accountName",header:"Customer"},{key:"quantity",header:"Qty"},{key:"gAmount",header:"Unit Price"},{key:"total",header:"Total"}],highlightColumn:"Br"})}),l.jsx("div",{className:"w-[33%]",children:l.jsx(Ze,{name:"Delivery Note History",data:o,columns:[{key:"Br",header:"Br"},{key:"id",header:"DO.No"},{key:"date",header:"DO Date"},{key:"type",header:"Doc.Type"},{key:"accountName",header:"Customer"},{key:"quantity",header:"Qty"},{key:"gAmount",header:"Unit Price"},{key:"total",header:"Total"}],highlightColumn:"Br"})}),l.jsx("div",{className:"w-[32%]",children:l.jsx(Ze,{name:"Sales History",data:n,columns:[{key:"Br",header:"Br"},{key:"id",header:"Bill.No"},{key:"date",header:"Bill Date"},{key:"type",header:"Type"},{key:"accountName",header:"Customer"},{key:"quantity",header:"Qty"},{key:"gAmount",header:"Unit Price"}],highlightColumn:"Customer"})})]})]})]})},xI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAABk9JREFUeF7t3MFOG1EQRNGB//9mElkiyiKyGbUxVZM+bMOj+9Wdm7KNkrfDlwQkcDeBN9lIQAL3EyCIp0MCDxIgiMdDAgTxDEhgloAGmeXm1JIECLIEtGvOEiDILDenliRAkCWgXXOWAEFmuTm1JAGCLAHtmrMECDLLzaklCRBkCWjXnCVAkFluTi1JgCBLQLvmLAGCzHJzakkCBFkC2jVnCRBklptTSxIgyBLQrjlLgCCz3JxakgBBloB2zVkCBJnl5tSSBAiyBLRrzhIgyCw3p5YkQJAloF1zlgBBZrk5tSQBgiwB7ZqzBAgyy82pJQkQZAlo15wlQJBZbk4tSYAgS0C75iwBgsxyc2pJAgRZAto1ZwkQZJabU0sSIMgS0K45S4Ags9ycWpIAQZaAds1ZAgSZ5ebUkgQIsgS0a84SIMgsN6eWJECQJaBdc5YAQWa5ObUkAYIsAe2aswQIMsvNqSUJEGQJaNecJUCQWW5OLUmAIHnQH8dx3OPw6ziO9/yKezcgSJ49QfIM7m5AkDwcguQZEKSYwe1l1KMvf4kF4Qk/GP7naILkGWiQYgYEKYajQfJwCJJnoEGKGRCkGI4GycMhSJ6BBilmQJBiOBokD+eRIH6THuZDkDCA4zgIkmfgJVYxA4IUw9EgeTgEyTPQIMUMCFIMR4Pk4RAkz0CDFDMgSDEcDZKHQ5A8Aw1SzIAgxXA0SB4OQfIMNEgxA4IUw9EgeTgEyTPQIMUMCFIMR4Pk4RAkz0CDFDMgSDEcDZKHQ5A8Aw1SzIAgxXA0SB4OQfIMNEgxA4IUw9EgeTgEyTPQIMUMCFIMR4Pk4RAkz0CDFDMgSDEcDZKHQ5A8Aw1SzIAgxXA0SB4OQfIMNEgxA//1aDEcDZKHQ5A8Aw1SzIAgxXA0SB4OQfIMNEgxA4IUw9EgeTg+xcoz0CDFDAhSDEeD5OEQJM9AgxQzIEgxHA2Sh+NNep6BBilmQJBiOBokD4cgeQYapJgBQYrhaJA8nI/jOO5xuMnznl9x7wZXFuTRg3UVojcBrszgbM6XFf3KcL56aXIWnu97fQIEeX3G/0wgSCD04UiCDIN75hhBnknv589e8tXKJZf+ZEuQn3/In5l4yWftkksT5JnnNHb2ks/aJZcmSOwhf2bwJZ+1Sy79San9Y94/LwEf/Y7jdpUrMzgrjDfpZ5Pyff8k8JXoGwSqfSyEn0dDkDyDuxsQJA/nq0/jMAoyEn4w/JMfNmAUZCT8YPgnBLnsm9t8rN+zAUG+J8dnfop/cvtMei8+S5AXB3zixxPkREipbyFIKvm/cwmSZ+BTrGIGBCmGo0HycHzMm2egQYoZEKQYjgbJwyFInoEGKWZAkGI4GiQPhyB5BhqkmAFBiuFokDwcguQZaJBiBgQphqNB8nAIkmegQYoZEKQYjgbJwyFInoEGKWZAkGI4GiQPhyB5BhqkmAFBiuFokDwcguQZaJBiBgQphqNB8nAIkmegQYoZEKQYjgbJwyFInoEGKWZAkGI4GiQPhyB5BhqkmAFBiuFokDwcguQZaJBiBgQphqNB8nAIkmegQYoZEKQYjgbJwyFInoEGKWZAkGI4GiQPhyB5BhqkmAFBiuFokDwcguQZaJBiBgQphqNB8nAIkmegQYoZEKQYjgbJwyFInoEGKWZAkGI4GiQPhyB5BhqkmAFBiuFokDwcguQZaJBiBo8Euf3Ze/Hu//1qGiSP+OM4jnscCBLmQ5AwAOO7EyBINx/bhRMgSBiA8d0JEKSbj+3CCRAkDMD47gQI0s3HduEECBIGYHx3AgTp5mO7cAIECQMwvjsBgnTzsV04AYKEARjfnQBBuvnYLpwAQcIAjO9OgCDdfGwXToAgYQDGdydAkG4+tgsnQJAwAOO7EyBINx/bhRMgSBiA8d0JEKSbj+3CCRAkDMD47gQI0s3HduEECBIGYHx3AgTp5mO7cAIECQMwvjsBgnTzsV04AYKEARjfnQBBuvnYLpwAQcIAjO9OgCDdfGwXToAgYQDGdydAkG4+tgsnQJAwAOO7EyBINx/bhRMgSBiA8d0JEKSbj+3CCRAkDMD47gQI0s3HduEECBIGYHx3AgTp5mO7cAIECQMwvjsBgnTzsV04AYKEARjfnQBBuvnYLpwAQcIAjO9OgCDdfGwXTuA35fycyVmrI7cAAAAASUVORK5CYII=",wI=({AppliedModel:t,Alternative:e,mode:n,onAlternativeChange:r,onAppliedModelChange:s,categories:i})=>{const[o,a]=_.useState([]),[c,u]=_.useState([]),[h,d]=_.useState("alternative"),[f,g]=_.useState(!1),[x,p]=_.useState([]);_.useEffect(()=>{t&&a(t),e&&u(e)},[t,e]),_.useEffect(()=>{s(o)},[o]),_.useEffect(()=>{r(c)},[c]);const w=N=>{const{productCode:T,brand:j,name:B,sellingPrice1:Q}=N;u(ue=>[...ue,{productCode:T,brand:j,name:B,sellingPrice1:Q}]),g(!1)},y=N=>{if(N.preventDefault(),h==="applied"){const T={make:"",type:"",remarks:""};a(j=>[...j,T]),p(j=>[...j,[]])}else g(!0)},m=(N,T)=>{T==="applied"?(a(j=>j.filter((B,Q)=>Q!==N)),p(j=>j.filter((B,Q)=>Q!==N))):u(j=>j.filter((B,Q)=>Q!==N))},v=N=>{d(N)},C=(N,T,j)=>{a(B=>B.map((Q,ue)=>ue===N?{...Q,[T]:j}:Q))},b=(N,T)=>{C(N,"type",T.shortForm)},S=(N,T)=>{p(j=>j.map((B,Q)=>Q===N?T.subCategories:B)),C(N,"make",T.shortForm)},k=()=>{g(!1)};return l.jsxs("div",{className:"relative w-full flex flex-col",children:[l.jsxs("div",{className:"flex justify-center gap-2",children:[l.jsx("button",{onClick:()=>v("applied"),className:"px-6 py-1 text-sm bg-white border border-gray-300",type:"button",children:"Applied Model"}),l.jsx("button",{onClick:()=>v("alternative"),className:"px-6 py-1 text-sm bg-white border border-gray-300",type:"button",children:"Alternative"}),l.jsx("button",{onClick:y,className:"px-3 bg-white border border-gray-300 text-sm",type:"button",children:l.jsx("img",{src:xI,alt:"",className:"w-6 h-6"})})]}),h==="applied"&&l.jsx("div",{className:"min-h-32 bg-blue-100 mt-2 ml-2",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-blue-800 text-white",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-2 py-1 text-sm bg-yellow-200 font-bold italic text-black",children:"Make"}),l.jsx("th",{className:"px-2 py-1 text-sm",children:"Type"}),l.jsx("th",{className:"px-1 py-1 text-sm font-normal",children:"Remarks"}),l.jsx("th",{className:"py-1 text-sm font-normal",children:"Actions"})]})}),l.jsx("tbody",{children:o.map((N,T)=>l.jsxs("tr",{children:[l.jsxs("td",{className:"border text-sm relative",children:[l.jsx("div",{className:"px-1 py-1 text-xs w-full h-full whitespace-nowrap overflow-hidden text-ellipsis",children:l.jsx("input",{type:"text",value:N.make.length>6?N.make.substring(0,6)+"...":N.make,className:"w-full py-1 px-1 h-full outline-none bg-white",disabled:n==="delete"||!0,title:N.make})}),n!=="delete"&&l.jsx(J,{items:i,onSelect:j=>S(T,j),columns:[{key:"shortForm",label:"Category ID"},{key:"name",label:"Category Name"}],style:{top:"top-4 left-[78%]"},all:!0})]}),l.jsxs("td",{className:"border text-sm relative",children:[l.jsx("div",{className:"px-1 py-1 text-xs w-full h-full whitespace-nowrap overflow-hidden text-ellipsis",children:l.jsx("input",{type:"text",value:N.type.length>6?N.type.substring(0,6)+"...":N.type,className:"w-full py-1 px-1 h-full outline-none bg-white",disabled:n==="delete",title:N.type})}),n!=="delete"&&l.jsx(J,{items:x[T]||[],onSelect:j=>b(T,j),columns:[{key:"name",label:"Category Name"},{key:"shortForm",label:"Short Form"}],style:{top:"top-4 left-[78%]"},all:!0})]}),l.jsx("td",{className:"px-4 py-2 border text-sm",children:l.jsx("input",{type:"text",value:N.remarks,onChange:j=>C(T,"remarks",j.target.value),className:"  px-2 py-1 text-sm w-full bg-transparent outline-none focus:bg-white",disabled:n==="delete"})}),l.jsx("td",{className:"px-4 py-2 border text-sm",children:l.jsx("button",{onClick:()=>m(T,"applied"),className:"px-2 py-1 text-sm bg-red-500 text-white rounded",type:"button",children:"Delete"})})]},T))})]})}),h==="alternative"&&l.jsx("div",{className:"min-h-32 bg-blue-100 mt-2 ml-2",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-blue-800 text-white",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-2 border text-sm bg-orange-400 font-normal",children:"Alternate Id"}),l.jsx("th",{className:"px-1 border text-sm font-normal",children:"Brand"}),l.jsx("th",{className:"border text-sm font-normal",children:"Actions"})]})}),l.jsx("tbody",{children:c.map((N,T)=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-1 border text-sm border-r-gray-300 border-r-2",children:N.productCode}),l.jsx("td",{className:"px-4 py-1 border text-sm border-r-gray-300 border-r-2",children:N.brand}),l.jsx("td",{className:"px-4 py-1 border text-sm border-r-gray-300 border-r-2",children:l.jsx("button",{onClick:()=>m(T,"alternative"),className:"px-2 py-1 text-sm bg-red-500 text-white rounded",type:"button",children:"Delete"})})]},T))})]})}),h==="alternative"&&f&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center ",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background  ",children:[l.jsx("button",{className:"text-red-500 mb-2",onClick:k,children:"Close"}),l.jsx(is,{onProductSelect:w})]})})]})},_I=async t=>{try{const e=A(Ne,"brands/"),n=Mt(e);if((await Ii(e,s=>{if(s=s||{},!Object.values(s).some(o=>o.name.toLowerCase()===t.name.toLowerCase()||o.shortForm.toLowerCase()===t.shortForm.toLowerCase()))return s[n.key]={...t,id:n.key},s})).committed)return await lt(n,{...t,id:n.key}),n.key;throw new Error("Brand already exists.")}catch(e){throw console.error("Failed to add brand:",e),new Error("Failed to add brand")}},Wv=async()=>{try{const t=A(Ne,"brands/"),e=await U(t);if(e.exists()){const n=[];return e.forEach(r=>{const s=r.val();n.push({id:r.key,...s})}),n}else return console.log("No brands found."),[]}catch(t){throw console.error("Failed to retrieve brands:",t),new Error("Failed to retrieve brands")}},CI=async t=>{try{const e=A(Ne,"brands"),n=await U(e);if(n.exists()){let r=null;if(n.forEach(s=>{s.val().shortForm===t&&(r=s.key)}),r){const s=A(Ne,`brands/${r}`);await lt(s,null),console.log(`Brand with ID ${t} has been deleted.`)}else console.log(`No brand found with ID ${t}.`)}else console.log("No brands found.")}catch(e){throw console.error("Failed to delete brand:",e),new Error("Failed to delete brand")}},bI=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result),r.onerror=s=>n(s)}),up=async t=>await bI(t),Gc=[{shortForm:"EX1",Description:"No Vat",Vatpercentage:"0.00",startDate:"12/0/0"},{shortForm:"EX2",Description:"Standard Vat",Vatpercentage:"5",startDate:"12/0/0"}];function NI(){const[t,e]=_.useState("none"),[n,r]=_.useState(null),[s,i]=_.useState(!1),[o,a]=_.useState(!1),[c,u]=_.useState([]),[h,d]=_.useState([]),[f,g]=_.useState([]),x=async()=>{const C=await Wv();d(C);const b=await Fl();g(b)},p=async()=>{const C=await Bv();u(C)};_.useEffect(()=>{p(),x()},[]);const w=C=>{r(C),i(!1),v()},y=C=>{e(C),r(null),i(C==="edit")},m=()=>{a(!0)},v=()=>{a(!1)};return l.jsx("div",{children:l.jsxs("div",{className:"w-[98%] mx-auto",children:[l.jsxs("nav",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>y("add"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Add"}),l.jsx("button",{onClick:()=>y("edit"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Edit"}),l.jsx("button",{onClick:()=>y("delete"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Delete"})]}),t==="none"&&l.jsx(ja,{mode:"delete",initialProduct:{},cb:p,handleActionChange:y,brands:h,categories:f}),(t==="edit"||t==="delete")&&!n&&l.jsxs("div",{className:"h-[94vh] flex flex-col items-center",children:[l.jsxs("div",{children:["Select Product:"," ",l.jsx("input",{type:"text",disabled:!0,className:"bg-white"}),l.jsxs("button",{className:"w-6 relative",onClick:m,children:[l.jsx("img",{src:Fg,className:"w-4 h-4 absolute -top-3 -left-5     "})," "]})]}),o&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center ",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background  ",children:[l.jsx("button",{className:"text-red-500 mb-2",onClick:v,children:"Close"}),l.jsx(is,{onProductSelect:w})]})})]}),t==="add"&&l.jsx(ja,{mode:"add",initialProduct:{branch:1},cb:p,handleActionChange:y,brands:h,categories:f}),(t==="edit"||t==="delete")&&n&&l.jsx(l.Fragment,{children:l.jsx(ja,{mode:t,initialProduct:n,cb:p,handleActionChange:y,brands:h,categories:f})})]})})}const ka={id:"",name:"",productCode:"",brand:"",description:"",description2:"",department:"",category:"",basicUnit:"",status:"",class:"",subCategory:"",uniqueId:"",sellingPrice1:"",sellingPrice2:"",sellingPrice3:"",picture:"",reOrder:"",hsCode:"",minOrder:"",maxOrder:"",shelfLife:"",vatType:"",origin:"",alternatives:[],appliedModels:[]};function ja({mode:t,initialProduct:e,cb:n,handleActionChange:r,brands:s,categories:i}){const[o,a]=_.useState(t==="delete"),c=N=>{const{name:T,value:j}=N.target;h(B=>({...B,[T]:j}))},[u,h]=_.useState(ka),[d,f]=_.useState(null);_.useEffect(()=>{h(t==="edit"||t==="delete"?{id:e.id||"",branch:e.branch||"",name:e.name||"",productCode:e.productCode||"",brand:e.brand||"",description:e.description||"",description2:e.description2||"",department:e.department||"",category:e.category||"",basicUnit:e.basicUnit||"",status:e.status||"",class:e.class||"",subCategory:e.subCategory||"",uniqueId:e.uniqueId||"",copyAllBranch:e.copyAllBranch||"NO",sellingPrice1:e.sellingPrice1||"",sellingPrice2:e.sellingPrice2||"",sellingPrice3:e.sellingPrice3||"",picture:e.picture||"",reOrder:e.reOrder||"",hsCode:e.hsCode||"",minOrder:e.minOrder||"",maxOrder:e.maxOrder||"",shelfLife:e.shelfLife,vatType:e.vatType||"",origin:e.origin||"",barCode:e.barCode||"",appliedModels:e.appliedModels||[],alternatives:e.alternatives||[]}:ka)},[t,e]);const[g,x]=_.useState(null),p=N=>{x(N.target.files[0])},w=[],y=N=>{h(T=>({...T,brand:N||""}))},m=N=>{const T=i.find(j=>j.shortForm===N);T&&T.subCategories&&typeof T.subCategories=="object"?T.subCategories=Object.values(T.subCategories):T.subCategories=[],h(j=>({...j,category:T?T.name:""})),f(T)},v=N=>{h(T=>({...T,subCategory:N||""}))},C=N=>{const T=Gc.find(j=>j.shortForm===N);h(j=>({...j,vatType:T?T.Vatpercentage:""}))},b=async N=>{N.preventDefault();const{id:T,...j}=u;if(t==="add"){if(g){const Q=await up(g);j.picture=Q}await qE(j)&&alert("Product Added Successfully")}else if(t==="edit"){if(g){const B=await up(g);j.picture=B}await GE(T,j),alert("Product Updated Successfully")}else t==="delete"&&(await KE(T),alert("Product Deleted Successfully"));n&&n(),h(ka),x(null)},S=N=>{h(T=>({...T,appliedModels:N}))},k=N=>{h(T=>({...T,alternatives:N}))};return l.jsx("form",{onSubmit:b,className:"min-h-[92vh] ",children:l.jsxs("div",{className:"w-[100%]  mx-auto mt-4",children:[l.jsxs("div",{className:"flex justify-between  py-10 px-2 shadow-lg",children:[l.jsxs("div",{className:"flex flex-col gap-2 w-[45%] ",children:[l.jsxs("div",{className:"flex w-full ",children:[l.jsxs("div",{className:"w-1/4 flex items-center",children:[l.jsx("span",{className:"w-1/2  text-right inline-block",children:"Branch:"}),l.jsx("input",{type:"number",name:"branch",value:1,onChange:c,className:"w-1/2 h-7 px-1 border  border-gray-600 ml-1",disabled:!0})]}),l.jsxs("div",{className:"w-3/4 flex items-center",children:[l.jsx("span",{className:"w-1/4 text-right inline-block",children:"Name:"}),l.jsx("input",{type:"text",name:"name",value:u.name,onChange:c,className:"uppercase  w-3/4 h-7 border px-1 border-gray-600 ml-1",disabled:o})]})]}),l.jsxs("div",{className:"flex w-full",children:[l.jsxs("div",{className:"relative w-1/4 flex items-center",children:[l.jsx("span",{className:"w-1/2 text-right mr-[2px] inline-block",children:"Brand:"}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",name:"brand",value:u.brand||"",className:`${t=="edit"||t=="add"?"bg-white":""} w-full px-2 h-7   border border-gray-600`,disabled:!0}),!o&&l.jsx(J,{items:s,onSelect:y,style:{top:"top-1 left-[75%]"},columns:[{key:"shortForm",label:"Brand Id"},{key:"name",label:"Name"}]})]})]}),l.jsxs("div",{className:"w-3/4 flex items-center",children:[l.jsx("span",{className:"2xl:w-1/4 w-1/2 text-right inline-block",children:"Product Code:"}),l.jsx("input",{type:"text",name:"productCode",value:u.productCode,onChange:c,className:"uppercase w-3/4 h-7  border px-1 border-gray-600 ml-1",disabled:o})]})]}),l.jsxs("div",{className:"w-full flex items-center",children:[l.jsx("span",{className:"w-[12.5%]  text-left inline-block",children:"Description: "}),l.jsx("input",{type:"text",name:"description",value:u.description,onChange:c,className:" w-[87.5%] h-7  border px-1 border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-full flex items-center",children:[l.jsx("span",{className:"w-[15%]  text-left inline-block ",children:"Description2:"}),l.jsx("input",{type:"text",name:"description2",value:u.description2,onChange:c,className:" w-[85%] h-7 border px-1  border-gray-600 ",disabled:o})]})]}),l.jsxs("div",{className:"flex flex-col gap-2 w-[45%]",children:[l.jsxs("div",{className:"flex w-full  justify-between",children:[l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Department:"}),l.jsx("input",{type:"text",name:"department",value:u.department,onChange:c,className:"flex-1 h-7 px-1 border  border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Class:"}),l.jsx("input",{type:"text",name:"class",value:u.class,onChange:c,className:"uppercase flex-1 h-7  border px-1 border-gray-600 ml-1",disabled:o})]})]}),l.jsxs("div",{className:"flex w-full  justify-between",children:[l.jsxs("div",{className:" relative w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Category:"}),l.jsx("input",{type:"text",name:"category",value:u.category||"",className:` ${t=="edit"||t=="add"?"bg-white":""} flex-1 h-7 px-1 border border-gray-600 ml-1 `,disabled:!0}),!o&&l.jsx(J,{items:i,onSelect:m,style:{top:"top-1 left-[92%]"},columns:[{key:"shortForm",label:"Category Id"},{key:"name",label:"Category Name"}]})]}),l.jsxs("div",{className:"w-[45%] relative flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Sub.Category:"}),l.jsx("input",{type:"text",name:"subCategory",value:u.subCategory||"",disabled:!0,className:` ${t=="edit"||t=="add"?"bg-white":""} flex-1 h-7 px-1 border border-gray-600 ml-1 `}),!o&&l.jsx(J,{items:d?d.subCategories:[],onSelect:v,style:{top:"top-1 left-[94%]"},columns:[{key:"shortForm",label:"Sub Category Id"},{key:"name",label:"Category Name"}]})]})]}),l.jsxs("div",{className:"flex w-full  justify-between",children:[l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Basic Unit:"}),l.jsx("input",{type:"text",name:"basicUnit",value:u.basicUnit,onChange:c,className:"flex-1 h-7      px-1 border border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"UniqueID:"}),l.jsx("input",{type:"text",name:"uniqueId",value:u.uniqueId,onChange:c,className:"uppercase      flex-1 h-7 border px-1 border-gray-600 ml-1",disabled:o})]})]}),l.jsxs("div",{className:"flex w-full  justify-between",children:[l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Status:"}),l.jsx("input",{type:"text",name:"status",value:u.status,onChange:c,className:"flex-1 h-7      px-1 border border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Copy In Branches:"}),l.jsxs("select",{name:"copyAllBranch",value:u.copyAllBranch,onChange:c,className:"uppercase      flex-1 h-7 border px-1 border-gray-600 ml-1",disabled:o,children:[l.jsx("option",{value:"Yes",children:"Yes"}),l.jsx("option",{value:"No",children:"No"})]})]})]})]})]}),l.jsxs("div",{className:"py-5 px-2  shadow-lg mt-6 ",children:[l.jsx("h1",{className:"ml-4 text-lg font-medium",children:"General"}),l.jsxs("div",{className:"w-[95%] mx-auto mt-5  flex gap-2 flex-wrap",children:[l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Selling Price 1:"}),l.jsx("input",{type:"number",name:"sellingPrice1",value:u.sellingPrice1,onChange:c,className:"flex-1 h-7 px-1 border       border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Re-Order:"}),l.jsx("input",{type:"number",name:"reOrder",value:u.reOrder,onChange:c,className:"flex-1 h-7 px-1 border      border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Origin:"}),l.jsx("input",{type:"text",name:"origin",value:u.origin,onChange:c,className:"flex-1 h-7 px-1 border       border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Selling Price 2:"}),l.jsx("input",{type:"number",name:"sellingPrice2",value:u.sellingPrice2,onChange:c,className:"flex-1 h-7 px-1 border       border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Min-Order:"}),l.jsx("input",{type:"number",name:"minOrder",value:u.minOrder,onChange:c,className:"flex-1 h-7 px-1 border      border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"HS code:"}),l.jsx("input",{type:"text",name:"hsCode",value:u.hsCode,onChange:c,className:"flex-1 h-7 px-1 border  border-gray-600 ml-1     ",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Selling Price 3:"}),l.jsx("input",{type:"number",name:"sellingPrice3",value:u.sellingPrice3,onChange:c,className:"flex-1 h-7 px-1 border  border-gray-600 ml-1     ",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Max-Order:"}),l.jsx("input",{type:"number",name:"maxOrder",value:u.maxOrder,onChange:c,className:"flex-1 h-7 px-1 border  border-gray-600 ml-1     ",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Bar Code:"}),l.jsx("input",{type:"number",name:"barCode",value:u.barCode,onChange:c,className:"flex-1 h-7      px-1 border  border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center flex-col",children:[l.jsxs("div",{className:"flex justify-between w-[100%]",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Picture:"}),l.jsx("input",{type:"file",name:"picture",onChange:p,className:"flex-1 h-7      px-1 border  border-gray-600 ml-1",disabled:o})]}),u.picture&&l.jsx("p",{children:SI(u.picture)})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Shelf Life:"}),l.jsx("input",{type:"text",name:"shelfLife",value:u.shelfLife,onChange:c,className:"flex-1 h-7      px-1 border  border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] relative flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Vat type:"}),l.jsx("input",{type:"text",name:"vatType",value:u.vatType,disabled:!0,className:` ${t=="edit"||t=="add"?"bg-white":""} flex-1 h-7      px-1 border  border-gray-600 ml-1 `}),!o&&l.jsx(J,{items:Gc,onSelect:C,style:{top:"top-1 left-[94%]"},columns:[{key:"shortForm",label:"VAT Code"},{key:"Description",label:"Description"},{key:"Vatpercentage",label:"VAT Percentage"}]})]})]})]}),l.jsxs("div",{className:"mt-8 flex",children:[l.jsx("div",{className:"w-[70%] min-h-36 ",children:l.jsx(Ze,{data:w,columns:[{key:"unit",header:"Unit"},{key:"Fraction",header:"Fraction"},{key:"GWeight",header:"Gross Weight"},{key:"NetWeight",header:"Net Weight"},{key:"length",header:"Length"},{key:"height",header:"Height"},{key:"breadth",header:"Breadth"},{key:"volume",header:"Volume"},{key:"packingSize",header:"Packing Size"},{key:"ID",header:"ID"}],highlightColumn:"unit",name:"Details"})}),l.jsx("div",{className:"w-[30%]",children:l.jsx(wI,{Alternative:e.alternatives,AppliedModel:e.appliedModels,onAlternativeChange:k,onAppliedModelChange:S,categories:i})})]}),!(Object.keys(e).length===0&&t==="delete")&&l.jsxs("button",{type:"submit",onClick:b,className:"  bg-white   px-5 py-1 w-full  border border-gray-100 mt-2",children:[t," product"," "]})]})})}function SI(t){const e=t.split("\\"),r=e[e.length-1].split(";");return r[r.length-1]}function EI({initialRows:t,onDataChange:e,mode:n}){const[r,s]=_.useState([]),[i,o]=_.useState(!1),[a,c]=_.useState(null);_.useEffect(()=>{t&&t.length>0&&s(t)},[t]);const u=()=>{const p={productCode:"",name:"",quantity:1,price:""},w=[...r,p];s(w),e(w)},h=p=>{const w=r.filter((y,m)=>m!==p);s(w),e(w)},d=(p,w,y)=>{const m=r.map((v,C)=>C===p?{...v,[w]:y}:v);s(m),e(m)},f=p=>{c(p),o(!0)},g=()=>{o(!1),c(null)},x=p=>{if(a!==null){const w=r.map((y,m)=>m===a?{...y,productCode:p.productCode,name:p.name,price:p.sellingPrice1}:y);s(w),e(w)}g()};return l.jsxs("div",{className:"mt-6 min-h-[10vh] w-[98%] mx-auto",children:[n!=="none"&&n!=="Delete"&&l.jsx("button",{onClick:u,className:"bg-white text-black border-gray-300 border px-6 py-2 mb-3 focus:scale-95",type:"button",children:"Add Product"}),l.jsx("div",{className:"min-h-[30vh] max-h-[30vh] scrollbar overflow-auto bg-blue-100",children:l.jsxs("table",{className:"w-full border-collapse border border-gray-300 bg-blue-100 ",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-blue-900 text-white",children:[l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Product Code"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Name"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Quantity"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Price"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Actions"})]})}),l.jsx("tbody",{children:r.map((p,w)=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.productCode,onClick:()=>f(w),readOnly:!0,className:"w-full bg-transparent outline-none cursor-pointer focus:bg-white",disabled:n==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.name,onChange:y=>d(w,"name",y.target.value),disabled:n==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.quantity,onChange:y=>d(w,"quantity",y.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:n==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.price,onChange:y=>d(w,"price",y.target.value),disabled:n==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 py-1 text-center px-1",children:l.jsx("button",{onClick:()=>h(w),className:"text-red-500",children:"Delete"})})]},w))})]})}),i&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background",children:[l.jsx("button",{className:"text-red-500 mb-2",onClick:g,children:"Close"}),l.jsx(is,{onProductSelect:x})]})})]})}function Vv(t){if(!(t instanceof Date))throw new Error("Input must be a Date object");const e=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return`${e}/${n}/${r}`}function Hv({mode:t,initialInvoice:e}){const[n,r]=_.useState(t||"none"),[s,i]=_.useState(e||null),[o,a]=_.useState([]),[c,u]=_.useState([]),h=async()=>{const g=await $v();u(g)};_.useEffect(()=>{(async()=>{const x=await BE();a(x),h()})()},[]);const d=g=>{i(g)},f=g=>{r(g),i(null)};return l.jsx("div",{children:l.jsxs("div",{className:"w-[98%] mx-auto",children:[l.jsxs("nav",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>f("Add"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Add"}),l.jsx("button",{onClick:()=>f("Edit"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Edit"}),l.jsx("button",{onClick:()=>f("Delete"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Delete"})]}),n==="none"&&l.jsx(Ta,{mode:"none",initialInvoice:{},suppliers:o,cb:h}),(n==="Edit"||n==="Delete")&&!s&&l.jsx("div",{className:"h-[94vh] flex flex-col items-center",children:l.jsxs("div",{children:["Select Invoice: ",l.jsx("input",{type:"text"}),l.jsx(J,{items:c,onSelect:d,style:{top:"top-11 left-[895px]"},columns:[{key:"id",label:"Invoice No"},{key:"supplierName",label:"Supplier Name"}],all:!0})]})}),n==="Add"&&l.jsx(Ta,{mode:"Add",initialInvoice:{},suppliers:o,cb:h}),(n==="Edit"||n==="Delete")&&s&&l.jsx(Ta,{mode:n,initialInvoice:s,suppliers:o,cb:h})]})})}const dp={supplierId:"",supplierName:"",products:[],invoiceNo:"",date:Vv(new Date)},Ta=({initialInvoice:t,mode:e,fullHeight:n,suppliers:r,cb:s})=>{const[i,o]=_.useState(dp),[a,c]=_.useState(e==="Delete");_.useEffect(()=>{o({supplierId:t.supplierId||"",supplierName:t.supplierName||"",products:t.products||[],invoiceNo:t.id||"",date:t.date?t.date:Vv(new Date)})},[t]);const u=async g=>{const{invoiceNo:x,...p}=i;g.preventDefault(),e==="Edit"?(await mI(x,p),alert("Purchase Invoice edited")):e==="Add"?(await pI(p),alert("Purchase Invoice added")):e==="Delete"&&(await gI(x),alert("Purchase Invoice deleted")),o(dp),s&&s()},h=g=>{o(x=>({...x,supplierName:g.name,supplierId:g.id}))},d=g=>{o(x=>({...x,products:g}))},f=g=>g?g.reduce((x,p)=>x+p.quantity*p.price,0).toFixed(2):0;return l.jsxs("form",{onSubmit:u,className:` ${n?"min-h-[99vh]":"min-h-[88.4vh]"}     bg-background`,children:[l.jsxs("div",{className:`flex justify-around    ${n?"":"mt-10"}  border w-[70%] mx-auto`,children:[l.jsxs("div",{className:`flex items-center relative ${n?"mt-20":""}`,children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Supplier Name:"}),l.jsx("input",{type:"text",value:i.supplierName,className:`h-7 px-1 border border-gray-600 ml-1 ${!a&&e!=="none"?"bg-white":""}`,disabled:a||e==="none",readOnly:!0}),!a&&e!=="none"&&l.jsx(J,{items:r,onSelect:h,style:{top:"top-1 left-[284px]"},columns:[{key:"id",label:"Supplier ID"},{key:"name",label:"Supplier Name"}],all:!0})]}),l.jsxs("div",{className:`flex items-center relative ${n?"mt-20":""}`,children:[l.jsx("span",{className:"w-[30%] text-right inline-block",children:"Supplier Id:"}),l.jsx("input",{type:"text",value:i.supplierId,className:`h-7 px-1 border border-gray-600 ml-1 ${!a&&e!=="none"?"bg-white":""}`,disabled:a||e==="none",readOnly:!0})]}),l.jsx("div",{className:`flex items-center relative ${n?"mt-20":""}`,children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"w-[50%] text-right inline-block",children:"Date:"}),l.jsx("input",{type:"text",value:i.date,className:`h-7 px-1 border border-gray-600 ml-1 ${!a&&e!=="none"?"bg-white":""}`,disabled:!0,readOnly:!0})]})})]}),l.jsx("div",{className:"mt-16",children:l.jsx(EI,{initialRows:t.products,mode:e,onDataChange:d})}),l.jsxs("div",{className:"flex ml-4 mt-5 items-center",children:[l.jsx("span",{className:"text-right inline-block",children:"Total Price:"}),l.jsx("input",{type:"text",value:f(i.products),className:"h-7 px-1 bg-white border border-gray-600 ml-1",disabled:!0})]}),e!=="none"&&l.jsxs("button",{type:"submit",className:"w-full mt-5 py-1 bg-white border-gray-300",children:[e," Invoice"]})]})},II=()=>{const[t,e]=_.useState([]),[n,r]=_.useState([]),[s,i]=_.useState([]),[o,a]=_.useState([]);_.useEffect(()=>{const p=async()=>{const y=await Mv();e(y)},w=async()=>{const y=await $v();a(y)};p(),w(),c(),u()},[]);const c=async()=>{const p=await Fv();r(p)},u=async()=>{const p=await Ll();i(p)},[h,d]=_.useState(!0),[f,g]=_.useState({}),x=p=>{g(p),d(!1)};return l.jsxs(l.Fragment,{children:[h&&l.jsxs("div",{className:"min-h-[100vh]",children:[l.jsxs("div",{className:"min-h-[20vh] flex   justify-center",children:[l.jsxs("div",{className:"flex  border relative mt-10 justify-center mx-auto w-[30%]",children:[l.jsx("span",{className:"mr-2",children:"Select Cash Invoice:"}),l.jsx("input",{type:"text",className:"border w-[55%] h-7 px-1 text-sm bg-white cursor-pointer",placeholder:"View Invoices",disabled:!0,readOnly:!0}),l.jsx(J,{items:t,columns:[{key:"DocNo",label:"Bill No"},{key:"date",label:"Bill Date"},{key:"accCode",label:"Account"},{key:"accountName",label:"Account Name"},{key:"total",label:"Amount"},{key:"doctype",label:"DOC type"},{key:"sMan",label:"S.Id"},{key:"payment",label:"Tr.type"}],onSelect:x,style:{top:"top-[5px] left-[88%] "},all:!0,name:"invoiceList"})]}),l.jsxs("div",{className:"flex  border relative mt-10 justify-center mx-auto w-[40%]",children:[l.jsx("span",{className:"mr-2",children:"Select Purchase Invoice:"}),l.jsx("input",{type:"text",className:"border w-[40%] h-7 px-1 text-sm bg-white cursor-pointer",placeholder:"View Invoices",disabled:!0,readOnly:!0}),l.jsx(J,{items:o,columns:[{key:"invoiceNo",label:"Bill No"},{key:"supplierId",label:"Supplier ID"},{key:"supplierName",label:"Supplier Name"},{key:"date",label:"Date"}],onSelect:x,style:{top:"top-[5px] left-[81%] "},all:!0,name:"invoiceList"})]})]}),l.jsxs("div",{className:"min-h-[20vh] flex   justify-center",children:[l.jsxs("div",{className:"flex  border relative mt-10 justify-center mx-auto w-[30%]",children:[l.jsx("span",{className:"mr-2",children:"Select Delivery Note:"}),l.jsx("input",{type:"text",className:"border w-[55%] h-7 px-1 text-sm bg-white cursor-pointer",placeholder:"View Invoices",disabled:!0,readOnly:!0}),l.jsx(J,{items:n,columns:[{key:"DocNo",label:"Bill No"},{key:"date",label:"Bill Date"},{key:"accCode",label:"Account"},{key:"accountName",label:"Account Name"},{key:"total",label:"Amount"},{key:"doctype",label:"DOC type"},{key:"sMan",label:"S.Id"},{key:"payment",label:"Tr.type"}],onSelect:x,style:{top:"top-[5px] left-[88%] "},all:!0,name:"invoiceList"})]}),l.jsxs("div",{className:"flex  border relative mt-10 justify-center mx-auto w-[40%]",children:[l.jsx("span",{className:"mr-2 w-[26%] text-right",children:"Select Quotation :"}),l.jsx("input",{type:"text",className:"border w-[40%] h-7 px-1 text-sm bg-white cursor-pointer",placeholder:"View Invoices",disabled:!0,readOnly:!0}),l.jsx(J,{items:s,columns:[{key:"DocNo",label:"Bill No"},{key:"date",label:"Bill Date"},{key:"accCode",label:"Account"},{key:"accountName",label:"Account Name"},{key:"total",label:"Amount"},{key:"doctype",label:"DOC type"},{key:"sMan",label:"S.Id"},{key:"payment",label:"Tr.type"}],onSelect:x,style:{top:"top-[5px] left-[80%] "},all:!0,name:"invoiceList"})]})]})]}),Object.keys(f).includes("supplierName")?l.jsx("div",{div:!0,className:"w-[95%] mx-auto mt-1",children:l.jsx(Hv,{mode:"Edit",initialInvoice:f})}):Object.keys(f).length>0&&l.jsx("div",{className:"w-[95%] mx-auto mt-1",children:l.jsx(zv,{mode:"edit",initialInvoice:f})})]})};function kI(){const[t,e]=_.useState("none"),[n,r]=_.useState(null),[s,i]=_.useState([]),[o,a]=_.useState([]),c=async()=>{const f=await Md();i(f)},u=async()=>{const f=await FE();a(f)};_.useEffect(()=>{c(),u()},[]);const h=f=>{r(f)},d=f=>{e(f),r(null)};return l.jsx("div",{children:l.jsxs("div",{className:"w-[98%] mx-auto",children:[l.jsxs("nav",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>d("add"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Add"}),l.jsx("button",{onClick:()=>d("edit"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Edit"}),l.jsx("button",{onClick:()=>d("delete"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Delete"})]}),t==="none"&&l.jsx(Aa,{areas:s,mode:"delete",initialSupplier:{},cb:u,customers:o}),(t==="edit"||t==="delete")&&!n&&l.jsx("div",{className:"h-[94vh] flex flex-col items-center",children:l.jsxs("div",{children:["Select Supplier: ",l.jsx("input",{type:"text"}),l.jsx(J,{items:o,onSelect:f=>h(f),style:{top:"top-11 left-[56%]"},columns:[{key:"name",label:"Supplier Name"},{key:"address",label:"Address"},{key:"mobile",label:"Mobile"}],all:!0})]})}),t==="add"&&l.jsx(Aa,{mode:"add",areas:s,initialSupplier:{},cb:u,customers:o}),(t==="edit"||t==="delete")&&n&&l.jsx(Aa,{areas:s,mode:t,initialSupplier:n,cb:u})]})})}const hp={id:"",name:"",accountType:"Customer",referenceId:"",createdOn:new Date().toISOString().split("T")[0],supplierName:"",area:"",deliveryPlace:"",creditLimit:"",address:"",telephone:"",mobile:"",email:"",salId:"",vatCode:"",tmId:"",legalName:"",active:"Yes"};function Aa({mode:t,initialSupplier:e,areas:n,cb:r,customers:s}){const[i,o]=_.useState(hp);_.useEffect(()=>{o({id:e.id||"",name:e.name||"",accountType:e.accountType||"Customer",referenceId:e.referenceId||"",createdOn:e.createdOn||new Date().toISOString().split("T")[0],supplierName:e.supplierName||"",area:e.area||"",deliveryPlace:e.deliveryPlace||"",creditLimit:e.creditLimit||"",address:e.address||"",telephone:e.telephone||"",mobile:e.mobile||"",email:e.email||"",description:e.description||"",salId:e.salId||"",vatCode:e.vatCode||"",tmId:e.tmId||"",legalName:e.legalName||"",active:e.active||"Yes"})},[e]);const a=d=>{const{name:f,value:g}=d.target;o(x=>({...x,[f]:g}))},c=d=>{o(f=>({...f,area:d.name}))},u=async d=>{d.preventDefault();const{id:f,...g}=i;if(t==="add"){const x=await LE(g);alert(x?"Customer added sucessfully":"Failed to add customer")}else t==="edit"?(await zE(f,g),alert("Customer Updated Sucessfully")):t==="delete"&&(await $E(f),alert("Customer Deleted Sucessfully"));r&&r(),o(hp)},h=d=>{o(f=>({...f,vatCode:d||""}))};return l.jsxs("form",{onSubmit:u,className:"min-h-[88.5vh]",children:[l.jsxs("div",{className:"w-[96%] mx-auto grid grid-cols-9 gap-3 p-2 mt-10",children:[l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[74%] text-right inline-block",children:"Branch:"}),l.jsx("input",{type:"text",name:"branch",value:1,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:!0})]}),l.jsx("div",{className:"flex items-center col-span-2",children:l.jsx("input",{type:"text",name:"branchName",value:"Main Branch",className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:!0})}),l.jsxs("div",{className:"flex items-center col-span-2 border ",children:[l.jsx("span",{className:"w-[60%] text-right inline-block",children:"Acc.Type:"}),l.jsxs("select",{name:"accountType",value:i.accountType,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete",children:[l.jsx("option",{value:"Customer",children:"Customer"}),l.jsx("option",{value:"Supplier",children:"Supplier"})]})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[50%] text-right inline-block",children:"Reference ID:"}),l.jsx("input",{type:"text",name:"referenceId",value:i.referenceId,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Date:"}),l.jsx("input",{type:"date",name:"createdOn",value:i.createdOn,onChange:a,className:"h-7 w-full px-1 border border-gray-600  ml-1",disabled:!0})]}),l.jsxs("div",{className:"flex items-center col-span-3",children:[l.jsx("span",{className:"w-[14.5%] text-right inline-block",children:"Name:"}),l.jsx("input",{type:"text",name:"name",value:i.name,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2 relative",children:[l.jsx("span",{className:"w-[60%] text-right inline-block",children:"Area:"}),l.jsx("input",{type:"text",name:"area",value:i.area,className:`h-7 px-1 border border-gray-600  w-full ml-1   ${t!=="delete"&&"bg-white"} `,disabled:!0}),t!=="delete"&&l.jsx(J,{items:n,onSelect:c,style:{top:"top-[25%] left-[94%] "},columns:[{key:"name",label:"Area Name"},{key:"shortForm",label:"Short Form"}],all:!0})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[50%] text-right inline-block",children:"Del.Place:"}),l.jsx("input",{type:"text",name:"deliveryPlace",value:i.deliveryPlace,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Credit Limit:"}),l.jsx("input",{type:"text",name:"creditLimit",value:i.creditLimit,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-3",children:[l.jsx("span",{className:"w-[14%] text-right inline-block",children:"Address:"}),l.jsx("input",{type:"text",name:"address",value:i.address,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[60%] text-right inline-block",children:"Tel.No:"}),l.jsx("input",{type:"text",name:"telephone",value:i.telephone,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[50%] text-right inline-block",children:"Mob:"}),l.jsx("input",{type:"text",name:"mobile",value:i.mobile,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Sal.Id:"}),l.jsx("input",{type:"text",name:"salId",value:i.salId,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-3",children:[l.jsx("span",{className:"w-[15%] text-right inline-block",children:"Email:"}),l.jsx("input",{type:"email",name:"email",value:i.email,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[60%] text-right inline-block",children:"Active:"}),l.jsxs("select",{name:"active",value:i.active,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete",children:[l.jsx("option",{value:"Yes",children:"Yes"}),l.jsx("option",{value:"No",children:"No"})]})]}),l.jsxs("div",{className:" relative flex items-center col-span-2 ",children:[l.jsx("span",{className:"w-[33%]   text-right inline-block",children:"Vat type:"}),l.jsx("input",{type:"text",name:"vatType",value:i.vatCode,disabled:!0,className:` ${t=="edit"||t=="add"?"bg-white":""} flex-1 h-7      px-1 border  border-gray-600 ml-1 `}),t!=="delete"&&l.jsx(J,{items:Gc,onSelect:h,style:{top:"top-1 left-[92%]"},columns:[{key:"shortForm",label:"VAT Code"},{key:"Description",label:"Description"},{key:"Vatpercentage",label:"VAT Percentage"},{key:"startDate",label:"Start Date"}]})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"TmID:"}),l.jsx("input",{type:"text",name:"tmId",value:i.tmId,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-3",children:[l.jsx("span",{className:"w-[30%]   inline-block",children:"Legal Name:"}),l.jsx("input",{type:"text",name:"legalName",value:i.legalName,onChange:a,className:"h-7 px-1 border border-gray-600 w-full",disabled:t==="delete"})]})]}),l.jsx("div",{className:" mt-7 min-h-[40vh]",children:l.jsx(Ze,{data:t==="add"?s:[i],name:"Details",columns:[{key:"id",header:"Id"},{key:"name",header:"Name"},{key:"accountType",header:"Account Type"},{key:"referenceId",header:"Reference ID"},{key:"createdOn",header:"Date"},{key:"area",header:"Area"},{key:"deliveryPlace",header:"Delivery Place"},{key:"creditLimit",header:"Credit Limit"},{key:"address",header:"Address"},{key:"telephone",header:"Telephone Number"},{key:"mobile",header:"Mobile Number"},{key:"salId",header:"Sales ID"},{key:"email",header:"Email"},{key:"active",header:"Active?"},{key:"vatCode",header:"VAT Code"},{key:"tmId",header:"Tm ID"},{key:"legalName",header:"Legal Name"}],highlightColumn:"Id",height:40})}),l.jsxs("div",{className:"mt-2",children:[(t==="add"||t==="edit")&&l.jsxs("button",{type:"submit",className:" px-5 py-1   bg-white w-full  ",children:[t==="add"?"Add":"Update"," Customer"]}),t==="delete"&&Object.keys(e).length!=0&&l.jsx("button",{type:"submit",className:" px-5 py-1  bg-white w-full  ",children:"Delete Customer"})]})]})}const fp={name:"",shortForm:""},jI=()=>{const[t,e]=_.useState(fp),[n,r]=_.useState([]),s=async()=>{const c=await Md();r(c)};_.useEffect(()=>{s()},[]);const i=c=>{const{name:u,value:h}=c.target;e(d=>({...d,[u]:h}))},o=async c=>{if(c.preventDefault(),n.some(h=>h.shortForm.toLowerCase()===t.shortForm.toLowerCase()||h.name.toLowerCase()===t.name.toLowerCase()))return alert("This area already exists.");await DE(t),e(fp),await s()},a=async(c,u)=>{c.preventDefault();try{await PE(u),await s(),console.log(`Deleting brand with ID: ${u}`)}catch(h){console.error("Error deleting brand:",h)}};return l.jsxs("div",{className:"min-h-[100vh]",children:[l.jsx("h1",{className:"text-center relative top-10  text-3xl",children:"Add Area"}),l.jsxs("form",{className:" mt-28",onSubmit:o,children:[l.jsxs("div",{className:"flex justify-between w-[80%] mx-auto",children:[l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter Name:"}),l.jsx("input",{type:"text",name:"name",className:"ml-1 px-2",onChange:i,required:!0,value:t.name})]}),l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter Shortform:"}),l.jsx("input",{type:"text",name:"shortForm",className:"ml-1 px-2",onChange:i,required:!0,value:t.shortForm})]})]}),l.jsx("div",{className:"w-[80%] mx-auto mt-16 h-[40vh]",children:l.jsx(Ze,{name:"Available Areas",data:n,columns:[{key:"name",header:"Area Name"},{key:"shortForm",header:"Short Form"},{key:"delete",header:"Delete",render:c=>l.jsx("button",{type:"button",onClick:u=>a(u,c.shortForm),children:"Delete"})}]})}),l.jsx("div",{className:"w-[80%] mx-auto mt-4",children:l.jsx("button",{type:"submit",className:"bg-white border border-gray-300 w-full  py-1 px-3 ",children:"Add"})})]})]})},pp={name:"",shortForm:""},TI=()=>{const[t,e]=_.useState(pp),[n,r]=_.useState([]),s=async()=>{const c=await Wv();r(c)};_.useEffect(()=>{s()},[]);const i=c=>{const{name:u,value:h}=c.target;e(d=>({...d,[u]:h}))},o=async c=>{if(c.preventDefault(),n.some(h=>h.shortForm.toLowerCase()===t.shortForm.toLowerCase()))return alert("This brand already exists.");await _I(t),e(pp),s()},a=async(c,u)=>{c.preventDefault();try{await CI(u),await s(),console.log(`Deleting brand with ID: ${u}`)}catch(h){console.error("Error deleting brand:",h)}};return l.jsxs("div",{className:"min-h-[100vh]",children:[l.jsx("h1",{className:"text-center relative top-10  text-3xl",children:"Add Brand"}),l.jsxs("form",{className:" mt-28",onSubmit:o,children:[l.jsxs("div",{className:"flex justify-between w-[80%] mx-auto",children:[l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter Name:"}),l.jsx("input",{type:"text",name:"name",className:"ml-1 px-2",onChange:i,required:!0,value:t.name})]}),l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter ID:"}),l.jsx("input",{type:"text",name:"shortForm",className:"ml-1 px-2",onChange:i,required:!0,value:t.shortForm})]})]}),l.jsx("div",{className:"w-[80%] mx-auto mt-16",children:l.jsx(Ze,{name:"Available Areas",data:n,columns:[{key:"shortForm",header:"Brand Id"},{key:"name",header:"Brand Name"},{key:"delete",header:"Delete",render:c=>l.jsx("button",{type:"button",onClick:u=>a(u,c.shortForm),children:"Delete"})}]})}),l.jsx("div",{className:"w-[80%] mx-auto mt-4",children:l.jsx("button",{type:"submit",className:"bg-white border border-gray-300 w-full  py-1 px-3 ",children:"Add"})})]})]})},mp={name:"",shortForm:"",category:""},AI=()=>{const[t,e]=_.useState([]),[n,r]=_.useState(mp),[s,i]=_.useState(null),[o,a]=_.useState([]),c=async()=>{const x=await Fl();e(x)},u=async()=>{const x=await XE();a(x)};_.useEffect(()=>{c(),u()},[]);const h=x=>{i(x),r(p=>({...p,category:x.name}))},d=x=>{const{name:p,value:w}=x.target;r(y=>({...y,[p]:w}))},f=async x=>{if(x.preventDefault(),!s)return alert("Please select a category first");const p={name:n.name,shortForm:n.shortForm,id:s.id};await JE(s.id,p),a(w=>[...w,p]),r(mp)},g=async(x,p)=>{x.preventDefault();try{await eI(p),await u()}catch(w){console.error("Error subcategory brand:",w)}};return l.jsxs("div",{className:"min-h-[100vh]",children:[l.jsx("h1",{className:"text-center relative top-10 text-3xl",children:"Add Sub-Category"}),l.jsxs("form",{className:"mt-28",onSubmit:f,children:[l.jsxs("div",{className:"grid grid-cols-2 gap-5 w-[80%] mx-auto",children:[l.jsxs("div",{className:"col-span-1",children:[l.jsx("span",{children:"Enter Name:"}),l.jsx("input",{type:"text",name:"name",className:"ml-1 px-2",onChange:d,required:!0,value:n.name||""})]}),l.jsxs("div",{className:"col-span-1",children:[l.jsx("span",{children:"Enter ID:"}),l.jsx("input",{type:"text",name:"shortForm",className:"ml-1 px-2",onChange:d,required:!0,value:n.shortForm||""})]}),l.jsxs("div",{className:"relative col-span-1 -left-6",children:[l.jsx("span",{className:"w-[29%] border inline-block",children:"Enter Category:"}),l.jsx("input",{type:"text",className:"ml-1 px-2 bg-white",value:s?s.name:"",disabled:!0}),l.jsx(J,{items:t,columns:[{key:"shortForm",label:"Category ID"},{key:"name",label:"Category Name"}],all:!0,onSelect:h,style:{top:"top-[5px] left-[76%]"}})]})]}),l.jsx("div",{className:"w-[80%] mx-auto mt-12",children:l.jsx(Ze,{name:"Details",data:o.length>0?o:[{name:"No results found",shortForm:""}],columns:[{key:"shortForm",header:"SubCategory Id"},{key:"name",header:"SubCategory Name"},{key:"id",header:"SubCategory Unique Key"},{key:"delete",header:"Delete",render:x=>l.jsx("button",{type:"button",onClick:p=>g(p,x.id),children:"Delete"})}]})}),l.jsx("div",{className:"w-[80%] mx-auto mt-10",children:l.jsx("button",{type:"submit",className:"bg-white border border-gray-300 w-full py-1 px-3",children:"Add"})})]})]})},gp={name:"",shortForm:""},yp=()=>{const[t,e]=_.useState(gp),[n,r]=_.useState([]),s=c=>{const{name:u,value:h}=c.target;e(d=>({...d,[u]:h}))},i=async()=>{const c=await Fl();r(c)};_.useEffect(()=>{i()},[]);const o=async c=>{if(c.preventDefault(),n.some(d=>d.shortForm.toLowerCase()===t.shortForm.toLowerCase())){alert("This category already exists.");return}const h=await YE(t);i(),h&&e(gp)},a=async(c,u)=>{c.preventDefault();try{await ZE(u),await i(),console.log(`Deleting Category with ID: ${u}`)}catch(h){console.error("Error deleting Category:",h)}};return l.jsxs("div",{className:"min-h-[100vh]",children:[l.jsx("h1",{className:"text-center relative top-10  text-3xl",children:"Add Category"}),l.jsxs("form",{className:" mt-28",onSubmit:o,children:[l.jsxs("div",{className:"flex justify-between w-[80%] mx-auto",children:[l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter Name:"}),l.jsx("input",{type:"text",name:"name",className:"ml-1 px-2",onChange:s,required:!0,value:t.name})]}),l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter ID:"}),l.jsx("input",{type:"text",name:"shortForm",className:"ml-1 px-2",onChange:s,required:!0,value:t.shortForm})]})]}),l.jsx("div",{className:"w-[80%] mx-auto mt-16",children:l.jsx(Ze,{name:"Available Categories",data:n,columns:[{key:"shortForm",header:"Category Id"},{key:"name",header:"Category Name"},{key:"delete",header:"Delete",render:c=>l.jsx("button",{type:"button",onClick:u=>a(u,c.shortForm),children:"Delete"})}]})}),l.jsx("div",{className:"w-[80%] mx-auto mt-4",children:l.jsx("button",{type:"submit",className:"bg-white border border-gray-300 w-full  py-1 px-3 ",children:"Add"})})]})]})},DI=async t=>{try{console.log(t);const e=t.products.map(async n=>{if(n.id&&n.id!==""){const r=await U(A(O,`products/${n.id}`));if(r.exists()){console.log(n);const s=r.val(),i=Object.keys(s)[0],a=(isNaN(s.quantity)?0:parseInt(s.quantity))+parseInt(n.quantity);await je(A(O,`products/${n.id}`),{quantity:a})}}});await Promise.all(e)}catch(e){console.error("Failed to return products:",e)}},PI=()=>{const[t,e]=_.useState("none"),[n,r]=_.useState(null);_.useState([]);const[s,i]=_.useState(null),o=()=>{window.confirm("Are you sure you want to return this invoice?")&&(alert("Return successful!"),DI(s))};return l.jsx(l.Fragment,{children:l.jsxs("div",{className:"w-[98%] mx-auto",children:[l.jsx("div",{className:"mt-4 h-[80vh] overflow-auto border border-gray-200",children:l.jsx(Uv,{formData:n,onDataChange:a=>i({products:a}),mode:t})}),l.jsx("div",{className:"flex space-x-2 mt-4",children:l.jsx("button",{onClick:o,className:"bg-white text-gray-500 px-5 py-1 w-full active:scale-95 border border-gray-300",children:"Return"})})]})})};var Qv={exports:{}};(function(t,e){(function(r,s){t.exports=s()})(window,function(){return function(n){var r={};function s(i){if(r[i])return r[i].exports;var o=r[i]={i,l:!1,exports:{}};return n[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=n,s.c=r,s.d=function(i,o,a){s.o(i,o)||Object.defineProperty(i,o,{enumerable:!0,get:a})},s.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},s.t=function(i,o){if(o&1&&(i=s(i)),o&8||o&4&&typeof i=="object"&&i&&i.__esModule)return i;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:i}),o&2&&typeof i!="string")for(var c in i)s.d(a,c,(function(u){return i[u]}).bind(null,c));return a},s.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(o,"a",o),o},s.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},s.p="",s(s.s=0)}({"./src/index.js":function(n,r,s){s.r(r),s("./src/sass/index.scss");var i=s("./src/js/init.js"),o=i.default.init;typeof window<"u"&&(window.printJS=o),r.default=o},"./src/js/browser.js":function(n,r,s){s.r(r);var i={isFirefox:function(){return typeof InstallTrigger<"u"},isIE:function(){return navigator.userAgent.indexOf("MSIE")!==-1||!!document.documentMode},isEdge:function(){return!i.isIE()&&!!window.StyleMedia},isChrome:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;return!!a.chrome},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||navigator.userAgent.toLowerCase().indexOf("safari")!==-1},isIOSChrome:function(){return navigator.userAgent.toLowerCase().indexOf("crios")!==-1}};r.default=i},"./src/js/functions.js":function(n,r,s){s.r(r),s.d(r,"addWrapper",function(){return c}),s.d(r,"capitalizePrint",function(){return u}),s.d(r,"collectStyles",function(){return h}),s.d(r,"addHeader",function(){return f}),s.d(r,"cleanUp",function(){return g}),s.d(r,"isRawHTML",function(){return x});var i=s("./src/js/modal.js"),o=s("./src/js/browser.js");function a(p){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(y){return typeof y}:a=function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},a(p)}function c(p,w){var y="font-family:"+w.font+" !important; font-size: "+w.font_size+" !important; width:100%;";return'<div style="'+y+'">'+p+"</div>"}function u(p){return p.charAt(0).toUpperCase()+p.slice(1)}function h(p,w){for(var y=document.defaultView||window,m="",v=y.getComputedStyle(p,""),C=0;C<v.length;C++)(w.targetStyles.indexOf("*")!==-1||w.targetStyle.indexOf(v[C])!==-1||d(w.targetStyles,v[C]))&&v.getPropertyValue(v[C])&&(m+=v[C]+":"+v.getPropertyValue(v[C])+";");return m+="max-width: "+w.maxWidth+"px !important; font-size: "+w.font_size+" !important;",m}function d(p,w){for(var y=0;y<p.length;y++)if(a(w)==="object"&&w.indexOf(p[y])!==-1)return!0;return!1}function f(p,w){var y=document.createElement("div");if(x(w.header))y.innerHTML=w.header;else{var m=document.createElement("h1"),v=document.createTextNode(w.header);m.appendChild(v),m.setAttribute("style",w.headerStyle),y.appendChild(m)}p.insertBefore(y,p.childNodes[0])}function g(p){p.showModal&&i.default.close(),p.onLoadingEnd&&p.onLoadingEnd(),(p.showModal||p.onLoadingStart)&&window.URL.revokeObjectURL(p.printable);var w="mouseover";(o.default.isChrome()||o.default.isFirefox())&&(w="focus");var y=function m(){window.removeEventListener(w,m),p.onPrintDialogClose();var v=document.getElementById(p.frameId);v&&v.remove()};window.addEventListener(w,y)}function x(p){var w=new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>");return w.test(p)}},"./src/js/html.js":function(n,r,s){s.r(r);var i=s("./src/js/functions.js"),o=s("./src/js/print.js");function a(h){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(f){return typeof f}:a=function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},a(h)}r.default={print:function(d,f){var g=u(d.printable)?d.printable:document.getElementById(d.printable);if(!g){window.console.error("Invalid HTML element id: "+d.printable);return}d.printableElement=c(g,d),d.header&&Object(i.addHeader)(d.printableElement,d),o.default.send(d,f)}};function c(h,d){for(var f=h.cloneNode(),g=Array.prototype.slice.call(h.childNodes),x=0;x<g.length;x++)if(d.ignoreElements.indexOf(g[x].id)===-1){var p=c(g[x],d);f.appendChild(p)}switch(d.scanStyles&&h.nodeType===1&&f.setAttribute("style",Object(i.collectStyles)(h,d)),h.tagName){case"SELECT":f.value=h.value;break;case"CANVAS":f.getContext("2d").drawImage(h,0,0);break}return f}function u(h){return a(h)==="object"&&h&&(h instanceof HTMLElement||h.nodeType===1)}},"./src/js/image.js":function(n,r,s){s.r(r);var i=s("./src/js/functions.js"),o=s("./src/js/print.js"),a=s("./src/js/browser.js");r.default={print:function(u,h){u.printable.constructor!==Array&&(u.printable=[u.printable]),u.printableElement=document.createElement("div"),u.printable.forEach(function(d){var f=document.createElement("img");if(f.setAttribute("style",u.imageStyle),f.src=d,a.default.isFirefox()){var g=f.src;f.src=g}var x=document.createElement("div");x.appendChild(f),u.printableElement.appendChild(x)}),u.header&&Object(i.addHeader)(u.printableElement,u),o.default.send(u,h)}}},"./src/js/init.js":function(n,r,s){s.r(r);var i=s("./src/js/browser.js"),o=s("./src/js/modal.js"),a=s("./src/js/pdf.js"),c=s("./src/js/html.js"),u=s("./src/js/raw-html.js"),h=s("./src/js/image.js"),d=s("./src/js/json.js");function f(x){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?f=function(w){return typeof w}:f=function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},f(x)}var g=["pdf","html","image","json","raw-html"];r.default={init:function(){var p={printable:null,fallbackPrintable:null,type:"pdf",header:null,headerStyle:"font-weight: 300;",maxWidth:800,properties:null,gridHeaderStyle:"font-weight: bold; padding: 5px; border: 1px solid #dddddd;",gridStyle:"border: 1px solid lightgray; margin-bottom: -1px;",showModal:!1,onError:function(S){throw S},onLoadingStart:null,onLoadingEnd:null,onPrintDialogClose:function(){},onIncompatibleBrowser:function(){},modalMessage:"Retrieving Document...",frameId:"printJS",printableElement:null,documentTitle:"Document",targetStyle:["clear","display","width","min-width","height","min-height","max-height"],targetStyles:["border","box","break","text-decoration"],ignoreElements:[],repeatTableHeader:!0,css:null,style:null,scanStyles:!0,base64:!1,onPdfOpen:null,font:"TimesNewRoman",font_size:"12pt",honorMarginPadding:!0,honorColor:!1,imageStyle:"max-width: 100%;"},w=arguments[0];if(w===void 0)throw new Error("printJS expects at least 1 attribute.");switch(f(w)){case"string":p.printable=encodeURI(w),p.fallbackPrintable=p.printable,p.type=arguments[1]||p.type;break;case"object":p.printable=w.printable,p.fallbackPrintable=typeof w.fallbackPrintable<"u"?w.fallbackPrintable:p.printable,p.fallbackPrintable=p.base64?"data:application/pdf;base64,".concat(p.fallbackPrintable):p.fallbackPrintable;for(var y in p)y==="printable"||y==="fallbackPrintable"||(p[y]=typeof w[y]<"u"?w[y]:p[y]);break;default:throw new Error('Unexpected argument type! Expected "string" or "object", got '+f(w))}if(!p.printable)throw new Error("Missing printable information.");if(!p.type||typeof p.type!="string"||g.indexOf(p.type.toLowerCase())===-1)throw new Error("Invalid print type. Available types are: pdf, html, image and json.");p.showModal&&o.default.show(p),p.onLoadingStart&&p.onLoadingStart();var m=document.getElementById(p.frameId);m&&m.parentNode.removeChild(m);var v=document.createElement("iframe");switch(i.default.isFirefox()?v.setAttribute("style","width: 1px; height: 100px; position: fixed; left: 0; top: 0; opacity: 0; border-width: 0; margin: 0; padding: 0"):v.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),v.setAttribute("id",p.frameId),p.type!=="pdf"&&(v.srcdoc="<html><head><title>"+p.documentTitle+"</title>",p.css&&(Array.isArray(p.css)||(p.css=[p.css]),p.css.forEach(function(b){v.srcdoc+='<link rel="stylesheet" href="'+b+'">'})),v.srcdoc+="</head><body></body></html>"),p.type){case"pdf":if(i.default.isIE())try{console.info("Print.js doesn't support PDF printing in Internet Explorer.");var C=window.open(p.fallbackPrintable,"_blank");C.focus(),p.onIncompatibleBrowser()}catch(b){p.onError(b)}finally{p.showModal&&o.default.close(),p.onLoadingEnd&&p.onLoadingEnd()}else a.default.print(p,v);break;case"image":h.default.print(p,v);break;case"html":c.default.print(p,v);break;case"raw-html":u.default.print(p,v);break;case"json":d.default.print(p,v);break}}}},"./src/js/json.js":function(n,r,s){s.r(r);var i=s("./src/js/functions.js"),o=s("./src/js/print.js");function a(u){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(d){return typeof d}:a=function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},a(u)}r.default={print:function(h,d){if(a(h.printable)!=="object")throw new Error("Invalid javascript data object (JSON).");if(typeof h.repeatTableHeader!="boolean")throw new Error("Invalid value for repeatTableHeader attribute (JSON).");if(!h.properties||!Array.isArray(h.properties))throw new Error("Invalid properties array for your JSON data.");h.properties=h.properties.map(function(f){return{field:a(f)==="object"?f.field:f,displayName:a(f)==="object"?f.displayName:f,columnSize:a(f)==="object"&&f.columnSize?f.columnSize+";":100/h.properties.length+"%;"}}),h.printableElement=document.createElement("div"),h.header&&Object(i.addHeader)(h.printableElement,h),h.printableElement.innerHTML+=c(h),o.default.send(h,d)}};function c(u){var h=u.printable,d=u.properties,f='<table style="border-collapse: collapse; width: 100%;">';u.repeatTableHeader&&(f+="<thead>"),f+="<tr>";for(var g=0;g<d.length;g++)f+='<th style="width:'+d[g].columnSize+";"+u.gridHeaderStyle+'">'+Object(i.capitalizePrint)(d[g].displayName)+"</th>";f+="</tr>",u.repeatTableHeader&&(f+="</thead>"),f+="<tbody>";for(var x=0;x<h.length;x++){f+="<tr>";for(var p=0;p<d.length;p++){var w=h[x],y=d[p].field.split(".");if(y.length>1)for(var m=0;m<y.length;m++)w=w[y[m]];else w=w[d[p].field];f+='<td style="width:'+d[p].columnSize+u.gridStyle+'">'+w+"</td>"}f+="</tr>"}return f+="</tbody></table>",f}},"./src/js/modal.js":function(n,r,s){s.r(r);var i={show:function(a){var c="font-family:sans-serif; display:table; text-align:center; font-weight:300; font-size:30px; left:0; top:0;position:fixed; z-index: 9990;color: #0460B5; width: 100%; height: 100%; background-color:rgba(255,255,255,.9);transition: opacity .3s ease;",u=document.createElement("div");u.setAttribute("style",c),u.setAttribute("id","printJS-Modal");var h=document.createElement("div");h.setAttribute("style","display:table-cell; vertical-align:middle; padding-bottom:100px;");var d=document.createElement("div");d.setAttribute("class","printClose"),d.setAttribute("id","printClose"),h.appendChild(d);var f=document.createElement("span");f.setAttribute("class","printSpinner"),h.appendChild(f);var g=document.createTextNode(a.modalMessage);h.appendChild(g),u.appendChild(h),document.getElementsByTagName("body")[0].appendChild(u),document.getElementById("printClose").addEventListener("click",function(){i.close()})},close:function(){var a=document.getElementById("printJS-Modal");a&&a.parentNode.removeChild(a)}};r.default=i},"./src/js/pdf.js":function(n,r,s){s.r(r);var i=s("./src/js/print.js"),o=s("./src/js/functions.js");r.default={print:function(u,h){if(u.base64){var d=Uint8Array.from(atob(u.printable),function(g){return g.charCodeAt(0)});a(u,h,d);return}u.printable=/^(blob|http|\/\/)/i.test(u.printable)?u.printable:window.location.origin+(u.printable.charAt(0)!=="/"?"/"+u.printable:u.printable);var f=new window.XMLHttpRequest;f.responseType="arraybuffer",f.addEventListener("error",function(){Object(o.cleanUp)(u),u.onError(f.statusText,f)}),f.addEventListener("load",function(){if([200,201].indexOf(f.status)===-1){Object(o.cleanUp)(u),u.onError(f.statusText,f);return}a(u,h,f.response)}),f.open("GET",u.printable,!0),f.send()}};function a(c,u,h){var d=new window.Blob([h],{type:"application/pdf"});d=window.URL.createObjectURL(d),u.setAttribute("src",d),i.default.send(c,u)}},"./src/js/print.js":function(n,r,s){s.r(r);var i=s("./src/js/browser.js"),o=s("./src/js/functions.js"),a={send:function(f,g){document.getElementsByTagName("body")[0].appendChild(g);var x=document.getElementById(f.frameId);x.onload=function(){if(f.type==="pdf"){i.default.isFirefox()?setTimeout(function(){return c(x,f)},1e3):c(x,f);return}var p=x.contentWindow||x.contentDocument;if(p.document&&(p=p.document),p.body.appendChild(f.printableElement),f.type!=="pdf"&&f.style){var w=document.createElement("style");w.innerHTML=f.style,p.head.appendChild(w)}var y=p.getElementsByTagName("img");y.length>0?u(Array.from(y)).then(function(){return c(x,f)}):c(x,f)}}};function c(d,f){try{if(d.focus(),i.default.isEdge()||i.default.isIE())try{d.contentWindow.document.execCommand("print",!1,null)}catch{d.contentWindow.print()}else d.contentWindow.print()}catch(g){f.onError(g)}finally{i.default.isFirefox()&&(d.style.visibility="hidden",d.style.left="-1px"),Object(o.cleanUp)(f)}}function u(d){var f=d.map(function(g){if(g.src&&g.src!==window.location.href)return h(g)});return Promise.all(f)}function h(d){return new Promise(function(f){var g=function x(){!d||typeof d.naturalWidth>"u"||d.naturalWidth===0||!d.complete?setTimeout(x,500):f()};g()})}r.default=a},"./src/js/raw-html.js":function(n,r,s){s.r(r);var i=s("./src/js/print.js");r.default={print:function(a,c){a.printableElement=document.createElement("div"),a.printableElement.setAttribute("style","width:100%"),a.printableElement.innerHTML=a.printable,i.default.send(a,c)}}},"./src/sass/index.scss":function(n,r,s){},0:function(n,r,s){n.exports=s("./src/index.js")}}).default})})(Qv);var RI=Qv.exports;const OI=vp(RI),MI=t=>{OI({printable:t,type:"html",targetStyles:["*"],style:'@import url("../src/index.css");'})},LI=()=>{const[t,e]=_.useState(null),[n,r]=_.useState("default");_.useContext(Fd),_.useEffect(()=>{const o=a=>{e(a)};return window.electron.ipcRenderer.on("load-invoice-data",o),()=>{window.electron.ipcRenderer.removeListener("load-invoice-data",o)}},[]);const s=o=>{const a=parseFloat(o);return isNaN(a)?"0.00":a.toFixed(2)};if(!t)return l.jsx("p",{children:"Loading..."});const i=()=>{MI("product-list")};return l.jsxs("div",{id:"invoice-container",className:"w-full p-5 font-sans flex flex-col justify-between ",children:[l.jsxs("div",{id:"product-list",children:[n!="no-header"&&l.jsx("div",{className:"text-center mb-5",children:l.jsx("img",{src:"../public/shop-logo.jpg",alt:"Shop Logo",className:"w-full h-80"})}),l.jsx("div",{className:"mb-5",children:l.jsx("table",{className:"w-full border-collapse",children:l.jsxs("tbody",{children:[l.jsxs("tr",{className:"border-b",children:[l.jsxs("td",{className:"p-2",children:[l.jsx("strong",{children:"Acc. No:"})," 02-01-2000"]}),l.jsxs("td",{className:"p-2",children:[l.jsx("strong",{children:"Date:"})," 27/08/2024"]})]}),l.jsxs("tr",{className:"border-b",children:[l.jsxs("td",{className:"p-2",children:[l.jsx("strong",{children:"Name:"})," QALAT AL MADAM AUTO MAINT W.SHOP"]}),l.jsxs("td",{className:"p-2",children:[l.jsx("strong",{children:"Doc. No:"})," 02-10853"]})]}),l.jsxs("tr",{className:"border-b",children:[l.jsxs("td",{className:"p-2",children:[l.jsx("strong",{children:"Address:"})," [Customer Address]"]}),l.jsxs("td",{className:"p-2",children:[l.jsx("strong",{children:"Salesman:"})," ",t.sMan]})]}),l.jsxs("tr",{className:"border-b",children:[l.jsxs("td",{className:"p-2",children:[l.jsx("strong",{children:"Tel. No. / Fax No.:"})," [Customer Contact]"]}),l.jsxs("td",{className:"p-2",children:[l.jsx("strong",{children:"Currency:"})," AED"]})]}),l.jsxs("tr",{className:"border-b",children:[l.jsxs("td",{className:"p-2",children:[l.jsx("strong",{children:"Delivery Place:"})," [Delivery Location]"]}),l.jsxs("td",{className:"p-2",children:[l.jsx("strong",{children:"Terms:"})," Cash"]})]}),l.jsx("tr",{children:l.jsxs("td",{className:"p-2",colSpan:"2",children:[l.jsx("strong",{children:"Customer TRN:"})," [TRN Number]"]})})]})})}),l.jsxs("div",{className:"mb-5",children:[l.jsx("p",{className:"font-bold",children:"Note:"}),l.jsx("p",{children:"Dear Sir/Madam,"}),l.jsx("p",{children:"In connection with your inquiry, we are pleased to quote our best competitive price(s) as per the Terms and Conditions given below."})]}),l.jsxs("table",{className:"w-full border-collapse mt-5",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b-2",children:[l.jsx("th",{className:"text-left p-2",children:"Sr.No"}),l.jsx("th",{className:"text-left p-2",children:"Product Code"}),n=="part-number"&&l.jsx("th",{className:"text-left p-2",children:"Part Number"}),l.jsx("th",{className:"text-left p-2",children:"Description"}),l.jsx("th",{className:"text-center p-2",children:"Qty"}),l.jsx("th",{className:"text-right p-2",children:"Unit Price"}),l.jsx("th",{className:"text-right p-2",children:"Net Amt (Excl VAT)"}),l.jsx("th",{className:"text-right p-2",children:"VAT%"}),l.jsx("th",{className:"text-right p-2",children:"VAT Amount"}),l.jsx("th",{className:"text-right p-2",children:"Gross Amt (Incl VAT)"})]})}),l.jsx("tbody",{children:t.products.map((o,a)=>l.jsxs("tr",{className:"border-b",children:[l.jsx("td",{className:"p-2",children:a+1}),l.jsx("td",{className:"p-2",children:o.productCode}),n=="part-number"&&l.jsx("td",{className:"p-2",children:o.hsCode}),l.jsx("td",{className:"p-2",children:o.description}),l.jsx("td",{className:"text-center p-2",children:o.quantity}),l.jsxs("td",{className:"text-right p-2",children:["AED ",s(o.unitPrice)]}),l.jsxs("td",{className:"text-right p-2",children:["AED ",(s(o.unitPrice)*parseInt(o.quantity,10)).toFixed(2)]}),l.jsxs("td",{className:"text-right p-2",children:[o.vatPercent,"%"]}),l.jsxs("td",{className:"text-right p-2",children:["AED",(s(o.unitPrice)*parseInt(o.quantity,10)*(o.vatPercent/100)).toFixed(2)]}),l.jsxs("td",{className:"text-right p-2",children:["AED",(o.unitPrice*o.quantity*(1+t.vatAmount/100)).toFixed(2)]})]},a))})]}),l.jsxs("div",{className:"text-right mt-5",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Sub Total before VAT:"})," AED ",s(t.grossTotal)]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Discount:"})," AED ",s(t.discount)]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Total before VAT:"})," AED ",s(t.netTotal)]}),l.jsxs("p",{children:[l.jsx("strong",{children:"VAT Amount:"})," AED ",s(t.vatAmount)]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Total:"})," AED ",s(t.total)]})]})]}),l.jsxs("div",{className:"flex items-center mt-5",children:[l.jsxs("select",{value:n,onChange:o=>r(o.target.value),className:"mr-2 border rounded p-2",children:[l.jsx("option",{value:"default",children:"Print with Header and Product Code"}),l.jsx("option",{value:"part-number",children:"Print with Part Number"}),l.jsx("option",{value:"no-header",children:"Print without Header (A4 Size)"}),l.jsx("option",{value:"header-part-number",children:"Print with Header and Part Number (A4 Size)"})]}),l.jsx("button",{onClick:i,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Print Invoice"})]})]})},Fd=Zc.createContext();function FI(){_.useState(null);const[t,e]=_.useState(""),[n,r]=_.useState("");return _.useEffect(()=>{const s=i=>{i.key==="Escape"&&(console.log({path:window.location}),window.location.hash!=="#/"&&window.location.hash!==""&&window.close())};return window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}},[]),l.jsx(Fd.Provider,{value:[t,e,n,r],children:l.jsx(d_,{children:l.jsx("div",{className:"bg-background",children:l.jsxs(a_,{children:[l.jsx(Re,{path:"/",element:l.jsx(cp,{})}),l.jsx(Re,{path:"/ProductMastery",element:l.jsx(NI,{})}),l.jsx(Re,{path:"/CashInvoice",element:l.jsx(zv,{})}),l.jsx(Re,{path:"/selectProduct",element:l.jsx(is,{})}),l.jsx(Re,{path:"/InvoiceViewer",element:l.jsx(II,{})}),l.jsx(Re,{path:"/Return",element:l.jsx(PI,{})}),l.jsx(Re,{path:"/PurchaseInvoice",element:l.jsx(Hv,{})}),l.jsx(Re,{path:"/CustomerMastery",element:l.jsx(kI,{})}),l.jsx(Re,{path:"/AddArea",element:l.jsx(jI,{})}),l.jsx(Re,{path:"/AddBrand",element:l.jsx(TI,{})}),l.jsx(Re,{path:"/AddSubCategory",element:l.jsx(AI,{})}),l.jsx(Re,{path:"/AddCategory",element:l.jsx(yp,{})}),l.jsx(Re,{path:"/PrintReport",element:l.jsx(yp,{})}),l.jsx(Re,{path:"/Print",element:l.jsx(LI,{})}),l.jsx(Re,{path:"*",element:l.jsx(cp,{})})," "]})})})})}Da.createRoot(document.getElementById("root")).render(l.jsx(Zc.StrictMode,{children:l.jsx(FI,{})}));
