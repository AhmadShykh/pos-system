function Yv(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Kv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wp={exports:{}},ll={},_p={exports:{}},H={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wi=Symbol.for("react.element"),Xv=Symbol.for("react.portal"),Zv=Symbol.for("react.fragment"),ex=Symbol.for("react.strict_mode"),tx=Symbol.for("react.profiler"),nx=Symbol.for("react.provider"),rx=Symbol.for("react.context"),sx=Symbol.for("react.forward_ref"),ix=Symbol.for("react.suspense"),ox=Symbol.for("react.memo"),lx=Symbol.for("react.lazy"),Qd=Symbol.iterator;function ax(t){return t===null||typeof t!="object"?null:(t=Qd&&t[Qd]||t["@@iterator"],typeof t=="function"?t:null)}var bp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Np=Object.assign,Cp={};function is(t,e,n){this.props=t,this.context=e,this.refs=Cp,this.updater=n||bp}is.prototype.isReactComponent={};is.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};is.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Sp(){}Sp.prototype=is.prototype;function tu(t,e,n){this.props=t,this.context=e,this.refs=Cp,this.updater=n||bp}var nu=tu.prototype=new Sp;nu.constructor=tu;Np(nu,is.prototype);nu.isPureReactComponent=!0;var Hd=Array.isArray,Ep=Object.prototype.hasOwnProperty,ru={current:null},kp={key:!0,ref:!0,__self:!0,__source:!0};function Ip(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Ep.call(e,r)&&!kp.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:wi,type:t,key:i,ref:o,props:s,_owner:ru.current}}function cx(t,e){return{$$typeof:wi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function su(t){return typeof t=="object"&&t!==null&&t.$$typeof===wi}function ux(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var qd=/\/+/g;function Hl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ux(""+t.key):e.toString(36)}function to(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case wi:case Xv:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Hl(o,0):r,Hd(s)?(n="",t!=null&&(n=t.replace(qd,"$&/")+"/"),to(s,e,n,"",function(u){return u})):s!=null&&(su(s)&&(s=cx(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(qd,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Hd(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+Hl(i,a);o+=to(i,e,n,c,s)}else if(c=ax(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+Hl(i,a++),o+=to(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Mi(t,e,n){if(t==null)return t;var r=[],s=0;return to(t,r,"","",function(i){return e.call(n,i,s++)}),r}function dx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ge={current:null},no={transition:null},hx={ReactCurrentDispatcher:Ge,ReactCurrentBatchConfig:no,ReactCurrentOwner:ru};function jp(){throw Error("act(...) is not supported in production builds of React.")}H.Children={map:Mi,forEach:function(t,e,n){Mi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Mi(t,function(){e++}),e},toArray:function(t){return Mi(t,function(e){return e})||[]},only:function(t){if(!su(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};H.Component=is;H.Fragment=Zv;H.Profiler=tx;H.PureComponent=tu;H.StrictMode=ex;H.Suspense=ix;H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hx;H.act=jp;H.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Np({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ru.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)Ep.call(e,c)&&!kp.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:wi,type:t.type,key:s,ref:i,props:r,_owner:o}};H.createContext=function(t){return t={$$typeof:rx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:nx,_context:t},t.Consumer=t};H.createElement=Ip;H.createFactory=function(t){var e=Ip.bind(null,t);return e.type=t,e};H.createRef=function(){return{current:null}};H.forwardRef=function(t){return{$$typeof:sx,render:t}};H.isValidElement=su;H.lazy=function(t){return{$$typeof:lx,_payload:{_status:-1,_result:t},_init:dx}};H.memo=function(t,e){return{$$typeof:ox,type:t,compare:e===void 0?null:e}};H.startTransition=function(t){var e=no.transition;no.transition={};try{t()}finally{no.transition=e}};H.unstable_act=jp;H.useCallback=function(t,e){return Ge.current.useCallback(t,e)};H.useContext=function(t){return Ge.current.useContext(t)};H.useDebugValue=function(){};H.useDeferredValue=function(t){return Ge.current.useDeferredValue(t)};H.useEffect=function(t,e){return Ge.current.useEffect(t,e)};H.useId=function(){return Ge.current.useId()};H.useImperativeHandle=function(t,e,n){return Ge.current.useImperativeHandle(t,e,n)};H.useInsertionEffect=function(t,e){return Ge.current.useInsertionEffect(t,e)};H.useLayoutEffect=function(t,e){return Ge.current.useLayoutEffect(t,e)};H.useMemo=function(t,e){return Ge.current.useMemo(t,e)};H.useReducer=function(t,e,n){return Ge.current.useReducer(t,e,n)};H.useRef=function(t){return Ge.current.useRef(t)};H.useState=function(t){return Ge.current.useState(t)};H.useSyncExternalStore=function(t,e,n){return Ge.current.useSyncExternalStore(t,e,n)};H.useTransition=function(){return Ge.current.useTransition()};H.version="18.3.1";_p.exports=H;var _=_p.exports;const Tp=Jv(_),fx=Yv({__proto__:null,default:Tp},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var px=_,mx=Symbol.for("react.element"),gx=Symbol.for("react.fragment"),yx=Object.prototype.hasOwnProperty,vx=px.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xx={key:!0,ref:!0,__self:!0,__source:!0};function Ap(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)yx.call(e,r)&&!xx.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:mx,type:t,key:i,ref:o,props:s,_owner:vx.current}}ll.Fragment=gx;ll.jsx=Ap;ll.jsxs=Ap;wp.exports=ll;var l=wp.exports,La={},Pp={exports:{}},pt={},Dp={exports:{}},Rp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,M){var F=A.length;A.push(M);e:for(;0<F;){var $=F-1>>>1,oe=A[$];if(0<s(oe,M))A[$]=M,A[F]=oe,F=$;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var M=A[0],F=A.pop();if(F!==M){A[0]=F;e:for(var $=0,oe=A.length,Z=oe>>>1;$<Z;){var xe=2*($+1)-1,Yt=A[xe],yt=xe+1,Gn=A[yt];if(0>s(Yt,F))yt<oe&&0>s(Gn,Yt)?(A[$]=Gn,A[yt]=F,$=yt):(A[$]=Yt,A[xe]=F,$=xe);else if(yt<oe&&0>s(Gn,F))A[$]=Gn,A[yt]=F,$=yt;else break e}}return M}function s(A,M){var F=A.sortIndex-M.sortIndex;return F!==0?F:A.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,h=null,f=3,y=!1,v=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(A){for(var M=n(u);M!==null;){if(M.callback===null)r(u);else if(M.startTime<=A)r(u),M.sortIndex=M.expirationTime,e(c,M);else break;M=n(u)}}function x(A){if(w=!1,m(A),!v)if(n(c)!==null)v=!0,Ae(b);else{var M=n(u);M!==null&&st(x,M.startTime-A)}}function b(A,M){v=!1,w&&(w=!1,g(S),S=-1),y=!0;var F=f;try{for(m(M),h=n(c);h!==null&&(!(h.expirationTime>M)||A&&!R());){var $=h.callback;if(typeof $=="function"){h.callback=null,f=h.priorityLevel;var oe=$(h.expirationTime<=M);M=t.unstable_now(),typeof oe=="function"?h.callback=oe:h===n(c)&&r(c),m(M)}else r(c);h=n(c)}if(h!==null)var Z=!0;else{var xe=n(u);xe!==null&&st(x,xe.startTime-M),Z=!1}return Z}finally{h=null,f=F,y=!1}}var N=!1,E=null,S=-1,k=5,j=-1;function R(){return!(t.unstable_now()-j<k)}function G(){if(E!==null){var A=t.unstable_now();j=A;var M=!0;try{M=E(!0,A)}finally{M?B():(N=!1,E=null)}}else N=!1}var B;if(typeof p=="function")B=function(){p(G)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,ge=z.port2;z.port1.onmessage=G,B=function(){ge.postMessage(null)}}else B=function(){C(G,0)};function Ae(A){E=A,N||(N=!0,B())}function st(A,M){S=C(function(){A(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){v||y||(v=!0,Ae(b))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(A){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var F=f;f=M;try{return A()}finally{f=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,M){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var F=f;f=A;try{return M()}finally{f=F}},t.unstable_scheduleCallback=function(A,M,F){var $=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?$+F:$):F=$,A){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=F+oe,A={id:d++,callback:M,priorityLevel:A,startTime:F,expirationTime:oe,sortIndex:-1},F>$?(A.sortIndex=F,e(u,A),n(c)===null&&A===n(u)&&(w?(g(S),S=-1):w=!0,st(x,F-$))):(A.sortIndex=oe,e(c,A),v||y||(v=!0,Ae(b))),A},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(A){var M=f;return function(){var F=f;f=M;try{return A.apply(this,arguments)}finally{f=F}}}})(Rp);Dp.exports=Rp;var wx=Dp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _x=_,ht=wx;function I(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Op=new Set,qs={};function vr(t,e){qr(t,e),qr(t+"Capture",e)}function qr(t,e){for(qs[t]=e,t=0;t<e.length;t++)Op.add(e[t])}var sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ba=Object.prototype.hasOwnProperty,bx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gd={},Yd={};function Nx(t){return Ba.call(Yd,t)?!0:Ba.call(Gd,t)?!1:bx.test(t)?Yd[t]=!0:(Gd[t]=!0,!1)}function Cx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Sx(t,e,n,r){if(e===null||typeof e>"u"||Cx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ye(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Me={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Me[t]=new Ye(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Me[e]=new Ye(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Me[t]=new Ye(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Me[t]=new Ye(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Me[t]=new Ye(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Me[t]=new Ye(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Me[t]=new Ye(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Me[t]=new Ye(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Me[t]=new Ye(t,5,!1,t.toLowerCase(),null,!1,!1)});var iu=/[\-:]([a-z])/g;function ou(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(iu,ou);Me[e]=new Ye(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(iu,ou);Me[e]=new Ye(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(iu,ou);Me[e]=new Ye(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Me[t]=new Ye(t,1,!1,t.toLowerCase(),null,!1,!1)});Me.xlinkHref=new Ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Me[t]=new Ye(t,1,!1,t.toLowerCase(),null,!0,!0)});function lu(t,e,n,r){var s=Me.hasOwnProperty(e)?Me[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Sx(e,n,s,r)&&(n=null),r||s===null?Nx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var hn=_x.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fi=Symbol.for("react.element"),Er=Symbol.for("react.portal"),kr=Symbol.for("react.fragment"),au=Symbol.for("react.strict_mode"),$a=Symbol.for("react.profiler"),Mp=Symbol.for("react.provider"),Fp=Symbol.for("react.context"),cu=Symbol.for("react.forward_ref"),Ua=Symbol.for("react.suspense"),za=Symbol.for("react.suspense_list"),uu=Symbol.for("react.memo"),gn=Symbol.for("react.lazy"),Lp=Symbol.for("react.offscreen"),Kd=Symbol.iterator;function ps(t){return t===null||typeof t!="object"?null:(t=Kd&&t[Kd]||t["@@iterator"],typeof t=="function"?t:null)}var me=Object.assign,ql;function Is(t){if(ql===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ql=e&&e[1]||""}return`
`+ql+t}var Gl=!1;function Yl(t,e){if(!t||Gl)return"";Gl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{Gl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Is(t):""}function Ex(t){switch(t.tag){case 5:return Is(t.type);case 16:return Is("Lazy");case 13:return Is("Suspense");case 19:return Is("SuspenseList");case 0:case 2:case 15:return t=Yl(t.type,!1),t;case 11:return t=Yl(t.type.render,!1),t;case 1:return t=Yl(t.type,!0),t;default:return""}}function Va(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case kr:return"Fragment";case Er:return"Portal";case $a:return"Profiler";case au:return"StrictMode";case Ua:return"Suspense";case za:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Fp:return(t.displayName||"Context")+".Consumer";case Mp:return(t._context.displayName||"Context")+".Provider";case cu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case uu:return e=t.displayName||null,e!==null?e:Va(t.type)||"Memo";case gn:e=t._payload,t=t._init;try{return Va(t(e))}catch{}}return null}function kx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Va(e);case 8:return e===au?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Mn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Bp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ix(t){var e=Bp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Li(t){t._valueTracker||(t._valueTracker=Ix(t))}function $p(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Bp(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function mo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Wa(t,e){var n=e.checked;return me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Jd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Mn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Up(t,e){e=e.checked,e!=null&&lu(t,"checked",e,!1)}function Qa(t,e){Up(t,e);var n=Mn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ha(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ha(t,e.type,Mn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Xd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ha(t,e,n){(e!=="number"||mo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var js=Array.isArray;function Br(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Mn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function qa(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(I(91));return me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(I(92));if(js(n)){if(1<n.length)throw Error(I(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Mn(n)}}function zp(t,e){var n=Mn(e.value),r=Mn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function eh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Vp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ga(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Vp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bi,Wp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bi=Bi||document.createElement("div"),Bi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Gs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ps={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jx=["Webkit","ms","Moz","O"];Object.keys(Ps).forEach(function(t){jx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ps[e]=Ps[t]})});function Qp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ps.hasOwnProperty(t)&&Ps[t]?(""+e).trim():e+"px"}function Hp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Qp(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Tx=me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ya(t,e){if(e){if(Tx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(I(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(I(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(I(61))}if(e.style!=null&&typeof e.style!="object")throw Error(I(62))}}function Ka(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ja=null;function du(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xa=null,$r=null,Ur=null;function th(t){if(t=Ni(t)){if(typeof Xa!="function")throw Error(I(280));var e=t.stateNode;e&&(e=hl(e),Xa(t.stateNode,t.type,e))}}function qp(t){$r?Ur?Ur.push(t):Ur=[t]:$r=t}function Gp(){if($r){var t=$r,e=Ur;if(Ur=$r=null,th(t),e)for(t=0;t<e.length;t++)th(e[t])}}function Yp(t,e){return t(e)}function Kp(){}var Kl=!1;function Jp(t,e,n){if(Kl)return t(e,n);Kl=!0;try{return Yp(t,e,n)}finally{Kl=!1,($r!==null||Ur!==null)&&(Kp(),Gp())}}function Ys(t,e){var n=t.stateNode;if(n===null)return null;var r=hl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(I(231,e,typeof n));return n}var Za=!1;if(sn)try{var ms={};Object.defineProperty(ms,"passive",{get:function(){Za=!0}}),window.addEventListener("test",ms,ms),window.removeEventListener("test",ms,ms)}catch{Za=!1}function Ax(t,e,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Ds=!1,go=null,yo=!1,ec=null,Px={onError:function(t){Ds=!0,go=t}};function Dx(t,e,n,r,s,i,o,a,c){Ds=!1,go=null,Ax.apply(Px,arguments)}function Rx(t,e,n,r,s,i,o,a,c){if(Dx.apply(this,arguments),Ds){if(Ds){var u=go;Ds=!1,go=null}else throw Error(I(198));yo||(yo=!0,ec=u)}}function xr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Xp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function nh(t){if(xr(t)!==t)throw Error(I(188))}function Ox(t){var e=t.alternate;if(!e){if(e=xr(t),e===null)throw Error(I(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return nh(s),t;if(i===r)return nh(s),e;i=i.sibling}throw Error(I(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(I(189))}}if(n.alternate!==r)throw Error(I(190))}if(n.tag!==3)throw Error(I(188));return n.stateNode.current===n?t:e}function Zp(t){return t=Ox(t),t!==null?em(t):null}function em(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=em(t);if(e!==null)return e;t=t.sibling}return null}var tm=ht.unstable_scheduleCallback,rh=ht.unstable_cancelCallback,Mx=ht.unstable_shouldYield,Fx=ht.unstable_requestPaint,we=ht.unstable_now,Lx=ht.unstable_getCurrentPriorityLevel,hu=ht.unstable_ImmediatePriority,nm=ht.unstable_UserBlockingPriority,vo=ht.unstable_NormalPriority,Bx=ht.unstable_LowPriority,rm=ht.unstable_IdlePriority,al=null,Ut=null;function $x(t){if(Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(al,t,void 0,(t.current.flags&128)===128)}catch{}}var Pt=Math.clz32?Math.clz32:Vx,Ux=Math.log,zx=Math.LN2;function Vx(t){return t>>>=0,t===0?32:31-(Ux(t)/zx|0)|0}var $i=64,Ui=4194304;function Ts(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ts(a):(i&=o,i!==0&&(r=Ts(i)))}else o=n&~s,o!==0?r=Ts(o):i!==0&&(r=Ts(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Pt(e),s=1<<n,r|=t[n],e&=~s;return r}function Wx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Pt(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=Wx(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function tc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function sm(){var t=$i;return $i<<=1,!($i&4194240)&&($i=64),t}function Jl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _i(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Pt(e),t[e]=n}function Hx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Pt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function fu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Pt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var J=0;function im(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var om,pu,lm,am,cm,nc=!1,zi=[],Cn=null,Sn=null,En=null,Ks=new Map,Js=new Map,vn=[],qx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sh(t,e){switch(t){case"focusin":case"focusout":Cn=null;break;case"dragenter":case"dragleave":Sn=null;break;case"mouseover":case"mouseout":En=null;break;case"pointerover":case"pointerout":Ks.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Js.delete(e.pointerId)}}function gs(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ni(e),e!==null&&pu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Gx(t,e,n,r,s){switch(e){case"focusin":return Cn=gs(Cn,t,e,n,r,s),!0;case"dragenter":return Sn=gs(Sn,t,e,n,r,s),!0;case"mouseover":return En=gs(En,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ks.set(i,gs(Ks.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Js.set(i,gs(Js.get(i)||null,t,e,n,r,s)),!0}return!1}function um(t){var e=Zn(t.target);if(e!==null){var n=xr(e);if(n!==null){if(e=n.tag,e===13){if(e=Xp(n),e!==null){t.blockedOn=e,cm(t.priority,function(){lm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ro(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=rc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ja=r,n.target.dispatchEvent(r),Ja=null}else return e=Ni(n),e!==null&&pu(e),t.blockedOn=n,!1;e.shift()}return!0}function ih(t,e,n){ro(t)&&n.delete(e)}function Yx(){nc=!1,Cn!==null&&ro(Cn)&&(Cn=null),Sn!==null&&ro(Sn)&&(Sn=null),En!==null&&ro(En)&&(En=null),Ks.forEach(ih),Js.forEach(ih)}function ys(t,e){t.blockedOn===e&&(t.blockedOn=null,nc||(nc=!0,ht.unstable_scheduleCallback(ht.unstable_NormalPriority,Yx)))}function Xs(t){function e(s){return ys(s,t)}if(0<zi.length){ys(zi[0],t);for(var n=1;n<zi.length;n++){var r=zi[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Cn!==null&&ys(Cn,t),Sn!==null&&ys(Sn,t),En!==null&&ys(En,t),Ks.forEach(e),Js.forEach(e),n=0;n<vn.length;n++)r=vn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<vn.length&&(n=vn[0],n.blockedOn===null);)um(n),n.blockedOn===null&&vn.shift()}var zr=hn.ReactCurrentBatchConfig,wo=!0;function Kx(t,e,n,r){var s=J,i=zr.transition;zr.transition=null;try{J=1,mu(t,e,n,r)}finally{J=s,zr.transition=i}}function Jx(t,e,n,r){var s=J,i=zr.transition;zr.transition=null;try{J=4,mu(t,e,n,r)}finally{J=s,zr.transition=i}}function mu(t,e,n,r){if(wo){var s=rc(t,e,n,r);if(s===null)la(t,e,r,_o,n),sh(t,r);else if(Gx(s,t,e,n,r))r.stopPropagation();else if(sh(t,r),e&4&&-1<qx.indexOf(t)){for(;s!==null;){var i=Ni(s);if(i!==null&&om(i),i=rc(t,e,n,r),i===null&&la(t,e,r,_o,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else la(t,e,r,null,n)}}var _o=null;function rc(t,e,n,r){if(_o=null,t=du(r),t=Zn(t),t!==null)if(e=xr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Xp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _o=t,null}function dm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Lx()){case hu:return 1;case nm:return 4;case vo:case Bx:return 16;case rm:return 536870912;default:return 16}default:return 16}}var wn=null,gu=null,so=null;function hm(){if(so)return so;var t,e=gu,n=e.length,r,s="value"in wn?wn.value:wn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return so=s.slice(t,1<r?1-r:void 0)}function io(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Vi(){return!0}function oh(){return!1}function mt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Vi:oh,this.isPropagationStopped=oh,this}return me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vi)},persist:function(){},isPersistent:Vi}),e}var os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yu=mt(os),bi=me({},os,{view:0,detail:0}),Xx=mt(bi),Xl,Zl,vs,cl=me({},bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vs&&(vs&&t.type==="mousemove"?(Xl=t.screenX-vs.screenX,Zl=t.screenY-vs.screenY):Zl=Xl=0,vs=t),Xl)},movementY:function(t){return"movementY"in t?t.movementY:Zl}}),lh=mt(cl),Zx=me({},cl,{dataTransfer:0}),e0=mt(Zx),t0=me({},bi,{relatedTarget:0}),ea=mt(t0),n0=me({},os,{animationName:0,elapsedTime:0,pseudoElement:0}),r0=mt(n0),s0=me({},os,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),i0=mt(s0),o0=me({},os,{data:0}),ah=mt(o0),l0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},c0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=c0[t])?!!e[t]:!1}function vu(){return u0}var d0=me({},bi,{key:function(t){if(t.key){var e=l0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=io(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?a0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vu,charCode:function(t){return t.type==="keypress"?io(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?io(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),h0=mt(d0),f0=me({},cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ch=mt(f0),p0=me({},bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vu}),m0=mt(p0),g0=me({},os,{propertyName:0,elapsedTime:0,pseudoElement:0}),y0=mt(g0),v0=me({},cl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),x0=mt(v0),w0=[9,13,27,32],xu=sn&&"CompositionEvent"in window,Rs=null;sn&&"documentMode"in document&&(Rs=document.documentMode);var _0=sn&&"TextEvent"in window&&!Rs,fm=sn&&(!xu||Rs&&8<Rs&&11>=Rs),uh=" ",dh=!1;function pm(t,e){switch(t){case"keyup":return w0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ir=!1;function b0(t,e){switch(t){case"compositionend":return mm(e);case"keypress":return e.which!==32?null:(dh=!0,uh);case"textInput":return t=e.data,t===uh&&dh?null:t;default:return null}}function N0(t,e){if(Ir)return t==="compositionend"||!xu&&pm(t,e)?(t=hm(),so=gu=wn=null,Ir=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fm&&e.locale!=="ko"?null:e.data;default:return null}}var C0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!C0[t.type]:e==="textarea"}function gm(t,e,n,r){qp(r),e=bo(e,"onChange"),0<e.length&&(n=new yu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Os=null,Zs=null;function S0(t){km(t,0)}function ul(t){var e=Ar(t);if($p(e))return t}function E0(t,e){if(t==="change")return e}var ym=!1;if(sn){var ta;if(sn){var na="oninput"in document;if(!na){var fh=document.createElement("div");fh.setAttribute("oninput","return;"),na=typeof fh.oninput=="function"}ta=na}else ta=!1;ym=ta&&(!document.documentMode||9<document.documentMode)}function ph(){Os&&(Os.detachEvent("onpropertychange",vm),Zs=Os=null)}function vm(t){if(t.propertyName==="value"&&ul(Zs)){var e=[];gm(e,Zs,t,du(t)),Jp(S0,e)}}function k0(t,e,n){t==="focusin"?(ph(),Os=e,Zs=n,Os.attachEvent("onpropertychange",vm)):t==="focusout"&&ph()}function I0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ul(Zs)}function j0(t,e){if(t==="click")return ul(e)}function T0(t,e){if(t==="input"||t==="change")return ul(e)}function A0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ot=typeof Object.is=="function"?Object.is:A0;function ei(t,e){if(Ot(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ba.call(e,s)||!Ot(t[s],e[s]))return!1}return!0}function mh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gh(t,e){var n=mh(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mh(n)}}function xm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?xm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function wm(){for(var t=window,e=mo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=mo(t.document)}return e}function wu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function P0(t){var e=wm(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&xm(n.ownerDocument.documentElement,n)){if(r!==null&&wu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=gh(n,i);var o=gh(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var D0=sn&&"documentMode"in document&&11>=document.documentMode,jr=null,sc=null,Ms=null,ic=!1;function yh(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ic||jr==null||jr!==mo(r)||(r=jr,"selectionStart"in r&&wu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ms&&ei(Ms,r)||(Ms=r,r=bo(sc,"onSelect"),0<r.length&&(e=new yu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=jr)))}function Wi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Tr={animationend:Wi("Animation","AnimationEnd"),animationiteration:Wi("Animation","AnimationIteration"),animationstart:Wi("Animation","AnimationStart"),transitionend:Wi("Transition","TransitionEnd")},ra={},_m={};sn&&(_m=document.createElement("div").style,"AnimationEvent"in window||(delete Tr.animationend.animation,delete Tr.animationiteration.animation,delete Tr.animationstart.animation),"TransitionEvent"in window||delete Tr.transitionend.transition);function dl(t){if(ra[t])return ra[t];if(!Tr[t])return t;var e=Tr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in _m)return ra[t]=e[n];return t}var bm=dl("animationend"),Nm=dl("animationiteration"),Cm=dl("animationstart"),Sm=dl("transitionend"),Em=new Map,vh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vn(t,e){Em.set(t,e),vr(e,[t])}for(var sa=0;sa<vh.length;sa++){var ia=vh[sa],R0=ia.toLowerCase(),O0=ia[0].toUpperCase()+ia.slice(1);Vn(R0,"on"+O0)}Vn(bm,"onAnimationEnd");Vn(Nm,"onAnimationIteration");Vn(Cm,"onAnimationStart");Vn("dblclick","onDoubleClick");Vn("focusin","onFocus");Vn("focusout","onBlur");Vn(Sm,"onTransitionEnd");qr("onMouseEnter",["mouseout","mouseover"]);qr("onMouseLeave",["mouseout","mouseover"]);qr("onPointerEnter",["pointerout","pointerover"]);qr("onPointerLeave",["pointerout","pointerover"]);vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var As="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),M0=new Set("cancel close invalid load scroll toggle".split(" ").concat(As));function xh(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Rx(r,e,void 0,t),t.currentTarget=null}function km(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;xh(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;xh(s,a,u),i=c}}}if(yo)throw t=ec,yo=!1,ec=null,t}function ae(t,e){var n=e[uc];n===void 0&&(n=e[uc]=new Set);var r=t+"__bubble";n.has(r)||(Im(e,t,2,!1),n.add(r))}function oa(t,e,n){var r=0;e&&(r|=4),Im(n,t,r,e)}var Qi="_reactListening"+Math.random().toString(36).slice(2);function ti(t){if(!t[Qi]){t[Qi]=!0,Op.forEach(function(n){n!=="selectionchange"&&(M0.has(n)||oa(n,!1,t),oa(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qi]||(e[Qi]=!0,oa("selectionchange",!1,e))}}function Im(t,e,n,r){switch(dm(e)){case 1:var s=Kx;break;case 4:s=Jx;break;default:s=mu}n=s.bind(null,e,n,t),s=void 0,!Za||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function la(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Zn(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Jp(function(){var u=i,d=du(n),h=[];e:{var f=Em.get(t);if(f!==void 0){var y=yu,v=t;switch(t){case"keypress":if(io(n)===0)break e;case"keydown":case"keyup":y=h0;break;case"focusin":v="focus",y=ea;break;case"focusout":v="blur",y=ea;break;case"beforeblur":case"afterblur":y=ea;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=lh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=e0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=m0;break;case bm:case Nm:case Cm:y=r0;break;case Sm:y=y0;break;case"scroll":y=Xx;break;case"wheel":y=x0;break;case"copy":case"cut":case"paste":y=i0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=ch}var w=(e&4)!==0,C=!w&&t==="scroll",g=w?f!==null?f+"Capture":null:f;w=[];for(var p=u,m;p!==null;){m=p;var x=m.stateNode;if(m.tag===5&&x!==null&&(m=x,g!==null&&(x=Ys(p,g),x!=null&&w.push(ni(p,x,m)))),C)break;p=p.return}0<w.length&&(f=new y(f,v,null,n,d),h.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&n!==Ja&&(v=n.relatedTarget||n.fromElement)&&(Zn(v)||v[on]))break e;if((y||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,y?(v=n.relatedTarget||n.toElement,y=u,v=v?Zn(v):null,v!==null&&(C=xr(v),v!==C||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=u),y!==v)){if(w=lh,x="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(w=ch,x="onPointerLeave",g="onPointerEnter",p="pointer"),C=y==null?f:Ar(y),m=v==null?f:Ar(v),f=new w(x,p+"leave",y,n,d),f.target=C,f.relatedTarget=m,x=null,Zn(d)===u&&(w=new w(g,p+"enter",v,n,d),w.target=m,w.relatedTarget=C,x=w),C=x,y&&v)t:{for(w=y,g=v,p=0,m=w;m;m=Cr(m))p++;for(m=0,x=g;x;x=Cr(x))m++;for(;0<p-m;)w=Cr(w),p--;for(;0<m-p;)g=Cr(g),m--;for(;p--;){if(w===g||g!==null&&w===g.alternate)break t;w=Cr(w),g=Cr(g)}w=null}else w=null;y!==null&&wh(h,f,y,w,!1),v!==null&&C!==null&&wh(h,C,v,w,!0)}}e:{if(f=u?Ar(u):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var b=E0;else if(hh(f))if(ym)b=T0;else{b=I0;var N=k0}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=j0);if(b&&(b=b(t,u))){gm(h,b,n,d);break e}N&&N(t,f,u),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&Ha(f,"number",f.value)}switch(N=u?Ar(u):window,t){case"focusin":(hh(N)||N.contentEditable==="true")&&(jr=N,sc=u,Ms=null);break;case"focusout":Ms=sc=jr=null;break;case"mousedown":ic=!0;break;case"contextmenu":case"mouseup":case"dragend":ic=!1,yh(h,n,d);break;case"selectionchange":if(D0)break;case"keydown":case"keyup":yh(h,n,d)}var E;if(xu)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Ir?pm(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(fm&&n.locale!=="ko"&&(Ir||S!=="onCompositionStart"?S==="onCompositionEnd"&&Ir&&(E=hm()):(wn=d,gu="value"in wn?wn.value:wn.textContent,Ir=!0)),N=bo(u,S),0<N.length&&(S=new ah(S,t,null,n,d),h.push({event:S,listeners:N}),E?S.data=E:(E=mm(n),E!==null&&(S.data=E)))),(E=_0?b0(t,n):N0(t,n))&&(u=bo(u,"onBeforeInput"),0<u.length&&(d=new ah("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=E))}km(h,e)})}function ni(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bo(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ys(t,n),i!=null&&r.unshift(ni(t,i,s)),i=Ys(t,e),i!=null&&r.push(ni(t,i,s))),t=t.return}return r}function Cr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function wh(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=Ys(n,i),c!=null&&o.unshift(ni(n,c,a))):s||(c=Ys(n,i),c!=null&&o.push(ni(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var F0=/\r\n?/g,L0=/\u0000|\uFFFD/g;function _h(t){return(typeof t=="string"?t:""+t).replace(F0,`
`).replace(L0,"")}function Hi(t,e,n){if(e=_h(e),_h(t)!==e&&n)throw Error(I(425))}function No(){}var oc=null,lc=null;function ac(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cc=typeof setTimeout=="function"?setTimeout:void 0,B0=typeof clearTimeout=="function"?clearTimeout:void 0,bh=typeof Promise=="function"?Promise:void 0,$0=typeof queueMicrotask=="function"?queueMicrotask:typeof bh<"u"?function(t){return bh.resolve(null).then(t).catch(U0)}:cc;function U0(t){setTimeout(function(){throw t})}function aa(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Xs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Xs(e)}function kn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Nh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ls=Math.random().toString(36).slice(2),$t="__reactFiber$"+ls,ri="__reactProps$"+ls,on="__reactContainer$"+ls,uc="__reactEvents$"+ls,z0="__reactListeners$"+ls,V0="__reactHandles$"+ls;function Zn(t){var e=t[$t];if(e)return e;for(var n=t.parentNode;n;){if(e=n[on]||n[$t]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Nh(t);t!==null;){if(n=t[$t])return n;t=Nh(t)}return e}t=n,n=t.parentNode}return null}function Ni(t){return t=t[$t]||t[on],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ar(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(I(33))}function hl(t){return t[ri]||null}var dc=[],Pr=-1;function Wn(t){return{current:t}}function ce(t){0>Pr||(t.current=dc[Pr],dc[Pr]=null,Pr--)}function ie(t,e){Pr++,dc[Pr]=t.current,t.current=e}var Fn={},ze=Wn(Fn),Ze=Wn(!1),lr=Fn;function Gr(t,e){var n=t.type.contextTypes;if(!n)return Fn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function et(t){return t=t.childContextTypes,t!=null}function Co(){ce(Ze),ce(ze)}function Ch(t,e,n){if(ze.current!==Fn)throw Error(I(168));ie(ze,e),ie(Ze,n)}function jm(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(I(108,kx(t)||"Unknown",s));return me({},n,r)}function So(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fn,lr=ze.current,ie(ze,t),ie(Ze,Ze.current),!0}function Sh(t,e,n){var r=t.stateNode;if(!r)throw Error(I(169));n?(t=jm(t,e,lr),r.__reactInternalMemoizedMergedChildContext=t,ce(Ze),ce(ze),ie(ze,t)):ce(Ze),ie(Ze,n)}var Xt=null,fl=!1,ca=!1;function Tm(t){Xt===null?Xt=[t]:Xt.push(t)}function W0(t){fl=!0,Tm(t)}function Qn(){if(!ca&&Xt!==null){ca=!0;var t=0,e=J;try{var n=Xt;for(J=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Xt=null,fl=!1}catch(s){throw Xt!==null&&(Xt=Xt.slice(t+1)),tm(hu,Qn),s}finally{J=e,ca=!1}}return null}var Dr=[],Rr=0,Eo=null,ko=0,xt=[],wt=0,ar=null,Zt=1,en="";function Yn(t,e){Dr[Rr++]=ko,Dr[Rr++]=Eo,Eo=t,ko=e}function Am(t,e,n){xt[wt++]=Zt,xt[wt++]=en,xt[wt++]=ar,ar=t;var r=Zt;t=en;var s=32-Pt(r)-1;r&=~(1<<s),n+=1;var i=32-Pt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Zt=1<<32-Pt(e)+s|n<<s|r,en=i+t}else Zt=1<<i|n<<s|r,en=t}function _u(t){t.return!==null&&(Yn(t,1),Am(t,1,0))}function bu(t){for(;t===Eo;)Eo=Dr[--Rr],Dr[Rr]=null,ko=Dr[--Rr],Dr[Rr]=null;for(;t===ar;)ar=xt[--wt],xt[wt]=null,en=xt[--wt],xt[wt]=null,Zt=xt[--wt],xt[wt]=null}var ut=null,ct=null,ue=!1,jt=null;function Pm(t,e){var n=_t(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Eh(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ut=t,ct=kn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ut=t,ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ar!==null?{id:Zt,overflow:en}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=_t(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ut=t,ct=null,!0):!1;default:return!1}}function hc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fc(t){if(ue){var e=ct;if(e){var n=e;if(!Eh(t,e)){if(hc(t))throw Error(I(418));e=kn(n.nextSibling);var r=ut;e&&Eh(t,e)?Pm(r,n):(t.flags=t.flags&-4097|2,ue=!1,ut=t)}}else{if(hc(t))throw Error(I(418));t.flags=t.flags&-4097|2,ue=!1,ut=t}}}function kh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ut=t}function qi(t){if(t!==ut)return!1;if(!ue)return kh(t),ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ac(t.type,t.memoizedProps)),e&&(e=ct)){if(hc(t))throw Dm(),Error(I(418));for(;e;)Pm(t,e),e=kn(e.nextSibling)}if(kh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(I(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ct=kn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ct=null}}else ct=ut?kn(t.stateNode.nextSibling):null;return!0}function Dm(){for(var t=ct;t;)t=kn(t.nextSibling)}function Yr(){ct=ut=null,ue=!1}function Nu(t){jt===null?jt=[t]:jt.push(t)}var Q0=hn.ReactCurrentBatchConfig;function xs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(I(309));var r=n.stateNode}if(!r)throw Error(I(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(I(284));if(!n._owner)throw Error(I(290,t))}return t}function Gi(t,e){throw t=Object.prototype.toString.call(e),Error(I(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ih(t){var e=t._init;return e(t._payload)}function Rm(t){function e(g,p){if(t){var m=g.deletions;m===null?(g.deletions=[p],g.flags|=16):m.push(p)}}function n(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function r(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function s(g,p){return g=An(g,p),g.index=0,g.sibling=null,g}function i(g,p,m){return g.index=m,t?(m=g.alternate,m!==null?(m=m.index,m<p?(g.flags|=2,p):m):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,p,m,x){return p===null||p.tag!==6?(p=ga(m,g.mode,x),p.return=g,p):(p=s(p,m),p.return=g,p)}function c(g,p,m,x){var b=m.type;return b===kr?d(g,p,m.props.children,x,m.key):p!==null&&(p.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===gn&&Ih(b)===p.type)?(x=s(p,m.props),x.ref=xs(g,p,m),x.return=g,x):(x=fo(m.type,m.key,m.props,null,g.mode,x),x.ref=xs(g,p,m),x.return=g,x)}function u(g,p,m,x){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=ya(m,g.mode,x),p.return=g,p):(p=s(p,m.children||[]),p.return=g,p)}function d(g,p,m,x,b){return p===null||p.tag!==7?(p=ir(m,g.mode,x,b),p.return=g,p):(p=s(p,m),p.return=g,p)}function h(g,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=ga(""+p,g.mode,m),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Fi:return m=fo(p.type,p.key,p.props,null,g.mode,m),m.ref=xs(g,null,p),m.return=g,m;case Er:return p=ya(p,g.mode,m),p.return=g,p;case gn:var x=p._init;return h(g,x(p._payload),m)}if(js(p)||ps(p))return p=ir(p,g.mode,m,null),p.return=g,p;Gi(g,p)}return null}function f(g,p,m,x){var b=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return b!==null?null:a(g,p,""+m,x);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Fi:return m.key===b?c(g,p,m,x):null;case Er:return m.key===b?u(g,p,m,x):null;case gn:return b=m._init,f(g,p,b(m._payload),x)}if(js(m)||ps(m))return b!==null?null:d(g,p,m,x,null);Gi(g,m)}return null}function y(g,p,m,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(m)||null,a(p,g,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Fi:return g=g.get(x.key===null?m:x.key)||null,c(p,g,x,b);case Er:return g=g.get(x.key===null?m:x.key)||null,u(p,g,x,b);case gn:var N=x._init;return y(g,p,m,N(x._payload),b)}if(js(x)||ps(x))return g=g.get(m)||null,d(p,g,x,b,null);Gi(p,x)}return null}function v(g,p,m,x){for(var b=null,N=null,E=p,S=p=0,k=null;E!==null&&S<m.length;S++){E.index>S?(k=E,E=null):k=E.sibling;var j=f(g,E,m[S],x);if(j===null){E===null&&(E=k);break}t&&E&&j.alternate===null&&e(g,E),p=i(j,p,S),N===null?b=j:N.sibling=j,N=j,E=k}if(S===m.length)return n(g,E),ue&&Yn(g,S),b;if(E===null){for(;S<m.length;S++)E=h(g,m[S],x),E!==null&&(p=i(E,p,S),N===null?b=E:N.sibling=E,N=E);return ue&&Yn(g,S),b}for(E=r(g,E);S<m.length;S++)k=y(E,g,S,m[S],x),k!==null&&(t&&k.alternate!==null&&E.delete(k.key===null?S:k.key),p=i(k,p,S),N===null?b=k:N.sibling=k,N=k);return t&&E.forEach(function(R){return e(g,R)}),ue&&Yn(g,S),b}function w(g,p,m,x){var b=ps(m);if(typeof b!="function")throw Error(I(150));if(m=b.call(m),m==null)throw Error(I(151));for(var N=b=null,E=p,S=p=0,k=null,j=m.next();E!==null&&!j.done;S++,j=m.next()){E.index>S?(k=E,E=null):k=E.sibling;var R=f(g,E,j.value,x);if(R===null){E===null&&(E=k);break}t&&E&&R.alternate===null&&e(g,E),p=i(R,p,S),N===null?b=R:N.sibling=R,N=R,E=k}if(j.done)return n(g,E),ue&&Yn(g,S),b;if(E===null){for(;!j.done;S++,j=m.next())j=h(g,j.value,x),j!==null&&(p=i(j,p,S),N===null?b=j:N.sibling=j,N=j);return ue&&Yn(g,S),b}for(E=r(g,E);!j.done;S++,j=m.next())j=y(E,g,S,j.value,x),j!==null&&(t&&j.alternate!==null&&E.delete(j.key===null?S:j.key),p=i(j,p,S),N===null?b=j:N.sibling=j,N=j);return t&&E.forEach(function(G){return e(g,G)}),ue&&Yn(g,S),b}function C(g,p,m,x){if(typeof m=="object"&&m!==null&&m.type===kr&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Fi:e:{for(var b=m.key,N=p;N!==null;){if(N.key===b){if(b=m.type,b===kr){if(N.tag===7){n(g,N.sibling),p=s(N,m.props.children),p.return=g,g=p;break e}}else if(N.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===gn&&Ih(b)===N.type){n(g,N.sibling),p=s(N,m.props),p.ref=xs(g,N,m),p.return=g,g=p;break e}n(g,N);break}else e(g,N);N=N.sibling}m.type===kr?(p=ir(m.props.children,g.mode,x,m.key),p.return=g,g=p):(x=fo(m.type,m.key,m.props,null,g.mode,x),x.ref=xs(g,p,m),x.return=g,g=x)}return o(g);case Er:e:{for(N=m.key;p!==null;){if(p.key===N)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){n(g,p.sibling),p=s(p,m.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else e(g,p);p=p.sibling}p=ya(m,g.mode,x),p.return=g,g=p}return o(g);case gn:return N=m._init,C(g,p,N(m._payload),x)}if(js(m))return v(g,p,m,x);if(ps(m))return w(g,p,m,x);Gi(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(n(g,p.sibling),p=s(p,m),p.return=g,g=p):(n(g,p),p=ga(m,g.mode,x),p.return=g,g=p),o(g)):n(g,p)}return C}var Kr=Rm(!0),Om=Rm(!1),Io=Wn(null),jo=null,Or=null,Cu=null;function Su(){Cu=Or=jo=null}function Eu(t){var e=Io.current;ce(Io),t._currentValue=e}function pc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Vr(t,e){jo=t,Cu=Or=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Je=!0),t.firstContext=null)}function Ct(t){var e=t._currentValue;if(Cu!==t)if(t={context:t,memoizedValue:e,next:null},Or===null){if(jo===null)throw Error(I(308));Or=t,jo.dependencies={lanes:0,firstContext:t}}else Or=Or.next=t;return e}var er=null;function ku(t){er===null?er=[t]:er.push(t)}function Mm(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ku(e)):(n.next=s.next,s.next=n),e.interleaved=n,ln(t,r)}function ln(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var yn=!1;function Iu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function nn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function In(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Y&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ln(t,n)}return s=r.interleaved,s===null?(e.next=e,ku(r)):(e.next=s.next,s.next=e),r.interleaved=e,ln(t,n)}function oo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fu(t,n)}}function jh(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function To(t,e,n,r){var s=t.updateQueue;yn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,a=i;do{var f=a.lane,y=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,w=a;switch(f=e,y=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){h=v.call(y,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,f=typeof v=="function"?v.call(y,h,f):v,f==null)break e;h=me({},h,f);break e;case 2:yn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else y={eventTime:y,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=y,c=h):d=d.next=y,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ur|=o,t.lanes=o,t.memoizedState=h}}function Th(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(I(191,s));s.call(r)}}}var Ci={},zt=Wn(Ci),si=Wn(Ci),ii=Wn(Ci);function tr(t){if(t===Ci)throw Error(I(174));return t}function ju(t,e){switch(ie(ii,e),ie(si,t),ie(zt,Ci),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ga(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ga(e,t)}ce(zt),ie(zt,e)}function Jr(){ce(zt),ce(si),ce(ii)}function Lm(t){tr(ii.current);var e=tr(zt.current),n=Ga(e,t.type);e!==n&&(ie(si,t),ie(zt,n))}function Tu(t){si.current===t&&(ce(zt),ce(si))}var fe=Wn(0);function Ao(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ua=[];function Au(){for(var t=0;t<ua.length;t++)ua[t]._workInProgressVersionPrimary=null;ua.length=0}var lo=hn.ReactCurrentDispatcher,da=hn.ReactCurrentBatchConfig,cr=0,pe=null,Ne=null,ke=null,Po=!1,Fs=!1,oi=0,H0=0;function Be(){throw Error(I(321))}function Pu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ot(t[n],e[n]))return!1;return!0}function Du(t,e,n,r,s,i){if(cr=i,pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,lo.current=t===null||t.memoizedState===null?K0:J0,t=n(r,s),Fs){i=0;do{if(Fs=!1,oi=0,25<=i)throw Error(I(301));i+=1,ke=Ne=null,e.updateQueue=null,lo.current=X0,t=n(r,s)}while(Fs)}if(lo.current=Do,e=Ne!==null&&Ne.next!==null,cr=0,ke=Ne=pe=null,Po=!1,e)throw Error(I(300));return t}function Ru(){var t=oi!==0;return oi=0,t}function Bt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?pe.memoizedState=ke=t:ke=ke.next=t,ke}function St(){if(Ne===null){var t=pe.alternate;t=t!==null?t.memoizedState:null}else t=Ne.next;var e=ke===null?pe.memoizedState:ke.next;if(e!==null)ke=e,Ne=t;else{if(t===null)throw Error(I(310));Ne=t,t={memoizedState:Ne.memoizedState,baseState:Ne.baseState,baseQueue:Ne.baseQueue,queue:Ne.queue,next:null},ke===null?pe.memoizedState=ke=t:ke=ke.next=t}return ke}function li(t,e){return typeof e=="function"?e(t):e}function ha(t){var e=St(),n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=t;var r=Ne,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var d=u.lane;if((cr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=h,o=r):c=c.next=h,pe.lanes|=d,ur|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,Ot(r,e.memoizedState)||(Je=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,pe.lanes|=i,ur|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fa(t){var e=St(),n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ot(i,e.memoizedState)||(Je=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Bm(){}function $m(t,e){var n=pe,r=St(),s=e(),i=!Ot(r.memoizedState,s);if(i&&(r.memoizedState=s,Je=!0),r=r.queue,Ou(Vm.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ke!==null&&ke.memoizedState.tag&1){if(n.flags|=2048,ai(9,zm.bind(null,n,r,s,e),void 0,null),je===null)throw Error(I(349));cr&30||Um(n,e,s)}return s}function Um(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=pe.updateQueue,e===null?(e={lastEffect:null,stores:null},pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zm(t,e,n,r){e.value=n,e.getSnapshot=r,Wm(e)&&Qm(t)}function Vm(t,e,n){return n(function(){Wm(e)&&Qm(t)})}function Wm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ot(t,n)}catch{return!0}}function Qm(t){var e=ln(t,1);e!==null&&Dt(e,t,1,-1)}function Ah(t){var e=Bt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:t},e.queue=t,t=t.dispatch=Y0.bind(null,pe,t),[e.memoizedState,t]}function ai(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=pe.updateQueue,e===null?(e={lastEffect:null,stores:null},pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Hm(){return St().memoizedState}function ao(t,e,n,r){var s=Bt();pe.flags|=t,s.memoizedState=ai(1|e,n,void 0,r===void 0?null:r)}function pl(t,e,n,r){var s=St();r=r===void 0?null:r;var i=void 0;if(Ne!==null){var o=Ne.memoizedState;if(i=o.destroy,r!==null&&Pu(r,o.deps)){s.memoizedState=ai(e,n,i,r);return}}pe.flags|=t,s.memoizedState=ai(1|e,n,i,r)}function Ph(t,e){return ao(8390656,8,t,e)}function Ou(t,e){return pl(2048,8,t,e)}function qm(t,e){return pl(4,2,t,e)}function Gm(t,e){return pl(4,4,t,e)}function Ym(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Km(t,e,n){return n=n!=null?n.concat([t]):null,pl(4,4,Ym.bind(null,e,t),n)}function Mu(){}function Jm(t,e){var n=St();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Xm(t,e){var n=St();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Zm(t,e,n){return cr&21?(Ot(n,e)||(n=sm(),pe.lanes|=n,ur|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Je=!0),t.memoizedState=n)}function q0(t,e){var n=J;J=n!==0&&4>n?n:4,t(!0);var r=da.transition;da.transition={};try{t(!1),e()}finally{J=n,da.transition=r}}function eg(){return St().memoizedState}function G0(t,e,n){var r=Tn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},tg(t))ng(e,n);else if(n=Mm(t,e,n,r),n!==null){var s=He();Dt(n,t,r,s),rg(n,e,r)}}function Y0(t,e,n){var r=Tn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(tg(t))ng(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ot(a,o)){var c=e.interleaved;c===null?(s.next=s,ku(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Mm(t,e,s,r),n!==null&&(s=He(),Dt(n,t,r,s),rg(n,e,r))}}function tg(t){var e=t.alternate;return t===pe||e!==null&&e===pe}function ng(t,e){Fs=Po=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function rg(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fu(t,n)}}var Do={readContext:Ct,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useInsertionEffect:Be,useLayoutEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useMutableSource:Be,useSyncExternalStore:Be,useId:Be,unstable_isNewReconciler:!1},K0={readContext:Ct,useCallback:function(t,e){return Bt().memoizedState=[t,e===void 0?null:e],t},useContext:Ct,useEffect:Ph,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ao(4194308,4,Ym.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ao(4194308,4,t,e)},useInsertionEffect:function(t,e){return ao(4,2,t,e)},useMemo:function(t,e){var n=Bt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Bt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=G0.bind(null,pe,t),[r.memoizedState,t]},useRef:function(t){var e=Bt();return t={current:t},e.memoizedState=t},useState:Ah,useDebugValue:Mu,useDeferredValue:function(t){return Bt().memoizedState=t},useTransition:function(){var t=Ah(!1),e=t[0];return t=q0.bind(null,t[1]),Bt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=pe,s=Bt();if(ue){if(n===void 0)throw Error(I(407));n=n()}else{if(n=e(),je===null)throw Error(I(349));cr&30||Um(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Ph(Vm.bind(null,r,i,t),[t]),r.flags|=2048,ai(9,zm.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Bt(),e=je.identifierPrefix;if(ue){var n=en,r=Zt;n=(r&~(1<<32-Pt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=oi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=H0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},J0={readContext:Ct,useCallback:Jm,useContext:Ct,useEffect:Ou,useImperativeHandle:Km,useInsertionEffect:qm,useLayoutEffect:Gm,useMemo:Xm,useReducer:ha,useRef:Hm,useState:function(){return ha(li)},useDebugValue:Mu,useDeferredValue:function(t){var e=St();return Zm(e,Ne.memoizedState,t)},useTransition:function(){var t=ha(li)[0],e=St().memoizedState;return[t,e]},useMutableSource:Bm,useSyncExternalStore:$m,useId:eg,unstable_isNewReconciler:!1},X0={readContext:Ct,useCallback:Jm,useContext:Ct,useEffect:Ou,useImperativeHandle:Km,useInsertionEffect:qm,useLayoutEffect:Gm,useMemo:Xm,useReducer:fa,useRef:Hm,useState:function(){return fa(li)},useDebugValue:Mu,useDeferredValue:function(t){var e=St();return Ne===null?e.memoizedState=t:Zm(e,Ne.memoizedState,t)},useTransition:function(){var t=fa(li)[0],e=St().memoizedState;return[t,e]},useMutableSource:Bm,useSyncExternalStore:$m,useId:eg,unstable_isNewReconciler:!1};function kt(t,e){if(t&&t.defaultProps){e=me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function mc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ml={isMounted:function(t){return(t=t._reactInternals)?xr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=He(),s=Tn(t),i=nn(r,s);i.payload=e,n!=null&&(i.callback=n),e=In(t,i,s),e!==null&&(Dt(e,t,s,r),oo(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=He(),s=Tn(t),i=nn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=In(t,i,s),e!==null&&(Dt(e,t,s,r),oo(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=He(),r=Tn(t),s=nn(n,r);s.tag=2,e!=null&&(s.callback=e),e=In(t,s,r),e!==null&&(Dt(e,t,r,n),oo(e,t,r))}};function Dh(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ei(n,r)||!ei(s,i):!0}function sg(t,e,n){var r=!1,s=Fn,i=e.contextType;return typeof i=="object"&&i!==null?i=Ct(i):(s=et(e)?lr:ze.current,r=e.contextTypes,i=(r=r!=null)?Gr(t,s):Fn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ml,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Rh(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ml.enqueueReplaceState(e,e.state,null)}function gc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Iu(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ct(i):(i=et(e)?lr:ze.current,s.context=Gr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(mc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ml.enqueueReplaceState(s,s.state,null),To(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Xr(t,e){try{var n="",r=e;do n+=Ex(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function pa(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function yc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Z0=typeof WeakMap=="function"?WeakMap:Map;function ig(t,e,n){n=nn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Oo||(Oo=!0,kc=r),yc(t,e)},n}function og(t,e,n){n=nn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){yc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){yc(t,e),typeof r!="function"&&(jn===null?jn=new Set([this]):jn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Oh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Z0;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=fw.bind(null,t,e,n),e.then(t,t))}function Mh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Fh(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=nn(-1,1),e.tag=2,In(n,e,1))),n.lanes|=1),t)}var ew=hn.ReactCurrentOwner,Je=!1;function We(t,e,n,r){e.child=t===null?Om(e,null,n,r):Kr(e,t.child,n,r)}function Lh(t,e,n,r,s){n=n.render;var i=e.ref;return Vr(e,s),r=Du(t,e,n,r,i,s),n=Ru(),t!==null&&!Je?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,an(t,e,s)):(ue&&n&&_u(e),e.flags|=1,We(t,e,r,s),e.child)}function Bh(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Wu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,lg(t,e,i,r,s)):(t=fo(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ei,n(o,r)&&t.ref===e.ref)return an(t,e,s)}return e.flags|=1,t=An(i,r),t.ref=e.ref,t.return=e,e.child=t}function lg(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ei(i,r)&&t.ref===e.ref)if(Je=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Je=!0);else return e.lanes=t.lanes,an(t,e,s)}return vc(t,e,n,r,s)}function ag(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(Fr,lt),lt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ie(Fr,lt),lt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ie(Fr,lt),lt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ie(Fr,lt),lt|=r;return We(t,e,s,n),e.child}function cg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function vc(t,e,n,r,s){var i=et(n)?lr:ze.current;return i=Gr(e,i),Vr(e,s),n=Du(t,e,n,r,i,s),r=Ru(),t!==null&&!Je?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,an(t,e,s)):(ue&&r&&_u(e),e.flags|=1,We(t,e,n,s),e.child)}function $h(t,e,n,r,s){if(et(n)){var i=!0;So(e)}else i=!1;if(Vr(e,s),e.stateNode===null)co(t,e),sg(e,n,r),gc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ct(u):(u=et(n)?lr:ze.current,u=Gr(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&Rh(e,o,r,u),yn=!1;var f=e.memoizedState;o.state=f,To(e,r,o,s),c=e.memoizedState,a!==r||f!==c||Ze.current||yn?(typeof d=="function"&&(mc(e,n,d,r),c=e.memoizedState),(a=yn||Dh(e,n,a,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Fm(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:kt(e.type,a),o.props=u,h=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ct(c):(c=et(n)?lr:ze.current,c=Gr(e,c));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==c)&&Rh(e,o,r,c),yn=!1,f=e.memoizedState,o.state=f,To(e,r,o,s);var v=e.memoizedState;a!==h||f!==v||Ze.current||yn?(typeof y=="function"&&(mc(e,n,y,r),v=e.memoizedState),(u=yn||Dh(e,n,u,r,f,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return xc(t,e,n,r,i,s)}function xc(t,e,n,r,s,i){cg(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Sh(e,n,!1),an(t,e,i);r=e.stateNode,ew.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Kr(e,t.child,null,i),e.child=Kr(e,null,a,i)):We(t,e,a,i),e.memoizedState=r.state,s&&Sh(e,n,!0),e.child}function ug(t){var e=t.stateNode;e.pendingContext?Ch(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ch(t,e.context,!1),ju(t,e.containerInfo)}function Uh(t,e,n,r,s){return Yr(),Nu(s),e.flags|=256,We(t,e,n,r),e.child}var wc={dehydrated:null,treeContext:null,retryLane:0};function _c(t){return{baseLanes:t,cachePool:null,transitions:null}}function dg(t,e,n){var r=e.pendingProps,s=fe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ie(fe,s&1),t===null)return fc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=vl(o,r,0,null),t=ir(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=_c(n),e.memoizedState=wc,t):Fu(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return tw(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=An(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=An(a,i):(i=ir(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?_c(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=wc,r}return i=t.child,t=i.sibling,r=An(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Fu(t,e){return e=vl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Yi(t,e,n,r){return r!==null&&Nu(r),Kr(e,t.child,null,n),t=Fu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function tw(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=pa(Error(I(422))),Yi(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=vl({mode:"visible",children:r.children},s,0,null),i=ir(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Kr(e,t.child,null,o),e.child.memoizedState=_c(o),e.memoizedState=wc,i);if(!(e.mode&1))return Yi(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(I(419)),r=pa(i,r,void 0),Yi(t,e,o,r)}if(a=(o&t.childLanes)!==0,Je||a){if(r=je,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ln(t,s),Dt(r,t,s,-1))}return Vu(),r=pa(Error(I(421))),Yi(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=pw.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ct=kn(s.nextSibling),ut=e,ue=!0,jt=null,t!==null&&(xt[wt++]=Zt,xt[wt++]=en,xt[wt++]=ar,Zt=t.id,en=t.overflow,ar=e),e=Fu(e,r.children),e.flags|=4096,e)}function zh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),pc(t.return,e,n)}function ma(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function hg(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(We(t,e,r.children,n),r=fe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zh(t,n,e);else if(t.tag===19)zh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ie(fe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ao(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ma(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ao(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ma(e,!0,n,null,i);break;case"together":ma(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function co(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function an(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ur|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(I(153));if(e.child!==null){for(t=e.child,n=An(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=An(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function nw(t,e,n){switch(e.tag){case 3:ug(e),Yr();break;case 5:Lm(e);break;case 1:et(e.type)&&So(e);break;case 4:ju(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ie(Io,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ie(fe,fe.current&1),e.flags|=128,null):n&e.child.childLanes?dg(t,e,n):(ie(fe,fe.current&1),t=an(t,e,n),t!==null?t.sibling:null);ie(fe,fe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return hg(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ie(fe,fe.current),r)break;return null;case 22:case 23:return e.lanes=0,ag(t,e,n)}return an(t,e,n)}var fg,bc,pg,mg;fg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bc=function(){};pg=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,tr(zt.current);var i=null;switch(n){case"input":s=Wa(t,s),r=Wa(t,r),i=[];break;case"select":s=me({},s,{value:void 0}),r=me({},r,{value:void 0}),i=[];break;case"textarea":s=qa(t,s),r=qa(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=No)}Ya(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(qs.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(qs.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ae("scroll",t),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};mg=function(t,e,n,r){n!==r&&(e.flags|=4)};function ws(t,e){if(!ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function $e(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function rw(t,e,n){var r=e.pendingProps;switch(bu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(e),null;case 1:return et(e.type)&&Co(),$e(e),null;case 3:return r=e.stateNode,Jr(),ce(Ze),ce(ze),Au(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(qi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jt!==null&&(Tc(jt),jt=null))),bc(t,e),$e(e),null;case 5:Tu(e);var s=tr(ii.current);if(n=e.type,t!==null&&e.stateNode!=null)pg(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(I(166));return $e(e),null}if(t=tr(zt.current),qi(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[$t]=e,r[ri]=i,t=(e.mode&1)!==0,n){case"dialog":ae("cancel",r),ae("close",r);break;case"iframe":case"object":case"embed":ae("load",r);break;case"video":case"audio":for(s=0;s<As.length;s++)ae(As[s],r);break;case"source":ae("error",r);break;case"img":case"image":case"link":ae("error",r),ae("load",r);break;case"details":ae("toggle",r);break;case"input":Jd(r,i),ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ae("invalid",r);break;case"textarea":Zd(r,i),ae("invalid",r)}Ya(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Hi(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Hi(r.textContent,a,t),s=["children",""+a]):qs.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ae("scroll",r)}switch(n){case"input":Li(r),Xd(r,i,!0);break;case"textarea":Li(r),eh(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=No)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Vp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[$t]=e,t[ri]=r,fg(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ka(n,r),n){case"dialog":ae("cancel",t),ae("close",t),s=r;break;case"iframe":case"object":case"embed":ae("load",t),s=r;break;case"video":case"audio":for(s=0;s<As.length;s++)ae(As[s],t);s=r;break;case"source":ae("error",t),s=r;break;case"img":case"image":case"link":ae("error",t),ae("load",t),s=r;break;case"details":ae("toggle",t),s=r;break;case"input":Jd(t,r),s=Wa(t,r),ae("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=me({},r,{value:void 0}),ae("invalid",t);break;case"textarea":Zd(t,r),s=qa(t,r),ae("invalid",t);break;default:s=r}Ya(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?Hp(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Wp(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Gs(t,c):typeof c=="number"&&Gs(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(qs.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ae("scroll",t):c!=null&&lu(t,i,c,o))}switch(n){case"input":Li(t),Xd(t,r,!1);break;case"textarea":Li(t),eh(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Mn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Br(t,!!r.multiple,i,!1):r.defaultValue!=null&&Br(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=No)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $e(e),null;case 6:if(t&&e.stateNode!=null)mg(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(I(166));if(n=tr(ii.current),tr(zt.current),qi(e)){if(r=e.stateNode,n=e.memoizedProps,r[$t]=e,(i=r.nodeValue!==n)&&(t=ut,t!==null))switch(t.tag){case 3:Hi(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hi(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$t]=e,e.stateNode=r}return $e(e),null;case 13:if(ce(fe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ue&&ct!==null&&e.mode&1&&!(e.flags&128))Dm(),Yr(),e.flags|=98560,i=!1;else if(i=qi(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(I(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(I(317));i[$t]=e}else Yr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$e(e),i=!1}else jt!==null&&(Tc(jt),jt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||fe.current&1?Se===0&&(Se=3):Vu())),e.updateQueue!==null&&(e.flags|=4),$e(e),null);case 4:return Jr(),bc(t,e),t===null&&ti(e.stateNode.containerInfo),$e(e),null;case 10:return Eu(e.type._context),$e(e),null;case 17:return et(e.type)&&Co(),$e(e),null;case 19:if(ce(fe),i=e.memoizedState,i===null)return $e(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ws(i,!1);else{if(Se!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ao(t),o!==null){for(e.flags|=128,ws(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ie(fe,fe.current&1|2),e.child}t=t.sibling}i.tail!==null&&we()>Zr&&(e.flags|=128,r=!0,ws(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ao(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ws(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ue)return $e(e),null}else 2*we()-i.renderingStartTime>Zr&&n!==1073741824&&(e.flags|=128,r=!0,ws(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=we(),e.sibling=null,n=fe.current,ie(fe,r?n&1|2:n&1),e):($e(e),null);case 22:case 23:return zu(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?lt&1073741824&&($e(e),e.subtreeFlags&6&&(e.flags|=8192)):$e(e),null;case 24:return null;case 25:return null}throw Error(I(156,e.tag))}function sw(t,e){switch(bu(e),e.tag){case 1:return et(e.type)&&Co(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Jr(),ce(Ze),ce(ze),Au(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Tu(e),null;case 13:if(ce(fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(I(340));Yr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ce(fe),null;case 4:return Jr(),null;case 10:return Eu(e.type._context),null;case 22:case 23:return zu(),null;case 24:return null;default:return null}}var Ki=!1,Ue=!1,iw=typeof WeakSet=="function"?WeakSet:Set,D=null;function Mr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ye(t,e,r)}else n.current=null}function Nc(t,e,n){try{n()}catch(r){ye(t,e,r)}}var Vh=!1;function ow(t,e){if(oc=wo,t=wm(),wu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var y;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)f=h,h=y;for(;;){if(h===t)break t;if(f===n&&++u===s&&(a=o),f===i&&++d===r&&(c=o),(y=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=y}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(lc={focusedElem:t,selectionRange:n},wo=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,C=v.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?w:kt(e.type,w),C);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(x){ye(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return v=Vh,Vh=!1,v}function Ls(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Nc(e,n,i)}s=s.next}while(s!==r)}}function gl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Cc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function gg(t){var e=t.alternate;e!==null&&(t.alternate=null,gg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$t],delete e[ri],delete e[uc],delete e[z0],delete e[V0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function yg(t){return t.tag===5||t.tag===3||t.tag===4}function Wh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=No));else if(r!==4&&(t=t.child,t!==null))for(Sc(t,e,n),t=t.sibling;t!==null;)Sc(t,e,n),t=t.sibling}function Ec(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ec(t,e,n),t=t.sibling;t!==null;)Ec(t,e,n),t=t.sibling}var Pe=null,It=!1;function pn(t,e,n){for(n=n.child;n!==null;)vg(t,e,n),n=n.sibling}function vg(t,e,n){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(al,n)}catch{}switch(n.tag){case 5:Ue||Mr(n,e);case 6:var r=Pe,s=It;Pe=null,pn(t,e,n),Pe=r,It=s,Pe!==null&&(It?(t=Pe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pe.removeChild(n.stateNode));break;case 18:Pe!==null&&(It?(t=Pe,n=n.stateNode,t.nodeType===8?aa(t.parentNode,n):t.nodeType===1&&aa(t,n),Xs(t)):aa(Pe,n.stateNode));break;case 4:r=Pe,s=It,Pe=n.stateNode.containerInfo,It=!0,pn(t,e,n),Pe=r,It=s;break;case 0:case 11:case 14:case 15:if(!Ue&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Nc(n,e,o),s=s.next}while(s!==r)}pn(t,e,n);break;case 1:if(!Ue&&(Mr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ye(n,e,a)}pn(t,e,n);break;case 21:pn(t,e,n);break;case 22:n.mode&1?(Ue=(r=Ue)||n.memoizedState!==null,pn(t,e,n),Ue=r):pn(t,e,n);break;default:pn(t,e,n)}}function Qh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new iw),e.forEach(function(r){var s=mw.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Et(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Pe=a.stateNode,It=!1;break e;case 3:Pe=a.stateNode.containerInfo,It=!0;break e;case 4:Pe=a.stateNode.containerInfo,It=!0;break e}a=a.return}if(Pe===null)throw Error(I(160));vg(i,o,s),Pe=null,It=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ye(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)xg(e,t),e=e.sibling}function xg(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Et(e,t),Lt(t),r&4){try{Ls(3,t,t.return),gl(3,t)}catch(w){ye(t,t.return,w)}try{Ls(5,t,t.return)}catch(w){ye(t,t.return,w)}}break;case 1:Et(e,t),Lt(t),r&512&&n!==null&&Mr(n,n.return);break;case 5:if(Et(e,t),Lt(t),r&512&&n!==null&&Mr(n,n.return),t.flags&32){var s=t.stateNode;try{Gs(s,"")}catch(w){ye(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Up(s,i),Ka(a,o);var u=Ka(a,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?Hp(s,h):d==="dangerouslySetInnerHTML"?Wp(s,h):d==="children"?Gs(s,h):lu(s,d,h,u)}switch(a){case"input":Qa(s,i);break;case"textarea":zp(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Br(s,!!i.multiple,y,!1):f!==!!i.multiple&&(i.defaultValue!=null?Br(s,!!i.multiple,i.defaultValue,!0):Br(s,!!i.multiple,i.multiple?[]:"",!1))}s[ri]=i}catch(w){ye(t,t.return,w)}}break;case 6:if(Et(e,t),Lt(t),r&4){if(t.stateNode===null)throw Error(I(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){ye(t,t.return,w)}}break;case 3:if(Et(e,t),Lt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xs(e.containerInfo)}catch(w){ye(t,t.return,w)}break;case 4:Et(e,t),Lt(t);break;case 13:Et(e,t),Lt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||($u=we())),r&4&&Qh(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ue=(u=Ue)||d,Et(e,t),Ue=u):Et(e,t),Lt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(D=t,d=t.child;d!==null;){for(h=D=d;D!==null;){switch(f=D,y=f.child,f.tag){case 0:case 11:case 14:case 15:Ls(4,f,f.return);break;case 1:Mr(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){ye(r,n,w)}}break;case 5:Mr(f,f.return);break;case 22:if(f.memoizedState!==null){qh(h);continue}}y!==null?(y.return=f,D=y):qh(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Qp("display",o))}catch(w){ye(t,t.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){ye(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Et(e,t),Lt(t),r&4&&Qh(t);break;case 21:break;default:Et(e,t),Lt(t)}}function Lt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(yg(n)){var r=n;break e}n=n.return}throw Error(I(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Gs(s,""),r.flags&=-33);var i=Wh(t);Ec(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Wh(t);Sc(t,a,o);break;default:throw Error(I(161))}}catch(c){ye(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lw(t,e,n){D=t,wg(t)}function wg(t,e,n){for(var r=(t.mode&1)!==0;D!==null;){var s=D,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ki;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Ue;a=Ki;var u=Ue;if(Ki=o,(Ue=c)&&!u)for(D=s;D!==null;)o=D,c=o.child,o.tag===22&&o.memoizedState!==null?Gh(s):c!==null?(c.return=o,D=c):Gh(s);for(;i!==null;)D=i,wg(i),i=i.sibling;D=s,Ki=a,Ue=u}Hh(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,D=i):Hh(t)}}function Hh(t){for(;D!==null;){var e=D;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ue||gl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ue)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:kt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Th(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Th(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Xs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}Ue||e.flags&512&&Cc(e)}catch(f){ye(e,e.return,f)}}if(e===t){D=null;break}if(n=e.sibling,n!==null){n.return=e.return,D=n;break}D=e.return}}function qh(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var n=e.sibling;if(n!==null){n.return=e.return,D=n;break}D=e.return}}function Gh(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{gl(4,e)}catch(c){ye(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){ye(e,s,c)}}var i=e.return;try{Cc(e)}catch(c){ye(e,i,c)}break;case 5:var o=e.return;try{Cc(e)}catch(c){ye(e,o,c)}}}catch(c){ye(e,e.return,c)}if(e===t){D=null;break}var a=e.sibling;if(a!==null){a.return=e.return,D=a;break}D=e.return}}var aw=Math.ceil,Ro=hn.ReactCurrentDispatcher,Lu=hn.ReactCurrentOwner,Nt=hn.ReactCurrentBatchConfig,Y=0,je=null,be=null,Re=0,lt=0,Fr=Wn(0),Se=0,ci=null,ur=0,yl=0,Bu=0,Bs=null,Ke=null,$u=0,Zr=1/0,Jt=null,Oo=!1,kc=null,jn=null,Ji=!1,_n=null,Mo=0,$s=0,Ic=null,uo=-1,ho=0;function He(){return Y&6?we():uo!==-1?uo:uo=we()}function Tn(t){return t.mode&1?Y&2&&Re!==0?Re&-Re:Q0.transition!==null?(ho===0&&(ho=sm()),ho):(t=J,t!==0||(t=window.event,t=t===void 0?16:dm(t.type)),t):1}function Dt(t,e,n,r){if(50<$s)throw $s=0,Ic=null,Error(I(185));_i(t,n,r),(!(Y&2)||t!==je)&&(t===je&&(!(Y&2)&&(yl|=n),Se===4&&xn(t,Re)),tt(t,r),n===1&&Y===0&&!(e.mode&1)&&(Zr=we()+500,fl&&Qn()))}function tt(t,e){var n=t.callbackNode;Qx(t,e);var r=xo(t,t===je?Re:0);if(r===0)n!==null&&rh(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&rh(n),e===1)t.tag===0?W0(Yh.bind(null,t)):Tm(Yh.bind(null,t)),$0(function(){!(Y&6)&&Qn()}),n=null;else{switch(im(r)){case 1:n=hu;break;case 4:n=nm;break;case 16:n=vo;break;case 536870912:n=rm;break;default:n=vo}n=Ig(n,_g.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function _g(t,e){if(uo=-1,ho=0,Y&6)throw Error(I(327));var n=t.callbackNode;if(Wr()&&t.callbackNode!==n)return null;var r=xo(t,t===je?Re:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Fo(t,r);else{e=r;var s=Y;Y|=2;var i=Ng();(je!==t||Re!==e)&&(Jt=null,Zr=we()+500,sr(t,e));do try{dw();break}catch(a){bg(t,a)}while(!0);Su(),Ro.current=i,Y=s,be!==null?e=0:(je=null,Re=0,e=Se)}if(e!==0){if(e===2&&(s=tc(t),s!==0&&(r=s,e=jc(t,s))),e===1)throw n=ci,sr(t,0),xn(t,r),tt(t,we()),n;if(e===6)xn(t,r);else{if(s=t.current.alternate,!(r&30)&&!cw(s)&&(e=Fo(t,r),e===2&&(i=tc(t),i!==0&&(r=i,e=jc(t,i))),e===1))throw n=ci,sr(t,0),xn(t,r),tt(t,we()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(I(345));case 2:Kn(t,Ke,Jt);break;case 3:if(xn(t,r),(r&130023424)===r&&(e=$u+500-we(),10<e)){if(xo(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){He(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=cc(Kn.bind(null,t,Ke,Jt),e);break}Kn(t,Ke,Jt);break;case 4:if(xn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Pt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=we()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*aw(r/1960))-r,10<r){t.timeoutHandle=cc(Kn.bind(null,t,Ke,Jt),r);break}Kn(t,Ke,Jt);break;case 5:Kn(t,Ke,Jt);break;default:throw Error(I(329))}}}return tt(t,we()),t.callbackNode===n?_g.bind(null,t):null}function jc(t,e){var n=Bs;return t.current.memoizedState.isDehydrated&&(sr(t,e).flags|=256),t=Fo(t,e),t!==2&&(e=Ke,Ke=n,e!==null&&Tc(e)),t}function Tc(t){Ke===null?Ke=t:Ke.push.apply(Ke,t)}function cw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ot(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xn(t,e){for(e&=~Bu,e&=~yl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Pt(e),r=1<<n;t[n]=-1,e&=~r}}function Yh(t){if(Y&6)throw Error(I(327));Wr();var e=xo(t,0);if(!(e&1))return tt(t,we()),null;var n=Fo(t,e);if(t.tag!==0&&n===2){var r=tc(t);r!==0&&(e=r,n=jc(t,r))}if(n===1)throw n=ci,sr(t,0),xn(t,e),tt(t,we()),n;if(n===6)throw Error(I(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Kn(t,Ke,Jt),tt(t,we()),null}function Uu(t,e){var n=Y;Y|=1;try{return t(e)}finally{Y=n,Y===0&&(Zr=we()+500,fl&&Qn())}}function dr(t){_n!==null&&_n.tag===0&&!(Y&6)&&Wr();var e=Y;Y|=1;var n=Nt.transition,r=J;try{if(Nt.transition=null,J=1,t)return t()}finally{J=r,Nt.transition=n,Y=e,!(Y&6)&&Qn()}}function zu(){lt=Fr.current,ce(Fr)}function sr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,B0(n)),be!==null)for(n=be.return;n!==null;){var r=n;switch(bu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Co();break;case 3:Jr(),ce(Ze),ce(ze),Au();break;case 5:Tu(r);break;case 4:Jr();break;case 13:ce(fe);break;case 19:ce(fe);break;case 10:Eu(r.type._context);break;case 22:case 23:zu()}n=n.return}if(je=t,be=t=An(t.current,null),Re=lt=e,Se=0,ci=null,Bu=yl=ur=0,Ke=Bs=null,er!==null){for(e=0;e<er.length;e++)if(n=er[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}er=null}return t}function bg(t,e){do{var n=be;try{if(Su(),lo.current=Do,Po){for(var r=pe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Po=!1}if(cr=0,ke=Ne=pe=null,Fs=!1,oi=0,Lu.current=null,n===null||n.return===null){Se=1,ci=e,be=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Re,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=Mh(o);if(y!==null){y.flags&=-257,Fh(y,o,a,i,e),y.mode&1&&Oh(i,u,e),e=y,c=u;var v=e.updateQueue;if(v===null){var w=new Set;w.add(c),e.updateQueue=w}else v.add(c);break e}else{if(!(e&1)){Oh(i,u,e),Vu();break e}c=Error(I(426))}}else if(ue&&a.mode&1){var C=Mh(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Fh(C,o,a,i,e),Nu(Xr(c,a));break e}}i=c=Xr(c,a),Se!==4&&(Se=2),Bs===null?Bs=[i]:Bs.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=ig(i,c,e);jh(i,g);break e;case 1:a=c;var p=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(jn===null||!jn.has(m)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=og(i,a,e);jh(i,x);break e}}i=i.return}while(i!==null)}Sg(n)}catch(b){e=b,be===n&&n!==null&&(be=n=n.return);continue}break}while(!0)}function Ng(){var t=Ro.current;return Ro.current=Do,t===null?Do:t}function Vu(){(Se===0||Se===3||Se===2)&&(Se=4),je===null||!(ur&268435455)&&!(yl&268435455)||xn(je,Re)}function Fo(t,e){var n=Y;Y|=2;var r=Ng();(je!==t||Re!==e)&&(Jt=null,sr(t,e));do try{uw();break}catch(s){bg(t,s)}while(!0);if(Su(),Y=n,Ro.current=r,be!==null)throw Error(I(261));return je=null,Re=0,Se}function uw(){for(;be!==null;)Cg(be)}function dw(){for(;be!==null&&!Mx();)Cg(be)}function Cg(t){var e=kg(t.alternate,t,lt);t.memoizedProps=t.pendingProps,e===null?Sg(t):be=e,Lu.current=null}function Sg(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=sw(n,e),n!==null){n.flags&=32767,be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Se=6,be=null;return}}else if(n=rw(n,e,lt),n!==null){be=n;return}if(e=e.sibling,e!==null){be=e;return}be=e=t}while(e!==null);Se===0&&(Se=5)}function Kn(t,e,n){var r=J,s=Nt.transition;try{Nt.transition=null,J=1,hw(t,e,n,r)}finally{Nt.transition=s,J=r}return null}function hw(t,e,n,r){do Wr();while(_n!==null);if(Y&6)throw Error(I(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(I(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Hx(t,i),t===je&&(be=je=null,Re=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ji||(Ji=!0,Ig(vo,function(){return Wr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Nt.transition,Nt.transition=null;var o=J;J=1;var a=Y;Y|=4,Lu.current=null,ow(t,n),xg(n,t),P0(lc),wo=!!oc,lc=oc=null,t.current=n,lw(n),Fx(),Y=a,J=o,Nt.transition=i}else t.current=n;if(Ji&&(Ji=!1,_n=t,Mo=s),i=t.pendingLanes,i===0&&(jn=null),$x(n.stateNode),tt(t,we()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Oo)throw Oo=!1,t=kc,kc=null,t;return Mo&1&&t.tag!==0&&Wr(),i=t.pendingLanes,i&1?t===Ic?$s++:($s=0,Ic=t):$s=0,Qn(),null}function Wr(){if(_n!==null){var t=im(Mo),e=Nt.transition,n=J;try{if(Nt.transition=null,J=16>t?16:t,_n===null)var r=!1;else{if(t=_n,_n=null,Mo=0,Y&6)throw Error(I(331));var s=Y;for(Y|=4,D=t.current;D!==null;){var i=D,o=i.child;if(D.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(D=u;D!==null;){var d=D;switch(d.tag){case 0:case 11:case 15:Ls(8,d,i)}var h=d.child;if(h!==null)h.return=d,D=h;else for(;D!==null;){d=D;var f=d.sibling,y=d.return;if(gg(d),d===u){D=null;break}if(f!==null){f.return=y,D=f;break}D=y}}}var v=i.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var C=w.sibling;w.sibling=null,w=C}while(w!==null)}}D=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,D=o;else e:for(;D!==null;){if(i=D,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ls(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,D=g;break e}D=i.return}}var p=t.current;for(D=p;D!==null;){o=D;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,D=m;else e:for(o=p;D!==null;){if(a=D,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:gl(9,a)}}catch(b){ye(a,a.return,b)}if(a===o){D=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,D=x;break e}D=a.return}}if(Y=s,Qn(),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(al,t)}catch{}r=!0}return r}finally{J=n,Nt.transition=e}}return!1}function Kh(t,e,n){e=Xr(n,e),e=ig(t,e,1),t=In(t,e,1),e=He(),t!==null&&(_i(t,1,e),tt(t,e))}function ye(t,e,n){if(t.tag===3)Kh(t,t,n);else for(;e!==null;){if(e.tag===3){Kh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jn===null||!jn.has(r))){t=Xr(n,t),t=og(e,t,1),e=In(e,t,1),t=He(),e!==null&&(_i(e,1,t),tt(e,t));break}}e=e.return}}function fw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=He(),t.pingedLanes|=t.suspendedLanes&n,je===t&&(Re&n)===n&&(Se===4||Se===3&&(Re&130023424)===Re&&500>we()-$u?sr(t,0):Bu|=n),tt(t,e)}function Eg(t,e){e===0&&(t.mode&1?(e=Ui,Ui<<=1,!(Ui&130023424)&&(Ui=4194304)):e=1);var n=He();t=ln(t,e),t!==null&&(_i(t,e,n),tt(t,n))}function pw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Eg(t,n)}function mw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(I(314))}r!==null&&r.delete(e),Eg(t,n)}var kg;kg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ze.current)Je=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Je=!1,nw(t,e,n);Je=!!(t.flags&131072)}else Je=!1,ue&&e.flags&1048576&&Am(e,ko,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;co(t,e),t=e.pendingProps;var s=Gr(e,ze.current);Vr(e,n),s=Du(null,e,r,t,s,n);var i=Ru();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,et(r)?(i=!0,So(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Iu(e),s.updater=ml,e.stateNode=s,s._reactInternals=e,gc(e,r,t,n),e=xc(null,e,r,!0,i,n)):(e.tag=0,ue&&i&&_u(e),We(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(co(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=yw(r),t=kt(r,t),s){case 0:e=vc(null,e,r,t,n);break e;case 1:e=$h(null,e,r,t,n);break e;case 11:e=Lh(null,e,r,t,n);break e;case 14:e=Bh(null,e,r,kt(r.type,t),n);break e}throw Error(I(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kt(r,s),vc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kt(r,s),$h(t,e,r,s,n);case 3:e:{if(ug(e),t===null)throw Error(I(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Fm(t,e),To(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Xr(Error(I(423)),e),e=Uh(t,e,r,n,s);break e}else if(r!==s){s=Xr(Error(I(424)),e),e=Uh(t,e,r,n,s);break e}else for(ct=kn(e.stateNode.containerInfo.firstChild),ut=e,ue=!0,jt=null,n=Om(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Yr(),r===s){e=an(t,e,n);break e}We(t,e,r,n)}e=e.child}return e;case 5:return Lm(e),t===null&&fc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,ac(r,s)?o=null:i!==null&&ac(r,i)&&(e.flags|=32),cg(t,e),We(t,e,o,n),e.child;case 6:return t===null&&fc(e),null;case 13:return dg(t,e,n);case 4:return ju(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Kr(e,null,r,n):We(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kt(r,s),Lh(t,e,r,s,n);case 7:return We(t,e,e.pendingProps,n),e.child;case 8:return We(t,e,e.pendingProps.children,n),e.child;case 12:return We(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ie(Io,r._currentValue),r._currentValue=o,i!==null)if(Ot(i.value,o)){if(i.children===s.children&&!Ze.current){e=an(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=nn(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),pc(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(I(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),pc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}We(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Vr(e,n),s=Ct(s),r=r(s),e.flags|=1,We(t,e,r,n),e.child;case 14:return r=e.type,s=kt(r,e.pendingProps),s=kt(r.type,s),Bh(t,e,r,s,n);case 15:return lg(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kt(r,s),co(t,e),e.tag=1,et(r)?(t=!0,So(e)):t=!1,Vr(e,n),sg(e,r,s),gc(e,r,s,n),xc(null,e,r,!0,t,n);case 19:return hg(t,e,n);case 22:return ag(t,e,n)}throw Error(I(156,e.tag))};function Ig(t,e){return tm(t,e)}function gw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _t(t,e,n,r){return new gw(t,e,n,r)}function Wu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yw(t){if(typeof t=="function")return Wu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===cu)return 11;if(t===uu)return 14}return 2}function An(t,e){var n=t.alternate;return n===null?(n=_t(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function fo(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Wu(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case kr:return ir(n.children,s,i,e);case au:o=8,s|=8;break;case $a:return t=_t(12,n,e,s|2),t.elementType=$a,t.lanes=i,t;case Ua:return t=_t(13,n,e,s),t.elementType=Ua,t.lanes=i,t;case za:return t=_t(19,n,e,s),t.elementType=za,t.lanes=i,t;case Lp:return vl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Mp:o=10;break e;case Fp:o=9;break e;case cu:o=11;break e;case uu:o=14;break e;case gn:o=16,r=null;break e}throw Error(I(130,t==null?t:typeof t,""))}return e=_t(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ir(t,e,n,r){return t=_t(7,t,r,e),t.lanes=n,t}function vl(t,e,n,r){return t=_t(22,t,r,e),t.elementType=Lp,t.lanes=n,t.stateNode={isHidden:!1},t}function ga(t,e,n){return t=_t(6,t,null,e),t.lanes=n,t}function ya(t,e,n){return e=_t(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vw(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jl(0),this.expirationTimes=Jl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jl(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Qu(t,e,n,r,s,i,o,a,c){return t=new vw(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=_t(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Iu(i),t}function xw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Er,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function jg(t){if(!t)return Fn;t=t._reactInternals;e:{if(xr(t)!==t||t.tag!==1)throw Error(I(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(I(171))}if(t.tag===1){var n=t.type;if(et(n))return jm(t,n,e)}return e}function Tg(t,e,n,r,s,i,o,a,c){return t=Qu(n,r,!0,t,s,i,o,a,c),t.context=jg(null),n=t.current,r=He(),s=Tn(n),i=nn(r,s),i.callback=e??null,In(n,i,s),t.current.lanes=s,_i(t,s,r),tt(t,r),t}function xl(t,e,n,r){var s=e.current,i=He(),o=Tn(s);return n=jg(n),e.context===null?e.context=n:e.pendingContext=n,e=nn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=In(s,e,o),t!==null&&(Dt(t,s,o,i),oo(t,s,o)),o}function Lo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Jh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hu(t,e){Jh(t,e),(t=t.alternate)&&Jh(t,e)}function ww(){return null}var Ag=typeof reportError=="function"?reportError:function(t){console.error(t)};function qu(t){this._internalRoot=t}wl.prototype.render=qu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(I(409));xl(t,e,null,null)};wl.prototype.unmount=qu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;dr(function(){xl(null,t,null,null)}),e[on]=null}};function wl(t){this._internalRoot=t}wl.prototype.unstable_scheduleHydration=function(t){if(t){var e=am();t={blockedOn:null,target:t,priority:e};for(var n=0;n<vn.length&&e!==0&&e<vn[n].priority;n++);vn.splice(n,0,t),n===0&&um(t)}};function Gu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Xh(){}function _w(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Lo(o);i.call(u)}}var o=Tg(e,r,t,0,null,!1,!1,"",Xh);return t._reactRootContainer=o,t[on]=o.current,ti(t.nodeType===8?t.parentNode:t),dr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Lo(c);a.call(u)}}var c=Qu(t,0,!1,null,null,!1,!1,"",Xh);return t._reactRootContainer=c,t[on]=c.current,ti(t.nodeType===8?t.parentNode:t),dr(function(){xl(e,c,n,r)}),c}function bl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Lo(o);a.call(c)}}xl(e,o,t,s)}else o=_w(n,e,t,s,r);return Lo(o)}om=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ts(e.pendingLanes);n!==0&&(fu(e,n|1),tt(e,we()),!(Y&6)&&(Zr=we()+500,Qn()))}break;case 13:dr(function(){var r=ln(t,1);if(r!==null){var s=He();Dt(r,t,1,s)}}),Hu(t,1)}};pu=function(t){if(t.tag===13){var e=ln(t,134217728);if(e!==null){var n=He();Dt(e,t,134217728,n)}Hu(t,134217728)}};lm=function(t){if(t.tag===13){var e=Tn(t),n=ln(t,e);if(n!==null){var r=He();Dt(n,t,e,r)}Hu(t,e)}};am=function(){return J};cm=function(t,e){var n=J;try{return J=t,e()}finally{J=n}};Xa=function(t,e,n){switch(e){case"input":if(Qa(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=hl(r);if(!s)throw Error(I(90));$p(r),Qa(r,s)}}}break;case"textarea":zp(t,n);break;case"select":e=n.value,e!=null&&Br(t,!!n.multiple,e,!1)}};Yp=Uu;Kp=dr;var bw={usingClientEntryPoint:!1,Events:[Ni,Ar,hl,qp,Gp,Uu]},_s={findFiberByHostInstance:Zn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Nw={bundleType:_s.bundleType,version:_s.version,rendererPackageName:_s.rendererPackageName,rendererConfig:_s.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Zp(t),t===null?null:t.stateNode},findFiberByHostInstance:_s.findFiberByHostInstance||ww,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xi.isDisabled&&Xi.supportsFiber)try{al=Xi.inject(Nw),Ut=Xi}catch{}}pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bw;pt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gu(e))throw Error(I(200));return xw(t,e,null,n)};pt.createRoot=function(t,e){if(!Gu(t))throw Error(I(299));var n=!1,r="",s=Ag;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Qu(t,1,!1,null,null,n,!1,r,s),t[on]=e.current,ti(t.nodeType===8?t.parentNode:t),new qu(e)};pt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(I(188)):(t=Object.keys(t).join(","),Error(I(268,t)));return t=Zp(e),t=t===null?null:t.stateNode,t};pt.flushSync=function(t){return dr(t)};pt.hydrate=function(t,e,n){if(!_l(e))throw Error(I(200));return bl(null,t,e,!0,n)};pt.hydrateRoot=function(t,e,n){if(!Gu(t))throw Error(I(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Ag;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Tg(e,null,t,1,n??null,s,!1,i,o),t[on]=e.current,ti(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new wl(e)};pt.render=function(t,e,n){if(!_l(e))throw Error(I(200));return bl(null,t,e,!1,n)};pt.unmountComponentAtNode=function(t){if(!_l(t))throw Error(I(40));return t._reactRootContainer?(dr(function(){bl(null,null,t,!1,function(){t._reactRootContainer=null,t[on]=null})}),!0):!1};pt.unstable_batchedUpdates=Uu;pt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!_l(n))throw Error(I(200));if(t==null||t._reactInternals===void 0)throw Error(I(38));return bl(t,e,n,!1,r)};pt.version="18.3.1-next-f1338f8080-20240426";function Pg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Pg)}catch(t){console.error(t)}}Pg(),Pp.exports=pt;var Cw=Pp.exports,Zh=Cw;La.createRoot=Zh.createRoot,La.hydrateRoot=Zh.hydrateRoot;/**
 * @remix-run/router v1.17.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bo(){return Bo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bo.apply(this,arguments)}var bn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(bn||(bn={}));const ef="popstate";function Sw(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:c=""}=Si(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Ac("",{pathname:o,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");a=u===-1?c:c.slice(0,u)}return a+"#"+(typeof i=="string"?i:Dg(i))}function r(s,i){Yu(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return kw(e,n,r,t)}function rt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Yu(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ew(){return Math.random().toString(36).substr(2,8)}function tf(t,e){return{usr:t.state,key:t.key,idx:e}}function Ac(t,e,n,r){return n===void 0&&(n=null),Bo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Si(e):e,{state:n,key:e&&e.key||r||Ew()})}function Dg(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Si(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function kw(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=bn.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Bo({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=bn.Pop;let C=d(),g=C==null?null:C-u;u=C,c&&c({action:a,location:w.location,delta:g})}function f(C,g){a=bn.Push;let p=Ac(w.location,C,g);n&&n(p,C),u=d()+1;let m=tf(p,u),x=w.createHref(p);try{o.pushState(m,"",x)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;s.location.assign(x)}i&&c&&c({action:a,location:w.location,delta:1})}function y(C,g){a=bn.Replace;let p=Ac(w.location,C,g);n&&n(p,C),u=d();let m=tf(p,u),x=w.createHref(p);o.replaceState(m,"",x),i&&c&&c({action:a,location:w.location,delta:0})}function v(C){let g=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof C=="string"?C:Dg(C);return p=p.replace(/ $/,"%20"),rt(g,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,g)}let w={get action(){return a},get location(){return t(s,o)},listen(C){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(ef,h),c=C,()=>{s.removeEventListener(ef,h),c=null}},createHref(C){return e(s,C)},createURL:v,encodeLocation(C){let g=v(C);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:y,go(C){return o.go(C)}};return w}var nf;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(nf||(nf={}));function Iw(t,e,n){return n===void 0&&(n="/"),jw(t,e,n,!1)}function jw(t,e,n,r){let s=typeof e=="string"?Si(e):e,i=Mg(s.pathname||"/",n);if(i==null)return null;let o=Rg(t);Tw(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=Uw(i);a=Bw(o[c],u,r)}return a}function Rg(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(rt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Qr([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(rt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Rg(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:Fw(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of Og(i.path))s(i,o,c)}),e}function Og(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Og(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function Tw(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Lw(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Aw=/^:[\w-]+$/,Pw=3,Dw=2,Rw=1,Ow=10,Mw=-2,rf=t=>t==="*";function Fw(t,e){let n=t.split("/"),r=n.length;return n.some(rf)&&(r+=Mw),e&&(r+=Dw),n.filter(s=>!rf(s)).reduce((s,i)=>s+(Aw.test(i)?Pw:i===""?Rw:Ow),r)}function Lw(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Bw(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=sf({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=sf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Qr([i,h.pathname]),pathnameBase:zw(Qr([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Qr([i,h.pathnameBase]))}return o}function sf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=$w(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:y}=d;if(f==="*"){let w=a[h]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const v=a[h];return y&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function $w(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Yu(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Uw(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yu(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Mg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Qr=t=>t.join("/").replace(/\/\/+/g,"/"),zw=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function Vw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Fg=["post","put","patch","delete"];new Set(Fg);const Ww=["get",...Fg];new Set(Ww);/**
 * React Router v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $o(){return $o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$o.apply(this,arguments)}const Qw=_.createContext(null),Hw=_.createContext(null),Lg=_.createContext(null),Nl=_.createContext(null),Cl=_.createContext({outlet:null,matches:[],isDataRoute:!1}),Bg=_.createContext(null);function Ku(){return _.useContext(Nl)!=null}function qw(){return Ku()||rt(!1),_.useContext(Nl).location}function Gw(t,e){return Yw(t,e)}function Yw(t,e,n,r){Ku()||rt(!1);let{navigator:s}=_.useContext(Lg),{matches:i}=_.useContext(Cl),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=qw(),d;if(e){var h;let C=typeof e=="string"?Si(e):e;c==="/"||(h=C.pathname)!=null&&h.startsWith(c)||rt(!1),d=C}else d=u;let f=d.pathname||"/",y=f;if(c!=="/"){let C=c.replace(/^\//,"").split("/");y="/"+f.replace(/^\//,"").split("/").slice(C.length).join("/")}let v=Iw(t,{pathname:y}),w=e_(v&&v.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:Qr([c,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:Qr([c,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),i,n,r);return e&&w?_.createElement(Nl.Provider,{value:{location:$o({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:bn.Pop}},w):w}function Kw(){let t=s_(),e=Vw(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:s},n):null,null)}const Jw=_.createElement(Kw,null);class Xw extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(Cl.Provider,{value:this.props.routeContext},_.createElement(Bg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Zw(t){let{routeContext:e,match:n,children:r}=t,s=_.useContext(Qw);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(Cl.Provider,{value:e},r)}function e_(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||rt(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:y}=n,v=h.route.loader&&f[h.route.id]===void 0&&(!y||y[h.route.id]===void 0);if(h.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let y,v=!1,w=null,C=null;n&&(y=a&&h.route.id?a[h.route.id]:void 0,w=h.route.errorElement||Jw,c&&(u<0&&f===0?(v=!0,C=null):u===f&&(v=!0,C=h.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,f+1)),p=()=>{let m;return y?m=w:v?m=C:h.route.Component?m=_.createElement(h.route.Component,null):h.route.element?m=h.route.element:m=d,_.createElement(Zw,{match:h,routeContext:{outlet:d,matches:g,isDataRoute:n!=null},children:m})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?_.createElement(Xw,{location:n.location,revalidation:n.revalidation,component:w,error:y,children:p(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):p()},null)}var Pc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Pc||{});function t_(t){let e=_.useContext(Hw);return e||rt(!1),e}function n_(t){let e=_.useContext(Cl);return e||rt(!1),e}function r_(t){let e=n_(),n=e.matches[e.matches.length-1];return n.route.id||rt(!1),n.route.id}function s_(){var t;let e=_.useContext(Bg),n=t_(Pc.UseRouteError),r=r_(Pc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Ve(t){rt(!1)}function i_(t){let{basename:e="/",children:n=null,location:r,navigationType:s=bn.Pop,navigator:i,static:o=!1,future:a}=t;Ku()&&rt(!1);let c=e.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:c,navigator:i,static:o,future:$o({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=Si(r));let{pathname:d="/",search:h="",hash:f="",state:y=null,key:v="default"}=r,w=_.useMemo(()=>{let C=Mg(d,c);return C==null?null:{location:{pathname:C,search:h,hash:f,state:y,key:v},navigationType:s}},[c,d,h,f,y,v,s]);return w==null?null:_.createElement(Lg.Provider,{value:u},_.createElement(Nl.Provider,{children:n,value:w}))}function o_(t){let{children:e,location:n}=t;return Gw(Dc(e),n)}new Promise(()=>{});function Dc(t,e){e===void 0&&(e=[]);let n=[];return _.Children.forEach(t,(r,s)=>{if(!_.isValidElement(r))return;let i=[...e,s];if(r.type===_.Fragment){n.push.apply(n,Dc(r.props.children,i));return}r.type!==Ve&&rt(!1),!r.props.index||!r.props.children||rt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Dc(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const l_="6";try{window.__reactRouterVersion=l_}catch{}const a_="startTransition",of=fx[a_];function c_(t){let{basename:e,children:n,future:r,window:s}=t,i=_.useRef();i.current==null&&(i.current=Sw({window:s,v5Compat:!0}));let o=i.current,[a,c]=_.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=_.useCallback(h=>{u&&of?of(()=>c(h)):c(h)},[c,u]);return _.useLayoutEffect(()=>o.listen(d),[o,d]),_.createElement(i_,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var lf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(lf||(lf={}));var af;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(af||(af={}));const bs=""+new URL("bubble-Dy97b3Cx.png",import.meta.url).href,Ns=""+new URL("Pencil-shUlLtKB.png",import.meta.url).href,$g=""+new URL("select-DKsCgP1g.png",import.meta.url).href,se=({items:t,onSelect:e,style:n,columns:r,all:s,ICON:i,name:o})=>{const[a,c]=_.useState(!1),[u,d]=_.useState(""),[h,f]=_.useState(""),[y,v]=_.useState(""),w=b=>{b.preventDefault(),c(!0)},C=(b,N)=>{b.stopPropagation(),b.preventDefault(),console.log(N),e(s?N:N.shortForm||N.name||N.Name),c(!1)},g=b=>{b.stopPropagation(),b.preventDefault(),c(!1),d(""),f(""),v("")},p=()=>{f(""),v("")},m=b=>{const[N,E,S]=b.split("/");return new Date(`${S}-${E}-${N}`)},x=t.filter(b=>{const N=r.some(E=>String(b[E.key]||"").toLowerCase().includes(u.toLowerCase()));if(o==="invoiceList"&&h&&y){const E=m(b.date);if(isNaN(E))return!1;const S=new Date(h),k=new Date(y),j=E>=S&&E<=k;return N&&j}return N});return l.jsxs("div",{className:`absolute ${n.top} ]`,children:[l.jsx("button",{onClick:w,type:"button",children:l.jsx("img",{src:i||$g,className:`${i?"w-6 h-6":"w-4 h-4"}`,alt:"Select"})}),a&&l.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex justify-center items-center z-50",onClick:g,children:l.jsxs("div",{className:"bg-background  rounded-lg shadow-lg p-6 w-[50vw] max-w-full max-h-[80vh] overflow-auto",onClick:b=>b.stopPropagation(),children:[l.jsx("h2",{className:"text-lg font-semibold mb-4 text-center text-blue-800 italic ",children:"Select an Item"}),l.jsx("input",{type:"text",value:u,onChange:b=>d(b.target.value),className:"border py-1 px-2 mb-4 w-full",placeholder:"Search"}),o==="invoiceList"&&l.jsxs("div",{className:"mb-4 flex items-center",children:[l.jsxs("label",{className:"mr-2",children:["From:",l.jsx("input",{type:"date",value:h,onChange:b=>f(b.target.value),className:"border p-2 mx-2"})]}),l.jsxs("label",{children:["To:",l.jsx("input",{type:"date",value:y,onChange:b=>v(b.target.value),className:"border p-2 mx-2"})]}),l.jsx("button",{onClick:p,type:"button",className:"ml-4 px-4 py-2 bg-blue-500 text-white rounded",children:"Reset"})]}),l.jsxs("table",{className:"w-full table-auto ",children:[l.jsx("thead",{className:"bg-blue-800 text-white text-sm ",children:l.jsx("tr",{className:"",children:r.map(b=>l.jsx("th",{className:"px-4 font-medium border",children:b.label},b.key))})}),l.jsx("tbody",{className:"bg-blue-100 ",children:x.length>0?x.map(b=>l.jsx("tr",{className:"cursor-pointer  hover:bg-orange-300",onClick:N=>C(N,b),children:r.map(N=>l.jsx("td",{className:"px-4 py-1 border",children:b[N.key]||""},N.key))},b.id||b.shortForm)):l.jsx("tr",{children:l.jsx("td",{colSpan:r.length,className:"px-4 py-2 text-center",children:"No results found"})})})]}),l.jsx("button",{onClick:g,type:"button",className:"mt-4 px-4 py-2 bg-red-500 text-white rounded",children:"Close"})]})})]})};var cf={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T=function(t,e){if(!t)throw as(e)},as=function(t){return new Error("Firebase Database ("+Ug.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},u_=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Ju={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|u>>6,y=u&63;c||(y=64,o||(f=64)),r.push(n[d],n[h],n[f],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):u_(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||h==null)throw new d_;const f=i<<2|a>>4;if(r.push(f),u!==64){const y=a<<4&240|u>>2;if(r.push(y),h!==64){const v=u<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class d_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vg=function(t){const e=zg(t);return Ju.encodeByteArray(e,!0)},Uo=function(t){return Vg(t).replace(/\./g,"")},Rc=function(t){try{return Ju.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(t){return Wg(void 0,t)}function Wg(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!f_(n)||(t[n]=Wg(t[n],e[n]));return t}function f_(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_=()=>p_().__FIREBASE_DEFAULTS__,g_=()=>{if(typeof process>"u"||typeof cf>"u")return;const t=cf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},y_=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Rc(t[1]);return e&&JSON.parse(e)},Qg=()=>{try{return m_()||g_()||y_()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},v_=t=>{var e,n;return(n=(e=Qg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},x_=t=>{const e=v_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Hg=()=>{var t;return(t=Qg())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Uo(JSON.stringify(n)),Uo(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(__())}function b_(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function N_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Gg(){return Ug.NODE_ADMIN===!0}function Yg(){try{return typeof indexedDB=="object"}catch{return!1}}function Kg(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function C_(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="FirebaseError";class wr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=S_,Object.setPrototypeOf(this,wr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sl.prototype.create)}}class Sl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?E_(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new wr(s,a,r)}}function E_(t,e){return t.replace(k_,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const k_=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(t){return JSON.parse(t)}function Ce(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=ui(Rc(i[0])||""),n=ui(Rc(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},I_=function(t){const e=Jg(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},j_=function(t){const e=Jg(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function hr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function uf(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zo(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function Vo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(df(i)&&df(o)){if(!Vo(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function df(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const f=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,d;for(let h=0;h<80;h++){h<40?h<20?(u=a^i&(o^a),d=1518500249):(u=i^o^a,d=1859775393):h<60?(u=i&o|a&(i|o),d=2400959708):(u=i^o^a,d=3395469782);const f=(s<<5|s>>>27)+u+c+d+r[h]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function El(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,T(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},kl=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=1e3,R_=2,O_=4*60*60*1e3,M_=.5;function hf(t,e=D_,n=R_){const r=e*Math.pow(n,t),s=Math.round(M_*r*(Math.random()-.5)*2);return Math.min(O_,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(t){return t&&t._delegate?t._delegate:t}class cn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new cs;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(B_(e))try{this.getOrInitializeService({instanceIdentifier:Jn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Jn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jn){return this.instances.has(e)}getOptions(e=Jn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:L_(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Jn){return this.component?this.component.multipleInstances?e:Jn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function L_(t){return t===Jn?void 0:t}function B_(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new F_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const U_={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},z_=ne.INFO,V_={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},W_=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=V_[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xu{constructor(e){this.name=e,this._logLevel=z_,this._logHandler=W_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?U_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const Q_=(t,e)=>e.some(n=>t instanceof n);let ff,pf;function H_(){return ff||(ff=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function q_(){return pf||(pf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xg=new WeakMap,Oc=new WeakMap,Zg=new WeakMap,va=new WeakMap,Zu=new WeakMap;function G_(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Pn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Xg.set(n,t)}).catch(()=>{}),Zu.set(e,t),e}function Y_(t){if(Oc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Oc.set(t,e)}let Mc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Oc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Zg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function K_(t){Mc=t(Mc)}function J_(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(xa(this),e,...n);return Zg.set(r,e.sort?e.sort():[e]),Pn(r)}:q_().includes(t)?function(...e){return t.apply(xa(this),e),Pn(Xg.get(this))}:function(...e){return Pn(t.apply(xa(this),e))}}function X_(t){return typeof t=="function"?J_(t):(t instanceof IDBTransaction&&Y_(t),Q_(t,H_())?new Proxy(t,Mc):t)}function Pn(t){if(t instanceof IDBRequest)return G_(t);if(va.has(t))return va.get(t);const e=X_(t);return e!==t&&(va.set(t,e),Zu.set(e,t)),e}const xa=t=>Zu.get(t);function ey(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Pn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Pn(o.result),c.oldVersion,c.newVersion,Pn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Z_=["get","getKey","getAll","getAllKeys","count"],eb=["put","add","delete","clear"],wa=new Map;function mf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wa.get(e))return wa.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=eb.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Z_.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return wa.set(e,i),i}K_(t=>({...t,get:(e,n,r)=>mf(e,n)||t.get(e,n,r),has:(e,n)=>!!mf(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nb(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function nb(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fc="@firebase/app",gf="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un=new Xu("@firebase/app"),rb="@firebase/app-compat",sb="@firebase/analytics-compat",ib="@firebase/analytics",ob="@firebase/app-check-compat",lb="@firebase/app-check",ab="@firebase/auth",cb="@firebase/auth-compat",ub="@firebase/database",db="@firebase/data-connect",hb="@firebase/database-compat",fb="@firebase/functions",pb="@firebase/functions-compat",mb="@firebase/installations",gb="@firebase/installations-compat",yb="@firebase/messaging",vb="@firebase/messaging-compat",xb="@firebase/performance",wb="@firebase/performance-compat",_b="@firebase/remote-config",bb="@firebase/remote-config-compat",Nb="@firebase/storage",Cb="@firebase/storage-compat",Sb="@firebase/firestore",Eb="@firebase/vertexai-preview",kb="@firebase/firestore-compat",Ib="firebase",jb="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc="[DEFAULT]",Tb={[Fc]:"fire-core",[rb]:"fire-core-compat",[ib]:"fire-analytics",[sb]:"fire-analytics-compat",[lb]:"fire-app-check",[ob]:"fire-app-check-compat",[ab]:"fire-auth",[cb]:"fire-auth-compat",[ub]:"fire-rtdb",[db]:"fire-data-connect",[hb]:"fire-rtdb-compat",[fb]:"fire-fn",[pb]:"fire-fn-compat",[mb]:"fire-iid",[gb]:"fire-iid-compat",[yb]:"fire-fcm",[vb]:"fire-fcm-compat",[xb]:"fire-perf",[wb]:"fire-perf-compat",[_b]:"fire-rc",[bb]:"fire-rc-compat",[Nb]:"fire-gcs",[Cb]:"fire-gcs-compat",[Sb]:"fire-fst",[kb]:"fire-fst-compat",[Eb]:"fire-vertex","fire-js":"fire-js",[Ib]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=new Map,Ab=new Map,Bc=new Map;function yf(t,e){try{t.container.addComponent(e)}catch(n){un.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ln(t){const e=t.name;if(Bc.has(e))return un.debug(`There were multiple attempts to register component ${e}.`),!1;Bc.set(e,t);for(const n of Wo.values())yf(n,t);for(const n of Ab.values())yf(n,t);return!0}function Ei(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Dn=new Sl("app","Firebase",Pb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb=jb;function ty(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Lc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Dn.create("bad-app-name",{appName:String(s)});if(n||(n=Hg()),!n)throw Dn.create("no-options");const i=Wo.get(s);if(i){if(Vo(n,i.options)&&Vo(r,i.config))return i;throw Dn.create("duplicate-app",{appName:s})}const o=new $_(s);for(const c of Bc.values())o.addComponent(c);const a=new Db(n,r,o);return Wo.set(s,a),a}function ny(t=Lc){const e=Wo.get(t);if(!e&&t===Lc&&Hg())return ty();if(!e)throw Dn.create("no-app",{appName:t});return e}function Vt(t,e,n){var r;let s=(r=Tb[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),un.warn(a.join(" "));return}Ln(new cn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="firebase-heartbeat-database",Mb=1,di="firebase-heartbeat-store";let _a=null;function ry(){return _a||(_a=ey(Ob,Mb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(di)}catch(n){console.warn(n)}}}}).catch(t=>{throw Dn.create("idb-open",{originalErrorMessage:t.message})})),_a}async function Fb(t){try{const n=(await ry()).transaction(di),r=await n.objectStore(di).get(sy(t));return await n.done,r}catch(e){if(e instanceof wr)un.warn(e.message);else{const n=Dn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});un.warn(n.message)}}}async function vf(t,e){try{const r=(await ry()).transaction(di,"readwrite");await r.objectStore(di).put(e,sy(t)),await r.done}catch(n){if(n instanceof wr)un.warn(n.message);else{const r=Dn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});un.warn(r.message)}}}function sy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=1024,Bb=30*24*60*60*1e3;class $b{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new zb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=xf();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Bb}),this._storage.overwrite(this._heartbeatsCache))}catch(r){un.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xf(),{heartbeatsToSend:r,unsentEntries:s}=Ub(this._heartbeatsCache.heartbeats),i=Uo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return un.warn(n),""}}}function xf(){return new Date().toISOString().substring(0,10)}function Ub(t,e=Lb){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),wf(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),wf(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class zb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yg()?Kg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Fb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return vf(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return vf(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function wf(t){return Uo(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t){Ln(new cn("platform-logger",e=>new tb(e),"PRIVATE")),Ln(new cn("heartbeat",e=>new $b(e),"PRIVATE")),Vt(Fc,gf,t),Vt(Fc,gf,"esm2017"),Vt("fire-js","")}Vb("");var _f={};const bf="@firebase/database",Nf="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iy="";function Wb(t){iy=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ce(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:ui(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Mt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Qb(e)}}catch{}return new Hb},nr=oy("localStorage"),qb=oy("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=new Xu("@firebase/database"),ly=function(){let t=1;return function(){return t++}}(),ay=function(t){const e=P_(t),n=new A_;n.update(e);const r=n.digest();return Ju.encodeByteArray(r)},ki=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ki.apply(null,r):typeof r=="object"?e+=Ce(r):e+=r,e+=" "}return e};let Us=null,Cf=!0;const Gb=function(t,e){T(!e,"Can't turn on custom loggers persistently."),Hr.logLevel=ne.VERBOSE,Us=Hr.log.bind(Hr)},De=function(...t){if(Cf===!0&&(Cf=!1,Us===null&&qb.get("logging_enabled")===!0&&Gb()),Us){const e=ki.apply(null,t);Us(e)}},Ii=function(t){return function(...e){De(t,...e)}},$c=function(...t){const e="FIREBASE INTERNAL ERROR: "+ki(...t);Hr.error(e)},dn=function(...t){const e=`FIREBASE FATAL ERROR: ${ki(...t)}`;throw Hr.error(e),new Error(e)},qe=function(...t){const e="FIREBASE WARNING: "+ki(...t);Hr.warn(e)},Yb=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&qe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ed=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Kb=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},fr="[MIN_NAME]",Bn="[MAX_NAME]",_r=function(t,e){if(t===e)return 0;if(t===fr||e===Bn)return-1;if(e===fr||t===Bn)return 1;{const n=Sf(t),r=Sf(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Jb=function(t,e){return t===e?0:t<e?-1:1},Cs=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ce(e))},td=function(t){if(typeof t!="object"||t===null)return Ce(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Ce(e[r]),n+=":",n+=td(t[e[r]]);return n+="}",n},cy=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function Fe(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const uy=function(t){T(!ed(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const d=u.join("");let h="";for(c=0;c<64;c+=8){let f=parseInt(d.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},Xb=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Zb=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function eN(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const tN=new RegExp("^-?(0*)\\d{1,10}$"),nN=-2147483648,rN=2147483647,Sf=function(t){if(tN.test(t)){const e=Number(t);if(e>=nN&&e<=rN)return e}return null},us=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw qe("Exception was thrown by user callback.",n),e},Math.floor(0))}},sN=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},zs=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){qe(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(De("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',qe(e)}}class po{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}po.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd="5",dy="v",hy="s",fy="r",py="f",my=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,gy="ls",yy="p",Uc="ac",vy="websocket",xy="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=nr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&nr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function lN(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function _y(t,e,n){T(typeof e=="string","typeof type must == string"),T(typeof n=="object","typeof params must == object");let r;if(e===vy)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===xy)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);lN(t)&&(n.ns=t.namespace);const s=[];return Fe(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(){this.counters_={}}incrementCounter(e,n=1){Mt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return h_(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba={},Na={};function rd(t){const e=t.toString();return ba[e]||(ba[e]=new aN),ba[e]}function cN(t,e){const n=t.toString();return Na[n]||(Na[n]=e()),Na[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&us(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef="start",dN="close",hN="pLPCommand",fN="pRTLPCB",by="id",Ny="pw",Cy="ser",pN="cb",mN="seg",gN="ts",yN="d",vN="dframe",Sy=1870,Ey=30,xN=Sy-Ey,wN=25e3,_N=3e4;class Lr{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ii(e),this.stats_=rd(n),this.urlFn=c=>(this.appCheckToken&&(c[Uc]=this.appCheckToken),_y(n,xy,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new uN(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(_N)),Kb(()=>{if(this.isClosed_)return;this.scriptTagHolder=new sd((...i)=>{const[o,a,c,u,d]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Ef)this.id=a,this.password=c;else if(o===dN)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[Ef]="t",r[Cy]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[pN]=this.scriptTagHolder.uniqueCallbackIdentifier),r[dy]=nd,this.transportSessionId&&(r[hy]=this.transportSessionId),this.lastSessionId&&(r[gy]=this.lastSessionId),this.applicationId&&(r[yy]=this.applicationId),this.appCheckToken&&(r[Uc]=this.appCheckToken),typeof location<"u"&&location.hostname&&my.test(location.hostname)&&(r[fy]=py);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Lr.forceAllow_=!0}static forceDisallow(){Lr.forceDisallow_=!0}static isAvailable(){return Lr.forceAllow_?!0:!Lr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Xb()&&!Zb()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ce(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Vg(n),s=cy(r,xN);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[vN]="t",r[by]=e,r[Ny]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ce(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class sd{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=ly(),window[hN+this.uniqueCallbackIdentifier]=e,window[fN+this.uniqueCallbackIdentifier]=n,this.myIFrame=sd.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){De("frame writing exception"),a.stack&&De(a.stack),De(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||De("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[by]=this.myID,e[Ny]=this.myPW,e[Cy]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Ey+r.length<=Sy;){const o=this.pendingSegs.shift();r=r+"&"+mN+s+"="+o.seg+"&"+gN+s+"="+o.ts+"&"+yN+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(wN)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{De("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN=16384,NN=45e3;let Qo=null;typeof MozWebSocket<"u"?Qo=MozWebSocket:typeof WebSocket<"u"&&(Qo=WebSocket);class Tt{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ii(this.connId),this.stats_=rd(n),this.connURL=Tt.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[dy]=nd,typeof location<"u"&&location.hostname&&my.test(location.hostname)&&(o[fy]=py),n&&(o[hy]=n),r&&(o[gy]=r),s&&(o[Uc]=s),i&&(o[yy]=i),_y(e,vy,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,nr.set("previous_websocket_failure",!0);try{let r;Gg(),this.mySock=new Qo(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Tt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Qo!==null&&!Tt.forceDisallow_}static previouslyFailed(){return nr.isInMemoryStorage||nr.get("previous_websocket_failure")===!0}markConnectionHealthy(){nr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=ui(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(T(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Ce(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=cy(n,bN);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(NN))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Tt.responsesRequiredToBeHealthy=2;Tt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Lr,Tt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Tt&&Tt.isAvailable();let r=n&&!Tt.previouslyFailed();if(e.webSocketOnly&&(n||qe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Tt];else{const s=this.transports_=[];for(const i of hi.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);hi.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}hi.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=6e4,SN=5e3,EN=10*1024,kN=100*1024,Ca="t",kf="d",IN="s",If="r",jN="e",jf="o",Tf="a",Af="n",Pf="p",TN="h";class AN{constructor(e,n,r,s,i,o,a,c,u,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ii("c:"+this.id+":"),this.transportManager_=new hi(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=zs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>kN?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>EN?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ca in e){const n=e[Ca];n===Tf?this.upgradeIfSecondaryHealthy_():n===If?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===jf&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Cs("t",e),r=Cs("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Pf,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Tf,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Af,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Cs("t",e),r=Cs("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Cs(Ca,e);if(kf in e){const r=e[kf];if(n===TN){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Af){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===IN?this.onConnectionShutdown_(r):n===If?this.onReset_(r):n===jN?$c("Server Error: "+r):n===jf?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):$c("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),nd!==r&&qe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),zs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(CN))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(SN))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Pf,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(nr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e){this.allowedEvents_=e,this.listeners_={},T(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){T(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho extends Iy{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!qg()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ho}getInitialEvent(e){return T(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df=32,Rf=768;class X{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function K(){return new X("")}function V(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function $n(t){return t.pieces_.length-t.pieceNum_}function re(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new X(t.pieces_,e)}function id(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function PN(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function fi(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function jy(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new X(e,0)}function ve(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof X)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new X(n,0)}function W(t){return t.pieceNum_>=t.pieces_.length}function Qe(t,e){const n=V(t),r=V(e);if(n===null)return e;if(n===r)return Qe(re(t),re(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function DN(t,e){const n=fi(t,0),r=fi(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=_r(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function od(t,e){if($n(t)!==$n(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function bt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if($n(t)>$n(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class RN{constructor(e,n){this.errorPrefix_=n,this.parts_=fi(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=kl(this.parts_[r]);Ty(this)}}function ON(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=kl(e),Ty(t)}function MN(t){const e=t.parts_.pop();t.byteLength_-=kl(e),t.parts_.length>0&&(t.byteLength_-=1)}function Ty(t){if(t.byteLength_>Rf)throw new Error(t.errorPrefix_+"has a key path longer than "+Rf+" bytes ("+t.byteLength_+").");if(t.parts_.length>Df)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Df+") or object contains a cycle "+Xn(t))}function Xn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld extends Iy{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new ld}getInitialEvent(e){return T(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=1e3,FN=60*5*1e3,Of=30*1e3,LN=1.3,BN=3e4,$N="server_kill",Mf=3;class rn extends ky{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=rn.nextPersistentConnectionId_++,this.log_=Ii("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ss,this.maxReconnectDelay_=FN,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Gg())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ld.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ho.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Ce(i)),T(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new cs,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),T(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),T(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,u=a.s;rn.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Mt(e,"w")){const r=hr(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();qe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||j_(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Of)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=I_(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),T(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ce(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):$c("Unrecognized action received from server: "+Ce(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){T(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ss,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ss,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>BN&&(this.reconnectDelay_=Ss),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*LN)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+rn.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},u=function(h){T(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:c,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?De("getToken() completed but was canceled"):(De("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,a=new AN(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,y=>{qe(y+" ("+this.repoInfo_.toString()+")"),this.interrupt($N)},i))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&qe(h),c())}}}interrupt(e){De("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){De("Resuming connection for reason: "+e),delete this.interruptReasons_[e],uf(this.interruptReasons_)&&(this.reconnectDelay_=Ss,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>td(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new X(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){De("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Mf&&(this.reconnectDelay_=Of,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){De("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Mf&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+iy.replace(/\./g,"-")]=1,qg()?e["framework.cordova"]=1:N_()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ho.getInstance().currentlyOnline();return uf(this.interruptReasons_)&&e}}rn.nextPersistentConnectionId_=0;rn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Q(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Q(fr,e),s=new Q(fr,n);return this.compare(r,s)!==0}minPost(){return Q.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zi;class Ay extends Il{static get __EMPTY_NODE(){return Zi}static set __EMPTY_NODE(e){Zi=e}compare(e,n){return _r(e.name,n.name)}isDefinedOn(e){throw as("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Q.MIN}maxPost(){return new Q(Bn,Zi)}makePost(e,n){return T(typeof e=="string","KeyIndex indexValue must always be a string."),new Q(e,Zi)}toString(){return".key"}}const or=new Ay;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ie{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ie.RED,this.left=s??Xe.EMPTY_NODE,this.right=i??Xe.EMPTY_NODE}copy(e,n,r,s,i){return new Ie(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Xe.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Xe.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ie.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ie.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ie.RED=!0;Ie.BLACK=!1;class UN{copy(e,n,r,s,i){return this}insert(e,n,r){return new Ie(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Xe{constructor(e,n=Xe.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Xe(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ie.BLACK,null,null))}remove(e){return new Xe(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ie.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new eo(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new eo(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new eo(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new eo(this.root_,null,this.comparator_,!0,e)}}Xe.EMPTY_NODE=new UN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(t,e){return _r(t.name,e.name)}function ad(t,e){return _r(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc;function VN(t){zc=t}const Py=function(t){return typeof t=="number"?"number:"+uy(t):"string:"+t},Dy=function(t){if(t.isLeafNode()){const e=t.val();T(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Mt(e,".sv"),"Priority must be a string or number.")}else T(t===zc||t.isEmpty(),"priority of unexpected type.");T(t===zc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ff;class Ee{constructor(e,n=Ee.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,T(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Dy(this.priorityNode_)}static set __childrenNodeConstructor(e){Ff=e}static get __childrenNodeConstructor(){return Ff}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ee(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ee.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return W(e)?this:V(e)===".priority"?this.priorityNode_:Ee.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Ee.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=V(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(T(r!==".priority"||$n(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Ee.__childrenNodeConstructor.EMPTY_NODE.updateChild(re(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Py(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=uy(this.value_):e+=this.value_,this.lazyHash_=ay(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ee.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ee.__childrenNodeConstructor?-1:(T(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Ee.VALUE_TYPE_ORDER.indexOf(n),i=Ee.VALUE_TYPE_ORDER.indexOf(r);return T(s>=0,"Unknown leaf type: "+n),T(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ee.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ry,Oy;function WN(t){Ry=t}function QN(t){Oy=t}class HN extends Il{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?_r(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Q.MIN}maxPost(){return new Q(Bn,new Ee("[PRIORITY-POST]",Oy))}makePost(e,n){const r=Ry(e);return new Q(n,new Ee("[PRIORITY-POST]",r))}toString(){return".priority"}}const de=new HN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=Math.log(2);class GN{constructor(e){const n=i=>parseInt(Math.log(i)/qN,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const qo=function(t,e,n,r){t.sort(e);const s=function(c,u){const d=u-c;let h,f;if(d===0)return null;if(d===1)return h=t[c],f=n?n(h):h,new Ie(f,h.node,Ie.BLACK,null,null);{const y=parseInt(d/2,10)+c,v=s(c,y),w=s(y+1,u);return h=t[y],f=n?n(h):h,new Ie(f,h.node,Ie.BLACK,v,w)}},i=function(c){let u=null,d=null,h=t.length;const f=function(v,w){const C=h-v,g=h;h-=v;const p=s(C+1,g),m=t[C],x=n?n(m):m;y(new Ie(x,m.node,w,null,p))},y=function(v){u?(u.left=v,u=v):(d=v,u=v)};for(let v=0;v<c.count;++v){const w=c.nextBitIsOne(),C=Math.pow(2,c.count-(v+1));w?f(C,Ie.BLACK):(f(C,Ie.BLACK),f(C,Ie.RED))}return d},o=new GN(t.length),a=i(o);return new Xe(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sa;const Sr={};class tn{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return T(Sr&&de,"ChildrenNode.ts has not been loaded"),Sa=Sa||new tn({".priority":Sr},{".priority":de}),Sa}get(e){const n=hr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Xe?n:null}hasIndex(e){return Mt(this.indexSet_,e.toString())}addIndex(e,n){T(e!==or,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Q.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=qo(r,e.getCompare()):a=Sr;const c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;const d=Object.assign({},this.indexes_);return d[c]=a,new tn(d,u)}addToIndexes(e,n){const r=zo(this.indexes_,(s,i)=>{const o=hr(this.indexSet_,i);if(T(o,"Missing index implementation for "+i),s===Sr)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(Q.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),qo(a,o.getCompare())}else return Sr;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new Q(e.name,a))),c.insert(e,e.node)}});return new tn(r,this.indexSet_)}removeFromIndexes(e,n){const r=zo(this.indexes_,s=>{if(s===Sr)return s;{const i=n.get(e.name);return i?s.remove(new Q(e.name,i)):s}});return new tn(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Es;class L{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Dy(this.priorityNode_),this.children_.isEmpty()&&T(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Es||(Es=new L(new Xe(ad),null,tn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Es}updatePriority(e){return this.children_.isEmpty()?this:new L(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Es:n}}getChild(e){const n=V(e);return n===null?this:this.getImmediateChild(n).getChild(re(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(T(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Q(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Es:this.priorityNode_;return new L(s,o,i)}}updateChild(e,n){const r=V(e);if(r===null)return n;{T(V(e)!==".priority"||$n(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(re(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(de,(o,a)=>{n[o]=a.val(e),r++,i&&L.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Py(this.getPriority().val())+":"),this.forEachChild(de,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":ay(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Q(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Q(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Q(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Q.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Q.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ji?-1:0}withIndex(e){if(e===or||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new L(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===or||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(de),s=n.getIterator(de);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===or?null:this.indexMap_.get(e.toString())}}L.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class YN extends L{constructor(){super(new Xe(ad),L.EMPTY_NODE,tn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return L.EMPTY_NODE}isEmpty(){return!1}}const ji=new YN;Object.defineProperties(Q,{MIN:{value:new Q(fr,L.EMPTY_NODE)},MAX:{value:new Q(Bn,ji)}});Ay.__EMPTY_NODE=L.EMPTY_NODE;Ee.__childrenNodeConstructor=L;VN(ji);QN(ji);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=!0;function _e(t,e=null){if(t===null)return L.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),T(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Ee(n,_e(e))}if(!(t instanceof Array)&&KN){const n=[];let r=!1;if(Fe(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=_e(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Q(o,c)))}}),n.length===0)return L.EMPTY_NODE;const i=qo(n,zN,o=>o.name,ad);if(r){const o=qo(n,de.getCompare());return new L(i,_e(e),new tn({".priority":o},{".priority":de}))}else return new L(i,_e(e),tn.Default)}else{let n=L.EMPTY_NODE;return Fe(t,(r,s)=>{if(Mt(t,r)&&r.substring(0,1)!=="."){const i=_e(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(_e(e))}}WN(_e);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd extends Il{constructor(e){super(),this.indexPath_=e,T(!W(e)&&V(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?_r(e.name,n.name):i}makePost(e,n){const r=_e(e),s=L.EMPTY_NODE.updateChild(this.indexPath_,r);return new Q(n,s)}maxPost(){const e=L.EMPTY_NODE.updateChild(this.indexPath_,ji);return new Q(Bn,e)}toString(){return fi(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN extends Il{compare(e,n){const r=e.node.compareTo(n.node);return r===0?_r(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Q.MIN}maxPost(){return Q.MAX}makePost(e,n){const r=_e(e);return new Q(n,r)}toString(){return".value"}}const My=new JN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(t){return{type:"value",snapshotNode:t}}function es(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function pi(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function mi(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function XN(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){T(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(pi(n,a)):T(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(es(n,r)):o.trackChildChange(mi(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(de,(s,i)=>{n.hasChild(s)||r.trackChildChange(pi(s,i))}),n.isLeafNode()||n.forEachChild(de,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(mi(s,i,o))}else r.trackChildChange(es(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?L.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.indexedFilter_=new ud(e.getIndex()),this.index_=e.getIndex(),this.startPost_=gi.getStartPost_(e),this.endPost_=gi.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new Q(n,r))||(r=L.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=L.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(L.EMPTY_NODE);const i=this;return n.forEachChild(de,(o,a)=>{i.matches(new Q(o,a))||(s=s.updateImmediateChild(o,L.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new gi(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new Q(n,r))||(r=L.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=L.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=L.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(L.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,L.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const h=this.index_.getCompare();o=(f,y)=>h(y,f)}else o=this.index_.getCompare();const a=e;T(a.numChildren()===this.limit_,"");const c=new Q(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(c);if(a.hasChild(n)){const h=a.getImmediateChild(n);let f=s.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const y=f==null?1:o(f,c);if(d&&!r.isEmpty()&&y>=0)return i!=null&&i.trackChildChange(mi(n,r,h)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(pi(n,h));const w=a.updateImmediateChild(n,L.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange(es(f.name,f.node)),w.updateImmediateChild(f.name,f.node)):w}}else return r.isEmpty()?e:d&&o(u,c)>=0?(i!=null&&(i.trackChildChange(pi(u.name,u.node)),i.trackChildChange(es(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,L.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=de}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return T(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return T(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fr}hasEnd(){return this.endSet_}getIndexEndValue(){return T(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return T(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Bn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return T(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===de}copy(){const e=new dd;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function eC(t){return t.loadsAllData()?new ud(t.getIndex()):t.hasLimit()?new ZN(t):new gi(t)}function tC(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function nC(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function rC(t,e){const n=t.copy();return n.index_=e,n}function Lf(t){const e={};if(t.isDefault())return e;let n;if(t.index_===de?n="$priority":t.index_===My?n="$value":t.index_===or?n="$key":(T(t.index_ instanceof cd,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ce(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Ce(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Ce(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Ce(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Ce(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Bf(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==de&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go extends ky{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Ii("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(T(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=Go.getListenId_(e,r),a={};this.listens_[o]=a;const c=Lf(e._queryParams);this.restRequest_(i+".json",c,(u,d)=>{let h=d;if(u===404&&(h=null,u=null),u===null&&this.onDataUpdate_(i,h,!1,r),hr(this.listens_,o)===a){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",s(f,null)}})}unlisten(e,n){const r=Go.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Lf(e._queryParams),r=e._path.toString(),s=new cs;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+T_(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=ui(a.responseText)}catch{qe("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&qe("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.rootNode_=L.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(){return{value:null,children:new Map}}function Ly(t,e,n){if(W(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=V(e);t.children.has(r)||t.children.set(r,Yo());const s=t.children.get(r);e=re(e),Ly(s,e,n)}}function Vc(t,e,n){t.value!==null?n(e,t.value):iC(t,(r,s)=>{const i=new X(e.toString()+"/"+r);Vc(s,i,n)})}function iC(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Fe(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=10*1e3,lC=30*1e3,aC=5*60*1e3;class cC{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new oC(e);const r=$f+(lC-$f)*Math.random();zs(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Fe(e,(s,i)=>{i>0&&Mt(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),zs(this.reportStats_.bind(this),Math.floor(Math.random()*2*aC))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(At||(At={}));function hd(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function fd(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function pd(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=At.ACK_USER_WRITE,this.source=hd()}operationForChild(e){if(W(this.path)){if(this.affectedTree.value!=null)return T(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new X(e));return new Ko(K(),n,this.revert)}}else return T(V(this.path)===e,"operationForChild called for unrelated child."),new Ko(re(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n){this.source=e,this.path=n,this.type=At.LISTEN_COMPLETE}operationForChild(e){return W(this.path)?new yi(this.source,K()):new yi(this.source,re(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=At.OVERWRITE}operationForChild(e){return W(this.path)?new pr(this.source,K(),this.snap.getImmediateChild(e)):new pr(this.source,re(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=At.MERGE}operationForChild(e){if(W(this.path)){const n=this.children.subtree(new X(e));return n.isEmpty()?null:n.value?new pr(this.source,K(),n.value):new ts(this.source,K(),n)}else return T(V(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ts(this.source,re(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(W(e))return this.isFullyInitialized()&&!this.filtered_;const n=V(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function dC(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(XN(o.childName,o.snapshotNode))}),ks(t,s,"child_removed",e,r,n),ks(t,s,"child_added",e,r,n),ks(t,s,"child_moved",i,r,n),ks(t,s,"child_changed",e,r,n),ks(t,s,"value",e,r,n),s}function ks(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>fC(t,a,c)),o.forEach(a=>{const c=hC(t,a,i);s.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function hC(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function fC(t,e,n){if(e.childName==null||n.childName==null)throw as("Should only compare child_ events.");const r=new Q(e.childName,e.snapshotNode),s=new Q(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(t,e){return{eventCache:t,serverCache:e}}function Vs(t,e,n,r){return jl(new Un(e,n,r),t.serverCache)}function By(t,e,n,r){return jl(t.eventCache,new Un(e,n,r))}function Jo(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function mr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ea;const pC=()=>(Ea||(Ea=new Xe(Jb)),Ea);class te{constructor(e,n=pC()){this.value=e,this.children=n}static fromObject(e){let n=new te(null);return Fe(e,(r,s)=>{n=n.set(new X(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:K(),value:this.value};if(W(e))return null;{const r=V(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(re(e),n);return i!=null?{path:ve(new X(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(W(e))return this;{const n=V(e),r=this.children.get(n);return r!==null?r.subtree(re(e)):new te(null)}}set(e,n){if(W(e))return new te(n,this.children);{const r=V(e),i=(this.children.get(r)||new te(null)).set(re(e),n),o=this.children.insert(r,i);return new te(this.value,o)}}remove(e){if(W(e))return this.children.isEmpty()?new te(null):new te(null,this.children);{const n=V(e),r=this.children.get(n);if(r){const s=r.remove(re(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new te(null):new te(this.value,i)}else return this}}get(e){if(W(e))return this.value;{const n=V(e),r=this.children.get(n);return r?r.get(re(e)):null}}setTree(e,n){if(W(e))return n;{const r=V(e),i=(this.children.get(r)||new te(null)).setTree(re(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new te(this.value,o)}}fold(e){return this.fold_(K(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(ve(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,K(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(W(e))return null;{const i=V(e),o=this.children.get(i);return o?o.findOnPath_(re(e),ve(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,K(),n)}foreachOnPath_(e,n,r){if(W(e))return this;{this.value&&r(n,this.value);const s=V(e),i=this.children.get(s);return i?i.foreachOnPath_(re(e),ve(n,s),r):new te(null)}}foreach(e){this.foreach_(K(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(ve(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.writeTree_=e}static empty(){return new Rt(new te(null))}}function Ws(t,e,n){if(W(e))return new Rt(new te(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Qe(s,e);return i=i.updateChild(o,n),new Rt(t.writeTree_.set(s,i))}else{const s=new te(n),i=t.writeTree_.setTree(e,s);return new Rt(i)}}}function Wc(t,e,n){let r=t;return Fe(n,(s,i)=>{r=Ws(r,ve(e,s),i)}),r}function Uf(t,e){if(W(e))return Rt.empty();{const n=t.writeTree_.setTree(e,new te(null));return new Rt(n)}}function Qc(t,e){return br(t,e)!=null}function br(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Qe(n.path,e)):null}function zf(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(de,(r,s)=>{e.push(new Q(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Q(r,s.value))}),e}function Rn(t,e){if(W(e))return t;{const n=br(t,e);return n!=null?new Rt(new te(n)):new Rt(t.writeTree_.subtree(e))}}function Hc(t){return t.writeTree_.isEmpty()}function ns(t,e){return $y(K(),t.writeTree_,e)}function $y(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(T(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=$y(ve(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ve(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t,e){return Wy(e,t)}function mC(t,e,n,r,s){T(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Ws(t.visibleWrites,e,n)),t.lastWriteId=r}function gC(t,e,n,r){T(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Wc(t.visibleWrites,e,n),t.lastWriteId=r}function yC(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function vC(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);T(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&xC(a,r.path)?s=!1:bt(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return wC(t),!0;if(r.snap)t.visibleWrites=Uf(t.visibleWrites,r.path);else{const a=r.children;Fe(a,c=>{t.visibleWrites=Uf(t.visibleWrites,ve(r.path,c))})}return!0}else return!1}function xC(t,e){if(t.snap)return bt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&bt(ve(t.path,n),e))return!0;return!1}function wC(t){t.visibleWrites=Uy(t.allWrites,_C,K()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function _C(t){return t.visible}function Uy(t,e,n){let r=Rt.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)bt(n,o)?(a=Qe(n,o),r=Ws(r,a,i.snap)):bt(o,n)&&(a=Qe(o,n),r=Ws(r,K(),i.snap.getChild(a)));else if(i.children){if(bt(n,o))a=Qe(n,o),r=Wc(r,a,i.children);else if(bt(o,n))if(a=Qe(o,n),W(a))r=Wc(r,K(),i.children);else{const c=hr(i.children,V(a));if(c){const u=c.getChild(re(a));r=Ws(r,K(),u)}}}else throw as("WriteRecord should have .snap or .children")}}return r}function zy(t,e,n,r,s){if(!r&&!s){const i=br(t.visibleWrites,e);if(i!=null)return i;{const o=Rn(t.visibleWrites,e);if(Hc(o))return n;if(n==null&&!Qc(o,K()))return null;{const a=n||L.EMPTY_NODE;return ns(o,a)}}}else{const i=Rn(t.visibleWrites,e);if(!s&&Hc(i))return n;if(!s&&n==null&&!Qc(i,K()))return null;{const o=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(bt(u.path,e)||bt(e,u.path))},a=Uy(t.allWrites,o,e),c=n||L.EMPTY_NODE;return ns(a,c)}}}function bC(t,e,n){let r=L.EMPTY_NODE;const s=br(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(de,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Rn(t.visibleWrites,e);return n.forEachChild(de,(o,a)=>{const c=ns(Rn(i,new X(o)),a);r=r.updateImmediateChild(o,c)}),zf(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Rn(t.visibleWrites,e);return zf(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function NC(t,e,n,r,s){T(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=ve(e,n);if(Qc(t.visibleWrites,i))return null;{const o=Rn(t.visibleWrites,i);return Hc(o)?s.getChild(n):ns(o,s.getChild(n))}}function CC(t,e,n,r){const s=ve(e,n),i=br(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Rn(t.visibleWrites,s);return ns(o,r.getNode().getImmediateChild(n))}else return null}function SC(t,e){return br(t.visibleWrites,e)}function EC(t,e,n,r,s,i,o){let a;const c=Rn(t.visibleWrites,e),u=br(c,K());if(u!=null)a=u;else if(n!=null)a=ns(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],h=o.getCompare(),f=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let y=f.getNext();for(;y&&d.length<s;)h(y,r)!==0&&d.push(y),y=f.getNext();return d}else return[]}function kC(){return{visibleWrites:Rt.empty(),allWrites:[],lastWriteId:-1}}function Xo(t,e,n,r){return zy(t.writeTree,t.treePath,e,n,r)}function md(t,e){return bC(t.writeTree,t.treePath,e)}function Vf(t,e,n,r){return NC(t.writeTree,t.treePath,e,n,r)}function Zo(t,e){return SC(t.writeTree,ve(t.treePath,e))}function IC(t,e,n,r,s,i){return EC(t.writeTree,t.treePath,e,n,r,s,i)}function gd(t,e,n){return CC(t.writeTree,t.treePath,e,n)}function Vy(t,e){return Wy(ve(t.treePath,e),t.writeTree)}function Wy(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;T(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),T(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,mi(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,pi(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,es(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,mi(r,e.snapshotNode,s.oldSnap));else throw as("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Qy=new TC;class yd{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Un(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return gd(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:mr(this.viewCache_),i=IC(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(t){return{filter:t}}function PC(t,e){T(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),T(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function DC(t,e,n,r,s){const i=new jC;let o,a;if(n.type===At.OVERWRITE){const u=n;u.source.fromUser?o=qc(t,e,u.path,u.snap,r,s,i):(T(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!W(u.path),o=el(t,e,u.path,u.snap,r,s,a,i))}else if(n.type===At.MERGE){const u=n;u.source.fromUser?o=OC(t,e,u.path,u.children,r,s,i):(T(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=Gc(t,e,u.path,u.children,r,s,a,i))}else if(n.type===At.ACK_USER_WRITE){const u=n;u.revert?o=LC(t,e,u.path,r,s,i):o=MC(t,e,u.path,u.affectedTree,r,s,i)}else if(n.type===At.LISTEN_COMPLETE)o=FC(t,e,n.path,r,i);else throw as("Unknown operation type: "+n.type);const c=i.getChanges();return RC(e,o,c),{viewCache:o,changes:c}}function RC(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=Jo(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(Fy(Jo(e)))}}function Hy(t,e,n,r,s,i){const o=e.eventCache;if(Zo(r,n)!=null)return e;{let a,c;if(W(n))if(T(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=mr(e),d=u instanceof L?u:L.EMPTY_NODE,h=md(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),h,i)}else{const u=Xo(r,mr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=V(n);if(u===".priority"){T($n(n)===1,"Can't have a priority with additional path components");const d=o.getNode();c=e.serverCache.getNode();const h=Vf(r,n,d,c);h!=null?a=t.filter.updatePriority(d,h):a=o.getNode()}else{const d=re(n);let h;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();const f=Vf(r,n,o.getNode(),c);f!=null?h=o.getNode().getImmediateChild(u).updateChild(d,f):h=o.getNode().getImmediateChild(u)}else h=gd(r,u,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),u,h,d,s,i):a=o.getNode()}}return Vs(e,a,o.isFullyInitialized()||W(n),t.filter.filtersNodes())}}function el(t,e,n,r,s,i,o,a){const c=e.serverCache;let u;const d=o?t.filter:t.filter.getIndexedFilter();if(W(n))u=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){const y=c.getNode().updateChild(n,r);u=d.updateFullNode(c.getNode(),y,null)}else{const y=V(n);if(!c.isCompleteForPath(n)&&$n(n)>1)return e;const v=re(n),C=c.getNode().getImmediateChild(y).updateChild(v,r);y===".priority"?u=d.updatePriority(c.getNode(),C):u=d.updateChild(c.getNode(),y,C,v,Qy,null)}const h=By(e,u,c.isFullyInitialized()||W(n),d.filtersNodes()),f=new yd(s,h,i);return Hy(t,h,n,s,f,a)}function qc(t,e,n,r,s,i,o){const a=e.eventCache;let c,u;const d=new yd(s,e,i);if(W(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Vs(e,u,!0,t.filter.filtersNodes());else{const h=V(n);if(h===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=Vs(e,u,a.isFullyInitialized(),a.isFiltered());else{const f=re(n),y=a.getNode().getImmediateChild(h);let v;if(W(f))v=r;else{const w=d.getCompleteChild(h);w!=null?id(f)===".priority"&&w.getChild(jy(f)).isEmpty()?v=w:v=w.updateChild(f,r):v=L.EMPTY_NODE}if(y.equals(v))c=e;else{const w=t.filter.updateChild(a.getNode(),h,v,f,d,o);c=Vs(e,w,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Wf(t,e){return t.eventCache.isCompleteForChild(e)}function OC(t,e,n,r,s,i,o){let a=e;return r.foreach((c,u)=>{const d=ve(n,c);Wf(e,V(d))&&(a=qc(t,a,d,u,s,i,o))}),r.foreach((c,u)=>{const d=ve(n,c);Wf(e,V(d))||(a=qc(t,a,d,u,s,i,o))}),a}function Qf(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function Gc(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;W(n)?u=r:u=new te(null).setTree(n,r);const d=e.serverCache.getNode();return u.children.inorderTraversal((h,f)=>{if(d.hasChild(h)){const y=e.serverCache.getNode().getImmediateChild(h),v=Qf(t,y,f);c=el(t,c,new X(h),v,s,i,o,a)}}),u.children.inorderTraversal((h,f)=>{const y=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!d.hasChild(h)&&!y){const v=e.serverCache.getNode().getImmediateChild(h),w=Qf(t,v,f);c=el(t,c,new X(h),w,s,i,o,a)}}),c}function MC(t,e,n,r,s,i,o){if(Zo(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(W(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return el(t,e,n,c.getNode().getChild(n),s,i,a,o);if(W(n)){let u=new te(null);return c.getNode().forEachChild(or,(d,h)=>{u=u.set(new X(d),h)}),Gc(t,e,n,u,s,i,a,o)}else return e}else{let u=new te(null);return r.foreach((d,h)=>{const f=ve(n,d);c.isCompleteForPath(f)&&(u=u.set(d,c.getNode().getChild(f)))}),Gc(t,e,n,u,s,i,a,o)}}function FC(t,e,n,r,s){const i=e.serverCache,o=By(e,i.getNode(),i.isFullyInitialized()||W(n),i.isFiltered());return Hy(t,o,n,r,Qy,s)}function LC(t,e,n,r,s,i){let o;if(Zo(r,n)!=null)return e;{const a=new yd(r,e,s),c=e.eventCache.getNode();let u;if(W(n)||V(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Xo(r,mr(e));else{const h=e.serverCache.getNode();T(h instanceof L,"serverChildren would be complete if leaf node"),d=md(r,h)}d=d,u=t.filter.updateFullNode(c,d,i)}else{const d=V(n);let h=gd(r,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=c.getImmediateChild(d)),h!=null?u=t.filter.updateChild(c,d,h,re(n),a,i):e.eventCache.getNode().hasChild(d)?u=t.filter.updateChild(c,d,L.EMPTY_NODE,re(n),a,i):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Xo(r,mr(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||Zo(r,K())!=null,Vs(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new ud(r.getIndex()),i=eC(r);this.processor_=AC(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(L.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(L.EMPTY_NODE,a.getNode(),null),d=new Un(c,o.isFullyInitialized(),s.filtersNodes()),h=new Un(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=jl(h,d),this.eventGenerator_=new uC(this.query_)}get query(){return this.query_}}function $C(t){return t.viewCache_.serverCache.getNode()}function UC(t){return Jo(t.viewCache_)}function zC(t,e){const n=mr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!W(e)&&!n.getImmediateChild(V(e)).isEmpty())?n.getChild(e):null}function Hf(t){return t.eventRegistrations_.length===0}function VC(t,e){t.eventRegistrations_.push(e)}function qf(t,e,n){const r=[];if(n){T(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Gf(t,e,n,r){e.type===At.MERGE&&e.source.queryId!==null&&(T(mr(t.viewCache_),"We should always have a full cache before handling merges"),T(Jo(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=DC(t.processor_,s,e,n,r);return PC(t.processor_,i.viewCache),T(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,qy(t,i.changes,i.viewCache.eventCache.getNode(),null)}function WC(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(de,(i,o)=>{r.push(es(i,o))}),n.isFullyInitialized()&&r.push(Fy(n.getNode())),qy(t,r,n.getNode(),e)}function qy(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return dC(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl;class Gy{constructor(){this.views=new Map}}function QC(t){T(!tl,"__referenceConstructor has already been defined"),tl=t}function HC(){return T(tl,"Reference.ts has not been loaded"),tl}function qC(t){return t.views.size===0}function vd(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return T(i!=null,"SyncTree gave us an op for an invalid query."),Gf(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(Gf(o,e,n,r));return i}}function Yy(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=Xo(n,s?r:null),c=!1;a?c=!0:r instanceof L?(a=md(n,r),c=!1):(a=L.EMPTY_NODE,c=!1);const u=jl(new Un(a,c,!1),new Un(r,s,!1));return new BC(e,u)}return o}function GC(t,e,n,r,s,i){const o=Yy(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),VC(o,n),WC(o,n)}function YC(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=zn(t);if(s==="default")for(const[c,u]of t.views.entries())o=o.concat(qf(u,n,r)),Hf(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||i.push(u.query));else{const c=t.views.get(s);c&&(o=o.concat(qf(c,n,r)),Hf(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!zn(t)&&i.push(new(HC())(e._repo,e._path)),{removed:i,events:o}}function Ky(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function On(t,e){let n=null;for(const r of t.views.values())n=n||zC(r,e);return n}function Jy(t,e){if(e._queryParams.loadsAllData())return Al(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Xy(t,e){return Jy(t,e)!=null}function zn(t){return Al(t)!=null}function Al(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nl;function KC(t){T(!nl,"__referenceConstructor has already been defined"),nl=t}function JC(){return T(nl,"Reference.ts has not been loaded"),nl}let XC=1;class Yf{constructor(e){this.listenProvider_=e,this.syncPointTree_=new te(null),this.pendingWriteTree_=kC(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function xd(t,e,n,r,s){return mC(t.pendingWriteTree_,e,n,r,s),s?ds(t,new pr(hd(),e,n)):[]}function ZC(t,e,n,r){gC(t.pendingWriteTree_,e,n,r);const s=te.fromObject(n);return ds(t,new ts(hd(),e,s))}function Nn(t,e,n=!1){const r=yC(t.pendingWriteTree_,e);if(vC(t.pendingWriteTree_,e)){let i=new te(null);return r.snap!=null?i=i.set(K(),!0):Fe(r.children,o=>{i=i.set(new X(o),!0)}),ds(t,new Ko(r.path,i,n))}else return[]}function Ti(t,e,n){return ds(t,new pr(fd(),e,n))}function e1(t,e,n){const r=te.fromObject(n);return ds(t,new ts(fd(),e,r))}function t1(t,e){return ds(t,new yi(fd(),e))}function n1(t,e,n){const r=wd(t,n);if(r){const s=_d(r),i=s.path,o=s.queryId,a=Qe(i,e),c=new yi(pd(o),a);return bd(t,i,c)}else return[]}function rl(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||Xy(o,e))){const c=YC(o,e,n,r);qC(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=c.removed;if(a=c.events,!s){const d=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(i,(f,y)=>zn(y));if(d&&!h){const f=t.syncPointTree_.subtree(i);if(!f.isEmpty()){const y=i1(f);for(let v=0;v<y.length;++v){const w=y[v],C=w.query,g=nv(t,w);t.listenProvider_.startListening(Qs(C),vi(t,C),g.hashFn,g.onComplete)}}}!h&&u.length>0&&!r&&(d?t.listenProvider_.stopListening(Qs(e),null):u.forEach(f=>{const y=t.queryToTagMap.get(Dl(f));t.listenProvider_.stopListening(Qs(f),y)}))}o1(t,u)}return a}function Zy(t,e,n,r){const s=wd(t,r);if(s!=null){const i=_d(s),o=i.path,a=i.queryId,c=Qe(o,e),u=new pr(pd(a),c,n);return bd(t,o,u)}else return[]}function r1(t,e,n,r){const s=wd(t,r);if(s){const i=_d(s),o=i.path,a=i.queryId,c=Qe(o,e),u=te.fromObject(n),d=new ts(pd(a),c,u);return bd(t,o,d)}else return[]}function Yc(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(f,y)=>{const v=Qe(f,s);i=i||On(y,v),o=o||zn(y)});let a=t.syncPointTree_.get(s);a?(o=o||zn(a),i=i||On(a,K())):(a=new Gy,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=L.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((y,v)=>{const w=On(v,K());w&&(i=i.updateImmediateChild(y,w))}));const u=Xy(a,e);if(!u&&!e._queryParams.loadsAllData()){const f=Dl(e);T(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const y=l1();t.queryToTagMap.set(f,y),t.tagToQueryMap.set(y,f)}const d=Tl(t.pendingWriteTree_,s);let h=GC(a,e,n,d,i,c);if(!u&&!o&&!r){const f=Jy(a,e);h=h.concat(a1(t,e,f))}return h}function Pl(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=Qe(o,e),u=On(a,c);if(u)return u});return zy(s,e,i,n,!0)}function s1(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,d)=>{const h=Qe(u,n);r=r||On(d,h)});let s=t.syncPointTree_.get(n);s?r=r||On(s,K()):(s=new Gy,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new Un(r,!0,!1):null,a=Tl(t.pendingWriteTree_,e._path),c=Yy(s,e,a,i?o.getNode():L.EMPTY_NODE,i);return UC(c)}function ds(t,e){return ev(e,t.syncPointTree_,null,Tl(t.pendingWriteTree_,K()))}function ev(t,e,n,r){if(W(t.path))return tv(t,e,n,r);{const s=e.get(K());n==null&&s!=null&&(n=On(s,K()));let i=[];const o=V(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const u=n?n.getImmediateChild(o):null,d=Vy(r,o);i=i.concat(ev(a,c,u,d))}return s&&(i=i.concat(vd(s,t,r,n))),i}}function tv(t,e,n,r){const s=e.get(K());n==null&&s!=null&&(n=On(s,K()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,u=Vy(r,o),d=t.operationForChild(o);d&&(i=i.concat(tv(d,a,c,u)))}),s&&(i=i.concat(vd(s,t,r,n))),i}function nv(t,e){const n=e.query,r=vi(t,n);return{hashFn:()=>($C(e)||L.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?n1(t,n._path,r):t1(t,n._path);{const i=eN(s,n);return rl(t,n,null,i)}}}}function vi(t,e){const n=Dl(e);return t.queryToTagMap.get(n)}function Dl(t){return t._path.toString()+"$"+t._queryIdentifier}function wd(t,e){return t.tagToQueryMap.get(e)}function _d(t){const e=t.indexOf("$");return T(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new X(t.substr(0,e))}}function bd(t,e,n){const r=t.syncPointTree_.get(e);T(r,"Missing sync point for query tag that we're tracking");const s=Tl(t.pendingWriteTree_,e);return vd(r,n,s,null)}function i1(t){return t.fold((e,n,r)=>{if(n&&zn(n))return[Al(n)];{let s=[];return n&&(s=Ky(n)),Fe(r,(i,o)=>{s=s.concat(o)}),s}})}function Qs(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(JC())(t._repo,t._path):t}function o1(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Dl(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function l1(){return XC++}function a1(t,e,n){const r=e._path,s=vi(t,e),i=nv(t,n),o=t.listenProvider_.startListening(Qs(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)T(!zn(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((u,d,h)=>{if(!W(u)&&d&&zn(d))return[Al(d).query];{let f=[];return d&&(f=f.concat(Ky(d).map(y=>y.query))),Fe(h,(y,v)=>{f=f.concat(v)}),f}});for(let u=0;u<c.length;++u){const d=c[u];t.listenProvider_.stopListening(Qs(d),vi(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Nd(n)}node(){return this.node_}}class Cd{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ve(this.path_,e);return new Cd(this.syncTree_,n)}node(){return Pl(this.syncTree_,this.path_)}}const c1=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Kf=function(t,e,n){if(!t||typeof t!="object")return t;if(T(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return u1(t[".sv"],e,n);if(typeof t[".sv"]=="object")return d1(t[".sv"],e);T(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},u1=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:T(!1,"Unexpected server value: "+t)}},d1=function(t,e,n){t.hasOwnProperty("increment")||T(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&T(!1,"Unexpected increment value: "+r);const s=e.node();if(T(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},rv=function(t,e,n,r){return Ed(e,new Cd(n,t),r)},Sd=function(t,e,n){return Ed(t,new Nd(e),n)};function Ed(t,e,n){const r=t.getPriority().val(),s=Kf(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=Kf(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new Ee(a,_e(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Ee(s))),o.forEachChild(de,(a,c)=>{const u=Ed(c,e.getImmediateChild(a),n);u!==c&&(i=i.updateImmediateChild(a,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Rl(t,e){let n=e instanceof X?e:new X(e),r=t,s=V(n);for(;s!==null;){const i=hr(r.node.children,s)||{children:{},childCount:0};r=new kd(s,r,i),n=re(n),s=V(n)}return r}function Nr(t){return t.node.value}function Id(t,e){t.node.value=e,Kc(t)}function sv(t){return t.node.childCount>0}function h1(t){return Nr(t)===void 0&&!sv(t)}function Ol(t,e){Fe(t.node.children,(n,r)=>{e(new kd(n,t,r))})}function iv(t,e,n,r){n&&!r&&e(t),Ol(t,s=>{iv(s,e,!0,r)}),n&&r&&e(t)}function f1(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Ai(t){return new X(t.parent===null?t.name:Ai(t.parent)+"/"+t.name)}function Kc(t){t.parent!==null&&p1(t.parent,t.name,t)}function p1(t,e,n){const r=h1(n),s=Mt(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,Kc(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,Kc(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1=/[\[\].#$\/\u0000-\u001F\u007F]/,g1=/[\[\].#$\u0000-\u001F\u007F]/,ka=10*1024*1024,jd=function(t){return typeof t=="string"&&t.length!==0&&!m1.test(t)},ov=function(t){return typeof t=="string"&&t.length!==0&&!g1.test(t)},y1=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ov(t)},sl=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!ed(t)||t&&typeof t=="object"&&Mt(t,".sv")},Pi=function(t,e,n,r){r&&e===void 0||Di(El(t,"value"),e,n)},Di=function(t,e,n){const r=n instanceof X?new RN(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Xn(r));if(typeof e=="function")throw new Error(t+"contains a function "+Xn(r)+" with contents = "+e.toString());if(ed(e))throw new Error(t+"contains "+e.toString()+" "+Xn(r));if(typeof e=="string"&&e.length>ka/3&&kl(e)>ka)throw new Error(t+"contains a string greater than "+ka+" utf8 bytes "+Xn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(Fe(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!jd(o)))throw new Error(t+" contains an invalid key ("+o+") "+Xn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);ON(r,o),Di(t,a,r),MN(r)}),s&&i)throw new Error(t+' contains ".value" child '+Xn(r)+" in addition to actual children.")}},v1=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=fi(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!jd(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(DN);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&bt(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},x1=function(t,e,n,r){const s=El(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];Fe(e,(o,a)=>{const c=new X(o);if(Di(s,a,ve(n,c)),id(c)===".priority"&&!sl(a))throw new Error(s+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(c)}),v1(s,i)},Td=function(t,e,n,r){if(!ov(n))throw new Error(El(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},w1=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Td(t,e,n)},Ml=function(t,e){if(V(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},_1=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!jd(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!y1(n))throw new Error(El(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Fl(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!od(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function lv(t,e,n){Fl(t,n),av(t,r=>od(r,e))}function ft(t,e,n){Fl(t,n),av(t,r=>bt(r,e)||bt(e,r))}function av(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(N1(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function N1(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Us&&De("event: "+n.toString()),us(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1="repo_interrupt",S1=25;class E1{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new b1,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Yo(),this.transactionQueueTree_=new kd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function k1(t,e,n){if(t.stats_=rd(t.repoInfo_),t.forceRestClient_||sN())t.server_=new Go(t.repoInfo_,(r,s,i,o)=>{Jf(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Xf(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ce(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new rn(t.repoInfo_,e,(r,s,i,o)=>{Jf(t,r,s,i,o)},r=>{Xf(t,r)},r=>{I1(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=cN(t.repoInfo_,()=>new cC(t.stats_,t.server_)),t.infoData_=new sC,t.infoSyncTree_=new Yf({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Ti(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Ad(t,"connected",!1),t.serverSyncTree_=new Yf({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const u=o(a,c);ft(t.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function cv(t){const n=t.infoData_.getNode(new X(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Ri(t){return c1({timestamp:cv(t)})}function Jf(t,e,n,r,s){t.dataUpdateCount++;const i=new X(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=zo(n,u=>_e(u));o=r1(t.serverSyncTree_,i,c,s)}else{const c=_e(n);o=Zy(t.serverSyncTree_,i,c,s)}else if(r){const c=zo(n,u=>_e(u));o=e1(t.serverSyncTree_,i,c)}else{const c=_e(n);o=Ti(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=rs(t,i)),ft(t.eventQueue_,a,o)}function Xf(t,e){Ad(t,"connected",e),e===!1&&P1(t)}function I1(t,e){Fe(e,(n,r)=>{Ad(t,n,r)})}function Ad(t,e,n){const r=new X("/.info/"+e),s=_e(n);t.infoData_.updateSnapshot(r,s);const i=Ti(t.infoSyncTree_,r,s);ft(t.eventQueue_,r,i)}function Ll(t){return t.nextWriteId_++}function j1(t,e,n){const r=s1(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=_e(s).withIndex(e._queryParams.getIndex());Yc(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Ti(t.serverSyncTree_,e._path,i);else{const a=vi(t.serverSyncTree_,e);o=Zy(t.serverSyncTree_,e._path,i,a)}return ft(t.eventQueue_,e._path,o),rl(t.serverSyncTree_,e,n,null,!0),i},s=>(hs(t,"get for query "+Ce(e)+" failed: "+s),Promise.reject(new Error(s))))}function T1(t,e,n,r,s){hs(t,"set",{path:e.toString(),value:n,priority:r});const i=Ri(t),o=_e(n,r),a=Pl(t.serverSyncTree_,e),c=Sd(o,a,i),u=Ll(t),d=xd(t.serverSyncTree_,e,c,u,!0);Fl(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(f,y)=>{const v=f==="ok";v||qe("set at "+e+" failed: "+f);const w=Nn(t.serverSyncTree_,u,!v);ft(t.eventQueue_,e,w),Jc(t,s,f,y)});const h=Dd(t,e);rs(t,h),ft(t.eventQueue_,h,[])}function A1(t,e,n,r){hs(t,"update",{path:e.toString(),value:n});let s=!0;const i=Ri(t),o={};if(Fe(n,(a,c)=>{s=!1,o[a]=rv(ve(e,a),_e(c),t.serverSyncTree_,i)}),s)De("update() called with empty data.  Don't do anything."),Jc(t,r,"ok",void 0);else{const a=Ll(t),c=ZC(t.serverSyncTree_,e,o,a);Fl(t.eventQueue_,c),t.server_.merge(e.toString(),n,(u,d)=>{const h=u==="ok";h||qe("update at "+e+" failed: "+u);const f=Nn(t.serverSyncTree_,a,!h),y=f.length>0?rs(t,e):e;ft(t.eventQueue_,y,f),Jc(t,r,u,d)}),Fe(n,u=>{const d=Dd(t,ve(e,u));rs(t,d)}),ft(t.eventQueue_,e,[])}}function P1(t){hs(t,"onDisconnectEvents");const e=Ri(t),n=Yo();Vc(t.onDisconnect_,K(),(s,i)=>{const o=rv(s,i,t.serverSyncTree_,e);Ly(n,s,o)});let r=[];Vc(n,K(),(s,i)=>{r=r.concat(Ti(t.serverSyncTree_,s,i));const o=Dd(t,s);rs(t,o)}),t.onDisconnect_=Yo(),ft(t.eventQueue_,K(),r)}function D1(t,e,n){let r;V(e._path)===".info"?r=Yc(t.infoSyncTree_,e,n):r=Yc(t.serverSyncTree_,e,n),lv(t.eventQueue_,e._path,r)}function R1(t,e,n){let r;V(e._path)===".info"?r=rl(t.infoSyncTree_,e,n):r=rl(t.serverSyncTree_,e,n),lv(t.eventQueue_,e._path,r)}function O1(t){t.persistentConnection_&&t.persistentConnection_.interrupt(C1)}function hs(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),De(n,...e)}function Jc(t,e,n,r){e&&us(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function M1(t,e,n,r,s,i){hs(t,"transaction on "+e);const o={path:e,update:n,onComplete:r,status:null,order:ly(),applyLocally:i,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=Pd(t,e,void 0);o.currentInputSnapshot=a;const c=o.update(a.val());if(c===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Di("transaction failed: Data returned ",c,o.path),o.status=0;const u=Rl(t.transactionQueueTree_,e),d=Nr(u)||[];d.push(o),Id(u,d);let h;typeof c=="object"&&c!==null&&Mt(c,".priority")?(h=hr(c,".priority"),T(sl(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(Pl(t.serverSyncTree_,e)||L.EMPTY_NODE).getPriority().val();const f=Ri(t),y=_e(c,h),v=Sd(y,a,f);o.currentOutputSnapshotRaw=y,o.currentOutputSnapshotResolved=v,o.currentWriteId=Ll(t);const w=xd(t.serverSyncTree_,e,v,o.currentWriteId,o.applyLocally);ft(t.eventQueue_,e,w),Bl(t,t.transactionQueueTree_)}}function Pd(t,e,n){return Pl(t.serverSyncTree_,e,n)||L.EMPTY_NODE}function Bl(t,e=t.transactionQueueTree_){if(e||$l(t,e),Nr(e)){const n=dv(t,e);T(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&F1(t,Ai(e),n)}else sv(e)&&Ol(e,n=>{Bl(t,n)})}function F1(t,e,n){const r=n.map(u=>u.currentWriteId),s=Pd(t,e,r);let i=s;const o=s.hash();for(let u=0;u<n.length;u++){const d=n[u];T(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=Qe(e,d.path);i=i.updateChild(h,d.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,u=>{hs(t,"transaction put response",{path:c.toString(),status:u});let d=[];if(u==="ok"){const h=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat(Nn(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();$l(t,Rl(t.transactionQueueTree_,e)),Bl(t,t.transactionQueueTree_),ft(t.eventQueue_,e,d);for(let f=0;f<h.length;f++)us(h[f])}else{if(u==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{qe("transaction at "+c.toString()+" failed: "+u);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=u}rs(t,e)}},o)}function rs(t,e){const n=uv(t,e),r=Ai(n),s=dv(t,n);return L1(t,s,r),r}function L1(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],u=Qe(n,c.path);let d=!1,h;if(T(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,h=c.abortReason,s=s.concat(Nn(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=S1)d=!0,h="maxretry",s=s.concat(Nn(t.serverSyncTree_,c.currentWriteId,!0));else{const f=Pd(t,c.path,o);c.currentInputSnapshot=f;const y=e[a].update(f.val());if(y!==void 0){Di("transaction failed: Data returned ",y,c.path);let v=_e(y);typeof y=="object"&&y!=null&&Mt(y,".priority")||(v=v.updatePriority(f.getPriority()));const C=c.currentWriteId,g=Ri(t),p=Sd(v,f,g);c.currentOutputSnapshotRaw=v,c.currentOutputSnapshotResolved=p,c.currentWriteId=Ll(t),o.splice(o.indexOf(C),1),s=s.concat(xd(t.serverSyncTree_,c.path,p,c.currentWriteId,c.applyLocally)),s=s.concat(Nn(t.serverSyncTree_,C,!0))}else d=!0,h="nodata",s=s.concat(Nn(t.serverSyncTree_,c.currentWriteId,!0))}ft(t.eventQueue_,n,s),s=[],d&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}$l(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)us(r[a]);Bl(t,t.transactionQueueTree_)}function uv(t,e){let n,r=t.transactionQueueTree_;for(n=V(e);n!==null&&Nr(r)===void 0;)r=Rl(r,n),e=re(e),n=V(e);return r}function dv(t,e){const n=[];return hv(t,e,n),n.sort((r,s)=>r.order-s.order),n}function hv(t,e,n){const r=Nr(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Ol(e,s=>{hv(t,s,n)})}function $l(t,e){const n=Nr(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,Id(e,n.length>0?n:void 0)}Ol(e,r=>{$l(t,r)})}function Dd(t,e){const n=Ai(uv(t,e)),r=Rl(t.transactionQueueTree_,e);return f1(r,s=>{Ia(t,s)}),Ia(t,r),iv(r,s=>{Ia(t,s)}),n}function Ia(t,e){const n=Nr(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(T(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(T(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Nn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?Id(e,void 0):n.length=i+1,ft(t.eventQueue_,Ai(e),s);for(let o=0;o<r.length;o++)us(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function $1(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):qe(`Invalid query segment '${n}' in query '${t}'`)}return e}const Zf=function(t,e){const n=U1(t),r=n.namespace;n.domain==="firebase.com"&&dn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&dn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Yb();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new wy(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new X(n.pathString)}},U1=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let d=t.indexOf("/");d===-1&&(d=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(d,h)),d<h&&(s=B1(t.substring(d,h)));const f=$1(t.substring(Math.min(t.length,h)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const y=e.slice(0,u);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{const v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),i=r}"ns"in f&&(i=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",z1=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=ep.charAt(n%64),n=Math.floor(n/64);T(n===0,"Cannot push at time == 0");let o=i.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=ep.charAt(e[s]);return T(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ce(this.snapshot.exportVal())}}class W1{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return T(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return W(this._path)?null:id(this._path)}get ref(){return new qt(this._repo,this._path)}get _queryIdentifier(){const e=Bf(this._queryParams),n=td(e);return n==="{}"?"default":n}get _queryObject(){return Bf(this._queryParams)}isEqual(e){if(e=Ft(e),!(e instanceof fs))return!1;const n=this._repo===e._repo,r=od(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+PN(this._path)}}function Q1(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Rd(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===or){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==fr)throw new Error(r);if(typeof e!="string")throw new Error(s)}if(t.hasEnd()){if(t.getIndexEndName()!==Bn)throw new Error(r);if(typeof n!="string")throw new Error(s)}}else if(t.getIndex()===de){if(e!=null&&!sl(e)||n!=null&&!sl(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(T(t.getIndex()instanceof cd||t.getIndex()===My,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function pv(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class qt extends fs{constructor(e,n){super(e,n,new dd,!1)}get parent(){const e=jy(this._path);return e===null?null:new qt(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ss{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new X(e),r=xi(this.ref,e);return new ss(this._node.getChild(n),r,de)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new ss(s,xi(this.ref,r),de)))}hasChild(e){const n=new X(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function P(t,e){return t=Ft(t),t._checkNotDeleted("ref"),e!==void 0?xi(t._root,e):t._root}function xi(t,e){return t=Ft(t),V(t._path)===null?w1("child","path",e):Td("child","path",e),new qt(t._repo,ve(t._path,e))}function Gt(t,e){t=Ft(t),Ml("push",t._path),Pi("push",e,t._path,!0);const n=cv(t._repo),r=z1(n),s=xi(t,r),i=xi(t,r);let o;return o=Promise.resolve(i),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function Hn(t){return Ml("remove",t._path),gt(t,null)}function gt(t,e){t=Ft(t),Ml("set",t._path),Pi("set",e,t._path,!1);const n=new cs;return T1(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Oe(t,e){x1("update",e,t._path);const n=new cs;return A1(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function U(t){t=Ft(t);const e=new fv(()=>{}),n=new Ul(e);return j1(t._repo,t,n).then(r=>new ss(r,new qt(t._repo,t._path),t._queryParams.getIndex()))}class Ul{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new V1("value",this,new ss(e.snapshotNode,new qt(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new W1(this,e,n):null}matches(e){return e instanceof Ul?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function H1(t,e,n,r,s){const i=new fv(n,void 0),o=new Ul(i);return D1(t._repo,t,o),()=>R1(t._repo,t,o)}function q1(t,e,n,r){return H1(t,"value",e)}class zl{}class G1 extends zl{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){Pi("endAt",this._value,e._path,!0);const n=nC(e._queryParams,this._value,this._key);if(pv(n),Rd(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fs(e._repo,e._path,n,e._orderByCalled)}}class Y1 extends zl{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){Pi("startAt",this._value,e._path,!0);const n=tC(e._queryParams,this._value,this._key);if(pv(n),Rd(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new fs(e._repo,e._path,n,e._orderByCalled)}}class K1 extends zl{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Q1(e,"orderByChild");const n=new X(this._path);if(W(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new cd(n),s=rC(e._queryParams,r);return Rd(s),new fs(e._repo,e._path,s,!0)}}function Wt(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Td("orderByChild","path",t),new K1(t)}class J1 extends zl{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(Pi("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new G1(this._value,this._key)._apply(new Y1(this._value,this._key)._apply(e))}}function Qt(t,e){return new J1(t,e)}function Ht(t,...e){let n=Ft(t);for(const r of e)n=r._apply(n);return n}QC(qt);KC(qt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="FIREBASE_DATABASE_EMULATOR_HOST",Xc={};let Z1=!1;function eS(t,e,n,r){t.repoInfo_=new wy(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function tS(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||dn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),De("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Zf(i,s),a=o.repoInfo,c;typeof process<"u"&&_f&&(c=_f[X1]),c?(i=`http://${c}?ns=${a.namespace}`,o=Zf(i,s),a=o.repoInfo):o.repoInfo.secure;const u=new oN(t.name,t.options,e);_1("Invalid Firebase Database URL",o),W(o.path)||dn("Database URL must point to the root of a Firebase Database (not including a child path).");const d=rS(a,t,u,new iN(t.name,n));return new sS(d,t)}function nS(t,e){const n=Xc[e];(!n||n[t.key]!==t)&&dn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),O1(t),delete n[t.key]}function rS(t,e,n,r){let s=Xc[e.name];s||(s={},Xc[e.name]=s);let i=s[t.toURLString()];return i&&dn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new E1(t,Z1,n,r),s[t.toURLString()]=i,i}class sS{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(k1(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new qt(this._repo,K())),this._rootInternal}_delete(){return this._rootInternal!==null&&(nS(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&dn("Cannot call "+e+" on a deleted database.")}}function mv(t=ny(),e){const n=Ei(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=x_("database");r&&iS(n,...r)}return n}function iS(t,e,n,r={}){t=Ft(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&dn("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&dn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new po(po.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:w_(r.mockUserToken,t.app.options.projectId);i=new po(o)}eS(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(t){Wb(Rb),Ln(new cn("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return tS(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Vt(bf,Nf,t),Vt(bf,Nf,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function Oi(t,e,n){var r;if(t=Ft(t),Ml("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const s=(r=void 0)!==null&&r!==void 0?r:!0,i=new cs,o=(c,u,d)=>{let h=null;c?i.reject(c):(h=new ss(d,new qt(t._repo,t._path),de),i.resolve(new lS(u,h)))},a=q1(t,()=>{});return M1(t._repo,t._path,e,o,a,s),i.promise}rn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};rn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};oS();var aS="firebase",cS="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vt(aS,cS,"app");const gv="@firebase/installations",Od="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=1e4,vv=`w:${Od}`,xv="FIS_v2",uS="https://firebaseinstallations.googleapis.com/v1",dS=60*60*1e3,hS="installations",fS="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},gr=new Sl(hS,fS,pS);function wv(t){return t instanceof wr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v({projectId:t}){return`${uS}/projects/${t}/installations`}function bv(t){return{token:t.token,requestStatus:2,expiresIn:gS(t.expiresIn),creationTime:Date.now()}}async function Nv(t,e){const r=(await e.json()).error;return gr.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Cv({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function mS(t,{refreshToken:e}){const n=Cv(t);return n.append("Authorization",yS(e)),n}async function Sv(t){const e=await t();return e.status>=500&&e.status<600?t():e}function gS(t){return Number(t.replace("s","000"))}function yS(t){return`${xv} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vS({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=_v(t),s=Cv(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:n,authVersion:xv,appId:t.appId,sdkVersion:vv},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await Sv(()=>fetch(r,a));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:bv(u.authToken)}}else throw await Nv("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=/^[cdef][\w-]{21}$/,Zc="";function _S(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=bS(t);return wS.test(n)?n:Zc}catch{return Zc}}function bS(t){return xS(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=new Map;function Iv(t,e){const n=Vl(t);jv(n,e),NS(n,e)}function jv(t,e){const n=kv.get(t);if(n)for(const r of n)r(e)}function NS(t,e){const n=CS();n&&n.postMessage({key:t,fid:e}),SS()}let rr=null;function CS(){return!rr&&"BroadcastChannel"in self&&(rr=new BroadcastChannel("[Firebase] FID Change"),rr.onmessage=t=>{jv(t.data.key,t.data.fid)}),rr}function SS(){kv.size===0&&rr&&(rr.close(),rr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="firebase-installations-database",kS=1,yr="firebase-installations-store";let ja=null;function Md(){return ja||(ja=ey(ES,kS,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(yr)}}})),ja}async function il(t,e){const n=Vl(t),s=(await Md()).transaction(yr,"readwrite"),i=s.objectStore(yr),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&Iv(t,e.fid),e}async function Tv(t){const e=Vl(t),r=(await Md()).transaction(yr,"readwrite");await r.objectStore(yr).delete(e),await r.done}async function Wl(t,e){const n=Vl(t),s=(await Md()).transaction(yr,"readwrite"),i=s.objectStore(yr),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&Iv(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fd(t){let e;const n=await Wl(t.appConfig,r=>{const s=IS(r),i=jS(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Zc?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function IS(t){const e=t||{fid:_S(),registrationStatus:0};return Av(e)}function jS(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(gr.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=TS(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:AS(t)}:{installationEntry:e}}async function TS(t,e){try{const n=await vS(t,e);return il(t.appConfig,n)}catch(n){throw wv(n)&&n.customData.serverCode===409?await Tv(t.appConfig):await il(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function AS(t){let e=await tp(t.appConfig);for(;e.registrationStatus===1;)await Ev(100),e=await tp(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Fd(t);return r||n}return e}function tp(t){return Wl(t,e=>{if(!e)throw gr.create("installation-not-found");return Av(e)})}function Av(t){return PS(t)?{fid:t.fid,registrationStatus:0}:t}function PS(t){return t.registrationStatus===1&&t.registrationTime+yv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DS({appConfig:t,heartbeatServiceProvider:e},n){const r=RS(t,n),s=mS(t,n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:vv,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await Sv(()=>fetch(r,a));if(c.ok){const u=await c.json();return bv(u)}else throw await Nv("Generate Auth Token",c)}function RS(t,{fid:e}){return`${_v(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ld(t,e=!1){let n;const r=await Wl(t.appConfig,i=>{if(!Pv(i))throw gr.create("not-registered");const o=i.authToken;if(!e&&FS(o))return i;if(o.requestStatus===1)return n=OS(t,e),i;{if(!navigator.onLine)throw gr.create("app-offline");const a=BS(i);return n=MS(t,a),a}});return n?await n:r.authToken}async function OS(t,e){let n=await np(t.appConfig);for(;n.authToken.requestStatus===1;)await Ev(100),n=await np(t.appConfig);const r=n.authToken;return r.requestStatus===0?Ld(t,e):r}function np(t){return Wl(t,e=>{if(!Pv(e))throw gr.create("not-registered");const n=e.authToken;return $S(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function MS(t,e){try{const n=await DS(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await il(t.appConfig,r),n}catch(n){if(wv(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Tv(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await il(t.appConfig,r)}throw n}}function Pv(t){return t!==void 0&&t.registrationStatus===2}function FS(t){return t.requestStatus===2&&!LS(t)}function LS(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+dS}function BS(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function $S(t){return t.requestStatus===1&&t.requestTime+yv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function US(t){const e=t,{installationEntry:n,registrationPromise:r}=await Fd(e);return r?r.catch(console.error):Ld(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zS(t,e=!1){const n=t;return await VS(n),(await Ld(n,e)).token}async function VS(t){const{registrationPromise:e}=await Fd(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(t){if(!t||!t.options)throw Ta("App Configuration");if(!t.name)throw Ta("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Ta(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Ta(t){return gr.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="installations",QS="installations-internal",HS=t=>{const e=t.getProvider("app").getImmediate(),n=WS(e),r=Ei(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},qS=t=>{const e=t.getProvider("app").getImmediate(),n=Ei(e,Dv).getImmediate();return{getId:()=>US(n),getToken:s=>zS(n,s)}};function GS(){Ln(new cn(Dv,HS,"PUBLIC")),Ln(new cn(QS,qS,"PRIVATE"))}GS();Vt(gv,Od);Vt(gv,Od,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol="analytics",YS="firebase_id",KS="origin",JS=60*1e3,XS="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Bd="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nt=new Xu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},dt=new Sl("analytics","Analytics",ZS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t){if(!t.startsWith(Bd)){const e=dt.create("invalid-gtag-resource",{gtagURL:t});return nt.warn(e.message),""}return t}function Rv(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function tE(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function nE(t,e){const n=tE("firebase-js-sdk-policy",{createScriptURL:eE}),r=document.createElement("script"),s=`${Bd}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function rE(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function sE(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const c=(await Rv(n)).find(u=>u.measurementId===s);c&&await e[c.appId]}}catch(a){nt.error(a)}t("config",s,i)}async function iE(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await Rv(n);for(const c of o){const u=a.find(h=>h.measurementId===c),d=u&&e[u.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){nt.error(i)}}function oE(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,c]=o;await iE(t,e,n,a,c)}else if(i==="config"){const[a,c]=o;await sE(t,e,n,r,a,c)}else if(i==="consent"){const[a,c]=o;t("consent",a,c)}else if(i==="get"){const[a,c,u]=o;t("get",a,c,u)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){nt.error(a)}}return s}function lE(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=oE(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function aE(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Bd)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=30,uE=1e3;class dE{constructor(e={},n=uE){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Ov=new dE;function hE(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function fE(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:hE(r)},i=XS.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw dt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function pE(t,e=Ov,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw dt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw dt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new yE;return setTimeout(async()=>{a.abort()},JS),Mv({appId:r,apiKey:s,measurementId:i},o,a,e)}async function Mv(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=Ov){var i;const{appId:o,measurementId:a}=t;try{await mE(r,e)}catch(c){if(a)return nt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw c}try{const c=await fE(t);return s.deleteThrottleMetadata(o),c}catch(c){const u=c;if(!gE(u)){if(s.deleteThrottleMetadata(o),a)return nt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw c}const d=Number((i=u==null?void 0:u.customData)===null||i===void 0?void 0:i.httpStatus)===503?hf(n,s.intervalMillis,cE):hf(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(o,h),nt.debug(`Calling attemptFetch again in ${d} millis`),Mv(t,h,r,s)}}function mE(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(dt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function gE(t){if(!(t instanceof wr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class yE{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function vE(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xE(){if(Yg())try{await Kg()}catch(t){return nt.warn(dt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return nt.warn(dt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function wE(t,e,n,r,s,i,o){var a;const c=pE(t);c.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&nt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>nt.error(y)),e.push(c);const u=xE().then(y=>{if(y)return r.getId()}),[d,h]=await Promise.all([c,u]);aE(i)||nE(i,d.measurementId),s("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[KS]="firebase",f.update=!0,h!=null&&(f[YS]=h),s("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e){this.app=e}_delete(){return delete Hs[this.app.options.appId],Promise.resolve()}}let Hs={},rp=[];const sp={};let Aa="dataLayer",bE="gtag",ip,Fv,op=!1;function NE(){const t=[];if(b_()&&t.push("This is a browser extension environment."),C_()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=dt.create("invalid-analytics-context",{errorInfo:e});nt.warn(n.message)}}function CE(t,e,n){NE();const r=t.options.appId;if(!r)throw dt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)nt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw dt.create("no-api-key");if(Hs[r]!=null)throw dt.create("already-exists",{id:r});if(!op){rE(Aa);const{wrappedGtag:i,gtagCore:o}=lE(Hs,rp,sp,Aa,bE);Fv=i,ip=o,op=!0}return Hs[r]=wE(t,rp,sp,e,ip,Aa,n),new _E(t)}function SE(t=ny()){t=Ft(t);const e=Ei(t,ol);return e.isInitialized()?e.getImmediate():EE(t)}function EE(t,e={}){const n=Ei(t,ol);if(n.isInitialized()){const s=n.getImmediate();if(Vo(e,n.getOptions()))return s;throw dt.create("already-initialized")}return n.initialize({options:e})}function kE(t,e,n,r){t=Ft(t),vE(Fv,Hs[t.app.options.appId],e,n,r).catch(s=>nt.error(s))}const lp="@firebase/analytics",ap="0.10.8";function IE(){Ln(new cn(ol,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return CE(r,s,n)},"PUBLIC")),Ln(new cn("analytics-internal",t,"PRIVATE")),Vt(lp,ap),Vt(lp,ap,"esm2017");function t(e){try{const n=e.getProvider(ol).getImmediate();return{logEvent:(r,s,i)=>kE(n,r,s,i)}}catch(n){throw dt.create("interop-component-reg-failed",{reason:n})}}}IE();const jE={apiKey:"AIzaSyCIZn8NmNqICZqkEevSpjTA33FhATJ_Dak",authDomain:"sherazpos.firebaseapp.com",databaseURL:"https://sherazpos-default-rtdb.firebaseio.com",projectId:"sherazpos",storageBucket:"sherazpos.appspot.com",messagingSenderId:"597415567946",appId:"1:597415567946:web:9eb38d977357f825273cb3",measurementId:"G-56K9B8HK61"},$d=ty(jE);SE($d);const Te=mv($d),O=mv($d),TE=async t=>{try{const e=P(Te,"areas/"),n=Gt(e);if((await Oi(e,s=>{if(s=s||{},!Object.values(s).some(i=>i.name.toLowerCase()===t.name.toLowerCase()||i.shortForm.toLowerCase()===t.shortForm.toLowerCase()))return s[n.key]={...t,id:n.key},s})).committed)return await gt(n,{...t,id:n.key}),n.key;throw new Error("Area already exists.")}catch(e){throw console.error("Failed to add area:",e),new Error("Failed to add area")}},Ud=async()=>{try{const t=P(Te,"areas/"),e=await U(t);if(e.exists()){const n=[];return e.forEach(r=>{const s=r.val();n.push({id:r.key,...s})}),n}else return console.log("No areas found."),[]}catch(t){throw console.error("Failed to retrieve areas:",t),new Error("Failed to retrieve areas")}},AE=async t=>{try{const e=P(Te,"areas"),n=await U(e);if(n.exists()){let r=null;if(n.forEach(s=>{s.val().shortForm===t&&(r=s.key)}),r){const s=P(Te,`areas/${r}`);await gt(s,null),console.log(`Area with ID ${t} has been deleted.`)}else console.log(`No area found with ID ${t}.`)}else console.log("No areas found.")}catch(e){throw console.error("Failed to delete area:",e),new Error("Failed to delete area")}},cp=async t=>{try{t.discount=isNaN(t.discount)?0:t.discount,console.log(t);const e=Gt(P(O,"cashInvoices"));t.id=e.key,await gt(e,t);for(const n of t.products){const r=Ht(P(O,"products"),Wt("productCode"),Qt(n.productCode)),i=(await U(r)).val();if(i){const o=Object.keys(i)[0],a=i[o],u=(isNaN(a.quantity)?0:parseInt(a.quantity))-parseInt(n.quantity);await Oe(P(O,`products/${o}`),{quantity:u})}}return console.log("Cash Invoice Added"),t.id}catch(e){console.error("Failed to add cash invoice and update product quantities:",e)}},PE=async(t,e)=>{try{const n=P(O,`cashInvoices/${t}`),s=(await U(n)).val();if(!s)throw new Error("Invoice not found");if(console.log(`Updates: ${JSON.stringify(e,null,2)} | Invoice ID: ${t}`),s.products&&s.products.length>0)for(const i of s.products){const o=Ht(P(O,"products"),Wt("productCode"),Qt(i.productCode)),c=(await U(o)).val();if(c){const u=Object.keys(c)[0],d=c[u],f=(isNaN(d.quantity)?0:Number(d.quantity||0))-Number(i.quantity||0);await Oe(P(O,`products/${u}`),{quantity:f})}}if(await Oe(n,e),e.products)for(const i of e.products){const o=Ht(P(O,"products"),Wt("productCode"),Qt(i.productCode)),c=(await U(o)).val();if(c){const u=Object.keys(c)[0],d=c[u],f=(isNaN(d.quantity)?0:Number(d.quantity||0))-Number(i.quantity);await Oe(P(O,`products/${u}`),{quantity:f})}}}catch(n){console.error("Failed to update cash invoice and product quantities:",n)}},DE=async t=>{try{const e=P(O,`cashInvoices/${t}`),r=(await U(e)).val();if(!r)throw new Error("Invoice not found");if(r.products&&r.products.length>0)for(const s of r.products){const i=Ht(P(O,"products"),Wt("productCode"),Qt(s.productCode)),a=(await U(i)).val();if(a){const c=Object.keys(a)[0],u=a[c],h=(isNaN(u.quantity)?0:Number(u.quantity))-Number(s.quantity);await Oe(P(O,`products/${c}`),{quantity:h})}}await Hn(e)}catch(e){console.error("Failed to delete cash invoice and revert product quantities:",e)}},Lv=async()=>{try{const t=P(O,"cashInvoices"),e=await U(t);return e.val()?Object.values(e.val()):[]}catch(t){console.error("Failed to retrieve cash invoices:",t)}},RE=async t=>{try{const e=P(O,"cashInvoices"),n=await U(e);return(n.val()?Object.values(n.val()):[]).filter(i=>i.products.some(o=>o.productCode===t))}catch(e){return console.error("Failed to retrieve cash invoices by product code:",e),[]}},OE=async t=>{try{const e=Gt(P(O,"customers"));return await gt(e,{...t,id:e.key}),e.key}catch(e){console.error("Failed to add customer:",e)}},ME=async()=>{try{const t=await U(P(O,"customers"));return t.exists()?Object.values(t.val()):[]}catch(t){console.error("Failed to retrieve customers:",t)}},FE=async()=>{try{const t=Ht(P(O,"customers"),Wt("accountType"),Qt("Supplier")),e=await U(t);return e.exists()?Object.values(e.val()):[]}catch(t){return console.error("Failed to retrieve suppliers:",t),[]}},LE=async()=>{try{const t=Ht(P(O,"customers"),Wt("accountType"),Qt("Customer")),e=await U(t);return e.exists()?Object.values(e.val()):[]}catch(t){return console.error("Failed to retrieve customers:",t),[]}},BE=async(t,e)=>{try{const n=P(O,`customers/${t}`);await Oe(n,e)}catch(n){console.error("Failed to update customer:",n)}},$E=async t=>{try{const e=P(O,`customers/${t}`);await Hn(e)}catch(e){console.error("Failed to delete customer:",e)}},up=async t=>{try{t.discount=isNaN(t.discount)?0:t.discount;const e=P(O,"deliveryNotes"),n=Gt(e);await gt(n,t);const r=t.products.map(async s=>{if(s.productCode&&s.productCode!==""){const i=Ht(P(O,"products"),Wt("productCode"),Qt(s.productCode)),o=await U(i);if(o.exists()){const a=o.val();console.log(a);const c=Object.keys(a)[0],d=(isNaN(a.quantity)?0:parseInt(a.quantity))-parseInt(s.quantity);await Oe(P(O,`products/${c}`),{quantity:d})}}});return await Promise.all(r),n.key}catch(e){console.error("Failed to add delivery note and update product quantities:",e)}},UE=async(t,e)=>{try{console.log(t);const n=P(O,`deliveryNotes/${t}`),r=await U(n);if(!r.exists())throw new Error("Delivery note not found");const s=r.val();let i=[];s.products&&s.products.length>0&&(i=s.products.map(async a=>{const c=Ht(P(O,"products"),Wt("productCode"),Qt(a.productCode)),u=await U(c);if(u.exists()){const d=u.val(),f=(isNaN(d.quantity)?0:Number(d.quantity||0))+Number(a.quantity),y=Object.keys(d)[0];await Oe(P(O,`products/${y}`),{quantity:f})}}));let o=[];e.products&&e.products.length>0&&(o=e.products.map(async a=>{const c=Ht(P(O,"products"),Wt("productCode"),Qt(a.productCode)),u=await U(c);if(u.exists()){const d=u.val(),f=(isNaN(d.quantity)?0:Number(d.quantity))-Number(a.quantity),y=Object.keys(d)[0];await Oe(P(O,`products/${y}`),{quantity:f})}})),await Promise.all([...i,...o]),await Oe(n,e)}catch(n){console.error("Failed to update delivery note and product quantities:",n)}},zE=async t=>{try{const e=P(O,`deliveryNotes/${t}`),n=await U(e);if(!n.exists())throw new Error("Delivery note not found");const r=n.val();let s=[];r.products&&r.products.length>0&&(s=r.products.map(async i=>{const o=P(O,`products/${i.productCode}`),a=await U(o);if(a.exists()){const c=a.val(),d=(isNaN(c.quantity)?0:Number(c.quantity))-Number(i.quantity),h=Object.keys(c)[0];await Oe(P(O,`products/${h}`),{quantity:d})}})),await Hn(e),await Promise.all(s)}catch(e){console.error("Failed to delete delivery note and revert product quantities:",e)}},Bv=async()=>{try{const t=await U(P(O,"deliveryNotes"));return t.exists()?Object.entries(t.val()).map(([e,n])=>({id:e,...n})):[]}catch(t){console.error("Failed to retrieve delivery notes:",t)}},VE=async t=>{try{const e=await U(P(O,"deliveryNotes")),n=e.exists()?e.val():{};return Object.keys(n).flatMap(s=>{const i=n[s];return i.products.filter(a=>a.productCode===t).map(a=>({...i,...a}))})}catch(e){return console.error("Failed to retrieve delivery notes:",e),[]}},WE=async t=>{try{t.discount=isNaN(t.discount)?0:t.discount;const e=Gt(P(O,"quotations"));return await gt(e,t),e.key}catch(e){console.error("Failed to add quotation:",e)}},QE=async(t,e)=>{try{console.log(t),await Oe(P(O,`quotations/${t}`),e)}catch(n){console.error("Failed to update quotation:",n)}},Pa=async t=>{try{await Hn(P(O,`quotations/${t}`))}catch(e){console.error("Failed to delete quotation:",e)}},zd=async()=>{try{const t=P(O,"quotations"),e=await U(t);return e.exists()?Object.entries(e.val()).map(([n,r])=>({id:n,...r})):[]}catch(t){console.error("Failed to get all quotations:",t)}},HE=async t=>{try{return(await zd()).flatMap(r=>r.products.filter(i=>i.productCode===t).map(i=>({...r,...i})))}catch(e){return console.error("Failed to retrieve quotations:",e),[]}},Vd=async t=>{const e=t.toLowerCase();try{const r=(await U(P(O,"products"))).val();return r?Object.values(r).find(i=>i.productCode===e):null}catch(n){return console.error("Failed to retrieve product:",n),null}},qE=async t=>{try{const e=t.productCode.toLowerCase();if(await Vd(e)){alert("Product already exists with this code");return}const n=Gt(P(O,"products")),r=n.key,s=(t.alternatives||[]).filter(i=>i.productCode&&i.productCode.trim()!=="");if(await gt(n,{...t,id:r,productCode:e,alternatives:s}),s.length>0)for(let i of s){const a=(await U(P(O,"products"))).val(),c=Object.values(a).find(u=>u.productCode===i.productCode);if(c){const u=P(O,`products/${c.id}`);await Oi(u,d=>(d&&d.alternatives.push({productCode:e,brand:t.brand,name:t.name,sellingPrice1:t.sellingPrice1}),d))}}return r}catch(e){console.error("Failed to add product and manage alternatives:",e)}},Wd=async()=>{try{const t=await U(P(O,"products"));return t.exists()?Object.values(t.val()):[]}catch(t){return console.error("Failed to retrieve products:",t),[]}},GE=async(t,e)=>{try{const n=P(O,`products/${t}`),s=(await U(n)).val();if(!s)throw new Error(`Product with ID ${t} not found`);const i=s.productCode,o=(e.alternatives||[]).filter(a=>a.productCode&&a.productCode.trim()!=="");await Oe(n,e);for(let a of o){const u=(await U(P(O,"products"))).val(),d=Object.values(u).find(h=>h.productCode===a.productCode);if(d){const h=P(O,`products/${d.id}`);await Oi(h,f=>(f&&(f.alternatives=f.alternatives.filter(y=>y.productCode!==i),f.alternatives.push({productCode:i,brand:e.brand||s.brand,name:e.name||s.name,sellingPrice1:e.sellingPrice1||s.sellingPrice1})),f))}}}catch(n){console.error("Failed to update product and manage alternatives:",n)}},YE=async t=>{try{const n=(await U(P(O,`products/${t}`))).val();if(!n)throw new Error(`Product with ID ${t} not found`);const r=n.productCode,s=n.alternatives||[];for(let i of s){const a=(await U(P(O,"products"))).val(),c=Object.values(a).find(u=>u.productCode===i.productCode);if(c){const u=P(O,`products/${c.id}`);await Oi(u,d=>(d&&(d.alternatives=d.alternatives.filter(h=>h.productCode!==r)),d))}}await Hn(P(O,`products/${t}`))}catch(e){console.error("Failed to delete product and manage alternatives:",e)}},KE=async t=>{try{const e=P(Te,"categories"),n=Gt(e);return await gt(n,{id:n.key,name:t.name,shortForm:t.shortForm,subCategories:t.subCategories||[]}),n.key}catch(e){throw console.error("Failed to add category:",e),new Error("Failed to add category")}},Ql=async()=>{try{const t=P(Te,"categories"),e=await U(t);if(e.exists()){const n=[];return e.forEach(r=>{const s=r.val();n.push({id:r.key,...s})}),n}else return console.log("No categories found."),[]}catch(t){throw console.error("Failed to retrieve categories:",t),new Error("Failed to retrieve categories")}},JE=async(t,e)=>{try{const n=P(Te,`categories/${t}/subCategories`),r=Gt(n);await gt(r,{name:e.name,shortForm:e.shortForm})}catch(n){throw console.error("Failed to add subcategory:",n),new Error("Failed to add subcategory")}},XE=async()=>{try{const t=P(Te,"categories"),e=await U(t),n=[];return e.exists()?(e.forEach(r=>{const s=r.key,i=P(Te,`categories/${s}/subCategories`);U(i).then(o=>{o.exists()?o.forEach(a=>{const c=a.val();n.push({id:a.key,...c,categoryId:s})}):console.log(`No subcategories found for category ${s}.`)})}),n):(console.log("No categories found."),[])}catch(t){throw console.error("Failed to retrieve subcategories:",t),new Error("Failed to retrieve subcategories")}},ZE=async t=>{try{const e=P(Te,"categories"),n=await U(e);if(n.exists()){let r=!1;n.forEach(s=>{if(s.val().shortForm===t){const o=P(Te,`categories/${s.key}`);Hn(o),r=!0,console.log(`Deleted category with name: ${t}`)}}),r||console.log(`No category found with name: ${t}`)}else console.log("No categories found.")}catch(e){throw console.error("Failed to delete category:",e),new Error("Failed to delete category")}},ek=async t=>{try{const e=P(Te,"categories"),n=await U(e);if(n.exists()){let r=!1;n.forEach(s=>{const i=s.key,o=P(Te,`categories/${i}/subCategories`);U(o).then(a=>{a.exists()?a.forEach(c=>{if(c.key===t){const u=P(Te,`categories/${i}/subCategories/${t}`);Hn(u),r=!0,console.log(`Deleted subcategory with ID: "${t}" in category ID: "${i}"`)}}):console.log(`No subcategories found in category ID: "${i}".`)})}),r||console.log(`No subcategory found with ID: "${t}" in any category.`)}else console.log("No categories found.")}catch(e){throw console.error("Failed to delete subcategory:",e),new Error("Failed to delete subcategory")}},tk=({machines:t,onSelectMachine:e})=>l.jsxs("select",{onChange:n=>e(n.target.value),className:"w-full border p-1 mb-2",children:[l.jsx("option",{value:"",children:"Select Machine"}),t.map(n=>l.jsxs("option",{value:n.id,children:[n.shortForm," : ",n.name]},n.id))]}),nk=({submachines:t,onSelectSubmachine:e})=>l.jsxs("select",{onChange:n=>e(n.target.value),className:"w-full border p-1 mb-2",children:[l.jsx("option",{value:"",children:"Select Submachine"}),t.map(n=>l.jsxs("option",{value:n.shortForm,children:[n.shortForm," : ",n.name]},n.shortForm))]}),rk=({products:t,onSelectProduct:e})=>{const n=Object.keys(t.length>0?t[0]:{}),r=["alternatives","appliedModels","picture"],s=n.filter(o=>!r.includes(o)),i=o=>{e(o)};return l.jsxs("table",{className:"min-w-full max-w-full overflow-auto  border ",style:{zIndex:500},children:[l.jsx("thead",{children:l.jsx("tr",{className:"text-white bg-blue-800",children:s.map((o,a)=>l.jsx("th",{className:"py-1 px-4 text-sm font-normal border-b text-left",children:o.replace(/([A-Z])/g," $1").replace(/^./,c=>c.toUpperCase())},a))})}),l.jsx("tbody",{className:"bg-blue-100 ",children:t.map((o,a)=>l.jsx("tr",{className:"cursor-pointer hover:bg-gray-100 py-1 text-sm ",onClick:()=>i(o),children:s.map((c,u)=>l.jsx("td",{className:"py-2 px-4 border-b",children:typeof o[c]=="string"&&o[c].length>10?o[c].substring(0,10)+"...":o[c]},u))},a))})]})},qn=({onProductSelect:t,productCode:e})=>{const[n,r]=_.useState(null),[s,i]=_.useState(null),[o,a]=_.useState([]);_.useEffect(()=>{(async()=>{const E=await Ql();a(E)})()},[]);const[c,u]=_.useState([]),[d,h]=_.useState(""),[f,y]=_.useState(""),[v,w]=_.useState(""),[C,g]=_.useState("");_.useEffect(()=>{(async()=>{const E=await Wd();u(E)})()},[]);const p=c.filter(N=>n&&!N.appliedModels.some(S=>S.make.toLowerCase()===n.shortForm.toLowerCase())||s&&!N.appliedModels.some(S=>S.type.toLowerCase()===s.shortForm.toLowerCase())?!1:N.name.toLowerCase().includes(d.toLowerCase())&&N.uniqueId.toLowerCase().includes(v.toLowerCase())&&N.productCode.toLowerCase().includes(C.toLowerCase())),m=N=>{const E=o.find(S=>S.id===parseInt(N));r(E),i(null)},x=N=>{const E=n.subCategories.find(S=>S.shortForm===N);i(E)},b=N=>{t(N)};return l.jsxs("div",{className:"flex min-h-[70vh] max-h-[70vh] bg-background scrollbar relative",style:{zIndex:100},children:[l.jsxs("div",{className:"w-[15%] p-4",children:[l.jsx("h2",{className:"font-bold mb-2",children:"Machines"}),l.jsx(tk,{machines:o,onSelectMachine:m}),n&&l.jsx(nk,{submachines:n.subCategories,onSelectSubmachine:x})]}),l.jsxs("div",{className:"w-[85%] p-4",children:[l.jsx("h2",{className:"mb-2",children:"Products"}),l.jsxs("div",{className:"mb-2 flex gap-2",children:[l.jsx("input",{type:"text",placeholder:"Search by Product Name",value:d,onChange:N=>h(N.target.value),className:"w-full border p-2 mb-2"}),l.jsx("input",{type:"text",placeholder:"Search by Product Code",value:e||C,onChange:N=>g(N.target.value),className:"w-full border p-2 mb-2"}),l.jsx("input",{type:"text",placeholder:"Search by OEM Code",value:f,onChange:N=>y(N.target.value),className:"w-full border p-2 mb-2"}),l.jsx("input",{type:"text",placeholder:"Search by Unique ID",value:v,onChange:N=>w(N.target.value),className:"w-full border p-2 mb-2"})]}),l.jsx("div",{className:"overflow-auto",style:{maxHeight:"50vh"},children:l.jsx(rk,{products:p,onSelectProduct:b})})]})]})};function $v({formData:t,onDataChange:e,Rows:n,mode:r}){const[s,i]=_.useState([]),[o,a]=_.useState(1),[c,u]=_.useState(!1),[d,h]=_.useState(null);_.useEffect(()=>{if(n&&n.length>0){i(n);const p=Math.max(...n.map(m=>m.siNo));a(p+1)}},[n]);const f=()=>{const p={siNo:o,type:"",productCode:"",brand:"",description:"",unit:"",quantity:1,gAmount:0,discount:0,totalVat:0},m=[...s,p];i(m),a(o+1),e(m)},y=p=>{const m=s.filter((x,b)=>b!==p);i(m),e(m)},v=(p,m,x)=>{const b=s.map((N,E)=>E===p?{...N,[m]:x}:N);i(b),e(b)},w=p=>{h(p),u(!0)},C=()=>{u(!1),h(null)},g=p=>{if(d!==null){let m=!1,x=s.map((b,N)=>N===d?{...b,brand:p.brand,description:p.name,unit:p.basicUnit,totalVat:Number(p.vatType),productCode:p.productCode,gAmount:Number(p.sellingPrice1)}:N!==d&&b.productCode===p.productCode?(m=!0,{...b,quantity:b.quantity+1}):b);m&&(x=x.filter((b,N)=>N!==d)),i(x),e(x)}C()};return l.jsxs("div",{className:"mt-6 min-h-[10vh] w-[98%] mx-auto",children:[l.jsx("button",{onClick:f,className:"bg-white text-black border-gray-300 border  px-6 py-2 mb-3 focus:scale-95",type:"button",children:"Add Product"}),l.jsx("div",{className:"min-h-[30vh] max-h-[30vh] scrollbar overflow-auto bg-blue-100",children:l.jsxs("table",{className:"w-full border-collapse border border-gray-300 bg-blue-100",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-blue-900 text-white",children:[l.jsx("th",{className:"border border-gray-300 px-1 italic font-bold text-sm bg-yellow-100 text-black",children:"S.I No"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Type"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Product Code"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Brand"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Description"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Unit"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Quantity"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"G. Amount"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Discount %"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Total VAT %"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Actions"})]})}),l.jsx("tbody",{children:s.map((p,m)=>l.jsxs("tr",{children:[l.jsx("td",{className:"border min-w-20 border-gray-300 text-center",children:p.siNo}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.type,onChange:x=>v(m,"type",x.target.value),className:"bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.productCode,onClick:()=>w(m),readOnly:!0,className:"w-full bg-transparent outline-none cursor-pointer focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.brand,onChange:x=>v(m,"brand",x.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.description,onChange:x=>v(m,"description",x.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.unit,onChange:x=>v(m,"unit",x.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.quantity,min:0,onChange:x=>v(m,"quantity",x.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.gAmount,min:0,onChange:x=>v(m,"gAmount",x.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.discount,min:0,onChange:x=>v(m,"discount",x.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.totalVat,min:0,onChange:x=>v(m,"totalVat",x.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 py-1 text-center px-1",children:l.jsx("button",{onClick:()=>y(m),className:"text-red-500",type:"button",children:"Delete"})})]},p.siNo))})]})}),c&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background",children:[l.jsx("button",{className:"text-red-500 mb-2",type:"button",onClick:C,children:"Close"}),l.jsx(qn,{onProductSelect:g})]})})]})}function sk({formData:t,onDataChange:e,Rows:n,mode:r}){const[s,i]=_.useState([]),[o,a]=_.useState(1),[c,u]=_.useState(!1),[d,h]=_.useState(null);_.useEffect(()=>{if(n&&n.length>0){i(n);const p=Math.max(...n.map(m=>m.siNo));a(p+1)}},[n]);const f=()=>{const p={siNo:o,type:"",productCode:"",brand:"",description:"",unit:"",quantity:1,gAmount:0,discount:0,totalVat:0},m=[...s,p];i(m),a(o+1),e(m)},y=p=>{const m=s.filter((x,b)=>b!==p);i(m),e(m)},v=(p,m,x)=>{const b=s.map((N,E)=>E===p?{...N,[m]:x}:N);i(b),e(b)},w=p=>{h(p),u(!0)},C=()=>{u(!1),h(null)},g=p=>{if(d!==null){let m=!1,x=s.map((b,N)=>N===d?{...b,brand:p.brand,description:p.name,unit:p.basicUnit,totalVat:Number(p.vatType),productCode:p.productCode,gAmount:Number(p.sellingPrice1)}:N!==d&&b.productCode===p.productCode?(m=!0,{...b,quantity:b.quantity+1}):b);m&&(x=x.filter((b,N)=>N!==d)),i(x),e(x)}C()};return l.jsxs("div",{className:"mt-6 min-h-[10vh] w-[98%] mx-auto",children:[l.jsx("button",{onClick:f,className:"bg-white text-black border-gray-300 border  px-6 py-2 mb-3 focus:scale-95",type:"button",children:"Add Product"}),l.jsx("div",{className:"min-h-[30vh] max-h-[30vh] scrollbar overflow-auto bg-blue-100",children:l.jsxs("table",{className:"w-full border-collapse border border-gray-300 bg-blue-100",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-blue-900 text-white",children:[l.jsx("th",{className:"border border-gray-300 px-1 italic font-bold text-sm bg-yellow-100 text-black",children:"S.I No"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Type"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Product Code"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Brand"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Description"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Unit"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Quantity"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"G. Amount"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Discount %"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Total VAT %"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Actions"})]})}),l.jsx("tbody",{children:s.map((p,m)=>l.jsxs("tr",{children:[l.jsx("td",{className:"border min-w-20 border-gray-300 text-center",children:p.siNo}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.type,onChange:x=>v(m,"type",x.target.value),className:"bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.productCode,onClick:()=>w(m),readOnly:!0,className:"w-full bg-transparent outline-none cursor-pointer focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.brand,onChange:x=>v(m,"brand",x.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.description,onChange:x=>v(m,"description",x.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.unit,onChange:x=>v(m,"unit",x.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.quantity,min:0,onChange:x=>v(m,"quantity",x.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.gAmount,min:0,onChange:x=>v(m,"gAmount",x.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.discount,min:0,onChange:x=>v(m,"discount",x.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.totalVat,min:0,onChange:x=>v(m,"totalVat",x.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 py-1 text-center px-1",children:l.jsx("button",{onClick:()=>y(m),className:"text-red-500",type:"button",children:"Delete"})})]},p.siNo))})]})}),c&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background",children:[l.jsx("button",{className:"text-red-500 mb-2",type:"button",onClick:C,children:"Close"}),l.jsx(qn,{onProductSelect:g})]})})]})}function ik({formData:t,onDataChange:e,Rows:n,mode:r}){const[s,i]=_.useState([]),[o,a]=_.useState(1),[c,u]=_.useState(!1),[d,h]=_.useState(null);_.useEffect(()=>{if(n&&n.length>0){i(n);const p=Math.max(...n.map(m=>m.siNo));a(p+1)}},[n]);const f=()=>{const p={siNo:o,type:"",productCode:"",brand:"",description:"",unit:"",quantity:1,gAmount:0,discount:0,totalVat:0},m=[...s,p];i(m),a(o+1),e(m)},y=p=>{const m=s.filter((x,b)=>b!==p);i(m),e(m)},v=(p,m,x)=>{const b=s.map((N,E)=>E===p?{...N,[m]:x}:N);i(b),e(b)},w=p=>{h(p),u(!0)},C=()=>{u(!1),h(null)},g=p=>{if(d!==null){let m=!1,x=s.map((b,N)=>N===d?{...b,brand:p.brand,description:p.name,unit:p.basicUnit,totalVat:Number(p.vatType),productCode:p.productCode,gAmount:Number(p.sellingPrice1)}:N!==d&&b.productCode===p.productCode?(m=!0,{...b,quantity:b.quantity+1}):b);m&&(x=x.filter((b,N)=>N!==d)),i(x),e(x)}C()};return l.jsxs("div",{className:"mt-6 min-h-[10vh] w-[98%] mx-auto",children:[l.jsx("div",{className:"min-h-[30vh] max-h-[30vh] scrollbar overflow-auto bg-blue-100",children:l.jsxs("table",{className:"w-full border-collapse border border-gray-300 bg-blue-100",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-blue-900 text-white",children:[l.jsx("th",{className:"border border-gray-300 px-1 italic font-bold text-sm bg-yellow-100 text-black",children:"S.I No"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Type"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Product Code"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Brand"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Description"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Unit"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Quantity"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"G. Amount"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Discount %"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Total VAT %"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Actions"})]})}),l.jsx("tbody",{children:s.map((p,m)=>l.jsxs("tr",{children:[l.jsx("td",{className:"border min-w-20 border-gray-300 text-center",children:p.siNo}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.type,onChange:x=>v(m,"type",x.target.value),className:"bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.productCode,onClick:()=>w(m),readOnly:!0,className:"w-full bg-transparent outline-none cursor-pointer focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.brand,onChange:x=>v(m,"brand",x.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.description,onChange:x=>v(m,"description",x.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.unit,onChange:x=>v(m,"unit",x.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.quantity,min:0,onChange:x=>v(m,"quantity",x.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.gAmount,min:0,onChange:x=>v(m,"gAmount",x.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.discount,min:0,onChange:x=>v(m,"discount",x.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.totalVat,min:0,onChange:x=>v(m,"totalVat",x.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 py-1 text-center px-1",children:l.jsx("button",{onClick:()=>y(m),className:"text-red-500",type:"button",children:"Delete"})})]},p.siNo))})]})}),c&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background",children:[l.jsx("button",{className:"text-red-500 mb-2",type:"button",onClick:C,children:"Close"}),l.jsx(qn,{onProductSelect:g})]})}),l.jsx("button",{onClick:f,className:"bg-white text-black border-gray-300 border  px-6 py-2 mb-3 focus:scale-95",type:"button",children:"Add Product"})]})}const ok=({mode:t,formData:e,totalDetails:n,onPaymentChange:r})=>{const[s,i]=_.useState(0),[o,a]=_.useState(0),[c,u]=_.useState(n.total||0);_.useEffect(()=>{if(n.total){const h=parseFloat(n.total);u(h),console.log("PaymentFields - Received totalAmount:",h)}else console.log("PaymentFields - formData.total is undefined or zero")},[n.total]),_.useEffect(()=>{if(e.payment==="Both"&&!isNaN(c)&&!isNaN(s)){const h=Math.max(c-s,0);a(h),console.log("Calculated Credit Amount:",h),r({cashAmount:s,creditAmount:h}),console.log("Passing to Parent - Cash Amount:",s,"Credit Amount:",h)}},[s,c,e.payment]);const d=h=>{const f=parseFloat(h.target.value)||0;f>c?(i(c),console.log("Cash Amount exceeded total, set to Total Amount:",c)):(i(f),console.log("Updated Cash Amount:",f))};return e.payment!=="Both"?null:l.jsxs("div",{className:"flex items-center col-span-2 gap-4",children:[l.jsxs("div",{className:"flex relative items-center flex-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"Cash Amount:"}),l.jsx("input",{type:"number",value:s||"",onChange:d,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!=="delete"?"bg-white":""}`,disabled:t==="delete",min:"0",max:c,step:"0.01"})]}),l.jsxs("div",{className:"flex relative items-center flex-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"Credit Amount:"}),l.jsx("input",{type:"number",value:o||"",className:"h-7 px-1 border border-gray-600 w-full ml-1 bg-gray-100",readOnly:!0})]})]})};function lk(t){if(!(t instanceof Date))throw new Error("Input must be a Date object");const e=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return`${e}/${n}/${r}`}function Uv({mode:t,initialInvoice:e}){_.useState("unPaid");const[n,r]=_.useState(t||"none"),[s,i]=_.useState(e||null),[o,a]=_.useState(!1),[c,u]=_.useState([]),[d,h]=_.useState([]),[f,y]=_.useState([]),[v,w]=_.useState([]),[C,g]=_.useState([]),[p,m]=_.useState(!1),[x,b]=_.useState(!1),N=async()=>{const R=await Lv();y(R);const G=await Bv();g(G);const B=await zd();w(B)};_.useEffect(()=>{const R=async()=>{const G=await Ud();u(G);const B=await LE();h(B)};N(),R()},[]);const E=R=>{i(R),a(!1),m(R.status==="paid")},S=R=>{r(R),i(null),a(R==="edit")},k=async()=>{s&&(s.type==="Delivery"||s.type==="delivery")&&(i(R=>({...R,status:"paid"})),m(!0))},j=()=>{b(R=>!R)};return l.jsx("div",{children:l.jsxs("div",{className:"w-[98%] mx-auto",children:[l.jsxs("nav",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>S("add"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Add"}),l.jsx("button",{onClick:()=>S("edit"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Edit"}),l.jsx("button",{onClick:()=>S("delete"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Delete"}),l.jsx("button",{onClick:j,className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:x?"Hide Quotation Table":"Show Quotation Table"})]}),x&&l.jsx(sk,{}),x&&l.jsx(ik,{}),n==="none"&&l.jsx(Da,{mode:"delete",initialInvoice:{},areas:c,customers:d,cb:N}),(n==="edit"||n==="delete")&&!s&&l.jsxs("div",{className:"h-[94vh] w-[85%] mx-auto mt-6 flex justify-between",children:[l.jsxs("div",{className:"relative",children:["Select Invoice: ",l.jsx("input",{type:"text"}),l.jsx(se,{items:f,onSelect:E,style:{top:"top-[3px] left-[92%]"},columns:[{key:"id",label:"Id"},{key:"accountName",label:"Customer"},{key:"DocNo",label:"DocNo"},{key:"date",label:"Date"},{key:"total",label:"Total"}],name:"invoiceList",all:!0})]}),l.jsxs("div",{className:"relative",children:["Select Quotation: ",l.jsx("input",{type:"text"}),l.jsx(se,{items:v,onSelect:E,style:{top:"top-[3px] left-[92%]"},columns:[{key:"id",label:"Id"},{key:"accountName",label:"Customer"},{key:"DocNo",label:"DocNo"},{key:"date",label:"Date"},{key:"total",label:"Total"}],name:"invoiceList",all:!0})]}),l.jsxs("div",{className:"relative",children:["Select Delivery Note: ",l.jsx("input",{type:"text"}),l.jsx(se,{items:C,onSelect:E,style:{top:"top-[3px] left-[92%]"},columns:[{key:"id",label:"Id"},{key:"accountName",label:"Customer"},{key:"DocNo",label:"DocNo"},{key:"date",label:"Date"},{key:"total",label:"Total"}],name:"invoiceList",all:!0})]})]}),n==="add"&&l.jsx(Da,{mode:"add",initialInvoice:{terms:"Cash",branch:2,LOC:2,date:lk(new Date(Date.now()))},areas:c,customers:d,cb:N}),(n==="edit"||n==="delete")&&s&&l.jsx(Da,{mode:n,initialInvoice:s,areas:c,customers:d,cb:N}),s&&(s.type==="Delivery"||s.type==="delivery")&&l.jsxs(l.Fragment,{children:[console.log(s.type),l.jsx("button",{onClick:k,className:`mt-1 text-white px-4 py-2 w-full ${p?"bg-gray-500":"bg-blue-500"}`,disabled:s.status==="paid",children:"Mark as Paid"})]})]})})}const ak=[{shortForm:"UAE",name:"Dirham"},{shortForm:"USD",name:"American Dollar"}],ck=[{shortForm:"Cash",name:"Cash Invoice"},{shortForm:"Delivery",name:"Delivery Note"},{shortForm:"Quotation",name:"Quotation"}],uk=[{name:"Salesman 1"},{name:"Salesman 2"},{name:"Salesman 3"},{name:"Salesman 4"}],dk=[{name:"Cash"},{name:"Credit Card"},{name:"Both"}],hk=[{name:"Local"},{name:"International"}],he={id:"",terms:"Cash",LOC:"",DocNo:"",date:new Date(Date.now()),accCode:"",accountName:"",refNo:"",curr:"",rate:"",docType:"",note:"",docNo1:"",sMan:"",MDoc:"",payment:"Cash",delPlace:"",area:"",type:"",PONo:"",total:0,products:[]},mn={grossTotal:0,discount:0,disAmount:0,vatAmount:0,total:0,netTotal:0};function Da({mode:t,initialInvoice:e,fullheight:n,areas:r,customers:s,cb:i}){const[o,a]=_.useState(he),[c,u]=_.useState("Cash"),[d,h]=_.useState(e.invoiceType||null),[f,y]=_.useState(mn),[v,w]=_.useState({cashAmount:0,creditAmount:0}),C=B=>{w(B),a(z=>({...z,cashAmount:B.cashAmount,creditAmount:B.creditAmount}))},g=B=>{a(z=>({...z,accountName:B}))},p=B=>{a(z=>({...z,curr:B}))},m=B=>{a(z=>({...z,docType:B})),u(B)},x=B=>{a(z=>({...z,sMan:B}))},b=B=>{a(z=>({...z,payment:B}))},N=B=>{a(z=>({...z,area:B.name}))},E=B=>{a(z=>({...z,type:B}))},S=B=>{let z=0,ge=0,Ae=0,st=0,A=0,M=0;B.forEach(F=>{const $=Number(F.gAmount||0)*F.quantity,oe=Number(F.totalVat||0),Z=Number(F.discount||0);z+=$;let xe=Number(($*oe/100).toFixed(3));st+=xe;let Yt=Number(($+xe).toFixed(3)),yt=Number((Yt*Z/100).toFixed(3));Ae+=yt}),ge=Number((Ae/z*100).toFixed(3)),A=(z+st).toFixed(3),M=(A-Ae).toFixed(3),y({grossTotal:z,discount:ge,disAmount:Ae,vatAmount:st,total:A,netTotal:M}),a(F=>({...F,products:B}))};_.useEffect(()=>{a(B=>({...B,id:e.id||he.id,terms:e.terms||he.terms,LOC:e.LOC||he.LOC,DocNo:e.DocNo||he.DocNo,date:e.date||he.date,accCode:e.accCode||he.accCode,accountName:e.accountName||"",refNo:e.refNo||he.refNo,curr:e.curr||he.curr,rate:e.rate|he.rate,docType:e.docType|he.docType,note:e.note||he.note,docNo1:e.docNo1||he.docNo1,sMan:e.sMan||he.sMan,MDoc:e.MDoc||he.MDoc,payment:e.payment||he.payment,delPlace:e.delPlace||he.delPlace,area:e.area||he.area,PONo:e.PONo||he.PONo,type:e.type||he.type,products:e.products||he.products,total:e.total||he.total})),y({grossTotal:e.grossTotal||mn.grossTotal,discount:e.discount||mn.discount,disAmount:e.disAmount||mn.disAmount,vatAmount:e.vatAmount||mn.vatAmount,total:e.total||mn.total,netTotal:e.netTotal||mn.netTotal}),u(e.invoiceType||"Cash"),h(e.invoiceType||null)},[e]);const k=B=>{const{name:z,value:ge}=B.target;a(Ae=>({...Ae,[z]:ge}))},j=async B=>{B.preventDefault();const{id:z,...ge}=o;if(console.log(o),t==="add")c==="Cash"?(await cp({...ge,...f,invoiceType:c}),alert("Cash Invoice Created")):c==="Delivery"?(await up({...ge,...f,invoiceType:c}),alert("Delivery Note Created")):(await WE({...ge,...f,invoiceType:c}),alert("Quotation Created"));else if(t==="edit"){console.log(c+" "+d);let Ae=!0;d==="Cash"&&c==="Cash"&&await PE(z,{...ge,...f}),d==="Delivery"&&c==="Delivery"&&await UE(z,{...ge,...f}),d==="Quotation"&&c==="Quotation"?await QE(z,{...ge,...f}):d==="Quotation"&&c==="Cash"?(await cp({...ge,...f,invoiceType:c}),await Pa(z)):d==="Quotation"&&c==="Delivery"?(await up({...ge,...f,invoiceType:c}),await Pa(z)):(Ae=!1,alert("Cannot change invoice type...")),Ae&&alert("Updated Invoice")}else t==="delete"&&(c==="Cash"?(await DE(z),alert("Cash Invoice deleted")):c==="Delivery"?(await zE(z),alert("Delivery Note deleted")):c==="Quotation"&&(await Pa(z),alert("Quotation deleted")));a(he),y(mn),i&&i()},[R,G]=_.useState(t==="delete");return l.jsxs("form",{onSubmit:j,className:`${n?"min-h-[100vh]  ":"min-h-[92vh]"}`,children:[l.jsx("div",{className:"mx-auto",children:l.jsxs("div",{className:"flex items-center w-[30%] mx-auto",children:[l.jsx("span",{className:"w-[35%] text-right inline-block",children:"Invoice Type:"}),l.jsxs("select",{name:"invoiceType",value:c,onChange:B=>u(B.target.value),className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete",children:[l.jsx("option",{value:"Cash",children:"Cash Invoice"}),l.jsx("option",{value:"Delivery",children:"Delivery Note"}),l.jsx("option",{value:"Quotation",children:"Quotation"})]})]})}),l.jsxs("div",{className:`w-[96%] mx-auto  grid grid-cols-6 gap-3 p-3 ${n?"mt-0":"mt-10"}`,children:[l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[35%] text-right inline-block",children:"Terms:"}),l.jsx("input",{type:"text",name:"terms",value:o.terms,onChange:k,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[50%] text-right inline-block",children:"Branch:"}),l.jsx("input",{type:"text",name:"branch",value:2,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:!0})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[13%] text-right inline-block",children:"Name:"}),l.jsx("input",{type:"text",name:"name",value:"Main Branch",className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:!0})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"LOC:"}),l.jsx("input",{type:"text",name:"LOC",value:o.LOC,onChange:k,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Doc.No:"}),l.jsx("input",{type:"number",name:"DocNo",value:o.DocNo,onChange:k,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[30%] text-right inline-block",children:"Date:"}),l.jsx("input",{type:"text",value:o.date,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:!0})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[36%] text-right inline-block",children:"Acc.Code:"}),l.jsx("input",{type:"text",name:"accCode",value:o.accCode,onChange:k,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2 relative",children:[l.jsx("span",{className:"w-[13%] text-right inline-block",children:"Name:"}),l.jsx("input",{type:"text",value:o.accountName,onChange:g,className:`h-7 px-1 border border-gray-600  w-full ml-1  ${t!="delete"?"bg-white":""} `,disabled:!0}),!R&&l.jsx(se,{items:s,onSelect:g,style:{top:"top-1 left-[95%]"},columns:[{key:"name",label:"Name"},{key:"address",label:"Address"},{key:"mobile",label:"Mobile"},{key:"email",label:"Email"},{key:"description",label:"Description"},{key:"SAL",label:"SAL#"},{key:"area",label:"Area"},{key:"vatCode",label:"VAT code"},{key:"TmId",label:"TmID"}]})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Ref No:"}),l.jsx("input",{type:"text",name:"refNo",value:o.refNo,onChange:k,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1 relative",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Curr:"}),l.jsx("input",{type:"text",name:"curr",value:o.curr,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}    `,disabled:!0}),!R&&l.jsx(se,{items:ak,onSelect:p,style:{top:"top-1 left-[93%]"},columns:[{key:"shortForm",label:"Short Form"},{key:"name",label:"Name"}]})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[30%] text-right inline-block",children:"Rate:"}),l.jsx("input",{type:"text",name:"rate",value:o.rate,onChange:k,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block text-nowrap",children:"Doc Type:"}),l.jsx("input",{type:"text",name:"Invoice Type",value:c,onChange:k,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0}),!R&&l.jsx(se,{items:ck,onSelect:m,style:{top:"top-1 left-[92%]"},columns:[{key:"shortForm",label:"Type"},{key:"name",label:"Name"}]})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[13%] text-right inline-block",children:"Note:"}),l.jsx("input",{type:"text",name:"note",value:o.note,onChange:k,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Doc No:"}),l.jsx("input",{type:"text",name:"docNo1",value:o.docNo1,onChange:k,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"S.Man:"}),l.jsx("input",{type:"text",name:"sMan",value:o.sMan,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0}),!R&&l.jsx(se,{items:uk,onSelect:x,style:{top:"top-1 left-[93%]"},columns:[{key:"name",label:"Name"}]})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[30%] text-right inline-block",children:"MDoc:"}),l.jsx("input",{type:"Number",name:"MDoc",value:o.MDoc,onChange:k,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"Payment:"}),l.jsx("input",{type:"text",name:"payment",value:o.payment,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0}),!R&&l.jsx(se,{items:dk,onSelect:b,style:{top:"top-1 left-[92%]"},columns:[{key:"name",label:"Mode of Payment"}]})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[28%] text-right inline-block",children:"DelPlace:"}),l.jsx("input",{type:"text",name:"delPlace",value:o.delPlace,onChange:k,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"Area:"}),l.jsx("input",{type:"text",name:"area",value:o.area,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0}),!R&&l.jsx(se,{items:r,onSelect:N,style:{top:"top-1 left-[92%]"},columns:[{key:"name",label:"Area Name"},{key:"shortForm",label:"Area ShortForm"}],all:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"PO No:"}),l.jsx("input",{type:"Number",name:"PONo",value:o.PONo,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:R,onChange:k})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Type:"}),l.jsx("input",{type:"text",name:"type",value:o.type,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0}),!R&&l.jsx(se,{items:hk,onSelect:E,style:{top:"top-1 left-[93%]"},columns:[{key:"name",label:"Name"}]})]})]}),l.jsx("div",{children:l.jsx($v,{formData:o,onDataChange:S,Rows:e.products,mode:t})}),l.jsxs("div",{className:"grid grid-cols-4 gap-3 mt-4 mb-4",children:[l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Gross Total:"}),l.jsx("input",{value:f.grossTotal||0,name:"grossTotal",className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Discount%:"}),l.jsx("input",{type:"number",value:f.discount||0,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Amount:"}),l.jsx("input",{type:"number",name:"",value:f.disAmount||0,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Net Total:"}),l.jsx("input",{type:"number",name:"",value:f.netTotal||0,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Vat Amount:"}),l.jsx("input",{type:"number",name:"",value:f.vatAmount||0,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Total:"}),l.jsx("input",{type:"number",name:"",value:f.total||0,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0})]}),l.jsx(ok,{mode:t,formData:o,totalDetails:f,onPaymentChange:C})]}),!(t==="delete"&&!Object.keys(e).length===0)&&l.jsx("div",{className:"flex space-x-2 mt-2",children:l.jsxs("button",{type:"submit",onClick:j,className:"bg-white px-5 py-1 w-full border border-gray-100",children:[t," Invoice"]})})]})}const fk=()=>l.jsx("div",{children:l.jsx("div",{className:"border border-gray-400 ",children:l.jsxs("ul",{className:"flex gap-2 ml-6",children:[l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openCashInvoice")},className:"nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-95",children:l.jsxs("li",{className:"flex w-full h-full",children:[l.jsx("img",{src:bs,className:"lg:w-5 nah-h mr-1 w-4 lg:mr-5"}),"Quotation"]})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openInvoiceViewer")},className:"ml-1 mr-8    nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-75 transition-all",children:l.jsx("img",{src:Ns,className:"lg:w-4 nav-ph w-3 "})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openPurchaseInvoice")},className:"nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-95",children:l.jsxs("li",{className:"flex w-full h-full",children:[l.jsx("img",{src:bs,className:"lg:w-5  mr-1 w-4 nah-h lg:mr-5"}),"Sales Order"]})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openInvoiceViewer")},className:"ml-1 mr-8    nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-75 transition-all",children:l.jsx("img",{src:Ns,className:"lg:w-4 w-3 nav-ph"})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openCashInvoice")},className:"nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-95",children:l.jsxs("li",{className:"flex w-full h-full",children:[l.jsx("img",{src:bs,className:"lg:w-5 mr-1 w-4 nah-h lg:mr-5"}),"Delivery Note"]})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openInvoiceViewer")},className:"ml-1 mr-8    nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-75 transition-all",children:l.jsx("img",{src:Ns,className:"lg:w-4 w-3 nav-ph"})}),l.jsx("button",{className:"nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-95",onClick:()=>{window.electron.ipcRenderer.send("openCashInvoice")},children:l.jsxs("li",{className:"flex w-full h-full",children:[l.jsx("img",{src:bs,className:"lg:w-5 mr-1 w-4 nah-h lg:mr-5"}),"Cash Invoice"]})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openInvoiceViewer")},className:"ml-1 mr-8 nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-75 transition-all",children:l.jsx("img",{src:Ns,className:"lg:w-4 w-3 nav-ph"})}),l.jsx("button",{className:"nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-95",onClick:()=>{window.electron.ipcRenderer.send("openReturn")},children:l.jsxs("li",{className:"flex w-full h-full",children:[l.jsx("img",{src:bs,className:"lg:w-5 mr-1 w-4 nah-h lg:mr-5"}),"Product Return"]})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openReturn")},className:"ml-1 mr-8 nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-75 transition-all",children:l.jsx("img",{src:Ns,className:"lg:w-4 w-3 nav-ph"})})]})})}),pk=""+new URL("open-092cw3Jk.png",import.meta.url).href,mk=({selectedProduct:t,setSelectedProduct:e})=>{const[n,r]=_.useState(!1),s=()=>{r(!0)},i=()=>{r(!1)};_.useEffect(()=>(window.addEventListener("keydown",c=>{c.code==="Escape"&&n&&i()}),()=>window.addEventListener("keydown",c=>{c.code==="Escape"&&n&&i()})),[n]);const o=c=>{e(c),i()},a=async c=>{const{value:u}=c.target;e(h=>({...h,productCode:u}));const d=await Vd(u);d&&e(d)};return l.jsx(l.Fragment,{children:l.jsxs("div",{className:"w-[96%] font-medium mx-auto gap-8  flex justify-between",children:[l.jsxs("div",{className:"flex flex-col gap-1  2xl:w-[30%] w-[50%]",children:[l.jsxs("div",{className:"flex w-full ",children:[l.jsx("span",{className:"font-bold w-[35%] 2xl:w-[25%] text-blue-800 text-sm",children:"Product Code:"}),l.jsxs("div",{className:"text-sm 2xl:w-[75%] w-[65%] border uppercase bg-blue-100 border-gray-600 px-1 flex items-center justify-between",children:[l.jsx("input",{type:"text",className:"bg-transparent w-full outline-none",value:t.productCode||"",onChange:a}),l.jsx("button",{onClick:s,children:l.jsx("img",{src:pk,alt:"Open Search",className:"w-4 h-4"})})]})]}),n&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center ",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background  ",children:[l.jsx("button",{className:"text-red-500 mb-2",onClick:i,children:"Close"}),l.jsx(qn,{onProductSelect:o})]})}),l.jsxs("div",{className:"flex border  w-full",children:[l.jsx("span",{className:"font-bold w-[35%] 2xl:w-[25%]  text-blue-800 text-sm",children:"Description:"}),l.jsx("div",{className:"text-sm   2xl:w-[75%]  w-[65%]   border  uppercase bg-white border-gray-600 px-1 ",children:t.description||"NA"})]}),l.jsxs("div",{className:"flex border  w-full",children:[l.jsx("span",{className:"font-bold w-[35%] 2xl:w-[25%]  text-red-950 text-sm",children:"Specification:"}),l.jsx("div",{className:"text-sm h-14 overflow-y-scroll 2xl:w-[75%]  w-[65%]   border  uppercase bg-blue-100 border-gray-600 px-1 ",children:t.description2||"NA"})]}),l.jsxs("div",{className:"flex border justify-between  items-center",children:[l.jsxs("div",{className:`flex justify-between    items-center  2xl:w-[40%] \r
                        w-[50%]  2xl:gap-0  gap-8`,children:[l.jsx("span",{className:"font-bold text-center text-red-950 text-sm 2xl:w-[90%] w-full   ",children:"Pack Qty:"}),l.jsx("div",{className:"bg-white w-[6rem] border border-gray-600 px-1",children:t.quantity||"NA"})]}),l.jsxs("div",{className:"flex justify-between items-center w-[40%]",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"Unit:"}),l.jsx("div",{className:"bg-white w-24 border border-gray-600 px-1",children:t.basicUnit||"NA"})]})]}),l.jsxs("div",{className:"flex border  w-full",children:[l.jsx("span",{className:"font-bold w-[35%] 2xl:w-[25%]  text-red-950 text-sm",children:"Max Order:"}),l.jsx("div",{className:"text-sm  2xl:w-[75%]  w-[65%]   border  uppercase bg-white border-gray-600 px-1 text-right ",children:t.maxOrder||"NA"})]}),l.jsxs("div",{className:"flex border  w-full",children:[l.jsx("span",{className:"font-bold w-[35%] 2xl:w-[25%]  text-red-950 text-sm",children:"Re-Order:"}),l.jsx("div",{className:"text-sm  2xl:w-[75%]  w-[65%]   border  uppercase bg-white border-gray-600 px-1 text-right ",children:t.reOrder||"NA"})]})]}),l.jsxs("div",{className:"flex flex-col gap-2  2xl:w-[30%] w-[50%] ",children:[l.jsxs("div",{className:"flex items-center   justify-center    ",children:[l.jsx("span",{className:"text-sm 2xl:w-[20%] w-[30%] font-bold text-center  text-red-950",children:"OEM No:"}),l.jsx("div",{className:" ml-1 text-sm     w-[80%]  border  uppercase bg-white border-gray-600 px-1",children:"0"})]}),l.jsxs("div",{className:"flex items-center  justify-center    ",children:[l.jsx("span",{className:"text-sm  2xl:w-[20%] w-[30%] text-center font-bold   text-red-950",children:"Lst Suppl:"}),l.jsx("div",{className:" ml-1 text-sm     w-[80%]  border  uppercase bg-white border-gray-600 px-1",children:t.lastSupplier||"NA"})]}),l.jsxs("div",{className:"flex justify-between ",children:[l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[4.8rem]  text-center font-bold   text-red-950",children:"Lst Pur.Cst:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white w-[40%]  border  uppercase  border-gray-600 px-1",children:t.lastPurCost||"NA"})]}),l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[3.8rem]  text-center font-bold   text-red-950",children:"AvgCost:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white  w-[70%] border  uppercase  border-gray-600 px-1",children:t.averageCost||"NA"})]})]}),l.jsx("div",{children:l.jsxs("div",{className:"flex items-center  justify-center    ",children:[l.jsx("span",{className:"text-sm 2xl:w-[20%] w-[30%]  font-bold text-left  text-red-950",children:"Sell Price2:"}),l.jsx("div",{className:" ml-1 text-sm text-right  w-[80%]  border  uppercase bg-white border-gray-600 px-1",children:t.sellingPrice2||"NA"})]})}),l.jsxs("div",{className:"flex justify-between ",children:[l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[4.8rem]  text-center font-bold   text-red-950",children:"Sell Price1:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white w-[40%]  border  uppercase  border-gray-600 px-1",children:t.sellingPrice1||"NA"})]}),l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[3.8rem]  text-center font-bold   text-red-950",children:"Margin%:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white  w-[70%] border  uppercase  border-gray-600 px-1",children:t.averageCost&&t.sellingPrice1?(t.sellingPrice1-t.averageCost)/100:0})]})]}),l.jsxs("div",{className:"flex justify-between ",children:[l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[4.8rem]  text-right font-bold   text-red-950",children:"Vat out:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white w-[40%]  border  uppercase  border-gray-600 px-1",children:t.vatType||"NA"})]}),l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[3.8rem]  text-right font-bold   text-red-950",children:"%:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white  w-[70%] border  uppercase  border-gray-600 px-1",children:"0"})]})]}),l.jsxs("div",{className:"flex items-center  justify-center    ",children:[l.jsx("span",{className:"text-sm  2xl:w-[20%] w-[50%] text-center font-bold   text-red-950",children:"vat Price:"}),l.jsx("div",{className:" ml-1 text-sm      w-[80%]  border  uppercase bg-white border-gray-600 px-1",children:"Local purchase"})]})]}),l.jsxs("div",{className:"flex flex-col  gap-[5px] 2xl:w-[30%] w-[50%] ",children:[l.jsxs("div",{className:"flex items-center w-full ",children:[l.jsx("span",{className:"text-sm 2xl:w-[12%] w-[30%]  font-bold  text-red-950",children:"Brand:"}),l.jsx("div",{className:"  text-sm   mr-1  2xl:w-[30%] w-[40%]  border  uppercase bg-white border-gray-600 px-1",children:t.brand||"NA"}),l.jsx("div",{className:"  text-sm     w-[60%]  border  uppercase bg-white border-gray-600 px-1",children:t.brand||"NA"})]}),l.jsxs("div",{className:"flex gap-3   ",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"Dept:"}),l.jsx("div",{className:"  text-sm     w-[90%]  border  uppercase bg-white border-gray-600 px-1",children:t.department||"NA"})]}),l.jsxs("div",{className:"flex w-full justify-between  items-center",children:[l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm  ",children:"Group:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:t.category||"NA"})]}),l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"Sub.Grp:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:t.subCategory||"NA"})]})]}),l.jsxs("div",{className:"flex w-full justify-between  items-center",children:[l.jsxs("div",{className:"flex justify-between gap-6 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm  ",children:"Loc:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:"2"})]}),l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"Stk.Typ:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:"HY"})]})]}),l.jsxs("div",{className:"flex w-full justify-between  items-center",children:[l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm  ",children:"Origin:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:t.origin||"NA"})]}),l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-blue-800 text-sm",children:"Unq.ID:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:t.uniqueId||"NA"})]})]}),l.jsxs("div",{className:"flex w-full justify-between  items-center",children:[l.jsxs("div",{className:"flex justify-between gap-5 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm  ",children:"ETA:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:"//"})]}),l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"ETD:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:"//"})]})]}),l.jsxs("div",{className:"flex w-full justify-between  items-center",children:[l.jsxs("div",{className:"flex justify-between -ml-5 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm  ",children:"Prod Type:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:"HY"})]}),l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"Qty"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:t.quantity||"NA"})]})]})]})]})})},at=({name:t,data:e,columns:n,highlightColumn:r,height:s,handleRowClick:i})=>{const o=c=>typeof c!="string"?c:c.length>13?c.slice(0,13)+"...":c,a=n.length>0?n:[];return l.jsxs("div",{className:`${s?"h-80":"min-h-full"} bg-blue-100 max-h-52 overflow-auto scrollbar`,children:[l.jsx("div",{className:"bg-gray-500 font-semibold text-sm mb-2 text-white text-center uppercase",children:t}),l.jsx("div",{className:"max-h-52",children:l.jsxs("table",{className:"w-full ",children:[l.jsx("thead",{children:l.jsx("tr",{children:a.map((c,u)=>l.jsx("th",{className:`text-left text-sm px-2 py-0 border-r-2 border-r-gray-400 ${u===0?"bg-yellow-200 italic font-bold":"bg-blue-800 text-white font-medium"}`,children:c.header},u))})}),l.jsx("tbody",{children:e.length>0?e.map((c,u)=>l.jsx("tr",{onClick:()=>i&&i(c),children:a.map((d,h)=>{var f;return l.jsx("td",{className:`px-2 py-1 font-semibold border-r-2 border-r-gray-300 text-[0.85rem] uppercase whitespace-nowrap ${u===0&&d.key===r?"bg-orange-400":""}`,children:d.render?d.render(c):o(((f=c[d.key])==null?void 0:f.toString())||"")},h)})},u)):l.jsx("tr",{children:a.map((c,u)=>l.jsx("td",{className:"px-2 py-1 border-r-2 border-r-gray-300 text-[0.85rem] uppercase whitespace-nowrap",children:""},u))})})]})})]})},gk=async t=>{try{const e=Gt(P(O,"purchaseInvoices")),n=e.key;await gt(e,{...t,id:n});for(const r of t.products){const s=P(O,`products/${r.productCode}`),i=await U(s);if(i.exists()){const o=i.val(),a=(parseInt(o.quantity)||0)+parseInt(r.quantity);await Oe(s,{quantity:a,lastSupplier:t.supplierName,lastPurCost:parseFloat(r.price)})}else console.warn(`Product with productCode ${r.productCode} not found.`)}return n}catch(e){throw console.error("Failed to add purchase invoice and update product quantities:",e),e}},yk=async(t,e)=>{try{const n=P(O,`purchaseInvoices/${t}`),r=await U(n);if(!r.exists())throw new Error(`Purchase invoice with ID ${t} not found.`);const s=r.val(),i=new Map(s.products.map(o=>[o.productCode,o]));for(const o of e.products){const a=i.get(o.productCode),c=Number(o.quantity)-(a?Number(a.quantity):0),u=P(O,`products/${o.productCode}`),d=await U(u);if(d.exists()){const h=d.val();await Oe(u,{quantity:Number(h.quantity||0)+Number(c)})}else console.warn(`Product with productCode ${o.productCode} not found.`)}await Oe(n,e)}catch(n){throw console.error("Failed to update purchase invoice and adjust product quantities:",n),n}},zv=async()=>{try{const t=await U(P(O,"purchaseInvoices"));return t.exists()?Object.values(t.val()):[]}catch(t){throw console.error("Failed to retrieve purchase invoices:",t),t}},vk=async t=>{try{await Hn(P(O,`purchaseInvoices/${t}`))}catch(e){throw console.error("Failed to delete purchase invoice:",e),e}},xk=async t=>{try{const e=await U(P(O,"purchaseInvoices"));return e.exists()?Object.values(e.val()).flatMap(s=>s.products.filter(i=>i.productCode===t).map(i=>({id:s.id,invoiceNo:s.invoiceNo,supplierName:s.supplierName,supplierId:s.supplierId,date:s.date,productCode:i.productCode,name:i.name,quantity:i.quantity,price:i.price,total:Number(i.quantity)*Number(i.price)}))):[]}catch(e){throw console.error("Failed to retrieve purchase invoices with product details:",e),e}},wk=""+new URL("example-I_cYwQiU.png",import.meta.url).href,dp=()=>{const[t,e]=_.useState({productNo:"",name:"",supplierName:"",oemCode:"",uniqueId:"",description:"",specification:"",packQty:"HY",unit:"HY",maxOrder:0,reOrder:0,oemNo:0,lstSuppl:"Local purchase",lstPurCst:14.78,avgCost:14.78,sellPrice2:0,sellPrice1:14.78,margin:0,vatOut:14.78,vatPrice:"Local purchase",brand:"Origin",dept:0,group:"HY",subGrp:"HY",loc:"HY",stkTyp:"HY",origin:"HY",eta:"",etd:"",prodType:"HY",qty:"HY",alternatives:[],appliedModels:[]}),[n,r]=_.useState([]),[s,i]=_.useState([]),[o,a]=_.useState([]),[c,u]=_.useState([]);_.useEffect(()=>{t&&(async()=>{const y=await RE(t.productCode);r(y);const v=await HE(t.productCode);i(v);const w=await VE(t.productCode);a(w);const C=await xk(t.productCode);u(C)})()},[t]);const d=async f=>{if(!f)return;const y=await Vd(f);e(y)},h=[];return l.jsxs("div",{className:"bg-background min-h-[100vh]",children:[l.jsx(fk,{}),l.jsx("div",{className:"border-b border-t border-b-gray-300 border-t-gray-300",children:l.jsxs("div",{className:"xl:w-[100%] w-[100%] m-auto flex flex-wrap items-center justify-center gap-3",children:[l.jsxs("div",{className:"w-[50%] flex gap-10 items-center",children:[l.jsxs("div",{className:"w-[20%] flex items-center",children:[l.jsxs("label",{htmlFor:"Branch",className:"text-sm font-semibold",children:["Branch:"," "]}),l.jsx("input",{type:"text",id:"Branch",className:"outline-none border border-gray-700 w-[99%] text-center ml-2 bg-white font-semibold",value:2,disabled:!0})]}),l.jsxs("div",{className:"flex items-center w-[80%]",children:[l.jsxs("label",{htmlFor:"Name",className:"text-sm font-semibold",children:["Name:"," "]}),l.jsx("input",{type:"text",id:"Name",className:"outline-none border w-[90%] border-gray-700 ml-2 bg-white px-2 font-semibold",value:t.name,disabled:!0})]})]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsx("a",{href:"/",className:"text-blue-500 underline text-xs",children:"edit"}),l.jsx("a",{href:"/",className:"text-blue-500 underline text-xs",children:"Product transactions"}),l.jsx("a",{href:"/",className:"text-blue-500 underline text-xs",children:"Transaction Search"}),l.jsx("a",{href:"/",className:"text-blue-500 underline text-xs",children:"Product Search"}),l.jsx("a",{href:"/",className:"text-blue-500 underline text-xs",children:"Duplicate"})]})]})}),l.jsxs("div",{className:"flex mt-5",children:[l.jsx("div",{className:"w-[76%]",children:l.jsx(mk,{selectedProduct:t,setSelectedProduct:e})}),l.jsx("div",{className:"w-[22%] border  mr-2",children:l.jsx(at,{name:"Multilocation",data:h,columns:[{key:"station",header:"Station"},{key:"lastPrice",header:"Last Price"},{key:"qty",header:"Qty"},{key:"location",header:"Location"}],highlightColumn:"station",heighValue:10})})]}),l.jsxs("div",{className:"mt-5",children:[l.jsxs("div",{className:"w-[97%] max-h-[20vh] flex justify-between 2xl:gap-0 gap-4 mx-auto",children:[l.jsxs("div",{className:"w-[12%] 2xl:w-[15%] flex flex-col items-center justify-center overflow-hidden",children:[l.jsx("div",{className:"w-full min-h-5 bg-gray-500"}),l.jsx("div",{className:"w-80 h-56 bg-no-repeat",style:{backgroundPosition:"center",backgroundSize:"contain",backgroundImage:`url(${t.picture||wk})`}})]}),l.jsx("div",{className:"w-[14.5%] 2xl:w-[22%]",children:l.jsx(at,{name:"Applied Model",data:t.appliedModels,columns:[{key:"make",header:"Make"},{key:"type",header:"Type"},{key:"remarks",header:"Remarks"}],highlightColumn:"Make"})}),l.jsx("div",{className:"w-40%",children:l.jsx(at,{name:"Purchase History",data:c,columns:[{key:"Br",header:"Br"},{key:"id",header:"GRN.No"},{key:"date",header:"Pur.Date"},{key:"Type",header:"Type"},{key:"supplierName",header:"Supplier Name"},{key:"quantity",header:"Qty"},{key:"price",header:"Unit Price"},{key:"total",header:"Total"}],highlightColumn:"UnitPrice"})}),l.jsx("div",{className:"w-[30%] 2xl:w-[23%]",children:l.jsx(at,{name:"Product Details",data:t.alternatives,columns:[{key:"productCode",header:"Product Code"},{key:"brand",header:"Brand"},{key:"name",header:"Product Name"},{key:"sellingPrice1",header:"Selling"}],handleRowClick:f=>{d(f.productCode)},highlightColumn:"productCode"})})]}),l.jsxs("div",{className:"w-[97%] flex min-h-[30vh] justify-between mx-auto mt-8",children:[l.jsx("div",{className:"w-[33%]",children:l.jsx(at,{name:"Quotation History",data:s,columns:[{key:"Br",header:"Br"},{key:"id",header:"Qutn.No"},{key:"date",header:"Qutn Date"},{key:"accountName",header:"Customer"},{key:"quantity",header:"Qty"},{key:"gAmount",header:"Unit Price"},{key:"total",header:"Total"}],highlightColumn:"Br"})}),l.jsx("div",{className:"w-[33%]",children:l.jsx(at,{name:"Delivery Note History",data:o,columns:[{key:"Br",header:"Br"},{key:"id",header:"DO.No"},{key:"date",header:"DO Date"},{key:"type",header:"Doc.Type"},{key:"accountName",header:"Customer"},{key:"quantity",header:"Qty"},{key:"gAmount",header:"Unit Price"},{key:"total",header:"Total"}],highlightColumn:"Br"})}),l.jsx("div",{className:"w-[32%]",children:l.jsx(at,{name:"Sales History",data:n,columns:[{key:"Br",header:"Br"},{key:"id",header:"Bill.No"},{key:"date",header:"Bill Date"},{key:"type",header:"Type"},{key:"accountName",header:"Customer"},{key:"quantity",header:"Qty"},{key:"gAmount",header:"Unit Price"}],highlightColumn:"Customer"})})]})]})]})},_k="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAABk9JREFUeF7t3MFOG1EQRNGB//9mElkiyiKyGbUxVZM+bMOj+9Wdm7KNkrfDlwQkcDeBN9lIQAL3EyCIp0MCDxIgiMdDAgTxDEhgloAGmeXm1JIECLIEtGvOEiDILDenliRAkCWgXXOWAEFmuTm1JAGCLAHtmrMECDLLzaklCRBkCWjXnCVAkFluTi1JgCBLQLvmLAGCzHJzakkCBFkC2jVnCRBklptTSxIgyBLQrjlLgCCz3JxakgBBloB2zVkCBJnl5tSSBAiyBLRrzhIgyCw3p5YkQJAloF1zlgBBZrk5tSQBgiwB7ZqzBAgyy82pJQkQZAlo15wlQJBZbk4tSYAgS0C75iwBgsxyc2pJAgRZAto1ZwkQZJabU0sSIMgS0K45S4Ags9ycWpIAQZaAds1ZAgSZ5ebUkgQIsgS0a84SIMgsN6eWJECQJaBdc5YAQWa5ObUkAYIsAe2aswQIMsvNqSUJEGQJaNecJUCQWW5OLUmAIHnQH8dx3OPw6ziO9/yKezcgSJ49QfIM7m5AkDwcguQZEKSYwe1l1KMvf4kF4Qk/GP7naILkGWiQYgYEKYajQfJwCJJnoEGKGRCkGI4GycMhSJ6BBilmQJBiOBokD+eRIH6THuZDkDCA4zgIkmfgJVYxA4IUw9EgeTgEyTPQIMUMCFIMR4Pk4RAkz0CDFDMgSDEcDZKHQ5A8Aw1SzIAgxXA0SB4OQfIMNEgxA4IUw9EgeTgEyTPQIMUMCFIMR4Pk4RAkz0CDFDMgSDEcDZKHQ5A8Aw1SzIAgxXA0SB4OQfIMNEgxA4IUw9EgeTgEyTPQIMUMCFIMR4Pk4RAkz0CDFDMgSDEcDZKHQ5A8Aw1SzIAgxXA0SB4OQfIMNEgxA//1aDEcDZKHQ5A8Aw1SzIAgxXA0SB4OQfIMNEgxA4IUw9EgeTg+xcoz0CDFDAhSDEeD5OEQJM9AgxQzIEgxHA2Sh+NNep6BBilmQJBiOBokD4cgeQYapJgBQYrhaJA8nI/jOO5xuMnznl9x7wZXFuTRg3UVojcBrszgbM6XFf3KcL56aXIWnu97fQIEeX3G/0wgSCD04UiCDIN75hhBnknv589e8tXKJZf+ZEuQn3/In5l4yWftkksT5JnnNHb2ks/aJZcmSOwhf2bwJZ+1Sy79San9Y94/LwEf/Y7jdpUrMzgrjDfpZ5Pyff8k8JXoGwSqfSyEn0dDkDyDuxsQJA/nq0/jMAoyEn4w/JMfNmAUZCT8YPgnBLnsm9t8rN+zAUG+J8dnfop/cvtMei8+S5AXB3zixxPkREipbyFIKvm/cwmSZ+BTrGIGBCmGo0HycHzMm2egQYoZEKQYjgbJwyFInoEGKWZAkGI4GiQPhyB5BhqkmAFBiuFokDwcguQZaJBiBgQphqNB8nAIkmegQYoZEKQYjgbJwyFInoEGKWZAkGI4GiQPhyB5BhqkmAFBiuFokDwcguQZaJBiBgQphqNB8nAIkmegQYoZEKQYjgbJwyFInoEGKWZAkGI4GiQPhyB5BhqkmAFBiuFokDwcguQZaJBiBgQphqNB8nAIkmegQYoZEKQYjgbJwyFInoEGKWZAkGI4GiQPhyB5BhqkmAFBiuFokDwcguQZaJBiBgQphqNB8nAIkmegQYoZEKQYjgbJwyFInoEGKWZAkGI4GiQPhyB5BhqkmAFBiuFokDwcguQZaJBiBo8Euf3Ze/Hu//1qGiSP+OM4jnscCBLmQ5AwAOO7EyBINx/bhRMgSBiA8d0JEKSbj+3CCRAkDMD47gQI0s3HduEECBIGYHx3AgTp5mO7cAIECQMwvjsBgnTzsV04AYKEARjfnQBBuvnYLpwAQcIAjO9OgCDdfGwXToAgYQDGdydAkG4+tgsnQJAwAOO7EyBINx/bhRMgSBiA8d0JEKSbj+3CCRAkDMD47gQI0s3HduEECBIGYHx3AgTp5mO7cAIECQMwvjsBgnTzsV04AYKEARjfnQBBuvnYLpwAQcIAjO9OgCDdfGwXToAgYQDGdydAkG4+tgsnQJAwAOO7EyBINx/bhRMgSBiA8d0JEKSbj+3CCRAkDMD47gQI0s3HduEECBIGYHx3AgTp5mO7cAIECQMwvjsBgnTzsV04AYKEARjfnQBBuvnYLpwAQcIAjO9OgCDdfGwXTuA35fycyVmrI7cAAAAASUVORK5CYII=",bk=({AppliedModel:t,Alternative:e,mode:n,onAlternativeChange:r,onAppliedModelChange:s,categories:i})=>{const[o,a]=_.useState([]),[c,u]=_.useState([]),[d,h]=_.useState("alternative"),[f,y]=_.useState(!1),[v,w]=_.useState([]);_.useEffect(()=>{t&&a(t),e&&u(e)},[t,e]),_.useEffect(()=>{s(o)},[o]),_.useEffect(()=>{r(c)},[c]);const C=S=>{const{productCode:k,brand:j,name:R,sellingPrice1:G}=S;u(B=>[...B,{productCode:k,brand:j,name:R,sellingPrice1:G}]),y(!1)},g=S=>{if(S.preventDefault(),d==="applied"){const k={make:"",type:"",remarks:""};a(j=>[...j,k]),w(j=>[...j,[]])}else y(!0)},p=(S,k)=>{k==="applied"?(a(j=>j.filter((R,G)=>G!==S)),w(j=>j.filter((R,G)=>G!==S))):u(j=>j.filter((R,G)=>G!==S))},m=S=>{h(S)},x=(S,k,j)=>{a(R=>R.map((G,B)=>B===S?{...G,[k]:j}:G))},b=(S,k)=>{x(S,"type",k.shortForm)},N=(S,k)=>{w(j=>j.map((R,G)=>G===S?k.subCategories:R)),x(S,"make",k.shortForm)},E=()=>{y(!1)};return l.jsxs("div",{className:"relative w-full flex flex-col",children:[l.jsxs("div",{className:"flex justify-center gap-2",children:[l.jsx("button",{onClick:()=>m("applied"),className:"px-6 py-1 text-sm bg-white border border-gray-300",type:"button",children:"Applied Model"}),l.jsx("button",{onClick:()=>m("alternative"),className:"px-6 py-1 text-sm bg-white border border-gray-300",type:"button",children:"Alternative"}),l.jsx("button",{onClick:g,className:"px-3 bg-white border border-gray-300 text-sm",type:"button",children:l.jsx("img",{src:_k,alt:"",className:"w-6 h-6"})})]}),d==="applied"&&l.jsx("div",{className:"min-h-32 bg-blue-100 mt-2 ml-2",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-blue-800 text-white",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-2 py-1 text-sm bg-yellow-200 font-bold italic text-black",children:"Make"}),l.jsx("th",{className:"px-2 py-1 text-sm",children:"Type"}),l.jsx("th",{className:"px-1 py-1 text-sm font-normal",children:"Remarks"}),l.jsx("th",{className:"py-1 text-sm font-normal",children:"Actions"})]})}),l.jsx("tbody",{children:o.map((S,k)=>l.jsxs("tr",{children:[l.jsxs("td",{className:"border text-sm relative",children:[l.jsx("div",{className:"px-1 py-1 text-xs w-full h-full whitespace-nowrap overflow-hidden text-ellipsis",children:l.jsx("input",{type:"text",value:S.make.length>6?S.make.substring(0,6)+"...":S.make,className:"w-full py-1 px-1 h-full outline-none bg-white",disabled:n==="delete"||!0,title:S.make})}),n!=="delete"&&l.jsx(se,{items:i,onSelect:j=>N(k,j),columns:[{key:"shortForm",label:"Category ID"},{key:"name",label:"Category Name"}],style:{top:"top-4 left-[78%]"},all:!0})]}),l.jsxs("td",{className:"border text-sm relative",children:[l.jsx("div",{className:"px-1 py-1 text-xs w-full h-full whitespace-nowrap overflow-hidden text-ellipsis",children:l.jsx("input",{type:"text",value:S.type.length>6?S.type.substring(0,6)+"...":S.type,className:"w-full py-1 px-1 h-full outline-none bg-white",disabled:n==="delete",title:S.type})}),n!=="delete"&&l.jsx(se,{items:v[k]||[],onSelect:j=>b(k,j),columns:[{key:"name",label:"Category Name"},{key:"shortForm",label:"Short Form"}],style:{top:"top-4 left-[78%]"},all:!0})]}),l.jsx("td",{className:"px-4 py-2 border text-sm",children:l.jsx("input",{type:"text",value:S.remarks,onChange:j=>x(k,"remarks",j.target.value),className:"  px-2 py-1 text-sm w-full bg-transparent outline-none focus:bg-white",disabled:n==="delete"})}),l.jsx("td",{className:"px-4 py-2 border text-sm",children:l.jsx("button",{onClick:()=>p(k,"applied"),className:"px-2 py-1 text-sm bg-red-500 text-white rounded",type:"button",children:"Delete"})})]},k))})]})}),d==="alternative"&&l.jsx("div",{className:"min-h-32 bg-blue-100 mt-2 ml-2",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-blue-800 text-white",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-2 border text-sm bg-orange-400 font-normal",children:"Alternate Id"}),l.jsx("th",{className:"px-1 border text-sm font-normal",children:"Brand"}),l.jsx("th",{className:"border text-sm font-normal",children:"Actions"})]})}),l.jsx("tbody",{children:c.map((S,k)=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-1 border text-sm border-r-gray-300 border-r-2",children:S.productCode}),l.jsx("td",{className:"px-4 py-1 border text-sm border-r-gray-300 border-r-2",children:S.brand}),l.jsx("td",{className:"px-4 py-1 border text-sm border-r-gray-300 border-r-2",children:l.jsx("button",{onClick:()=>p(k,"alternative"),className:"px-2 py-1 text-sm bg-red-500 text-white rounded",type:"button",children:"Delete"})})]},k))})]})}),d==="alternative"&&f&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center ",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background  ",children:[l.jsx("button",{className:"text-red-500 mb-2",onClick:E,children:"Close"}),l.jsx(qn,{onProductSelect:C})]})})]})},Nk=async t=>{try{const e=P(Te,"brands/"),n=Gt(e);if((await Oi(e,s=>{if(s=s||{},!Object.values(s).some(o=>o.name.toLowerCase()===t.name.toLowerCase()||o.shortForm.toLowerCase()===t.shortForm.toLowerCase()))return s[n.key]={...t,id:n.key},s})).committed)return await gt(n,{...t,id:n.key}),n.key;throw new Error("Brand already exists.")}catch(e){throw console.error("Failed to add brand:",e),new Error("Failed to add brand")}},Vv=async()=>{try{const t=P(Te,"brands/"),e=await U(t);if(e.exists()){const n=[];return e.forEach(r=>{const s=r.val();n.push({id:r.key,...s})}),n}else return console.log("No brands found."),[]}catch(t){throw console.error("Failed to retrieve brands:",t),new Error("Failed to retrieve brands")}},Ck=async t=>{try{const e=P(Te,"brands"),n=await U(e);if(n.exists()){let r=null;if(n.forEach(s=>{s.val().shortForm===t&&(r=s.key)}),r){const s=P(Te,`brands/${r}`);await gt(s,null),console.log(`Brand with ID ${t} has been deleted.`)}else console.log(`No brand found with ID ${t}.`)}else console.log("No brands found.")}catch(e){throw console.error("Failed to delete brand:",e),new Error("Failed to delete brand")}},Sk=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result),r.onerror=s=>n(s)}),hp=async t=>await Sk(t),eu=[{shortForm:"EX1",Description:"No Vat",Vatpercentage:"0.00",startDate:"12/0/0"},{shortForm:"EX2",Description:"Standard Vat",Vatpercentage:"5",startDate:"12/0/0"}];function Ek(){const[t,e]=_.useState("none"),[n,r]=_.useState(null),[s,i]=_.useState(!1),[o,a]=_.useState(!1),[c,u]=_.useState([]),[d,h]=_.useState([]),[f,y]=_.useState([]),v=async()=>{const x=await Vv();h(x);const b=await Ql();y(b)},w=async()=>{const x=await Wd();u(x)};_.useEffect(()=>{w(),v()},[]);const C=x=>{r(x),i(!1),m()},g=x=>{e(x),r(null),i(x==="edit")},p=()=>{a(!0)},m=()=>{a(!1)};return l.jsx("div",{children:l.jsxs("div",{className:"w-[98%] mx-auto",children:[l.jsxs("nav",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>g("add"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Add"}),l.jsx("button",{onClick:()=>g("edit"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Edit"}),l.jsx("button",{onClick:()=>g("delete"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Delete"})]}),t==="none"&&l.jsx(Oa,{mode:"delete",initialProduct:{},cb:w,handleActionChange:g,brands:d,categories:f}),(t==="edit"||t==="delete")&&!n&&l.jsxs("div",{className:"h-[94vh] flex flex-col items-center",children:[l.jsxs("div",{children:["Select Product:"," ",l.jsx("input",{type:"text",disabled:!0,className:"bg-white"}),l.jsxs("button",{className:"w-6 relative",onClick:p,children:[l.jsx("img",{src:$g,className:"w-4 h-4 absolute -top-3 -left-5     "})," "]})]}),o&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center ",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background  ",children:[l.jsx("button",{className:"text-red-500 mb-2",onClick:m,children:"Close"}),l.jsx(qn,{onProductSelect:C})]})})]}),t==="add"&&l.jsx(Oa,{mode:"add",initialProduct:{branch:1},cb:w,handleActionChange:g,brands:d,categories:f}),(t==="edit"||t==="delete")&&n&&l.jsx(l.Fragment,{children:l.jsx(Oa,{mode:t,initialProduct:n,cb:w,handleActionChange:g,brands:d,categories:f})})]})})}const Ra={id:"",name:"",productCode:"",brand:"",description:"",description2:"",department:"",category:"",basicUnit:"",status:"",class:"",subCategory:"",uniqueId:"",sellingPrice1:"",sellingPrice2:"",sellingPrice3:"",picture:"",reOrder:"",hsCode:"",minOrder:"",maxOrder:"",shelfLife:"",vatType:"",origin:"",alternatives:[],appliedModels:[]};function Oa({mode:t,initialProduct:e,cb:n,handleActionChange:r,brands:s,categories:i}){const[o,a]=_.useState(t==="delete"),c=S=>{const{name:k,value:j}=S.target;d(R=>({...R,[k]:j}))},[u,d]=_.useState(Ra),[h,f]=_.useState(null);_.useEffect(()=>{d(t==="edit"||t==="delete"?{id:e.id||"",branch:e.branch||"",name:e.name||"",productCode:e.productCode||"",brand:e.brand||"",description:e.description||"",description2:e.description2||"",department:e.department||"",category:e.category||"",basicUnit:e.basicUnit||"",status:e.status||"",class:e.class||"",subCategory:e.subCategory||"",uniqueId:e.uniqueId||"",copyAllBranch:e.copyAllBranch||"NO",sellingPrice1:e.sellingPrice1||"",sellingPrice2:e.sellingPrice2||"",sellingPrice3:e.sellingPrice3||"",picture:e.picture||"",reOrder:e.reOrder||"",hsCode:e.hsCode||"",minOrder:e.minOrder||"",maxOrder:e.maxOrder||"",shelfLife:e.shelfLife,vatType:e.vatType||"",origin:e.origin||"",barCode:e.barCode||"",appliedModels:e.appliedModels||[],alternatives:e.alternatives||[]}:Ra)},[t,e]);const[y,v]=_.useState(null),w=S=>{v(S.target.files[0])},C=[],g=S=>{d(k=>({...k,brand:S||""}))},p=S=>{const k=i.find(j=>j.shortForm===S);k&&k.subCategories&&typeof k.subCategories=="object"?k.subCategories=Object.values(k.subCategories):k.subCategories=[],d(j=>({...j,category:k?k.name:""})),f(k)},m=S=>{d(k=>({...k,subCategory:S||""}))},x=S=>{const k=eu.find(j=>j.shortForm===S);d(j=>({...j,vatType:k?k.Vatpercentage:""}))},b=async S=>{S.preventDefault();const{id:k,...j}=u;if(t==="add"){if(y){const G=await hp(y);j.picture=G}await qE(j)&&alert("Product Added Successfully")}else if(t==="edit"){if(y){const R=await hp(y);j.picture=R}await GE(k,j),alert("Product Updated Successfully")}else t==="delete"&&(await YE(k),alert("Product Deleted Successfully"));n&&n(),d(Ra),v(null)},N=S=>{d(k=>({...k,appliedModels:S}))},E=S=>{d(k=>({...k,alternatives:S}))};return l.jsx("form",{onSubmit:b,className:"min-h-[92vh] ",children:l.jsxs("div",{className:"w-[100%]  mx-auto mt-4",children:[l.jsxs("div",{className:"flex justify-between  py-10 px-2 shadow-lg",children:[l.jsxs("div",{className:"flex flex-col gap-2 w-[45%] ",children:[l.jsxs("div",{className:"flex w-full ",children:[l.jsxs("div",{className:"w-1/4 flex items-center",children:[l.jsx("span",{className:"w-1/2  text-right inline-block",children:"Branch:"}),l.jsx("input",{type:"number",name:"branch",value:1,onChange:c,className:"w-1/2 h-7 px-1 border  border-gray-600 ml-1",disabled:!0})]}),l.jsxs("div",{className:"w-3/4 flex items-center",children:[l.jsx("span",{className:"w-1/4 text-right inline-block",children:"Name:"}),l.jsx("input",{type:"text",name:"name",value:u.name,onChange:c,className:"uppercase  w-3/4 h-7 border px-1 border-gray-600 ml-1",disabled:o})]})]}),l.jsxs("div",{className:"flex w-full",children:[l.jsxs("div",{className:"relative w-1/4 flex items-center",children:[l.jsx("span",{className:"w-1/2 text-right mr-[2px] inline-block",children:"Brand:"}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",name:"brand",value:u.brand||"",className:`${t=="edit"||t=="add"?"bg-white":""} w-full px-2 h-7   border border-gray-600`,disabled:!0}),!o&&l.jsx(se,{items:s,onSelect:g,style:{top:"top-1 left-[75%]"},columns:[{key:"shortForm",label:"Brand Id"},{key:"name",label:"Name"}]})]})]}),l.jsxs("div",{className:"w-3/4 flex items-center",children:[l.jsx("span",{className:"2xl:w-1/4 w-1/2 text-right inline-block",children:"Product Code:"}),l.jsx("input",{type:"text",name:"productCode",value:u.productCode,onChange:c,className:"uppercase w-3/4 h-7  border px-1 border-gray-600 ml-1",disabled:o})]})]}),l.jsxs("div",{className:"w-full flex items-center",children:[l.jsx("span",{className:"w-[12.5%]  text-left inline-block",children:"Description:"}),l.jsx("input",{type:"text",name:"description",value:u.description,onChange:c,className:" w-[87.5%] h-7  border px-1 border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-full flex items-center",children:[l.jsx("span",{className:"w-[15%]  text-left inline-block ",children:"Description2:"}),l.jsx("input",{type:"text",name:"description2",value:u.description2,onChange:c,className:" w-[85%] h-7 border px-1  border-gray-600 ",disabled:o})]})]}),l.jsxs("div",{className:"flex flex-col gap-2 w-[45%]",children:[l.jsxs("div",{className:"flex w-full  justify-between",children:[l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Department:"}),l.jsx("input",{type:"text",name:"department",value:u.department,onChange:c,className:"flex-1 h-7 px-1 border  border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Class:"}),l.jsx("input",{type:"text",name:"class",value:u.class,onChange:c,className:"uppercase flex-1 h-7  border px-1 border-gray-600 ml-1",disabled:o})]})]}),l.jsxs("div",{className:"flex w-full  justify-between",children:[l.jsxs("div",{className:" relative w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Category:"}),l.jsx("input",{type:"text",name:"category",value:u.category||"",className:` ${t=="edit"||t=="add"?"bg-white":""} flex-1 h-7 px-1 border border-gray-600 ml-1 `,disabled:!0}),!o&&l.jsx(se,{items:i,onSelect:p,style:{top:"top-1 left-[92%]"},columns:[{key:"shortForm",label:"Category Id"},{key:"name",label:"Category Name"}]})]}),l.jsxs("div",{className:"w-[45%] relative flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Sub.Category:"}),l.jsx("input",{type:"text",name:"subCategory",value:u.subCategory||"",disabled:!0,className:` ${t=="edit"||t=="add"?"bg-white":""} flex-1 h-7 px-1 border border-gray-600 ml-1 `}),!o&&l.jsx(se,{items:h?h.subCategories:[],onSelect:m,style:{top:"top-1 left-[94%]"},columns:[{key:"shortForm",label:"Sub Category Id"},{key:"name",label:"Category Name"}]})]})]}),l.jsxs("div",{className:"flex w-full  justify-between",children:[l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Basic Unit:"}),l.jsx("input",{type:"text",name:"basicUnit",value:u.basicUnit,onChange:c,className:"flex-1 h-7      px-1 border border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"UniqueID:"}),l.jsx("input",{type:"text",name:"uniqueId",value:u.uniqueId,onChange:c,className:"uppercase      flex-1 h-7 border px-1 border-gray-600 ml-1",disabled:o})]})]}),l.jsxs("div",{className:"flex w-full  justify-between",children:[l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Status:"}),l.jsx("input",{type:"text",name:"status",value:u.status,onChange:c,className:"flex-1 h-7      px-1 border border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Copy In Branches:"}),l.jsxs("select",{name:"copyAllBranch",value:u.copyAllBranch,onChange:c,className:"uppercase      flex-1 h-7 border px-1 border-gray-600 ml-1",disabled:o,children:[l.jsx("option",{value:"Yes",children:"Yes"}),l.jsx("option",{value:"No",children:"No"})]})]})]})]})]}),l.jsxs("div",{className:"py-5 px-2  shadow-lg mt-6 ",children:[l.jsx("h1",{className:"ml-4 text-lg font-medium",children:"General"}),l.jsxs("div",{className:"w-[95%] mx-auto mt-5  flex gap-2 flex-wrap",children:[l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Selling Price 1:"}),l.jsx("input",{type:"number",name:"sellingPrice1",value:u.sellingPrice1,onChange:c,className:"flex-1 h-7 px-1 border       border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Re-Order:"}),l.jsx("input",{type:"number",name:"reOrder",value:u.reOrder,onChange:c,className:"flex-1 h-7 px-1 border      border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Origin:"}),l.jsx("input",{type:"text",name:"origin",value:u.origin,onChange:c,className:"flex-1 h-7 px-1 border       border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Selling Price 2:"}),l.jsx("input",{type:"number",name:"sellingPrice2",value:u.sellingPrice2,onChange:c,className:"flex-1 h-7 px-1 border       border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Min-Order:"}),l.jsx("input",{type:"number",name:"minOrder",value:u.minOrder,onChange:c,className:"flex-1 h-7 px-1 border      border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"HS code:"}),l.jsx("input",{type:"text",name:"hsCode",value:u.hsCode,onChange:c,className:"flex-1 h-7 px-1 border  border-gray-600 ml-1     ",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Selling Price 3:"}),l.jsx("input",{type:"number",name:"sellingPrice3",value:u.sellingPrice3,onChange:c,className:"flex-1 h-7 px-1 border  border-gray-600 ml-1     ",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Max-Order:"}),l.jsx("input",{type:"number",name:"maxOrder",value:u.maxOrder,onChange:c,className:"flex-1 h-7 px-1 border  border-gray-600 ml-1     ",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Bar Code:"}),l.jsx("input",{type:"number",name:"barCode",value:u.barCode,onChange:c,className:"flex-1 h-7      px-1 border  border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center flex-col",children:[l.jsxs("div",{className:"flex justify-between w-[100%]",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Picture:"}),l.jsx("input",{type:"file",name:"picture",onChange:w,className:"flex-1 h-7      px-1 border  border-gray-600 ml-1",disabled:o})]}),u.picture&&l.jsx("p",{children:kk(u.picture)})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Shelf Life:"}),l.jsx("input",{type:"text",name:"shelfLife",value:u.shelfLife,onChange:c,className:"flex-1 h-7      px-1 border  border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] relative flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Vat type:"}),l.jsx("input",{type:"text",name:"vatType",value:u.vatType,disabled:!0,className:` ${t=="edit"||t=="add"?"bg-white":""} flex-1 h-7      px-1 border  border-gray-600 ml-1 `}),!o&&l.jsx(se,{items:eu,onSelect:x,style:{top:"top-1 left-[94%]"},columns:[{key:"shortForm",label:"VAT Code"},{key:"Description",label:"Description"},{key:"Vatpercentage",label:"VAT Percentage"}]})]})]})]}),l.jsxs("div",{className:"mt-8 flex",children:[l.jsx("div",{className:"w-[70%] min-h-36 ",children:l.jsx(at,{data:C,columns:[{key:"unit",header:"Unit"},{key:"Fraction",header:"Fraction"},{key:"GWeight",header:"Gross Weight"},{key:"NetWeight",header:"Net Weight"},{key:"length",header:"Length"},{key:"height",header:"Height"},{key:"breadth",header:"Breadth"},{key:"volume",header:"Volume"},{key:"packingSize",header:"Packing Size"},{key:"ID",header:"ID"}],highlightColumn:"unit",name:"Details"})}),l.jsx("div",{className:"w-[30%]",children:l.jsx(bk,{Alternative:e.alternatives,AppliedModel:e.appliedModels,onAlternativeChange:E,onAppliedModelChange:N,categories:i})})]}),!(Object.keys(e).length===0&&t==="delete")&&l.jsxs("button",{type:"submit",onClick:b,className:"  bg-white   px-5 py-1 w-full  border border-gray-100 mt-2",children:[t," product"," "]})]})})}function kk(t){const e=t.split("\\"),r=e[e.length-1].split(";");return r[r.length-1]}function Ik({initialRows:t,onDataChange:e,mode:n}){const[r,s]=_.useState([]),[i,o]=_.useState(!1),[a,c]=_.useState(null);_.useEffect(()=>{t&&t.length>0&&s(t)},[t]);const u=()=>{const w={productCode:"",name:"",quantity:1,price:""},C=[...r,w];s(C),e(C)},d=w=>{const C=r.filter((g,p)=>p!==w);s(C),e(C)},h=(w,C,g)=>{const p=r.map((m,x)=>x===w?{...m,[C]:g}:m);s(p),e(p)},f=w=>{c(w),o(!0)},y=()=>{o(!1),c(null)},v=w=>{if(a!==null){const C=r.map((g,p)=>p===a?{...g,productCode:w.productCode,name:w.name,price:w.sellingPrice1}:g);s(C),e(C)}y()};return l.jsxs("div",{className:"mt-6 min-h-[10vh] w-[98%] mx-auto",children:[n!=="none"&&n!=="Delete"&&l.jsx("button",{onClick:u,className:"bg-white text-black border-gray-300 border px-6 py-2 mb-3 focus:scale-95",type:"button",children:"Add Product"}),l.jsx("div",{className:"min-h-[30vh] max-h-[30vh] scrollbar overflow-auto bg-blue-100",children:l.jsxs("table",{className:"w-full border-collapse border border-gray-300 bg-blue-100 ",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-blue-900 text-white",children:[l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Product Code"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Name"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Quantity"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Price"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Actions"})]})}),l.jsx("tbody",{children:r.map((w,C)=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:w.productCode,onClick:()=>f(C),readOnly:!0,className:"w-full bg-transparent outline-none cursor-pointer focus:bg-white",disabled:n==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:w.name,onChange:g=>h(C,"name",g.target.value),disabled:n==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:w.quantity,onChange:g=>h(C,"quantity",g.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:n==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:w.price,onChange:g=>h(C,"price",g.target.value),disabled:n==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 py-1 text-center px-1",children:l.jsx("button",{onClick:()=>d(C),className:"text-red-500",children:"Delete"})})]},C))})]})}),i&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background",children:[l.jsx("button",{className:"text-red-500 mb-2",onClick:y,children:"Close"}),l.jsx(qn,{onProductSelect:v})]})})]})}function Wv(t){if(!(t instanceof Date))throw new Error("Input must be a Date object");const e=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return`${e}/${n}/${r}`}function Qv({mode:t,initialInvoice:e}){const[n,r]=_.useState(t||"none"),[s,i]=_.useState(e||null),[o,a]=_.useState([]),[c,u]=_.useState([]),d=async()=>{const y=await zv();u(y)};_.useEffect(()=>{(async()=>{const v=await FE();a(v),d()})()},[]);const h=y=>{i(y)},f=y=>{r(y),i(null)};return l.jsx("div",{children:l.jsxs("div",{className:"w-[98%] mx-auto",children:[l.jsxs("nav",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>f("Add"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Add"}),l.jsx("button",{onClick:()=>f("Edit"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Edit"}),l.jsx("button",{onClick:()=>f("Delete"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Delete"})]}),n==="none"&&l.jsx(Ma,{mode:"none",initialInvoice:{},suppliers:o,cb:d}),(n==="Edit"||n==="Delete")&&!s&&l.jsx("div",{className:"h-[94vh] flex flex-col items-center",children:l.jsxs("div",{children:["Select Invoice: ",l.jsx("input",{type:"text"}),l.jsx(se,{items:c,onSelect:h,style:{top:"top-11 left-[895px]"},columns:[{key:"id",label:"Invoice No"},{key:"supplierName",label:"Supplier Name"}],all:!0})]})}),n==="Add"&&l.jsx(Ma,{mode:"Add",initialInvoice:{},suppliers:o,cb:d}),(n==="Edit"||n==="Delete")&&s&&l.jsx(Ma,{mode:n,initialInvoice:s,suppliers:o,cb:d})]})})}const fp={supplierId:"",supplierName:"",products:[],invoiceNo:"",date:Wv(new Date)},Ma=({initialInvoice:t,mode:e,fullHeight:n,suppliers:r,cb:s})=>{const[i,o]=_.useState(fp),[a,c]=_.useState(e==="Delete");_.useEffect(()=>{o({supplierId:t.supplierId||"",supplierName:t.supplierName||"",products:t.products||[],invoiceNo:t.id||"",date:t.date?t.date:Wv(new Date)})},[t]);const u=async y=>{const{invoiceNo:v,...w}=i;y.preventDefault(),e==="Edit"?(await yk(v,w),alert("Purchase Invoice edited")):e==="Add"?(await gk(w),alert("Purchase Invoice added")):e==="Delete"&&(await vk(v),alert("Purchase Invoice deleted")),o(fp),s&&s()},d=y=>{o(v=>({...v,supplierName:y.name,supplierId:y.id}))},h=y=>{o(v=>({...v,products:y}))},f=y=>y?y.reduce((v,w)=>v+w.quantity*w.price,0).toFixed(2):0;return l.jsxs("form",{onSubmit:u,className:` ${n?"min-h-[99vh]":"min-h-[88.4vh]"}     bg-background`,children:[l.jsxs("div",{className:`flex justify-around    ${n?"":"mt-10"}  border w-[70%] mx-auto`,children:[l.jsxs("div",{className:`flex items-center relative ${n?"mt-20":""}`,children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Supplier Name:"}),l.jsx("input",{type:"text",value:i.supplierName,className:`h-7 px-1 border border-gray-600 ml-1 ${!a&&e!=="none"?"bg-white":""}`,disabled:a||e==="none",readOnly:!0}),!a&&e!=="none"&&l.jsx(se,{items:r,onSelect:d,style:{top:"top-1 left-[284px]"},columns:[{key:"id",label:"Supplier ID"},{key:"name",label:"Supplier Name"}],all:!0})]}),l.jsxs("div",{className:`flex items-center relative ${n?"mt-20":""}`,children:[l.jsx("span",{className:"w-[30%] text-right inline-block",children:"Supplier Id:"}),l.jsx("input",{type:"text",value:i.supplierId,className:`h-7 px-1 border border-gray-600 ml-1 ${!a&&e!=="none"?"bg-white":""}`,disabled:a||e==="none",readOnly:!0})]}),l.jsx("div",{className:`flex items-center relative ${n?"mt-20":""}`,children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"w-[50%] text-right inline-block",children:"Date:"}),l.jsx("input",{type:"text",value:i.date,className:`h-7 px-1 border border-gray-600 ml-1 ${!a&&e!=="none"?"bg-white":""}`,disabled:!0,readOnly:!0})]})})]}),l.jsx("div",{className:"mt-16",children:l.jsx(Ik,{initialRows:t.products,mode:e,onDataChange:h})}),l.jsxs("div",{className:"flex ml-4 mt-5 items-center",children:[l.jsx("span",{className:"text-right inline-block",children:"Total Price:"}),l.jsx("input",{type:"text",value:f(i.products),className:"h-7 px-1 bg-white border border-gray-600 ml-1",disabled:!0})]}),e!=="none"&&l.jsxs("button",{type:"submit",className:"w-full mt-5 py-1 bg-white border-gray-300",children:[e," Invoice"]})]})},jk=()=>{const[t,e]=_.useState([]),[n,r]=_.useState([]),[s,i]=_.useState([]),[o,a]=_.useState([]);_.useEffect(()=>{const w=async()=>{const g=await Lv();e(g)},C=async()=>{const g=await zv();a(g)};w(),C(),c(),u()},[]);const c=async()=>{const w=await Bv();r(w)},u=async()=>{const w=await zd();i(w)},[d,h]=_.useState(!0),[f,y]=_.useState({}),v=w=>{y(w),h(!1)};return l.jsxs(l.Fragment,{children:[d&&l.jsxs("div",{className:"min-h-[100vh]",children:[l.jsxs("div",{className:"min-h-[20vh] flex   justify-center",children:[l.jsxs("div",{className:"flex  border relative mt-10 justify-center mx-auto w-[30%]",children:[l.jsx("span",{className:"mr-2",children:"Select Cash Invoice:"}),l.jsx("input",{type:"text",className:"border w-[55%] h-7 px-1 text-sm bg-white cursor-pointer",placeholder:"View Invoices",disabled:!0,readOnly:!0}),l.jsx(se,{items:t,columns:[{key:"DocNo",label:"Bill No"},{key:"date",label:"Bill Date"},{key:"accCode",label:"Account"},{key:"accountName",label:"Account Name"},{key:"total",label:"Amount"},{key:"doctype",label:"DOC type"},{key:"sMan",label:"S.Id"},{key:"payment",label:"Tr.type"}],onSelect:v,style:{top:"top-[5px] left-[88%] "},all:!0,name:"invoiceList"})]}),l.jsxs("div",{className:"flex  border relative mt-10 justify-center mx-auto w-[40%]",children:[l.jsx("span",{className:"mr-2",children:"Select Purchase Invoice:"}),l.jsx("input",{type:"text",className:"border w-[40%] h-7 px-1 text-sm bg-white cursor-pointer",placeholder:"View Invoices",disabled:!0,readOnly:!0}),l.jsx(se,{items:o,columns:[{key:"invoiceNo",label:"Bill No"},{key:"supplierId",label:"Supplier ID"},{key:"supplierName",label:"Supplier Name"},{key:"date",label:"Date"}],onSelect:v,style:{top:"top-[5px] left-[81%] "},all:!0,name:"invoiceList"})]})]}),l.jsxs("div",{className:"min-h-[20vh] flex   justify-center",children:[l.jsxs("div",{className:"flex  border relative mt-10 justify-center mx-auto w-[30%]",children:[l.jsx("span",{className:"mr-2",children:"Select Delivery Note:"}),l.jsx("input",{type:"text",className:"border w-[55%] h-7 px-1 text-sm bg-white cursor-pointer",placeholder:"View Invoices",disabled:!0,readOnly:!0}),l.jsx(se,{items:n,columns:[{key:"DocNo",label:"Bill No"},{key:"date",label:"Bill Date"},{key:"accCode",label:"Account"},{key:"accountName",label:"Account Name"},{key:"total",label:"Amount"},{key:"doctype",label:"DOC type"},{key:"sMan",label:"S.Id"},{key:"payment",label:"Tr.type"}],onSelect:v,style:{top:"top-[5px] left-[88%] "},all:!0,name:"invoiceList"})]}),l.jsxs("div",{className:"flex  border relative mt-10 justify-center mx-auto w-[40%]",children:[l.jsx("span",{className:"mr-2 w-[26%] text-right",children:"Select Quotation :"}),l.jsx("input",{type:"text",className:"border w-[40%] h-7 px-1 text-sm bg-white cursor-pointer",placeholder:"View Invoices",disabled:!0,readOnly:!0}),l.jsx(se,{items:s,columns:[{key:"DocNo",label:"Bill No"},{key:"date",label:"Bill Date"},{key:"accCode",label:"Account"},{key:"accountName",label:"Account Name"},{key:"total",label:"Amount"},{key:"doctype",label:"DOC type"},{key:"sMan",label:"S.Id"},{key:"payment",label:"Tr.type"}],onSelect:v,style:{top:"top-[5px] left-[80%] "},all:!0,name:"invoiceList"})]})]})]}),Object.keys(f).includes("supplierName")?l.jsx("div",{div:!0,className:"w-[95%] mx-auto mt-1",children:l.jsx(Qv,{mode:"Edit",initialInvoice:f})}):Object.keys(f).length>0&&l.jsx("div",{className:"w-[95%] mx-auto mt-1",children:l.jsx(Uv,{mode:"edit",initialInvoice:f})})]})};function Tk(){const[t,e]=_.useState("none"),[n,r]=_.useState(null),[s,i]=_.useState([]),[o,a]=_.useState([]),c=async()=>{const f=await Ud();i(f)},u=async()=>{const f=await ME();a(f)};_.useEffect(()=>{c(),u()},[]);const d=f=>{r(f)},h=f=>{e(f),r(null)};return l.jsx("div",{children:l.jsxs("div",{className:"w-[98%] mx-auto",children:[l.jsxs("nav",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>h("add"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Add"}),l.jsx("button",{onClick:()=>h("edit"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Edit"}),l.jsx("button",{onClick:()=>h("delete"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Delete"})]}),t==="none"&&l.jsx(Fa,{areas:s,mode:"delete",initialSupplier:{},cb:u,customers:o}),(t==="edit"||t==="delete")&&!n&&l.jsx("div",{className:"h-[94vh] flex flex-col items-center",children:l.jsxs("div",{children:["Select Supplier: ",l.jsx("input",{type:"text"}),l.jsx(se,{items:o,onSelect:f=>d(f),style:{top:"top-11 left-[56%]"},columns:[{key:"name",label:"Supplier Name"},{key:"address",label:"Address"},{key:"mobile",label:"Mobile"}],all:!0})]})}),t==="add"&&l.jsx(Fa,{mode:"add",areas:s,initialSupplier:{},cb:u,customers:o}),(t==="edit"||t==="delete")&&n&&l.jsx(Fa,{areas:s,mode:t,initialSupplier:n,cb:u})]})})}const pp={id:"",name:"",accountType:"Customer",referenceId:"",createdOn:new Date().toISOString().split("T")[0],supplierName:"",area:"",deliveryPlace:"",creditLimit:"",address:"",telephone:"",mobile:"",email:"",salId:"",vatCode:"",tmId:"",legalName:"",active:"Yes"};function Fa({mode:t,initialSupplier:e,areas:n,cb:r,customers:s}){const[i,o]=_.useState(pp);_.useEffect(()=>{o({id:e.id||"",name:e.name||"",accountType:e.accountType||"Customer",referenceId:e.referenceId||"",createdOn:e.createdOn||new Date().toISOString().split("T")[0],supplierName:e.supplierName||"",area:e.area||"",deliveryPlace:e.deliveryPlace||"",creditLimit:e.creditLimit||"",address:e.address||"",telephone:e.telephone||"",mobile:e.mobile||"",email:e.email||"",description:e.description||"",salId:e.salId||"",vatCode:e.vatCode||"",tmId:e.tmId||"",legalName:e.legalName||"",active:e.active||"Yes"})},[e]);const a=h=>{const{name:f,value:y}=h.target;o(v=>({...v,[f]:y}))},c=h=>{o(f=>({...f,area:h.name}))},u=async h=>{h.preventDefault();const{id:f,...y}=i;if(t==="add"){const v=await OE(y);alert(v?"Customer added sucessfully":"Failed to add customer")}else t==="edit"?(await BE(f,y),alert("Customer Updated Sucessfully")):t==="delete"&&(await $E(f),alert("Customer Deleted Sucessfully"));r&&r(),o(pp)},d=h=>{o(f=>({...f,vatCode:h||""}))};return l.jsxs("form",{onSubmit:u,className:"min-h-[88.5vh]",children:[l.jsxs("div",{className:"w-[96%] mx-auto grid grid-cols-9 gap-3 p-2 mt-10",children:[l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[74%] text-right inline-block",children:"Branch:"}),l.jsx("input",{type:"text",name:"branch",value:1,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:!0})]}),l.jsx("div",{className:"flex items-center col-span-2",children:l.jsx("input",{type:"text",name:"branchName",value:"Main Branch",className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:!0})}),l.jsxs("div",{className:"flex items-center col-span-2 border ",children:[l.jsx("span",{className:"w-[60%] text-right inline-block",children:"Acc.Type:"}),l.jsxs("select",{name:"accountType",value:i.accountType,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete",children:[l.jsx("option",{value:"Customer",children:"Customer"}),l.jsx("option",{value:"Supplier",children:"Supplier"})]})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[50%] text-right inline-block",children:"Reference ID:"}),l.jsx("input",{type:"text",name:"referenceId",value:i.referenceId,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Date:"}),l.jsx("input",{type:"date",name:"createdOn",value:i.createdOn,onChange:a,className:"h-7 w-full px-1 border border-gray-600  ml-1",disabled:!0})]}),l.jsxs("div",{className:"flex items-center col-span-3",children:[l.jsx("span",{className:"w-[14.5%] text-right inline-block",children:"Name:"}),l.jsx("input",{type:"text",name:"name",value:i.name,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2 relative",children:[l.jsx("span",{className:"w-[60%] text-right inline-block",children:"Area:"}),l.jsx("input",{type:"text",name:"area",value:i.area,className:`h-7 px-1 border border-gray-600  w-full ml-1   ${t!=="delete"&&"bg-white"} `,disabled:!0}),t!=="delete"&&l.jsx(se,{items:n,onSelect:c,style:{top:"top-[25%] left-[94%] "},columns:[{key:"name",label:"Area Name"},{key:"shortForm",label:"Short Form"}],all:!0})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[50%] text-right inline-block",children:"Del.Place:"}),l.jsx("input",{type:"text",name:"deliveryPlace",value:i.deliveryPlace,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Credit Limit:"}),l.jsx("input",{type:"text",name:"creditLimit",value:i.creditLimit,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-3",children:[l.jsx("span",{className:"w-[14%] text-right inline-block",children:"Address:"}),l.jsx("input",{type:"text",name:"address",value:i.address,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[60%] text-right inline-block",children:"Tel.No:"}),l.jsx("input",{type:"text",name:"telephone",value:i.telephone,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[50%] text-right inline-block",children:"Mob:"}),l.jsx("input",{type:"text",name:"mobile",value:i.mobile,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Sal.Id:"}),l.jsx("input",{type:"text",name:"salId",value:i.salId,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-3",children:[l.jsx("span",{className:"w-[15%] text-right inline-block",children:"Email:"}),l.jsx("input",{type:"email",name:"email",value:i.email,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[60%] text-right inline-block",children:"Active:"}),l.jsxs("select",{name:"active",value:i.active,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete",children:[l.jsx("option",{value:"Yes",children:"Yes"}),l.jsx("option",{value:"No",children:"No"})]})]}),l.jsxs("div",{className:" relative flex items-center col-span-2 ",children:[l.jsx("span",{className:"w-[33%]   text-right inline-block",children:"Vat type:"}),l.jsx("input",{type:"text",name:"vatType",value:i.vatCode,disabled:!0,className:` ${t=="edit"||t=="add"?"bg-white":""} flex-1 h-7      px-1 border  border-gray-600 ml-1 `}),t!=="delete"&&l.jsx(se,{items:eu,onSelect:d,style:{top:"top-1 left-[92%]"},columns:[{key:"shortForm",label:"VAT Code"},{key:"Description",label:"Description"},{key:"Vatpercentage",label:"VAT Percentage"},{key:"startDate",label:"Start Date"}]})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"TmID:"}),l.jsx("input",{type:"text",name:"tmId",value:i.tmId,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-3",children:[l.jsx("span",{className:"w-[30%]   inline-block",children:"Legal Name:"}),l.jsx("input",{type:"text",name:"legalName",value:i.legalName,onChange:a,className:"h-7 px-1 border border-gray-600 w-full",disabled:t==="delete"})]})]}),l.jsx("div",{className:" mt-7 min-h-[40vh]",children:l.jsx(at,{data:t==="add"?s:[i],name:"Details",columns:[{key:"id",header:"Id"},{key:"name",header:"Name"},{key:"accountType",header:"Account Type"},{key:"referenceId",header:"Reference ID"},{key:"createdOn",header:"Date"},{key:"area",header:"Area"},{key:"deliveryPlace",header:"Delivery Place"},{key:"creditLimit",header:"Credit Limit"},{key:"address",header:"Address"},{key:"telephone",header:"Telephone Number"},{key:"mobile",header:"Mobile Number"},{key:"salId",header:"Sales ID"},{key:"email",header:"Email"},{key:"active",header:"Active?"},{key:"vatCode",header:"VAT Code"},{key:"tmId",header:"Tm ID"},{key:"legalName",header:"Legal Name"}],highlightColumn:"Id",height:40})}),l.jsxs("div",{className:"mt-2",children:[(t==="add"||t==="edit")&&l.jsxs("button",{type:"submit",className:" px-5 py-1   bg-white w-full  ",children:[t==="add"?"Add":"Update"," Customer"]}),t==="delete"&&Object.keys(e).length!=0&&l.jsx("button",{type:"submit",className:" px-5 py-1  bg-white w-full  ",children:"Delete Customer"})]})]})}const mp={name:"",shortForm:""},Ak=()=>{const[t,e]=_.useState(mp),[n,r]=_.useState([]),s=async()=>{const c=await Ud();r(c)};_.useEffect(()=>{s()},[]);const i=c=>{const{name:u,value:d}=c.target;e(h=>({...h,[u]:d}))},o=async c=>{if(c.preventDefault(),n.some(d=>d.shortForm.toLowerCase()===t.shortForm.toLowerCase()||d.name.toLowerCase()===t.name.toLowerCase()))return alert("This area already exists.");await TE(t),e(mp),await s()},a=async(c,u)=>{c.preventDefault();try{await AE(u),await s(),console.log(`Deleting brand with ID: ${u}`)}catch(d){console.error("Error deleting brand:",d)}};return l.jsxs("div",{className:"min-h-[100vh]",children:[l.jsx("h1",{className:"text-center relative top-10  text-3xl",children:"Add Area"}),l.jsxs("form",{className:" mt-28",onSubmit:o,children:[l.jsxs("div",{className:"flex justify-between w-[80%] mx-auto",children:[l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter Name:"}),l.jsx("input",{type:"text",name:"name",className:"ml-1 px-2",onChange:i,required:!0,value:t.name})]}),l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter Shortform:"}),l.jsx("input",{type:"text",name:"shortForm",className:"ml-1 px-2",onChange:i,required:!0,value:t.shortForm})]})]}),l.jsx("div",{className:"w-[80%] mx-auto mt-16 h-[40vh]",children:l.jsx(at,{name:"Available Areas",data:n,columns:[{key:"name",header:"Area Name"},{key:"shortForm",header:"Short Form"},{key:"delete",header:"Delete",render:c=>l.jsx("button",{type:"button",onClick:u=>a(u,c.shortForm),children:"Delete"})}]})}),l.jsx("div",{className:"w-[80%] mx-auto mt-4",children:l.jsx("button",{type:"submit",className:"bg-white border border-gray-300 w-full  py-1 px-3 ",children:"Add"})})]})]})},gp={name:"",shortForm:""},Pk=()=>{const[t,e]=_.useState(gp),[n,r]=_.useState([]),s=async()=>{const c=await Vv();r(c)};_.useEffect(()=>{s()},[]);const i=c=>{const{name:u,value:d}=c.target;e(h=>({...h,[u]:d}))},o=async c=>{if(c.preventDefault(),n.some(d=>d.shortForm.toLowerCase()===t.shortForm.toLowerCase()))return alert("This brand already exists.");await Nk(t),e(gp),s()},a=async(c,u)=>{c.preventDefault();try{await Ck(u),await s(),console.log(`Deleting brand with ID: ${u}`)}catch(d){console.error("Error deleting brand:",d)}};return l.jsxs("div",{className:"min-h-[100vh]",children:[l.jsx("h1",{className:"text-center relative top-10  text-3xl",children:"Add Brand"}),l.jsxs("form",{className:" mt-28",onSubmit:o,children:[l.jsxs("div",{className:"flex justify-between w-[80%] mx-auto",children:[l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter Name:"}),l.jsx("input",{type:"text",name:"name",className:"ml-1 px-2",onChange:i,required:!0,value:t.name})]}),l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter ID:"}),l.jsx("input",{type:"text",name:"shortForm",className:"ml-1 px-2",onChange:i,required:!0,value:t.shortForm})]})]}),l.jsx("div",{className:"w-[80%] mx-auto mt-16",children:l.jsx(at,{name:"Available Areas",data:n,columns:[{key:"shortForm",header:"Brand Id"},{key:"name",header:"Brand Name"},{key:"delete",header:"Delete",render:c=>l.jsx("button",{type:"button",onClick:u=>a(u,c.shortForm),children:"Delete"})}]})}),l.jsx("div",{className:"w-[80%] mx-auto mt-4",children:l.jsx("button",{type:"submit",className:"bg-white border border-gray-300 w-full  py-1 px-3 ",children:"Add"})})]})]})},yp={name:"",shortForm:"",category:""},Dk=()=>{const[t,e]=_.useState([]),[n,r]=_.useState(yp),[s,i]=_.useState(null),[o,a]=_.useState([]),c=async()=>{const v=await Ql();e(v)},u=async()=>{const v=await XE();a(v)};_.useEffect(()=>{c(),u()},[]);const d=v=>{i(v),r(w=>({...w,category:v.name}))},h=v=>{const{name:w,value:C}=v.target;r(g=>({...g,[w]:C}))},f=async v=>{if(v.preventDefault(),!s)return alert("Please select a category first");const w={name:n.name,shortForm:n.shortForm,id:s.id};await JE(s.id,w),a(C=>[...C,w]),r(yp)},y=async(v,w)=>{v.preventDefault();try{await ek(w),await u()}catch(C){console.error("Error subcategory brand:",C)}};return l.jsxs("div",{className:"min-h-[100vh]",children:[l.jsx("h1",{className:"text-center relative top-10 text-3xl",children:"Add Sub-Category"}),l.jsxs("form",{className:"mt-28",onSubmit:f,children:[l.jsxs("div",{className:"grid grid-cols-2 gap-5 w-[80%] mx-auto",children:[l.jsxs("div",{className:"col-span-1",children:[l.jsx("span",{children:"Enter Name:"}),l.jsx("input",{type:"text",name:"name",className:"ml-1 px-2",onChange:h,required:!0,value:n.name||""})]}),l.jsxs("div",{className:"col-span-1",children:[l.jsx("span",{children:"Enter ID:"}),l.jsx("input",{type:"text",name:"shortForm",className:"ml-1 px-2",onChange:h,required:!0,value:n.shortForm||""})]}),l.jsxs("div",{className:"relative col-span-1 -left-6",children:[l.jsx("span",{className:"w-[29%] border inline-block",children:"Enter Category:"}),l.jsx("input",{type:"text",className:"ml-1 px-2 bg-white",value:s?s.name:"",disabled:!0}),l.jsx(se,{items:t,columns:[{key:"shortForm",label:"Category ID"},{key:"name",label:"Category Name"}],all:!0,onSelect:d,style:{top:"top-[5px] left-[76%]"}})]})]}),l.jsx("div",{className:"w-[80%] mx-auto mt-12",children:l.jsx(at,{name:"Details",data:o.length>0?o:[{name:"No results found",shortForm:""}],columns:[{key:"shortForm",header:"SubCategory Id"},{key:"name",header:"SubCategory Name"},{key:"id",header:"SubCategory Unique Key"},{key:"delete",header:"Delete",render:v=>l.jsx("button",{type:"button",onClick:w=>y(w,v.id),children:"Delete"})}]})}),l.jsx("div",{className:"w-[80%] mx-auto mt-10",children:l.jsx("button",{type:"submit",className:"bg-white border border-gray-300 w-full py-1 px-3",children:"Add"})})]})]})},vp={name:"",shortForm:""},xp=()=>{const[t,e]=_.useState(vp),[n,r]=_.useState([]),s=c=>{const{name:u,value:d}=c.target;e(h=>({...h,[u]:d}))},i=async()=>{const c=await Ql();r(c)};_.useEffect(()=>{i()},[]);const o=async c=>{if(c.preventDefault(),n.some(h=>h.shortForm.toLowerCase()===t.shortForm.toLowerCase())){alert("This category already exists.");return}const d=await KE(t);i(),d&&e(vp)},a=async(c,u)=>{c.preventDefault();try{await ZE(u),await i(),console.log(`Deleting Category with ID: ${u}`)}catch(d){console.error("Error deleting Category:",d)}};return l.jsxs("div",{className:"min-h-[100vh]",children:[l.jsx("h1",{className:"text-center relative top-10  text-3xl",children:"Add Category"}),l.jsxs("form",{className:" mt-28",onSubmit:o,children:[l.jsxs("div",{className:"flex justify-between w-[80%] mx-auto",children:[l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter Name:"}),l.jsx("input",{type:"text",name:"name",className:"ml-1 px-2",onChange:s,required:!0,value:t.name})]}),l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter ID:"}),l.jsx("input",{type:"text",name:"shortForm",className:"ml-1 px-2",onChange:s,required:!0,value:t.shortForm})]})]}),l.jsx("div",{className:"w-[80%] mx-auto mt-16",children:l.jsx(at,{name:"Available Categories",data:n,columns:[{key:"shortForm",header:"Category Id"},{key:"name",header:"Category Name"},{key:"delete",header:"Delete",render:c=>l.jsx("button",{type:"button",onClick:u=>a(u,c.shortForm),children:"Delete"})}]})}),l.jsx("div",{className:"w-[80%] mx-auto mt-4",children:l.jsx("button",{type:"submit",className:"bg-white border border-gray-300 w-full  py-1 px-3 ",children:"Add"})})]})]})};var Hv={exports:{}};(function(t,e){(function(n,r){t.exports=r(_)})(typeof self<"u"?self:Kv,function(n){return function(){var r={155:function(g){g.exports=n}},s={};function i(g){var p=s[g];if(p!==void 0)return p.exports;var m=s[g]={exports:{}};return r[g](m,m.exports,i),m.exports}i.d=function(g,p){for(var m in p)i.o(p,m)&&!i.o(g,m)&&Object.defineProperty(g,m,{enumerable:!0,get:p[m]})},i.o=function(g,p){return Object.prototype.hasOwnProperty.call(g,p)},i.r=function(g){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})};var o={};i.r(o),i.d(o,{useReactToPrint:function(){return C}});var a=i(155);function c({level:g="error",messages:p,suppressErrors:m=!1}){m||(g==="error"?console.error(p):g==="warning"?console.warn(p):g==="debug"&&console.debug(p))}function u(g,p){if(p||!g){const m=document.getElementById("printWindow");m&&document.body.removeChild(m)}}function d(g,p){const{documentTitle:m,onAfterPrint:x,onPrintError:b,preserveAfterPrint:N,print:E,suppressErrors:S}=p;setTimeout(()=>{var k,j;if(g.contentWindow)if(g.contentWindow.focus(),E)E(g).then(()=>x==null?void 0:x()).then(()=>u(N)).catch(R=>{b?b("print",R):c({messages:["An error was thrown by the specified `print` function"],suppressErrors:S})});else{if(g.contentWindow.print){const R=(j=(k=g.contentDocument)===null||k===void 0?void 0:k.title)!==null&&j!==void 0?j:"",G=g.ownerDocument.title;m&&(g.ownerDocument.title=m,g.contentDocument&&(g.contentDocument.title=m)),g.contentWindow.print(),m&&(g.ownerDocument.title=G,g.contentDocument&&(g.contentDocument.title=R))}else c({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:S});x==null||x(),u(N)}else c({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:S})},500)}function h(g){const p=[],m=document.createTreeWalker(g,NodeFilter.SHOW_ELEMENT,null);let x=m.nextNode();for(;x;)p.push(x),x=m.nextNode();return p}function f(g,p,m){const x=h(g),b=h(p);if(x.length===b.length)for(let N=0;N<x.length;N++){const E=x[N],S=b[N],k=E.shadowRoot;if(k!==null){const j=S.attachShadow({mode:k.mode});j.innerHTML=k.innerHTML,f(k,j,m)}}else c({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",g,p],suppressErrors:m})}const y=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function v(g,p,m,x){var b,N,E;const{contentNode:S,clonedContentNode:k,clonedImgNodes:j,clonedVideoNodes:R,numResourcesToLoad:G,originalCanvasNodes:B}=m,{bodyClass:z,fonts:ge,ignoreGlobalStyles:Ae,pageStyle:st,nonce:A,suppressErrors:M,copyShadowRoots:F}=x;g.onload=null;const $=g.contentDocument||((b=g.contentWindow)===null||b===void 0?void 0:b.document);if($){const oe=$.body.appendChild(k);F&&f(S,oe,!!M),ge&&(!((N=g.contentDocument)===null||N===void 0)&&N.fonts&&(!((E=g.contentWindow)===null||E===void 0)&&E.FontFace)?ge.forEach(ee=>{const q=new FontFace(ee.family,ee.source,{weight:ee.weight,style:ee.style});g.contentDocument.fonts.add(q),q.loaded.then(()=>{p(q)}).catch(it=>{p(q,["Failed loading the font:",q,"Load error:",it])})}):(ge.forEach(ee=>p(ee)),c({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:M})));const Z=st??y,xe=$.createElement("style");A&&(xe.setAttribute("nonce",A),$.head.setAttribute("nonce",A)),xe.appendChild($.createTextNode(Z)),$.head.appendChild(xe),z&&$.body.classList.add(...z.split(" "));const Yt=$.querySelectorAll("canvas");for(let ee=0;ee<B.length;++ee){const q=B[ee],it=Yt[ee];if(it===void 0){c({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",q],suppressErrors:M});continue}const le=it.getContext("2d");le&&le.drawImage(q,0,0)}for(let ee=0;ee<j.length;ee++){const q=j[ee],it=q.getAttribute("src");if(it){const le=new Image;le.onload=()=>p(q),le.onerror=(Le,vt,fn,ot,Kt)=>p(q,["Error loading <img>",q,"Error",Kt]),le.src=it}else p(q,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',q])}for(let ee=0;ee<R.length;ee++){const q=R[ee];q.preload="auto";const it=q.getAttribute("poster");if(it){const le=new Image;le.onload=()=>p(q),le.onerror=(Le,vt,fn,ot,Kt)=>p(q,["Error loading video poster",it,"for video",q,"Error:",Kt]),le.src=it}else q.readyState>=2?p(q):(q.onloadeddata=()=>p(q),q.onerror=(le,Le,vt,fn,ot)=>p(q,["Error loading video",q,"Error",ot]),q.onstalled=()=>p(q,["Loading video stalled, skipping",q]))}const yt="select",Gn=S.querySelectorAll(yt),qv=$.querySelectorAll(yt);for(let ee=0;ee<Gn.length;ee++)qv[ee].value=Gn[ee].value;if(!Ae){const ee=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let q=0,it=ee.length;q<it;++q){const le=ee[q];if(le.tagName.toLowerCase()==="style"){const Le=$.createElement(le.tagName),vt=le.sheet;if(vt){let fn="";try{const ot=vt.cssRules.length;for(let Kt=0;Kt<ot;++Kt)typeof vt.cssRules[Kt].cssText=="string"&&(fn+=`${vt.cssRules[Kt].cssText}\r
`)}catch(ot){c({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",le,`Original error: ${ot==null?void 0:ot.message}`],level:"warning"})}Le.setAttribute("id",`react-to-print-${q}`),A&&Le.setAttribute("nonce",A),Le.appendChild($.createTextNode(fn)),$.head.appendChild(Le)}}else if(le.getAttribute("href"))if(le.hasAttribute("disabled"))c({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",le],level:"warning"}),p(le);else{const Le=$.createElement(le.tagName);for(let vt=0,fn=le.attributes.length;vt<fn;++vt){const ot=le.attributes[vt];ot&&Le.setAttribute(ot.nodeName,ot.nodeValue||"")}Le.onload=()=>p(Le),Le.onerror=(vt,fn,ot,Kt,Gv)=>p(Le,["Failed to load",Le,"Error:",Gv]),A&&Le.setAttribute("nonce",A),$.head.appendChild(Le)}else c({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",le],level:"warning"}),p(le)}}}G===0&&d(g,x)}function w(g,p,m,x){g.onload=()=>v(g,p,m,x),document.body.appendChild(g)}function C(g){const{contentRef:p,fonts:m,ignoreGlobalStyles:x,onBeforePrint:b,onPrintError:N,preserveAfterPrint:E,suppressErrors:S}=g;return(0,a.useCallback)(j=>{u(E,!0);const R=function({contentRef:Z,optionalContent:xe,suppressErrors:Yt}){return xe&&(Z&&c({level:"warning",messages:['"react-to-print" received a `contentRef` option and a optional-content param passed to its callback. The `contentRef` option will be ignored.']}),typeof xe=="function")?xe():Z?Z.current:void c({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:Yt})}({contentRef:p,optionalContent:j,suppressErrors:S});if(!R)return void c({messages:["There is nothing to print"],suppressErrors:S});const G=R.cloneNode(!0),B=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),z=G.querySelectorAll("img"),ge=G.querySelectorAll("video"),Ae=m?m.length:0,st=(x?0:B.length)+z.length+ge.length+Ae,A=[],M=[],F=function(){const Z=document.createElement("iframe");return Z.width=`${document.documentElement.clientWidth}px`,Z.height=`${document.documentElement.clientHeight}px`,Z.style.position="absolute",Z.style.top=`-${document.documentElement.clientHeight+100}px`,Z.style.left=`-${document.documentElement.clientWidth+100}px`,Z.id="printWindow",Z.srcdoc="<!DOCTYPE html>",Z}(),$=(Z,xe)=>{A.includes(Z)?c({level:"debug",messages:["Tried to mark a resource that has already been handled",Z],suppressErrors:S}):(xe?(c({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...xe],suppressErrors:S}),M.push(Z)):A.push(Z),A.length+M.length===st&&d(F,g))},oe={contentNode:R,clonedContentNode:G,clonedImgNodes:z,clonedVideoNodes:ge,numResourcesToLoad:st,originalCanvasNodes:R.querySelectorAll("canvas")};b?b().then(()=>w(F,$,oe,g)).catch(Z=>{N==null||N("onBeforePrint",Z)}):w(F,$,oe,g)},[g])}return o}()})})(Hv);var Rk=Hv.exports;const Ok=()=>{const[t,e]=_.useState([]),[n,r]=_.useState(!0),s=_.useRef(null);_.useEffect(()=>{(async()=>{const a=await Wd();e(a),r(!1)})()},[]);const i=()=>{console.log(s),console.log(s.current),Rk.useReactToPrint({content:()=>s.current,documentTitle:"Product_List",pageStyle:`
      @page { size: auto; margin: 20mm; }z
      @media print {
        html, body {
          height: initial !important;
          overflow: initial !important;
          -webkit-print-color-adjust: exact;
        }
        .print-container {
          margin-top: 20px;
          padding: 10px;
        }
      }
    `,onBeforePrint:()=>{if(n)return console.log("Data is still loading, delaying print..."),new Promise(o=>{const a=setInterval(()=>{n||(clearInterval(a),o())},100)})}})};return l.jsxs("div",{children:[l.jsx("button",{onClick:i,disabled:n,children:n?"Loading...":"Print"}),l.jsxs("div",{ref:s,className:"print-container",children:[l.jsx("h1",{children:"Product List"}),l.jsxs("table",{border:"1",cellPadding:"10",cellSpacing:"0",style:{width:"100%",borderCollapse:"collapse"},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Sr.No"}),l.jsx("th",{children:"VAT Amount"}),l.jsx("th",{children:"VAT %"}),l.jsx("th",{children:"Qty"}),l.jsx("th",{children:"Net Amt (Excl VAT)"})]})}),l.jsx("tbody",{children:t.map((o,a)=>l.jsxs("tr",{children:[l.jsx("td",{children:a+1}),l.jsx("td",{children:o.vatAmount||"N/A"}),l.jsx("td",{children:o.vatPercentage||"N/A"}),l.jsx("td",{children:o.quantity||"N/A"}),l.jsx("td",{children:o.netAmount||"N/A"})]},o.id))})]})]})]})},Mk=async t=>{try{const e=t.products.map(async n=>{if(n.productCode&&n.productCode!==""){const r=Ht(P(O,"products"),Wt("productCode"),Qt(n.productCode)),s=await U(r);if(s.exists()){const i=s.val(),o=Object.keys(i)[0],c=(isNaN(i[o].quantity)?0:parseInt(i[o].quantity))+parseInt(n.quantity);await Oe(P(O,`products/${o}`),{quantity:c})}}});await Promise.all(e)}catch(e){console.error("Failed to return products:",e)}},Fk=()=>{const[t,e]=_.useState("none"),[n,r]=_.useState(null);_.useState([]);const[s,i]=_.useState(null),o=c=>{e(c),r(null)},a=()=>{window.confirm("Are you sure you want to return this invoice?")&&(alert("Return successful!"),Mk(s))};return l.jsxs(l.Fragment,{children:[l.jsx(Ok,{}),l.jsxs("div",{className:"w-[98%] mx-auto",children:[l.jsxs("nav",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>o("add"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Add"}),l.jsx("button",{onClick:()=>o("delete"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Delete"})]}),l.jsx("div",{className:"mt-4 h-[80vh] overflow-auto border border-gray-200",children:l.jsx($v,{formData:n,onDataChange:c=>i({products:c}),mode:t})}),l.jsx("div",{className:"flex space-x-2 mt-4",children:l.jsx("button",{onClick:a,className:"bg-white text-gray-500 px-5 py-1 w-full active:scale-95 border border-gray-300",children:"Return"})})]})]})};function Lk(){return _.useEffect(()=>{const t=e=>{e.key==="Escape"&&(console.log({path:window.location}),window.location.hash!=="#/"&&window.location.hash!==""&&window.close())};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[]),l.jsx(c_,{children:l.jsx("div",{className:"bg-background",children:l.jsxs(o_,{children:[l.jsx(Ve,{path:"/",element:l.jsx(dp,{})}),l.jsx(Ve,{path:"/ProductMastery",element:l.jsx(Ek,{})}),l.jsx(Ve,{path:"/CashInvoice",element:l.jsx(Uv,{})}),l.jsx(Ve,{path:"/selectProduct",element:l.jsx(qn,{})}),l.jsx(Ve,{path:"/InvoiceViewer",element:l.jsx(jk,{})}),l.jsx(Ve,{path:"/Return",element:l.jsx(Fk,{})}),l.jsx(Ve,{path:"/PurchaseInvoice",element:l.jsx(Qv,{})}),l.jsx(Ve,{path:"/CustomerMastery",element:l.jsx(Tk,{})}),l.jsx(Ve,{path:"/AddArea",element:l.jsx(Ak,{})}),l.jsx(Ve,{path:"/AddBrand",element:l.jsx(Pk,{})}),l.jsx(Ve,{path:"/AddSubCategory",element:l.jsx(Dk,{})}),l.jsx(Ve,{path:"/AddCategory",element:l.jsx(xp,{})}),l.jsx(Ve,{path:"/PrintReport",element:l.jsx(xp,{})}),l.jsx(Ve,{path:"*",element:l.jsx(dp,{})})," "]})})})}La.createRoot(document.getElementById("root")).render(l.jsx(Tp.StrictMode,{children:l.jsx(Lk,{})}));
