function Fv(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Lv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var up={exports:{}},Xo={},dp={exports:{}},V={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var di=Symbol.for("react.element"),Bv=Symbol.for("react.portal"),$v=Symbol.for("react.fragment"),Uv=Symbol.for("react.strict_mode"),zv=Symbol.for("react.profiler"),Vv=Symbol.for("react.provider"),Wv=Symbol.for("react.context"),Qv=Symbol.for("react.forward_ref"),Hv=Symbol.for("react.suspense"),qv=Symbol.for("react.memo"),Gv=Symbol.for("react.lazy"),Od=Symbol.iterator;function Yv(t){return t===null||typeof t!="object"?null:(t=Od&&t[Od]||t["@@iterator"],typeof t=="function"?t:null)}var hp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fp=Object.assign,pp={};function Kr(t,e,n){this.props=t,this.context=e,this.refs=pp,this.updater=n||hp}Kr.prototype.isReactComponent={};Kr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Kr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function mp(){}mp.prototype=Kr.prototype;function Hc(t,e,n){this.props=t,this.context=e,this.refs=pp,this.updater=n||hp}var qc=Hc.prototype=new mp;qc.constructor=Hc;fp(qc,Kr.prototype);qc.isPureReactComponent=!0;var Md=Array.isArray,gp=Object.prototype.hasOwnProperty,Gc={current:null},yp={key:!0,ref:!0,__self:!0,__source:!0};function vp(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)gp.call(e,r)&&!yp.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:di,type:t,key:i,ref:o,props:s,_owner:Gc.current}}function Kv(t,e){return{$$typeof:di,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yc(t){return typeof t=="object"&&t!==null&&t.$$typeof===di}function Jv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Fd=/\/+/g;function Fl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Jv(""+t.key):e.toString(36)}function Hi(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case di:case Bv:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Fl(o,0):r,Md(s)?(n="",t!=null&&(n=t.replace(Fd,"$&/")+"/"),Hi(s,e,n,"",function(u){return u})):s!=null&&(Yc(s)&&(s=Kv(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Fd,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Md(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+Fl(i,a);o+=Hi(i,e,n,c,s)}else if(c=Yv(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+Fl(i,a++),o+=Hi(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ki(t,e,n){if(t==null)return t;var r=[],s=0;return Hi(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Xv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ze={current:null},qi={transition:null},Zv={ReactCurrentDispatcher:ze,ReactCurrentBatchConfig:qi,ReactCurrentOwner:Gc};function xp(){throw Error("act(...) is not supported in production builds of React.")}V.Children={map:ki,forEach:function(t,e,n){ki(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ki(t,function(){e++}),e},toArray:function(t){return ki(t,function(e){return e})||[]},only:function(t){if(!Yc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};V.Component=Kr;V.Fragment=$v;V.Profiler=zv;V.PureComponent=Hc;V.StrictMode=Uv;V.Suspense=Hv;V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zv;V.act=xp;V.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=fp({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Gc.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)gp.call(e,c)&&!yp.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:di,type:t.type,key:s,ref:i,props:r,_owner:o}};V.createContext=function(t){return t={$$typeof:Wv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Vv,_context:t},t.Consumer=t};V.createElement=vp;V.createFactory=function(t){var e=vp.bind(null,t);return e.type=t,e};V.createRef=function(){return{current:null}};V.forwardRef=function(t){return{$$typeof:Qv,render:t}};V.isValidElement=Yc;V.lazy=function(t){return{$$typeof:Gv,_payload:{_status:-1,_result:t},_init:Xv}};V.memo=function(t,e){return{$$typeof:qv,type:t,compare:e===void 0?null:e}};V.startTransition=function(t){var e=qi.transition;qi.transition={};try{t()}finally{qi.transition=e}};V.unstable_act=xp;V.useCallback=function(t,e){return ze.current.useCallback(t,e)};V.useContext=function(t){return ze.current.useContext(t)};V.useDebugValue=function(){};V.useDeferredValue=function(t){return ze.current.useDeferredValue(t)};V.useEffect=function(t,e){return ze.current.useEffect(t,e)};V.useId=function(){return ze.current.useId()};V.useImperativeHandle=function(t,e,n){return ze.current.useImperativeHandle(t,e,n)};V.useInsertionEffect=function(t,e){return ze.current.useInsertionEffect(t,e)};V.useLayoutEffect=function(t,e){return ze.current.useLayoutEffect(t,e)};V.useMemo=function(t,e){return ze.current.useMemo(t,e)};V.useReducer=function(t,e,n){return ze.current.useReducer(t,e,n)};V.useRef=function(t){return ze.current.useRef(t)};V.useState=function(t){return ze.current.useState(t)};V.useSyncExternalStore=function(t,e,n){return ze.current.useSyncExternalStore(t,e,n)};V.useTransition=function(){return ze.current.useTransition()};V.version="18.3.1";dp.exports=V;var _=dp.exports;const wp=Lv(_),ex=Fv({__proto__:null,default:wp},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx=_,nx=Symbol.for("react.element"),rx=Symbol.for("react.fragment"),sx=Object.prototype.hasOwnProperty,ix=tx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ox={key:!0,ref:!0,__self:!0,__source:!0};function _p(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)sx.call(e,r)&&!ox.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:nx,type:t,key:i,ref:o,props:s,_owner:ix.current}}Xo.Fragment=rx;Xo.jsx=_p;Xo.jsxs=_p;up.exports=Xo;var l=up.exports,ja={},bp={exports:{}},ot={},Np={exports:{}},Cp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,F){var B=D.length;D.push(F);e:for(;0<B;){var K=B-1>>>1,de=D[K];if(0<s(de,F))D[K]=F,D[B]=de,B=K;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var F=D[0],B=D.pop();if(B!==F){D[0]=B;e:for(var K=0,de=D.length,hr=de>>>1;K<hr;){var Mt=2*(K+1)-1,fr=D[Mt],Ft=Mt+1,pr=D[Ft];if(0>s(fr,B))Ft<de&&0>s(pr,fr)?(D[K]=pr,D[Ft]=B,K=Ft):(D[K]=fr,D[Mt]=B,K=Mt);else if(Ft<de&&0>s(pr,B))D[K]=pr,D[Ft]=B,K=Ft;else break e}}return F}function s(D,F){var B=D.sortIndex-F.sortIndex;return B!==0?B:D.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,h=null,f=3,m=!1,v=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(D){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=D)r(u),F.sortIndex=F.expirationTime,e(c,F);else break;F=n(u)}}function w(D){if(x=!1,y(D),!v)if(n(c)!==null)v=!0,Se(N);else{var F=n(u);F!==null&&Xe(w,F.startTime-D)}}function N(D,F){v=!1,x&&(x=!1,g(S),S=-1),m=!0;var B=f;try{for(y(F),h=n(c);h!==null&&(!(h.expirationTime>F)||D&&!M());){var K=h.callback;if(typeof K=="function"){h.callback=null,f=h.priorityLevel;var de=K(h.expirationTime<=F);F=t.unstable_now(),typeof de=="function"?h.callback=de:h===n(c)&&r(c),y(F)}else r(c);h=n(c)}if(h!==null)var hr=!0;else{var Mt=n(u);Mt!==null&&Xe(w,Mt.startTime-F),hr=!1}return hr}finally{h=null,f=B,m=!1}}var C=!1,k=null,S=-1,j=5,T=-1;function M(){return!(t.unstable_now()-T<j)}function ne(){if(k!==null){var D=t.unstable_now();T=D;var F=!0;try{F=k(!0,D)}finally{F?Me():(C=!1,k=null)}}else C=!1}var Me;if(typeof p=="function")Me=function(){p(ne)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Q=W.port2;W.port1.onmessage=ne,Me=function(){Q.postMessage(null)}}else Me=function(){b(ne,0)};function Se(D){k=D,C||(C=!0,Me())}function Xe(D,F){S=b(function(){D(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,Se(N))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(D){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var B=f;f=F;try{return D()}finally{f=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,F){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var B=f;f=D;try{return F()}finally{f=B}},t.unstable_scheduleCallback=function(D,F,B){var K=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?K+B:K):B=K,D){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=B+de,D={id:d++,callback:F,priorityLevel:D,startTime:B,expirationTime:de,sortIndex:-1},B>K?(D.sortIndex=B,e(u,D),n(c)===null&&D===n(u)&&(x?(g(S),S=-1):x=!0,Xe(w,B-K))):(D.sortIndex=de,e(c,D),v||m||(v=!0,Se(N))),D},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(D){var F=f;return function(){var B=f;f=F;try{return D.apply(this,arguments)}finally{f=B}}}})(Cp);Np.exports=Cp;var lx=Np.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ax=_,st=lx;function E(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sp=new Set,Ls={};function or(t,e){Lr(t,e),Lr(t+"Capture",e)}function Lr(t,e){for(Ls[t]=e,t=0;t<e.length;t++)Sp.add(e[t])}var Qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ta=Object.prototype.hasOwnProperty,cx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ld={},Bd={};function ux(t){return Ta.call(Bd,t)?!0:Ta.call(Ld,t)?!1:cx.test(t)?Bd[t]=!0:(Ld[t]=!0,!1)}function dx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function hx(t,e,n,r){if(e===null||typeof e>"u"||dx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ve(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){je[t]=new Ve(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];je[e]=new Ve(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){je[t]=new Ve(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){je[t]=new Ve(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){je[t]=new Ve(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){je[t]=new Ve(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){je[t]=new Ve(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){je[t]=new Ve(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){je[t]=new Ve(t,5,!1,t.toLowerCase(),null,!1,!1)});var Kc=/[\-:]([a-z])/g;function Jc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Kc,Jc);je[e]=new Ve(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Kc,Jc);je[e]=new Ve(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Kc,Jc);je[e]=new Ve(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){je[t]=new Ve(t,1,!1,t.toLowerCase(),null,!1,!1)});je.xlinkHref=new Ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){je[t]=new Ve(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xc(t,e,n,r){var s=je.hasOwnProperty(e)?je[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(hx(e,n,s,r)&&(n=null),r||s===null?ux(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var tn=ax.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ii=Symbol.for("react.element"),yr=Symbol.for("react.portal"),vr=Symbol.for("react.fragment"),Zc=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ep=Symbol.for("react.provider"),kp=Symbol.for("react.context"),eu=Symbol.for("react.forward_ref"),Da=Symbol.for("react.suspense"),Pa=Symbol.for("react.suspense_list"),tu=Symbol.for("react.memo"),sn=Symbol.for("react.lazy"),Ip=Symbol.for("react.offscreen"),$d=Symbol.iterator;function is(t){return t===null||typeof t!="object"?null:(t=$d&&t[$d]||t["@@iterator"],typeof t=="function"?t:null)}var ue=Object.assign,Ll;function xs(t){if(Ll===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ll=e&&e[1]||""}return`
`+Ll+t}var Bl=!1;function $l(t,e){if(!t||Bl)return"";Bl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{Bl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xs(t):""}function fx(t){switch(t.tag){case 5:return xs(t.type);case 16:return xs("Lazy");case 13:return xs("Suspense");case 19:return xs("SuspenseList");case 0:case 2:case 15:return t=$l(t.type,!1),t;case 11:return t=$l(t.type.render,!1),t;case 1:return t=$l(t.type,!0),t;default:return""}}function Ra(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vr:return"Fragment";case yr:return"Portal";case Aa:return"Profiler";case Zc:return"StrictMode";case Da:return"Suspense";case Pa:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kp:return(t.displayName||"Context")+".Consumer";case Ep:return(t._context.displayName||"Context")+".Provider";case eu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tu:return e=t.displayName||null,e!==null?e:Ra(t.type)||"Memo";case sn:e=t._payload,t=t._init;try{return Ra(t(e))}catch{}}return null}function px(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ra(e);case 8:return e===Zc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function mx(t){var e=jp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ji(t){t._valueTracker||(t._valueTracker=mx(t))}function Tp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=jp(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function io(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Oa(t,e){var n=e.checked;return ue({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ud(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Sn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ap(t,e){e=e.checked,e!=null&&Xc(t,"checked",e,!1)}function Ma(t,e){Ap(t,e);var n=Sn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fa(t,e.type,n):e.hasOwnProperty("defaultValue")&&Fa(t,e.type,Sn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function zd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Fa(t,e,n){(e!=="number"||io(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ws=Array.isArray;function Tr(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Sn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function La(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return ue({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Vd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(E(92));if(ws(n)){if(1<n.length)throw Error(E(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Sn(n)}}function Dp(t,e){var n=Sn(e.value),r=Sn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Wd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Pp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ba(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Pp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ti,Rp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ti=Ti||document.createElement("div"),Ti.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ti.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ns={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gx=["Webkit","ms","Moz","O"];Object.keys(Ns).forEach(function(t){gx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ns[e]=Ns[t]})});function Op(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ns.hasOwnProperty(t)&&Ns[t]?(""+e).trim():e+"px"}function Mp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Op(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var yx=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $a(t,e){if(e){if(yx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function Ua(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var za=null;function nu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Va=null,Ar=null,Dr=null;function Qd(t){if(t=pi(t)){if(typeof Va!="function")throw Error(E(280));var e=t.stateNode;e&&(e=rl(e),Va(t.stateNode,t.type,e))}}function Fp(t){Ar?Dr?Dr.push(t):Dr=[t]:Ar=t}function Lp(){if(Ar){var t=Ar,e=Dr;if(Dr=Ar=null,Qd(t),e)for(t=0;t<e.length;t++)Qd(e[t])}}function Bp(t,e){return t(e)}function $p(){}var Ul=!1;function Up(t,e,n){if(Ul)return t(e,n);Ul=!0;try{return Bp(t,e,n)}finally{Ul=!1,(Ar!==null||Dr!==null)&&($p(),Lp())}}function $s(t,e){var n=t.stateNode;if(n===null)return null;var r=rl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(E(231,e,typeof n));return n}var Wa=!1;if(Qt)try{var os={};Object.defineProperty(os,"passive",{get:function(){Wa=!0}}),window.addEventListener("test",os,os),window.removeEventListener("test",os,os)}catch{Wa=!1}function vx(t,e,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Cs=!1,oo=null,lo=!1,Qa=null,xx={onError:function(t){Cs=!0,oo=t}};function wx(t,e,n,r,s,i,o,a,c){Cs=!1,oo=null,vx.apply(xx,arguments)}function _x(t,e,n,r,s,i,o,a,c){if(wx.apply(this,arguments),Cs){if(Cs){var u=oo;Cs=!1,oo=null}else throw Error(E(198));lo||(lo=!0,Qa=u)}}function lr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Hd(t){if(lr(t)!==t)throw Error(E(188))}function bx(t){var e=t.alternate;if(!e){if(e=lr(t),e===null)throw Error(E(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Hd(s),t;if(i===r)return Hd(s),e;i=i.sibling}throw Error(E(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(E(189))}}if(n.alternate!==r)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?t:e}function Vp(t){return t=bx(t),t!==null?Wp(t):null}function Wp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Wp(t);if(e!==null)return e;t=t.sibling}return null}var Qp=st.unstable_scheduleCallback,qd=st.unstable_cancelCallback,Nx=st.unstable_shouldYield,Cx=st.unstable_requestPaint,pe=st.unstable_now,Sx=st.unstable_getCurrentPriorityLevel,ru=st.unstable_ImmediatePriority,Hp=st.unstable_UserBlockingPriority,ao=st.unstable_NormalPriority,Ex=st.unstable_LowPriority,qp=st.unstable_IdlePriority,Zo=null,At=null;function kx(t){if(At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Zo,t,void 0,(t.current.flags&128)===128)}catch{}}var bt=Math.clz32?Math.clz32:Tx,Ix=Math.log,jx=Math.LN2;function Tx(t){return t>>>=0,t===0?32:31-(Ix(t)/jx|0)|0}var Ai=64,Di=4194304;function _s(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function co(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=_s(a):(i&=o,i!==0&&(r=_s(i)))}else o=n&~s,o!==0?r=_s(o):i!==0&&(r=_s(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-bt(e),s=1<<n,r|=t[n],e&=~s;return r}function Ax(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-bt(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=Ax(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function Ha(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Gp(){var t=Ai;return Ai<<=1,!(Ai&4194240)&&(Ai=64),t}function zl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-bt(e),t[e]=n}function Px(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-bt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function su(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-bt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var G=0;function Yp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Kp,iu,Jp,Xp,Zp,qa=!1,Pi=[],fn=null,pn=null,mn=null,Us=new Map,zs=new Map,ln=[],Rx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gd(t,e){switch(t){case"focusin":case"focusout":fn=null;break;case"dragenter":case"dragleave":pn=null;break;case"mouseover":case"mouseout":mn=null;break;case"pointerover":case"pointerout":Us.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zs.delete(e.pointerId)}}function ls(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=pi(e),e!==null&&iu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Ox(t,e,n,r,s){switch(e){case"focusin":return fn=ls(fn,t,e,n,r,s),!0;case"dragenter":return pn=ls(pn,t,e,n,r,s),!0;case"mouseover":return mn=ls(mn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Us.set(i,ls(Us.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,zs.set(i,ls(zs.get(i)||null,t,e,n,r,s)),!0}return!1}function em(t){var e=Un(t.target);if(e!==null){var n=lr(e);if(n!==null){if(e=n.tag,e===13){if(e=zp(n),e!==null){t.blockedOn=e,Zp(t.priority,function(){Jp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gi(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ga(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);za=r,n.target.dispatchEvent(r),za=null}else return e=pi(n),e!==null&&iu(e),t.blockedOn=n,!1;e.shift()}return!0}function Yd(t,e,n){Gi(t)&&n.delete(e)}function Mx(){qa=!1,fn!==null&&Gi(fn)&&(fn=null),pn!==null&&Gi(pn)&&(pn=null),mn!==null&&Gi(mn)&&(mn=null),Us.forEach(Yd),zs.forEach(Yd)}function as(t,e){t.blockedOn===e&&(t.blockedOn=null,qa||(qa=!0,st.unstable_scheduleCallback(st.unstable_NormalPriority,Mx)))}function Vs(t){function e(s){return as(s,t)}if(0<Pi.length){as(Pi[0],t);for(var n=1;n<Pi.length;n++){var r=Pi[n];r.blockedOn===t&&(r.blockedOn=null)}}for(fn!==null&&as(fn,t),pn!==null&&as(pn,t),mn!==null&&as(mn,t),Us.forEach(e),zs.forEach(e),n=0;n<ln.length;n++)r=ln[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ln.length&&(n=ln[0],n.blockedOn===null);)em(n),n.blockedOn===null&&ln.shift()}var Pr=tn.ReactCurrentBatchConfig,uo=!0;function Fx(t,e,n,r){var s=G,i=Pr.transition;Pr.transition=null;try{G=1,ou(t,e,n,r)}finally{G=s,Pr.transition=i}}function Lx(t,e,n,r){var s=G,i=Pr.transition;Pr.transition=null;try{G=4,ou(t,e,n,r)}finally{G=s,Pr.transition=i}}function ou(t,e,n,r){if(uo){var s=Ga(t,e,n,r);if(s===null)Xl(t,e,r,ho,n),Gd(t,r);else if(Ox(s,t,e,n,r))r.stopPropagation();else if(Gd(t,r),e&4&&-1<Rx.indexOf(t)){for(;s!==null;){var i=pi(s);if(i!==null&&Kp(i),i=Ga(t,e,n,r),i===null&&Xl(t,e,r,ho,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Xl(t,e,r,null,n)}}var ho=null;function Ga(t,e,n,r){if(ho=null,t=nu(r),t=Un(t),t!==null)if(e=lr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ho=t,null}function tm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sx()){case ru:return 1;case Hp:return 4;case ao:case Ex:return 16;case qp:return 536870912;default:return 16}default:return 16}}var cn=null,lu=null,Yi=null;function nm(){if(Yi)return Yi;var t,e=lu,n=e.length,r,s="value"in cn?cn.value:cn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Yi=s.slice(t,1<r?1-r:void 0)}function Ki(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ri(){return!0}function Kd(){return!1}function lt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ri:Kd,this.isPropagationStopped=Kd,this}return ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ri)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ri)},persist:function(){},isPersistent:Ri}),e}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},au=lt(Jr),fi=ue({},Jr,{view:0,detail:0}),Bx=lt(fi),Vl,Wl,cs,el=ue({},fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==cs&&(cs&&t.type==="mousemove"?(Vl=t.screenX-cs.screenX,Wl=t.screenY-cs.screenY):Wl=Vl=0,cs=t),Vl)},movementY:function(t){return"movementY"in t?t.movementY:Wl}}),Jd=lt(el),$x=ue({},el,{dataTransfer:0}),Ux=lt($x),zx=ue({},fi,{relatedTarget:0}),Ql=lt(zx),Vx=ue({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),Wx=lt(Vx),Qx=ue({},Jr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Hx=lt(Qx),qx=ue({},Jr,{data:0}),Xd=lt(qx),Gx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Kx[t])?!!e[t]:!1}function cu(){return Jx}var Xx=ue({},fi,{key:function(t){if(t.key){var e=Gx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ki(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Yx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cu,charCode:function(t){return t.type==="keypress"?Ki(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ki(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Zx=lt(Xx),e0=ue({},el,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zd=lt(e0),t0=ue({},fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cu}),n0=lt(t0),r0=ue({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),s0=lt(r0),i0=ue({},el,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),o0=lt(i0),l0=[9,13,27,32],uu=Qt&&"CompositionEvent"in window,Ss=null;Qt&&"documentMode"in document&&(Ss=document.documentMode);var a0=Qt&&"TextEvent"in window&&!Ss,rm=Qt&&(!uu||Ss&&8<Ss&&11>=Ss),eh=" ",th=!1;function sm(t,e){switch(t){case"keyup":return l0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function im(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xr=!1;function c0(t,e){switch(t){case"compositionend":return im(e);case"keypress":return e.which!==32?null:(th=!0,eh);case"textInput":return t=e.data,t===eh&&th?null:t;default:return null}}function u0(t,e){if(xr)return t==="compositionend"||!uu&&sm(t,e)?(t=nm(),Yi=lu=cn=null,xr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rm&&e.locale!=="ko"?null:e.data;default:return null}}var d0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!d0[t.type]:e==="textarea"}function om(t,e,n,r){Fp(r),e=fo(e,"onChange"),0<e.length&&(n=new au("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Es=null,Ws=null;function h0(t){ym(t,0)}function tl(t){var e=br(t);if(Tp(e))return t}function f0(t,e){if(t==="change")return e}var lm=!1;if(Qt){var Hl;if(Qt){var ql="oninput"in document;if(!ql){var rh=document.createElement("div");rh.setAttribute("oninput","return;"),ql=typeof rh.oninput=="function"}Hl=ql}else Hl=!1;lm=Hl&&(!document.documentMode||9<document.documentMode)}function sh(){Es&&(Es.detachEvent("onpropertychange",am),Ws=Es=null)}function am(t){if(t.propertyName==="value"&&tl(Ws)){var e=[];om(e,Ws,t,nu(t)),Up(h0,e)}}function p0(t,e,n){t==="focusin"?(sh(),Es=e,Ws=n,Es.attachEvent("onpropertychange",am)):t==="focusout"&&sh()}function m0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tl(Ws)}function g0(t,e){if(t==="click")return tl(e)}function y0(t,e){if(t==="input"||t==="change")return tl(e)}function v0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var St=typeof Object.is=="function"?Object.is:v0;function Qs(t,e){if(St(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ta.call(e,s)||!St(t[s],e[s]))return!1}return!0}function ih(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function oh(t,e){var n=ih(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ih(n)}}function cm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function um(){for(var t=window,e=io();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=io(t.document)}return e}function du(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function x0(t){var e=um(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cm(n.ownerDocument.documentElement,n)){if(r!==null&&du(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=oh(n,i);var o=oh(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var w0=Qt&&"documentMode"in document&&11>=document.documentMode,wr=null,Ya=null,ks=null,Ka=!1;function lh(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ka||wr==null||wr!==io(r)||(r=wr,"selectionStart"in r&&du(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ks&&Qs(ks,r)||(ks=r,r=fo(Ya,"onSelect"),0<r.length&&(e=new au("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=wr)))}function Oi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _r={animationend:Oi("Animation","AnimationEnd"),animationiteration:Oi("Animation","AnimationIteration"),animationstart:Oi("Animation","AnimationStart"),transitionend:Oi("Transition","TransitionEnd")},Gl={},dm={};Qt&&(dm=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);function nl(t){if(Gl[t])return Gl[t];if(!_r[t])return t;var e=_r[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dm)return Gl[t]=e[n];return t}var hm=nl("animationend"),fm=nl("animationiteration"),pm=nl("animationstart"),mm=nl("transitionend"),gm=new Map,ah="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(t,e){gm.set(t,e),or(e,[t])}for(var Yl=0;Yl<ah.length;Yl++){var Kl=ah[Yl],_0=Kl.toLowerCase(),b0=Kl[0].toUpperCase()+Kl.slice(1);Dn(_0,"on"+b0)}Dn(hm,"onAnimationEnd");Dn(fm,"onAnimationIteration");Dn(pm,"onAnimationStart");Dn("dblclick","onDoubleClick");Dn("focusin","onFocus");Dn("focusout","onBlur");Dn(mm,"onTransitionEnd");Lr("onMouseEnter",["mouseout","mouseover"]);Lr("onMouseLeave",["mouseout","mouseover"]);Lr("onPointerEnter",["pointerout","pointerover"]);Lr("onPointerLeave",["pointerout","pointerover"]);or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));or("onBeforeInput",["compositionend","keypress","textInput","paste"]);or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N0=new Set("cancel close invalid load scroll toggle".split(" ").concat(bs));function ch(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,_x(r,e,void 0,t),t.currentTarget=null}function ym(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;ch(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;ch(s,a,u),i=c}}}if(lo)throw t=Qa,lo=!1,Qa=null,t}function re(t,e){var n=e[tc];n===void 0&&(n=e[tc]=new Set);var r=t+"__bubble";n.has(r)||(vm(e,t,2,!1),n.add(r))}function Jl(t,e,n){var r=0;e&&(r|=4),vm(n,t,r,e)}var Mi="_reactListening"+Math.random().toString(36).slice(2);function Hs(t){if(!t[Mi]){t[Mi]=!0,Sp.forEach(function(n){n!=="selectionchange"&&(N0.has(n)||Jl(n,!1,t),Jl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Mi]||(e[Mi]=!0,Jl("selectionchange",!1,e))}}function vm(t,e,n,r){switch(tm(e)){case 1:var s=Fx;break;case 4:s=Lx;break;default:s=ou}n=s.bind(null,e,n,t),s=void 0,!Wa||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Xl(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Un(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Up(function(){var u=i,d=nu(n),h=[];e:{var f=gm.get(t);if(f!==void 0){var m=au,v=t;switch(t){case"keypress":if(Ki(n)===0)break e;case"keydown":case"keyup":m=Zx;break;case"focusin":v="focus",m=Ql;break;case"focusout":v="blur",m=Ql;break;case"beforeblur":case"afterblur":m=Ql;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Jd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Ux;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=n0;break;case hm:case fm:case pm:m=Wx;break;case mm:m=s0;break;case"scroll":m=Bx;break;case"wheel":m=o0;break;case"copy":case"cut":case"paste":m=Hx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Zd}var x=(e&4)!==0,b=!x&&t==="scroll",g=x?f!==null?f+"Capture":null:f;x=[];for(var p=u,y;p!==null;){y=p;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,g!==null&&(w=$s(p,g),w!=null&&x.push(qs(p,w,y)))),b)break;p=p.return}0<x.length&&(f=new m(f,v,null,n,d),h.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==za&&(v=n.relatedTarget||n.fromElement)&&(Un(v)||v[Ht]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=u,v=v?Un(v):null,v!==null&&(b=lr(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(x=Jd,w="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(x=Zd,w="onPointerLeave",g="onPointerEnter",p="pointer"),b=m==null?f:br(m),y=v==null?f:br(v),f=new x(w,p+"leave",m,n,d),f.target=b,f.relatedTarget=y,w=null,Un(d)===u&&(x=new x(g,p+"enter",v,n,d),x.target=y,x.relatedTarget=b,w=x),b=w,m&&v)t:{for(x=m,g=v,p=0,y=x;y;y=mr(y))p++;for(y=0,w=g;w;w=mr(w))y++;for(;0<p-y;)x=mr(x),p--;for(;0<y-p;)g=mr(g),y--;for(;p--;){if(x===g||g!==null&&x===g.alternate)break t;x=mr(x),g=mr(g)}x=null}else x=null;m!==null&&uh(h,f,m,x,!1),v!==null&&b!==null&&uh(h,b,v,x,!0)}}e:{if(f=u?br(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var N=f0;else if(nh(f))if(lm)N=y0;else{N=m0;var C=p0}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=g0);if(N&&(N=N(t,u))){om(h,N,n,d);break e}C&&C(t,f,u),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Fa(f,"number",f.value)}switch(C=u?br(u):window,t){case"focusin":(nh(C)||C.contentEditable==="true")&&(wr=C,Ya=u,ks=null);break;case"focusout":ks=Ya=wr=null;break;case"mousedown":Ka=!0;break;case"contextmenu":case"mouseup":case"dragend":Ka=!1,lh(h,n,d);break;case"selectionchange":if(w0)break;case"keydown":case"keyup":lh(h,n,d)}var k;if(uu)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else xr?sm(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(rm&&n.locale!=="ko"&&(xr||S!=="onCompositionStart"?S==="onCompositionEnd"&&xr&&(k=nm()):(cn=d,lu="value"in cn?cn.value:cn.textContent,xr=!0)),C=fo(u,S),0<C.length&&(S=new Xd(S,t,null,n,d),h.push({event:S,listeners:C}),k?S.data=k:(k=im(n),k!==null&&(S.data=k)))),(k=a0?c0(t,n):u0(t,n))&&(u=fo(u,"onBeforeInput"),0<u.length&&(d=new Xd("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=k))}ym(h,e)})}function qs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function fo(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=$s(t,n),i!=null&&r.unshift(qs(t,i,s)),i=$s(t,e),i!=null&&r.push(qs(t,i,s))),t=t.return}return r}function mr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function uh(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=$s(n,i),c!=null&&o.unshift(qs(n,c,a))):s||(c=$s(n,i),c!=null&&o.push(qs(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var C0=/\r\n?/g,S0=/\u0000|\uFFFD/g;function dh(t){return(typeof t=="string"?t:""+t).replace(C0,`
`).replace(S0,"")}function Fi(t,e,n){if(e=dh(e),dh(t)!==e&&n)throw Error(E(425))}function po(){}var Ja=null,Xa=null;function Za(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ec=typeof setTimeout=="function"?setTimeout:void 0,E0=typeof clearTimeout=="function"?clearTimeout:void 0,hh=typeof Promise=="function"?Promise:void 0,k0=typeof queueMicrotask=="function"?queueMicrotask:typeof hh<"u"?function(t){return hh.resolve(null).then(t).catch(I0)}:ec;function I0(t){setTimeout(function(){throw t})}function Zl(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Vs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Vs(e)}function gn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function fh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xr=Math.random().toString(36).slice(2),Tt="__reactFiber$"+Xr,Gs="__reactProps$"+Xr,Ht="__reactContainer$"+Xr,tc="__reactEvents$"+Xr,j0="__reactListeners$"+Xr,T0="__reactHandles$"+Xr;function Un(t){var e=t[Tt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ht]||n[Tt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=fh(t);t!==null;){if(n=t[Tt])return n;t=fh(t)}return e}t=n,n=t.parentNode}return null}function pi(t){return t=t[Tt]||t[Ht],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function br(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(E(33))}function rl(t){return t[Gs]||null}var nc=[],Nr=-1;function Pn(t){return{current:t}}function se(t){0>Nr||(t.current=nc[Nr],nc[Nr]=null,Nr--)}function te(t,e){Nr++,nc[Nr]=t.current,t.current=e}var En={},Oe=Pn(En),qe=Pn(!1),Yn=En;function Br(t,e){var n=t.type.contextTypes;if(!n)return En;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ge(t){return t=t.childContextTypes,t!=null}function mo(){se(qe),se(Oe)}function ph(t,e,n){if(Oe.current!==En)throw Error(E(168));te(Oe,e),te(qe,n)}function xm(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(E(108,px(t)||"Unknown",s));return ue({},n,r)}function go(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||En,Yn=Oe.current,te(Oe,t),te(qe,qe.current),!0}function mh(t,e,n){var r=t.stateNode;if(!r)throw Error(E(169));n?(t=xm(t,e,Yn),r.__reactInternalMemoizedMergedChildContext=t,se(qe),se(Oe),te(Oe,t)):se(qe),te(qe,n)}var Bt=null,sl=!1,ea=!1;function wm(t){Bt===null?Bt=[t]:Bt.push(t)}function A0(t){sl=!0,wm(t)}function Rn(){if(!ea&&Bt!==null){ea=!0;var t=0,e=G;try{var n=Bt;for(G=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Bt=null,sl=!1}catch(s){throw Bt!==null&&(Bt=Bt.slice(t+1)),Qp(ru,Rn),s}finally{G=e,ea=!1}}return null}var Cr=[],Sr=0,yo=null,vo=0,ct=[],ut=0,Kn=null,$t=1,Ut="";function Fn(t,e){Cr[Sr++]=vo,Cr[Sr++]=yo,yo=t,vo=e}function _m(t,e,n){ct[ut++]=$t,ct[ut++]=Ut,ct[ut++]=Kn,Kn=t;var r=$t;t=Ut;var s=32-bt(r)-1;r&=~(1<<s),n+=1;var i=32-bt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,$t=1<<32-bt(e)+s|n<<s|r,Ut=i+t}else $t=1<<i|n<<s|r,Ut=t}function hu(t){t.return!==null&&(Fn(t,1),_m(t,1,0))}function fu(t){for(;t===yo;)yo=Cr[--Sr],Cr[Sr]=null,vo=Cr[--Sr],Cr[Sr]=null;for(;t===Kn;)Kn=ct[--ut],ct[ut]=null,Ut=ct[--ut],ct[ut]=null,$t=ct[--ut],ct[ut]=null}var nt=null,tt=null,ie=!1,xt=null;function bm(t,e){var n=dt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function gh(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,nt=t,tt=gn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,nt=t,tt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Kn!==null?{id:$t,overflow:Ut}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=dt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,nt=t,tt=null,!0):!1;default:return!1}}function rc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sc(t){if(ie){var e=tt;if(e){var n=e;if(!gh(t,e)){if(rc(t))throw Error(E(418));e=gn(n.nextSibling);var r=nt;e&&gh(t,e)?bm(r,n):(t.flags=t.flags&-4097|2,ie=!1,nt=t)}}else{if(rc(t))throw Error(E(418));t.flags=t.flags&-4097|2,ie=!1,nt=t}}}function yh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nt=t}function Li(t){if(t!==nt)return!1;if(!ie)return yh(t),ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Za(t.type,t.memoizedProps)),e&&(e=tt)){if(rc(t))throw Nm(),Error(E(418));for(;e;)bm(t,e),e=gn(e.nextSibling)}if(yh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(E(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){tt=gn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}tt=null}}else tt=nt?gn(t.stateNode.nextSibling):null;return!0}function Nm(){for(var t=tt;t;)t=gn(t.nextSibling)}function $r(){tt=nt=null,ie=!1}function pu(t){xt===null?xt=[t]:xt.push(t)}var D0=tn.ReactCurrentBatchConfig;function us(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var r=n.stateNode}if(!r)throw Error(E(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,t))}return t}function Bi(t,e){throw t=Object.prototype.toString.call(e),Error(E(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vh(t){var e=t._init;return e(t._payload)}function Cm(t){function e(g,p){if(t){var y=g.deletions;y===null?(g.deletions=[p],g.flags|=16):y.push(p)}}function n(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function r(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function s(g,p){return g=wn(g,p),g.index=0,g.sibling=null,g}function i(g,p,y){return g.index=y,t?(y=g.alternate,y!==null?(y=y.index,y<p?(g.flags|=2,p):y):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,p,y,w){return p===null||p.tag!==6?(p=la(y,g.mode,w),p.return=g,p):(p=s(p,y),p.return=g,p)}function c(g,p,y,w){var N=y.type;return N===vr?d(g,p,y.props.children,w,y.key):p!==null&&(p.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===sn&&vh(N)===p.type)?(w=s(p,y.props),w.ref=us(g,p,y),w.return=g,w):(w=ro(y.type,y.key,y.props,null,g.mode,w),w.ref=us(g,p,y),w.return=g,w)}function u(g,p,y,w){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=aa(y,g.mode,w),p.return=g,p):(p=s(p,y.children||[]),p.return=g,p)}function d(g,p,y,w,N){return p===null||p.tag!==7?(p=qn(y,g.mode,w,N),p.return=g,p):(p=s(p,y),p.return=g,p)}function h(g,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=la(""+p,g.mode,y),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Ii:return y=ro(p.type,p.key,p.props,null,g.mode,y),y.ref=us(g,null,p),y.return=g,y;case yr:return p=aa(p,g.mode,y),p.return=g,p;case sn:var w=p._init;return h(g,w(p._payload),y)}if(ws(p)||is(p))return p=qn(p,g.mode,y,null),p.return=g,p;Bi(g,p)}return null}function f(g,p,y,w){var N=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return N!==null?null:a(g,p,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ii:return y.key===N?c(g,p,y,w):null;case yr:return y.key===N?u(g,p,y,w):null;case sn:return N=y._init,f(g,p,N(y._payload),w)}if(ws(y)||is(y))return N!==null?null:d(g,p,y,w,null);Bi(g,y)}return null}function m(g,p,y,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(y)||null,a(p,g,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ii:return g=g.get(w.key===null?y:w.key)||null,c(p,g,w,N);case yr:return g=g.get(w.key===null?y:w.key)||null,u(p,g,w,N);case sn:var C=w._init;return m(g,p,y,C(w._payload),N)}if(ws(w)||is(w))return g=g.get(y)||null,d(p,g,w,N,null);Bi(p,w)}return null}function v(g,p,y,w){for(var N=null,C=null,k=p,S=p=0,j=null;k!==null&&S<y.length;S++){k.index>S?(j=k,k=null):j=k.sibling;var T=f(g,k,y[S],w);if(T===null){k===null&&(k=j);break}t&&k&&T.alternate===null&&e(g,k),p=i(T,p,S),C===null?N=T:C.sibling=T,C=T,k=j}if(S===y.length)return n(g,k),ie&&Fn(g,S),N;if(k===null){for(;S<y.length;S++)k=h(g,y[S],w),k!==null&&(p=i(k,p,S),C===null?N=k:C.sibling=k,C=k);return ie&&Fn(g,S),N}for(k=r(g,k);S<y.length;S++)j=m(k,g,S,y[S],w),j!==null&&(t&&j.alternate!==null&&k.delete(j.key===null?S:j.key),p=i(j,p,S),C===null?N=j:C.sibling=j,C=j);return t&&k.forEach(function(M){return e(g,M)}),ie&&Fn(g,S),N}function x(g,p,y,w){var N=is(y);if(typeof N!="function")throw Error(E(150));if(y=N.call(y),y==null)throw Error(E(151));for(var C=N=null,k=p,S=p=0,j=null,T=y.next();k!==null&&!T.done;S++,T=y.next()){k.index>S?(j=k,k=null):j=k.sibling;var M=f(g,k,T.value,w);if(M===null){k===null&&(k=j);break}t&&k&&M.alternate===null&&e(g,k),p=i(M,p,S),C===null?N=M:C.sibling=M,C=M,k=j}if(T.done)return n(g,k),ie&&Fn(g,S),N;if(k===null){for(;!T.done;S++,T=y.next())T=h(g,T.value,w),T!==null&&(p=i(T,p,S),C===null?N=T:C.sibling=T,C=T);return ie&&Fn(g,S),N}for(k=r(g,k);!T.done;S++,T=y.next())T=m(k,g,S,T.value,w),T!==null&&(t&&T.alternate!==null&&k.delete(T.key===null?S:T.key),p=i(T,p,S),C===null?N=T:C.sibling=T,C=T);return t&&k.forEach(function(ne){return e(g,ne)}),ie&&Fn(g,S),N}function b(g,p,y,w){if(typeof y=="object"&&y!==null&&y.type===vr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ii:e:{for(var N=y.key,C=p;C!==null;){if(C.key===N){if(N=y.type,N===vr){if(C.tag===7){n(g,C.sibling),p=s(C,y.props.children),p.return=g,g=p;break e}}else if(C.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===sn&&vh(N)===C.type){n(g,C.sibling),p=s(C,y.props),p.ref=us(g,C,y),p.return=g,g=p;break e}n(g,C);break}else e(g,C);C=C.sibling}y.type===vr?(p=qn(y.props.children,g.mode,w,y.key),p.return=g,g=p):(w=ro(y.type,y.key,y.props,null,g.mode,w),w.ref=us(g,p,y),w.return=g,g=w)}return o(g);case yr:e:{for(C=y.key;p!==null;){if(p.key===C)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){n(g,p.sibling),p=s(p,y.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else e(g,p);p=p.sibling}p=aa(y,g.mode,w),p.return=g,g=p}return o(g);case sn:return C=y._init,b(g,p,C(y._payload),w)}if(ws(y))return v(g,p,y,w);if(is(y))return x(g,p,y,w);Bi(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(n(g,p.sibling),p=s(p,y),p.return=g,g=p):(n(g,p),p=la(y,g.mode,w),p.return=g,g=p),o(g)):n(g,p)}return b}var Ur=Cm(!0),Sm=Cm(!1),xo=Pn(null),wo=null,Er=null,mu=null;function gu(){mu=Er=wo=null}function yu(t){var e=xo.current;se(xo),t._currentValue=e}function ic(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Rr(t,e){wo=t,mu=Er=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qe=!0),t.firstContext=null)}function pt(t){var e=t._currentValue;if(mu!==t)if(t={context:t,memoizedValue:e,next:null},Er===null){if(wo===null)throw Error(E(308));Er=t,wo.dependencies={lanes:0,firstContext:t}}else Er=Er.next=t;return e}var zn=null;function vu(t){zn===null?zn=[t]:zn.push(t)}function Em(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,vu(e)):(n.next=s.next,s.next=n),e.interleaved=n,qt(t,r)}function qt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var on=!1;function xu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function km(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,H&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,qt(t,n)}return s=r.interleaved,s===null?(e.next=e,vu(r)):(e.next=s.next,s.next=e),r.interleaved=e,qt(t,n)}function Ji(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,su(t,n)}}function xh(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function _o(t,e,n,r){var s=t.updateQueue;on=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,a=i;do{var f=a.lane,m=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,x=a;switch(f=e,m=n,x.tag){case 1:if(v=x.payload,typeof v=="function"){h=v.call(m,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,f=typeof v=="function"?v.call(m,h,f):v,f==null)break e;h=ue({},h,f);break e;case 2:on=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Xn|=o,t.lanes=o,t.memoizedState=h}}function wh(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(E(191,s));s.call(r)}}}var mi={},Dt=Pn(mi),Ys=Pn(mi),Ks=Pn(mi);function Vn(t){if(t===mi)throw Error(E(174));return t}function wu(t,e){switch(te(Ks,e),te(Ys,t),te(Dt,mi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ba(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ba(e,t)}se(Dt),te(Dt,e)}function zr(){se(Dt),se(Ys),se(Ks)}function Im(t){Vn(Ks.current);var e=Vn(Dt.current),n=Ba(e,t.type);e!==n&&(te(Ys,t),te(Dt,n))}function _u(t){Ys.current===t&&(se(Dt),se(Ys))}var ae=Pn(0);function bo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ta=[];function bu(){for(var t=0;t<ta.length;t++)ta[t]._workInProgressVersionPrimary=null;ta.length=0}var Xi=tn.ReactCurrentDispatcher,na=tn.ReactCurrentBatchConfig,Jn=0,ce=null,ye=null,_e=null,No=!1,Is=!1,Js=0,P0=0;function Ae(){throw Error(E(321))}function Nu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!St(t[n],e[n]))return!1;return!0}function Cu(t,e,n,r,s,i){if(Jn=i,ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xi.current=t===null||t.memoizedState===null?F0:L0,t=n(r,s),Is){i=0;do{if(Is=!1,Js=0,25<=i)throw Error(E(301));i+=1,_e=ye=null,e.updateQueue=null,Xi.current=B0,t=n(r,s)}while(Is)}if(Xi.current=Co,e=ye!==null&&ye.next!==null,Jn=0,_e=ye=ce=null,No=!1,e)throw Error(E(300));return t}function Su(){var t=Js!==0;return Js=0,t}function jt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _e===null?ce.memoizedState=_e=t:_e=_e.next=t,_e}function mt(){if(ye===null){var t=ce.alternate;t=t!==null?t.memoizedState:null}else t=ye.next;var e=_e===null?ce.memoizedState:_e.next;if(e!==null)_e=e,ye=t;else{if(t===null)throw Error(E(310));ye=t,t={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},_e===null?ce.memoizedState=_e=t:_e=_e.next=t}return _e}function Xs(t,e){return typeof e=="function"?e(t):e}function ra(t){var e=mt(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=ye,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var d=u.lane;if((Jn&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=h,o=r):c=c.next=h,ce.lanes|=d,Xn|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,St(r,e.memoizedState)||(Qe=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ce.lanes|=i,Xn|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function sa(t){var e=mt(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);St(i,e.memoizedState)||(Qe=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function jm(){}function Tm(t,e){var n=ce,r=mt(),s=e(),i=!St(r.memoizedState,s);if(i&&(r.memoizedState=s,Qe=!0),r=r.queue,Eu(Pm.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||_e!==null&&_e.memoizedState.tag&1){if(n.flags|=2048,Zs(9,Dm.bind(null,n,r,s,e),void 0,null),Ne===null)throw Error(E(349));Jn&30||Am(n,e,s)}return s}function Am(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ce.updateQueue,e===null?(e={lastEffect:null,stores:null},ce.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Dm(t,e,n,r){e.value=n,e.getSnapshot=r,Rm(e)&&Om(t)}function Pm(t,e,n){return n(function(){Rm(e)&&Om(t)})}function Rm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!St(t,n)}catch{return!0}}function Om(t){var e=qt(t,1);e!==null&&Nt(e,t,1,-1)}function _h(t){var e=jt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:t},e.queue=t,t=t.dispatch=M0.bind(null,ce,t),[e.memoizedState,t]}function Zs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ce.updateQueue,e===null?(e={lastEffect:null,stores:null},ce.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Mm(){return mt().memoizedState}function Zi(t,e,n,r){var s=jt();ce.flags|=t,s.memoizedState=Zs(1|e,n,void 0,r===void 0?null:r)}function il(t,e,n,r){var s=mt();r=r===void 0?null:r;var i=void 0;if(ye!==null){var o=ye.memoizedState;if(i=o.destroy,r!==null&&Nu(r,o.deps)){s.memoizedState=Zs(e,n,i,r);return}}ce.flags|=t,s.memoizedState=Zs(1|e,n,i,r)}function bh(t,e){return Zi(8390656,8,t,e)}function Eu(t,e){return il(2048,8,t,e)}function Fm(t,e){return il(4,2,t,e)}function Lm(t,e){return il(4,4,t,e)}function Bm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $m(t,e,n){return n=n!=null?n.concat([t]):null,il(4,4,Bm.bind(null,e,t),n)}function ku(){}function Um(t,e){var n=mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zm(t,e){var n=mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Vm(t,e,n){return Jn&21?(St(n,e)||(n=Gp(),ce.lanes|=n,Xn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qe=!0),t.memoizedState=n)}function R0(t,e){var n=G;G=n!==0&&4>n?n:4,t(!0);var r=na.transition;na.transition={};try{t(!1),e()}finally{G=n,na.transition=r}}function Wm(){return mt().memoizedState}function O0(t,e,n){var r=xn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qm(t))Hm(e,n);else if(n=Em(t,e,n,r),n!==null){var s=$e();Nt(n,t,r,s),qm(n,e,r)}}function M0(t,e,n){var r=xn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qm(t))Hm(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,St(a,o)){var c=e.interleaved;c===null?(s.next=s,vu(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Em(t,e,s,r),n!==null&&(s=$e(),Nt(n,t,r,s),qm(n,e,r))}}function Qm(t){var e=t.alternate;return t===ce||e!==null&&e===ce}function Hm(t,e){Is=No=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function qm(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,su(t,n)}}var Co={readContext:pt,useCallback:Ae,useContext:Ae,useEffect:Ae,useImperativeHandle:Ae,useInsertionEffect:Ae,useLayoutEffect:Ae,useMemo:Ae,useReducer:Ae,useRef:Ae,useState:Ae,useDebugValue:Ae,useDeferredValue:Ae,useTransition:Ae,useMutableSource:Ae,useSyncExternalStore:Ae,useId:Ae,unstable_isNewReconciler:!1},F0={readContext:pt,useCallback:function(t,e){return jt().memoizedState=[t,e===void 0?null:e],t},useContext:pt,useEffect:bh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zi(4194308,4,Bm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zi(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zi(4,2,t,e)},useMemo:function(t,e){var n=jt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=jt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=O0.bind(null,ce,t),[r.memoizedState,t]},useRef:function(t){var e=jt();return t={current:t},e.memoizedState=t},useState:_h,useDebugValue:ku,useDeferredValue:function(t){return jt().memoizedState=t},useTransition:function(){var t=_h(!1),e=t[0];return t=R0.bind(null,t[1]),jt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ce,s=jt();if(ie){if(n===void 0)throw Error(E(407));n=n()}else{if(n=e(),Ne===null)throw Error(E(349));Jn&30||Am(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,bh(Pm.bind(null,r,i,t),[t]),r.flags|=2048,Zs(9,Dm.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=jt(),e=Ne.identifierPrefix;if(ie){var n=Ut,r=$t;n=(r&~(1<<32-bt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Js++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=P0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},L0={readContext:pt,useCallback:Um,useContext:pt,useEffect:Eu,useImperativeHandle:$m,useInsertionEffect:Fm,useLayoutEffect:Lm,useMemo:zm,useReducer:ra,useRef:Mm,useState:function(){return ra(Xs)},useDebugValue:ku,useDeferredValue:function(t){var e=mt();return Vm(e,ye.memoizedState,t)},useTransition:function(){var t=ra(Xs)[0],e=mt().memoizedState;return[t,e]},useMutableSource:jm,useSyncExternalStore:Tm,useId:Wm,unstable_isNewReconciler:!1},B0={readContext:pt,useCallback:Um,useContext:pt,useEffect:Eu,useImperativeHandle:$m,useInsertionEffect:Fm,useLayoutEffect:Lm,useMemo:zm,useReducer:sa,useRef:Mm,useState:function(){return sa(Xs)},useDebugValue:ku,useDeferredValue:function(t){var e=mt();return ye===null?e.memoizedState=t:Vm(e,ye.memoizedState,t)},useTransition:function(){var t=sa(Xs)[0],e=mt().memoizedState;return[t,e]},useMutableSource:jm,useSyncExternalStore:Tm,useId:Wm,unstable_isNewReconciler:!1};function yt(t,e){if(t&&t.defaultProps){e=ue({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function oc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ol={isMounted:function(t){return(t=t._reactInternals)?lr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$e(),s=xn(t),i=Vt(r,s);i.payload=e,n!=null&&(i.callback=n),e=yn(t,i,s),e!==null&&(Nt(e,t,s,r),Ji(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$e(),s=xn(t),i=Vt(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=yn(t,i,s),e!==null&&(Nt(e,t,s,r),Ji(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$e(),r=xn(t),s=Vt(n,r);s.tag=2,e!=null&&(s.callback=e),e=yn(t,s,r),e!==null&&(Nt(e,t,r,n),Ji(e,t,r))}};function Nh(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Qs(n,r)||!Qs(s,i):!0}function Gm(t,e,n){var r=!1,s=En,i=e.contextType;return typeof i=="object"&&i!==null?i=pt(i):(s=Ge(e)?Yn:Oe.current,r=e.contextTypes,i=(r=r!=null)?Br(t,s):En),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ol,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ch(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ol.enqueueReplaceState(e,e.state,null)}function lc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},xu(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=pt(i):(i=Ge(e)?Yn:Oe.current,s.context=Br(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(oc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ol.enqueueReplaceState(s,s.state,null),_o(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Vr(t,e){try{var n="",r=e;do n+=fx(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ia(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ac(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var $0=typeof WeakMap=="function"?WeakMap:Map;function Ym(t,e,n){n=Vt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Eo||(Eo=!0,vc=r),ac(t,e)},n}function Km(t,e,n){n=Vt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ac(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ac(t,e),typeof r!="function"&&(vn===null?vn=new Set([this]):vn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Sh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new $0;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=ew.bind(null,t,e,n),e.then(t,t))}function Eh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function kh(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vt(-1,1),e.tag=2,yn(n,e,1))),n.lanes|=1),t)}var U0=tn.ReactCurrentOwner,Qe=!1;function Le(t,e,n,r){e.child=t===null?Sm(e,null,n,r):Ur(e,t.child,n,r)}function Ih(t,e,n,r,s){n=n.render;var i=e.ref;return Rr(e,s),r=Cu(t,e,n,r,i,s),n=Su(),t!==null&&!Qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gt(t,e,s)):(ie&&n&&hu(e),e.flags|=1,Le(t,e,r,s),e.child)}function jh(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ou(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Jm(t,e,i,r,s)):(t=ro(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Qs,n(o,r)&&t.ref===e.ref)return Gt(t,e,s)}return e.flags|=1,t=wn(i,r),t.ref=e.ref,t.return=e,e.child=t}function Jm(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Qs(i,r)&&t.ref===e.ref)if(Qe=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Qe=!0);else return e.lanes=t.lanes,Gt(t,e,s)}return cc(t,e,n,r,s)}function Xm(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},te(Ir,Ze),Ze|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,te(Ir,Ze),Ze|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,te(Ir,Ze),Ze|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,te(Ir,Ze),Ze|=r;return Le(t,e,s,n),e.child}function Zm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cc(t,e,n,r,s){var i=Ge(n)?Yn:Oe.current;return i=Br(e,i),Rr(e,s),n=Cu(t,e,n,r,i,s),r=Su(),t!==null&&!Qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gt(t,e,s)):(ie&&r&&hu(e),e.flags|=1,Le(t,e,n,s),e.child)}function Th(t,e,n,r,s){if(Ge(n)){var i=!0;go(e)}else i=!1;if(Rr(e,s),e.stateNode===null)eo(t,e),Gm(e,n,r),lc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=pt(u):(u=Ge(n)?Yn:Oe.current,u=Br(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&Ch(e,o,r,u),on=!1;var f=e.memoizedState;o.state=f,_o(e,r,o,s),c=e.memoizedState,a!==r||f!==c||qe.current||on?(typeof d=="function"&&(oc(e,n,d,r),c=e.memoizedState),(a=on||Nh(e,n,a,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,km(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:yt(e.type,a),o.props=u,h=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=pt(c):(c=Ge(n)?Yn:Oe.current,c=Br(e,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==c)&&Ch(e,o,r,c),on=!1,f=e.memoizedState,o.state=f,_o(e,r,o,s);var v=e.memoizedState;a!==h||f!==v||qe.current||on?(typeof m=="function"&&(oc(e,n,m,r),v=e.memoizedState),(u=on||Nh(e,n,u,r,f,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return uc(t,e,n,r,i,s)}function uc(t,e,n,r,s,i){Zm(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&mh(e,n,!1),Gt(t,e,i);r=e.stateNode,U0.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ur(e,t.child,null,i),e.child=Ur(e,null,a,i)):Le(t,e,a,i),e.memoizedState=r.state,s&&mh(e,n,!0),e.child}function eg(t){var e=t.stateNode;e.pendingContext?ph(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ph(t,e.context,!1),wu(t,e.containerInfo)}function Ah(t,e,n,r,s){return $r(),pu(s),e.flags|=256,Le(t,e,n,r),e.child}var dc={dehydrated:null,treeContext:null,retryLane:0};function hc(t){return{baseLanes:t,cachePool:null,transitions:null}}function tg(t,e,n){var r=e.pendingProps,s=ae.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),te(ae,s&1),t===null)return sc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=cl(o,r,0,null),t=qn(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=hc(n),e.memoizedState=dc,t):Iu(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return z0(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=wn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=wn(a,i):(i=qn(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?hc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=dc,r}return i=t.child,t=i.sibling,r=wn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Iu(t,e){return e=cl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $i(t,e,n,r){return r!==null&&pu(r),Ur(e,t.child,null,n),t=Iu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function z0(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=ia(Error(E(422))),$i(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=cl({mode:"visible",children:r.children},s,0,null),i=qn(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ur(e,t.child,null,o),e.child.memoizedState=hc(o),e.memoizedState=dc,i);if(!(e.mode&1))return $i(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(E(419)),r=ia(i,r,void 0),$i(t,e,o,r)}if(a=(o&t.childLanes)!==0,Qe||a){if(r=Ne,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,qt(t,s),Nt(r,t,s,-1))}return Ru(),r=ia(Error(E(421))),$i(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=tw.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,tt=gn(s.nextSibling),nt=e,ie=!0,xt=null,t!==null&&(ct[ut++]=$t,ct[ut++]=Ut,ct[ut++]=Kn,$t=t.id,Ut=t.overflow,Kn=e),e=Iu(e,r.children),e.flags|=4096,e)}function Dh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ic(t.return,e,n)}function oa(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ng(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Le(t,e,r.children,n),r=ae.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dh(t,n,e);else if(t.tag===19)Dh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(te(ae,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&bo(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),oa(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&bo(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}oa(e,!0,n,null,i);break;case"together":oa(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function eo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Gt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(E(153));if(e.child!==null){for(t=e.child,n=wn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=wn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function V0(t,e,n){switch(e.tag){case 3:eg(e),$r();break;case 5:Im(e);break;case 1:Ge(e.type)&&go(e);break;case 4:wu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;te(xo,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(te(ae,ae.current&1),e.flags|=128,null):n&e.child.childLanes?tg(t,e,n):(te(ae,ae.current&1),t=Gt(t,e,n),t!==null?t.sibling:null);te(ae,ae.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ng(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),te(ae,ae.current),r)break;return null;case 22:case 23:return e.lanes=0,Xm(t,e,n)}return Gt(t,e,n)}var rg,fc,sg,ig;rg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fc=function(){};sg=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Vn(Dt.current);var i=null;switch(n){case"input":s=Oa(t,s),r=Oa(t,r),i=[];break;case"select":s=ue({},s,{value:void 0}),r=ue({},r,{value:void 0}),i=[];break;case"textarea":s=La(t,s),r=La(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=po)}$a(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ls.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ls.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&re("scroll",t),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};ig=function(t,e,n,r){n!==r&&(e.flags|=4)};function ds(t,e){if(!ie)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function De(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function W0(t,e,n){var r=e.pendingProps;switch(fu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return De(e),null;case 1:return Ge(e.type)&&mo(),De(e),null;case 3:return r=e.stateNode,zr(),se(qe),se(Oe),bu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Li(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xt!==null&&(_c(xt),xt=null))),fc(t,e),De(e),null;case 5:_u(e);var s=Vn(Ks.current);if(n=e.type,t!==null&&e.stateNode!=null)sg(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(E(166));return De(e),null}if(t=Vn(Dt.current),Li(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Tt]=e,r[Gs]=i,t=(e.mode&1)!==0,n){case"dialog":re("cancel",r),re("close",r);break;case"iframe":case"object":case"embed":re("load",r);break;case"video":case"audio":for(s=0;s<bs.length;s++)re(bs[s],r);break;case"source":re("error",r);break;case"img":case"image":case"link":re("error",r),re("load",r);break;case"details":re("toggle",r);break;case"input":Ud(r,i),re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},re("invalid",r);break;case"textarea":Vd(r,i),re("invalid",r)}$a(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Fi(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Fi(r.textContent,a,t),s=["children",""+a]):Ls.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&re("scroll",r)}switch(n){case"input":ji(r),zd(r,i,!0);break;case"textarea":ji(r),Wd(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=po)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Pp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Tt]=e,t[Gs]=r,rg(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ua(n,r),n){case"dialog":re("cancel",t),re("close",t),s=r;break;case"iframe":case"object":case"embed":re("load",t),s=r;break;case"video":case"audio":for(s=0;s<bs.length;s++)re(bs[s],t);s=r;break;case"source":re("error",t),s=r;break;case"img":case"image":case"link":re("error",t),re("load",t),s=r;break;case"details":re("toggle",t),s=r;break;case"input":Ud(t,r),s=Oa(t,r),re("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ue({},r,{value:void 0}),re("invalid",t);break;case"textarea":Vd(t,r),s=La(t,r),re("invalid",t);break;default:s=r}$a(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?Mp(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Rp(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Bs(t,c):typeof c=="number"&&Bs(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ls.hasOwnProperty(i)?c!=null&&i==="onScroll"&&re("scroll",t):c!=null&&Xc(t,i,c,o))}switch(n){case"input":ji(t),zd(t,r,!1);break;case"textarea":ji(t),Wd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Sn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Tr(t,!!r.multiple,i,!1):r.defaultValue!=null&&Tr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=po)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return De(e),null;case 6:if(t&&e.stateNode!=null)ig(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(E(166));if(n=Vn(Ks.current),Vn(Dt.current),Li(e)){if(r=e.stateNode,n=e.memoizedProps,r[Tt]=e,(i=r.nodeValue!==n)&&(t=nt,t!==null))switch(t.tag){case 3:Fi(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fi(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Tt]=e,e.stateNode=r}return De(e),null;case 13:if(se(ae),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ie&&tt!==null&&e.mode&1&&!(e.flags&128))Nm(),$r(),e.flags|=98560,i=!1;else if(i=Li(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(E(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(E(317));i[Tt]=e}else $r(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;De(e),i=!1}else xt!==null&&(_c(xt),xt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ae.current&1?xe===0&&(xe=3):Ru())),e.updateQueue!==null&&(e.flags|=4),De(e),null);case 4:return zr(),fc(t,e),t===null&&Hs(e.stateNode.containerInfo),De(e),null;case 10:return yu(e.type._context),De(e),null;case 17:return Ge(e.type)&&mo(),De(e),null;case 19:if(se(ae),i=e.memoizedState,i===null)return De(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ds(i,!1);else{if(xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=bo(t),o!==null){for(e.flags|=128,ds(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return te(ae,ae.current&1|2),e.child}t=t.sibling}i.tail!==null&&pe()>Wr&&(e.flags|=128,r=!0,ds(i,!1),e.lanes=4194304)}else{if(!r)if(t=bo(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ds(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ie)return De(e),null}else 2*pe()-i.renderingStartTime>Wr&&n!==1073741824&&(e.flags|=128,r=!0,ds(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=pe(),e.sibling=null,n=ae.current,te(ae,r?n&1|2:n&1),e):(De(e),null);case 22:case 23:return Pu(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ze&1073741824&&(De(e),e.subtreeFlags&6&&(e.flags|=8192)):De(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function Q0(t,e){switch(fu(e),e.tag){case 1:return Ge(e.type)&&mo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zr(),se(qe),se(Oe),bu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _u(e),null;case 13:if(se(ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(E(340));$r()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return se(ae),null;case 4:return zr(),null;case 10:return yu(e.type._context),null;case 22:case 23:return Pu(),null;case 24:return null;default:return null}}var Ui=!1,Pe=!1,H0=typeof WeakSet=="function"?WeakSet:Set,P=null;function kr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){he(t,e,r)}else n.current=null}function pc(t,e,n){try{n()}catch(r){he(t,e,r)}}var Ph=!1;function q0(t,e){if(Ja=uo,t=um(),du(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++u===s&&(a=o),f===i&&++d===r&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xa={focusedElem:t,selectionRange:n},uo=!1,P=e;P!==null;)if(e=P,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,P=t;else for(;P!==null;){e=P;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,b=v.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?x:yt(e.type,x),b);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(w){he(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,P=t;break}P=e.return}return v=Ph,Ph=!1,v}function js(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&pc(e,n,i)}s=s.next}while(s!==r)}}function ll(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function mc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function og(t){var e=t.alternate;e!==null&&(t.alternate=null,og(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Tt],delete e[Gs],delete e[tc],delete e[j0],delete e[T0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function lg(t){return t.tag===5||t.tag===3||t.tag===4}function Rh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=po));else if(r!==4&&(t=t.child,t!==null))for(gc(t,e,n),t=t.sibling;t!==null;)gc(t,e,n),t=t.sibling}function yc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yc(t,e,n),t=t.sibling;t!==null;)yc(t,e,n),t=t.sibling}var Ee=null,vt=!1;function nn(t,e,n){for(n=n.child;n!==null;)ag(t,e,n),n=n.sibling}function ag(t,e,n){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Zo,n)}catch{}switch(n.tag){case 5:Pe||kr(n,e);case 6:var r=Ee,s=vt;Ee=null,nn(t,e,n),Ee=r,vt=s,Ee!==null&&(vt?(t=Ee,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ee.removeChild(n.stateNode));break;case 18:Ee!==null&&(vt?(t=Ee,n=n.stateNode,t.nodeType===8?Zl(t.parentNode,n):t.nodeType===1&&Zl(t,n),Vs(t)):Zl(Ee,n.stateNode));break;case 4:r=Ee,s=vt,Ee=n.stateNode.containerInfo,vt=!0,nn(t,e,n),Ee=r,vt=s;break;case 0:case 11:case 14:case 15:if(!Pe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&pc(n,e,o),s=s.next}while(s!==r)}nn(t,e,n);break;case 1:if(!Pe&&(kr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){he(n,e,a)}nn(t,e,n);break;case 21:nn(t,e,n);break;case 22:n.mode&1?(Pe=(r=Pe)||n.memoizedState!==null,nn(t,e,n),Pe=r):nn(t,e,n);break;default:nn(t,e,n)}}function Oh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new H0),e.forEach(function(r){var s=nw.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function gt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ee=a.stateNode,vt=!1;break e;case 3:Ee=a.stateNode.containerInfo,vt=!0;break e;case 4:Ee=a.stateNode.containerInfo,vt=!0;break e}a=a.return}if(Ee===null)throw Error(E(160));ag(i,o,s),Ee=null,vt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){he(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cg(e,t),e=e.sibling}function cg(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gt(e,t),It(t),r&4){try{js(3,t,t.return),ll(3,t)}catch(x){he(t,t.return,x)}try{js(5,t,t.return)}catch(x){he(t,t.return,x)}}break;case 1:gt(e,t),It(t),r&512&&n!==null&&kr(n,n.return);break;case 5:if(gt(e,t),It(t),r&512&&n!==null&&kr(n,n.return),t.flags&32){var s=t.stateNode;try{Bs(s,"")}catch(x){he(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Ap(s,i),Ua(a,o);var u=Ua(a,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?Mp(s,h):d==="dangerouslySetInnerHTML"?Rp(s,h):d==="children"?Bs(s,h):Xc(s,d,h,u)}switch(a){case"input":Ma(s,i);break;case"textarea":Dp(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Tr(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Tr(s,!!i.multiple,i.defaultValue,!0):Tr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Gs]=i}catch(x){he(t,t.return,x)}}break;case 6:if(gt(e,t),It(t),r&4){if(t.stateNode===null)throw Error(E(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){he(t,t.return,x)}}break;case 3:if(gt(e,t),It(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Vs(e.containerInfo)}catch(x){he(t,t.return,x)}break;case 4:gt(e,t),It(t);break;case 13:gt(e,t),It(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Au=pe())),r&4&&Oh(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Pe=(u=Pe)||d,gt(e,t),Pe=u):gt(e,t),It(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(P=t,d=t.child;d!==null;){for(h=P=d;P!==null;){switch(f=P,m=f.child,f.tag){case 0:case 11:case 14:case 15:js(4,f,f.return);break;case 1:kr(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(x){he(r,n,x)}}break;case 5:kr(f,f.return);break;case 22:if(f.memoizedState!==null){Fh(h);continue}}m!==null?(m.return=f,P=m):Fh(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Op("display",o))}catch(x){he(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(x){he(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gt(e,t),It(t),r&4&&Oh(t);break;case 21:break;default:gt(e,t),It(t)}}function It(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(lg(n)){var r=n;break e}n=n.return}throw Error(E(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Bs(s,""),r.flags&=-33);var i=Rh(t);yc(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Rh(t);gc(t,a,o);break;default:throw Error(E(161))}}catch(c){he(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function G0(t,e,n){P=t,ug(t)}function ug(t,e,n){for(var r=(t.mode&1)!==0;P!==null;){var s=P,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ui;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Pe;a=Ui;var u=Pe;if(Ui=o,(Pe=c)&&!u)for(P=s;P!==null;)o=P,c=o.child,o.tag===22&&o.memoizedState!==null?Lh(s):c!==null?(c.return=o,P=c):Lh(s);for(;i!==null;)P=i,ug(i),i=i.sibling;P=s,Ui=a,Pe=u}Mh(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,P=i):Mh(t)}}function Mh(t){for(;P!==null;){var e=P;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pe||ll(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Pe)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:yt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&wh(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}wh(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Vs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}Pe||e.flags&512&&mc(e)}catch(f){he(e,e.return,f)}}if(e===t){P=null;break}if(n=e.sibling,n!==null){n.return=e.return,P=n;break}P=e.return}}function Fh(t){for(;P!==null;){var e=P;if(e===t){P=null;break}var n=e.sibling;if(n!==null){n.return=e.return,P=n;break}P=e.return}}function Lh(t){for(;P!==null;){var e=P;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ll(4,e)}catch(c){he(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){he(e,s,c)}}var i=e.return;try{mc(e)}catch(c){he(e,i,c)}break;case 5:var o=e.return;try{mc(e)}catch(c){he(e,o,c)}}}catch(c){he(e,e.return,c)}if(e===t){P=null;break}var a=e.sibling;if(a!==null){a.return=e.return,P=a;break}P=e.return}}var Y0=Math.ceil,So=tn.ReactCurrentDispatcher,ju=tn.ReactCurrentOwner,ft=tn.ReactCurrentBatchConfig,H=0,Ne=null,ge=null,Ie=0,Ze=0,Ir=Pn(0),xe=0,ei=null,Xn=0,al=0,Tu=0,Ts=null,We=null,Au=0,Wr=1/0,Lt=null,Eo=!1,vc=null,vn=null,zi=!1,un=null,ko=0,As=0,xc=null,to=-1,no=0;function $e(){return H&6?pe():to!==-1?to:to=pe()}function xn(t){return t.mode&1?H&2&&Ie!==0?Ie&-Ie:D0.transition!==null?(no===0&&(no=Gp()),no):(t=G,t!==0||(t=window.event,t=t===void 0?16:tm(t.type)),t):1}function Nt(t,e,n,r){if(50<As)throw As=0,xc=null,Error(E(185));hi(t,n,r),(!(H&2)||t!==Ne)&&(t===Ne&&(!(H&2)&&(al|=n),xe===4&&an(t,Ie)),Ye(t,r),n===1&&H===0&&!(e.mode&1)&&(Wr=pe()+500,sl&&Rn()))}function Ye(t,e){var n=t.callbackNode;Dx(t,e);var r=co(t,t===Ne?Ie:0);if(r===0)n!==null&&qd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&qd(n),e===1)t.tag===0?A0(Bh.bind(null,t)):wm(Bh.bind(null,t)),k0(function(){!(H&6)&&Rn()}),n=null;else{switch(Yp(r)){case 1:n=ru;break;case 4:n=Hp;break;case 16:n=ao;break;case 536870912:n=qp;break;default:n=ao}n=vg(n,dg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dg(t,e){if(to=-1,no=0,H&6)throw Error(E(327));var n=t.callbackNode;if(Or()&&t.callbackNode!==n)return null;var r=co(t,t===Ne?Ie:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Io(t,r);else{e=r;var s=H;H|=2;var i=fg();(Ne!==t||Ie!==e)&&(Lt=null,Wr=pe()+500,Hn(t,e));do try{X0();break}catch(a){hg(t,a)}while(!0);gu(),So.current=i,H=s,ge!==null?e=0:(Ne=null,Ie=0,e=xe)}if(e!==0){if(e===2&&(s=Ha(t),s!==0&&(r=s,e=wc(t,s))),e===1)throw n=ei,Hn(t,0),an(t,r),Ye(t,pe()),n;if(e===6)an(t,r);else{if(s=t.current.alternate,!(r&30)&&!K0(s)&&(e=Io(t,r),e===2&&(i=Ha(t),i!==0&&(r=i,e=wc(t,i))),e===1))throw n=ei,Hn(t,0),an(t,r),Ye(t,pe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(E(345));case 2:Ln(t,We,Lt);break;case 3:if(an(t,r),(r&130023424)===r&&(e=Au+500-pe(),10<e)){if(co(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){$e(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ec(Ln.bind(null,t,We,Lt),e);break}Ln(t,We,Lt);break;case 4:if(an(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-bt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=pe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Y0(r/1960))-r,10<r){t.timeoutHandle=ec(Ln.bind(null,t,We,Lt),r);break}Ln(t,We,Lt);break;case 5:Ln(t,We,Lt);break;default:throw Error(E(329))}}}return Ye(t,pe()),t.callbackNode===n?dg.bind(null,t):null}function wc(t,e){var n=Ts;return t.current.memoizedState.isDehydrated&&(Hn(t,e).flags|=256),t=Io(t,e),t!==2&&(e=We,We=n,e!==null&&_c(e)),t}function _c(t){We===null?We=t:We.push.apply(We,t)}function K0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!St(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function an(t,e){for(e&=~Tu,e&=~al,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-bt(e),r=1<<n;t[n]=-1,e&=~r}}function Bh(t){if(H&6)throw Error(E(327));Or();var e=co(t,0);if(!(e&1))return Ye(t,pe()),null;var n=Io(t,e);if(t.tag!==0&&n===2){var r=Ha(t);r!==0&&(e=r,n=wc(t,r))}if(n===1)throw n=ei,Hn(t,0),an(t,e),Ye(t,pe()),n;if(n===6)throw Error(E(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ln(t,We,Lt),Ye(t,pe()),null}function Du(t,e){var n=H;H|=1;try{return t(e)}finally{H=n,H===0&&(Wr=pe()+500,sl&&Rn())}}function Zn(t){un!==null&&un.tag===0&&!(H&6)&&Or();var e=H;H|=1;var n=ft.transition,r=G;try{if(ft.transition=null,G=1,t)return t()}finally{G=r,ft.transition=n,H=e,!(H&6)&&Rn()}}function Pu(){Ze=Ir.current,se(Ir)}function Hn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,E0(n)),ge!==null)for(n=ge.return;n!==null;){var r=n;switch(fu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&mo();break;case 3:zr(),se(qe),se(Oe),bu();break;case 5:_u(r);break;case 4:zr();break;case 13:se(ae);break;case 19:se(ae);break;case 10:yu(r.type._context);break;case 22:case 23:Pu()}n=n.return}if(Ne=t,ge=t=wn(t.current,null),Ie=Ze=e,xe=0,ei=null,Tu=al=Xn=0,We=Ts=null,zn!==null){for(e=0;e<zn.length;e++)if(n=zn[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}zn=null}return t}function hg(t,e){do{var n=ge;try{if(gu(),Xi.current=Co,No){for(var r=ce.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}No=!1}if(Jn=0,_e=ye=ce=null,Is=!1,Js=0,ju.current=null,n===null||n.return===null){xe=1,ei=e,ge=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Ie,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Eh(o);if(m!==null){m.flags&=-257,kh(m,o,a,i,e),m.mode&1&&Sh(i,u,e),e=m,c=u;var v=e.updateQueue;if(v===null){var x=new Set;x.add(c),e.updateQueue=x}else v.add(c);break e}else{if(!(e&1)){Sh(i,u,e),Ru();break e}c=Error(E(426))}}else if(ie&&a.mode&1){var b=Eh(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),kh(b,o,a,i,e),pu(Vr(c,a));break e}}i=c=Vr(c,a),xe!==4&&(xe=2),Ts===null?Ts=[i]:Ts.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=Ym(i,c,e);xh(i,g);break e;case 1:a=c;var p=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(vn===null||!vn.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=Km(i,a,e);xh(i,w);break e}}i=i.return}while(i!==null)}mg(n)}catch(N){e=N,ge===n&&n!==null&&(ge=n=n.return);continue}break}while(!0)}function fg(){var t=So.current;return So.current=Co,t===null?Co:t}function Ru(){(xe===0||xe===3||xe===2)&&(xe=4),Ne===null||!(Xn&268435455)&&!(al&268435455)||an(Ne,Ie)}function Io(t,e){var n=H;H|=2;var r=fg();(Ne!==t||Ie!==e)&&(Lt=null,Hn(t,e));do try{J0();break}catch(s){hg(t,s)}while(!0);if(gu(),H=n,So.current=r,ge!==null)throw Error(E(261));return Ne=null,Ie=0,xe}function J0(){for(;ge!==null;)pg(ge)}function X0(){for(;ge!==null&&!Nx();)pg(ge)}function pg(t){var e=yg(t.alternate,t,Ze);t.memoizedProps=t.pendingProps,e===null?mg(t):ge=e,ju.current=null}function mg(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Q0(n,e),n!==null){n.flags&=32767,ge=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xe=6,ge=null;return}}else if(n=W0(n,e,Ze),n!==null){ge=n;return}if(e=e.sibling,e!==null){ge=e;return}ge=e=t}while(e!==null);xe===0&&(xe=5)}function Ln(t,e,n){var r=G,s=ft.transition;try{ft.transition=null,G=1,Z0(t,e,n,r)}finally{ft.transition=s,G=r}return null}function Z0(t,e,n,r){do Or();while(un!==null);if(H&6)throw Error(E(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(E(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Px(t,i),t===Ne&&(ge=Ne=null,Ie=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zi||(zi=!0,vg(ao,function(){return Or(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ft.transition,ft.transition=null;var o=G;G=1;var a=H;H|=4,ju.current=null,q0(t,n),cg(n,t),x0(Xa),uo=!!Ja,Xa=Ja=null,t.current=n,G0(n),Cx(),H=a,G=o,ft.transition=i}else t.current=n;if(zi&&(zi=!1,un=t,ko=s),i=t.pendingLanes,i===0&&(vn=null),kx(n.stateNode),Ye(t,pe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Eo)throw Eo=!1,t=vc,vc=null,t;return ko&1&&t.tag!==0&&Or(),i=t.pendingLanes,i&1?t===xc?As++:(As=0,xc=t):As=0,Rn(),null}function Or(){if(un!==null){var t=Yp(ko),e=ft.transition,n=G;try{if(ft.transition=null,G=16>t?16:t,un===null)var r=!1;else{if(t=un,un=null,ko=0,H&6)throw Error(E(331));var s=H;for(H|=4,P=t.current;P!==null;){var i=P,o=i.child;if(P.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(P=u;P!==null;){var d=P;switch(d.tag){case 0:case 11:case 15:js(8,d,i)}var h=d.child;if(h!==null)h.return=d,P=h;else for(;P!==null;){d=P;var f=d.sibling,m=d.return;if(og(d),d===u){P=null;break}if(f!==null){f.return=m,P=f;break}P=m}}}var v=i.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}P=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,P=o;else e:for(;P!==null;){if(i=P,i.flags&2048)switch(i.tag){case 0:case 11:case 15:js(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,P=g;break e}P=i.return}}var p=t.current;for(P=p;P!==null;){o=P;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,P=y;else e:for(o=p;P!==null;){if(a=P,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ll(9,a)}}catch(N){he(a,a.return,N)}if(a===o){P=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,P=w;break e}P=a.return}}if(H=s,Rn(),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Zo,t)}catch{}r=!0}return r}finally{G=n,ft.transition=e}}return!1}function $h(t,e,n){e=Vr(n,e),e=Ym(t,e,1),t=yn(t,e,1),e=$e(),t!==null&&(hi(t,1,e),Ye(t,e))}function he(t,e,n){if(t.tag===3)$h(t,t,n);else for(;e!==null;){if(e.tag===3){$h(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vn===null||!vn.has(r))){t=Vr(n,t),t=Km(e,t,1),e=yn(e,t,1),t=$e(),e!==null&&(hi(e,1,t),Ye(e,t));break}}e=e.return}}function ew(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$e(),t.pingedLanes|=t.suspendedLanes&n,Ne===t&&(Ie&n)===n&&(xe===4||xe===3&&(Ie&130023424)===Ie&&500>pe()-Au?Hn(t,0):Tu|=n),Ye(t,e)}function gg(t,e){e===0&&(t.mode&1?(e=Di,Di<<=1,!(Di&130023424)&&(Di=4194304)):e=1);var n=$e();t=qt(t,e),t!==null&&(hi(t,e,n),Ye(t,n))}function tw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gg(t,n)}function nw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(e),gg(t,n)}var yg;yg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qe.current)Qe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qe=!1,V0(t,e,n);Qe=!!(t.flags&131072)}else Qe=!1,ie&&e.flags&1048576&&_m(e,vo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;eo(t,e),t=e.pendingProps;var s=Br(e,Oe.current);Rr(e,n),s=Cu(null,e,r,t,s,n);var i=Su();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ge(r)?(i=!0,go(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,xu(e),s.updater=ol,e.stateNode=s,s._reactInternals=e,lc(e,r,t,n),e=uc(null,e,r,!0,i,n)):(e.tag=0,ie&&i&&hu(e),Le(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(eo(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=sw(r),t=yt(r,t),s){case 0:e=cc(null,e,r,t,n);break e;case 1:e=Th(null,e,r,t,n);break e;case 11:e=Ih(null,e,r,t,n);break e;case 14:e=jh(null,e,r,yt(r.type,t),n);break e}throw Error(E(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yt(r,s),cc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yt(r,s),Th(t,e,r,s,n);case 3:e:{if(eg(e),t===null)throw Error(E(387));r=e.pendingProps,i=e.memoizedState,s=i.element,km(t,e),_o(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Vr(Error(E(423)),e),e=Ah(t,e,r,n,s);break e}else if(r!==s){s=Vr(Error(E(424)),e),e=Ah(t,e,r,n,s);break e}else for(tt=gn(e.stateNode.containerInfo.firstChild),nt=e,ie=!0,xt=null,n=Sm(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($r(),r===s){e=Gt(t,e,n);break e}Le(t,e,r,n)}e=e.child}return e;case 5:return Im(e),t===null&&sc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Za(r,s)?o=null:i!==null&&Za(r,i)&&(e.flags|=32),Zm(t,e),Le(t,e,o,n),e.child;case 6:return t===null&&sc(e),null;case 13:return tg(t,e,n);case 4:return wu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ur(e,null,r,n):Le(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yt(r,s),Ih(t,e,r,s,n);case 7:return Le(t,e,e.pendingProps,n),e.child;case 8:return Le(t,e,e.pendingProps.children,n),e.child;case 12:return Le(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,te(xo,r._currentValue),r._currentValue=o,i!==null)if(St(i.value,o)){if(i.children===s.children&&!qe.current){e=Gt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Vt(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),ic(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(E(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ic(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Le(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Rr(e,n),s=pt(s),r=r(s),e.flags|=1,Le(t,e,r,n),e.child;case 14:return r=e.type,s=yt(r,e.pendingProps),s=yt(r.type,s),jh(t,e,r,s,n);case 15:return Jm(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:yt(r,s),eo(t,e),e.tag=1,Ge(r)?(t=!0,go(e)):t=!1,Rr(e,n),Gm(e,r,s),lc(e,r,s,n),uc(null,e,r,!0,t,n);case 19:return ng(t,e,n);case 22:return Xm(t,e,n)}throw Error(E(156,e.tag))};function vg(t,e){return Qp(t,e)}function rw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dt(t,e,n,r){return new rw(t,e,n,r)}function Ou(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sw(t){if(typeof t=="function")return Ou(t)?1:0;if(t!=null){if(t=t.$$typeof,t===eu)return 11;if(t===tu)return 14}return 2}function wn(t,e){var n=t.alternate;return n===null?(n=dt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ro(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Ou(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case vr:return qn(n.children,s,i,e);case Zc:o=8,s|=8;break;case Aa:return t=dt(12,n,e,s|2),t.elementType=Aa,t.lanes=i,t;case Da:return t=dt(13,n,e,s),t.elementType=Da,t.lanes=i,t;case Pa:return t=dt(19,n,e,s),t.elementType=Pa,t.lanes=i,t;case Ip:return cl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ep:o=10;break e;case kp:o=9;break e;case eu:o=11;break e;case tu:o=14;break e;case sn:o=16,r=null;break e}throw Error(E(130,t==null?t:typeof t,""))}return e=dt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function qn(t,e,n,r){return t=dt(7,t,r,e),t.lanes=n,t}function cl(t,e,n,r){return t=dt(22,t,r,e),t.elementType=Ip,t.lanes=n,t.stateNode={isHidden:!1},t}function la(t,e,n){return t=dt(6,t,null,e),t.lanes=n,t}function aa(t,e,n){return e=dt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function iw(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zl(0),this.expirationTimes=zl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zl(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Mu(t,e,n,r,s,i,o,a,c){return t=new iw(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=dt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xu(i),t}function ow(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function xg(t){if(!t)return En;t=t._reactInternals;e:{if(lr(t)!==t||t.tag!==1)throw Error(E(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ge(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(t.tag===1){var n=t.type;if(Ge(n))return xm(t,n,e)}return e}function wg(t,e,n,r,s,i,o,a,c){return t=Mu(n,r,!0,t,s,i,o,a,c),t.context=xg(null),n=t.current,r=$e(),s=xn(n),i=Vt(r,s),i.callback=e??null,yn(n,i,s),t.current.lanes=s,hi(t,s,r),Ye(t,r),t}function ul(t,e,n,r){var s=e.current,i=$e(),o=xn(s);return n=xg(n),e.context===null?e.context=n:e.pendingContext=n,e=Vt(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=yn(s,e,o),t!==null&&(Nt(t,s,o,i),Ji(t,s,o)),o}function jo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Uh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Fu(t,e){Uh(t,e),(t=t.alternate)&&Uh(t,e)}function lw(){return null}var _g=typeof reportError=="function"?reportError:function(t){console.error(t)};function Lu(t){this._internalRoot=t}dl.prototype.render=Lu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(E(409));ul(t,e,null,null)};dl.prototype.unmount=Lu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zn(function(){ul(null,t,null,null)}),e[Ht]=null}};function dl(t){this._internalRoot=t}dl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Xp();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ln.length&&e!==0&&e<ln[n].priority;n++);ln.splice(n,0,t),n===0&&em(t)}};function Bu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function zh(){}function aw(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=jo(o);i.call(u)}}var o=wg(e,r,t,0,null,!1,!1,"",zh);return t._reactRootContainer=o,t[Ht]=o.current,Hs(t.nodeType===8?t.parentNode:t),Zn(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=jo(c);a.call(u)}}var c=Mu(t,0,!1,null,null,!1,!1,"",zh);return t._reactRootContainer=c,t[Ht]=c.current,Hs(t.nodeType===8?t.parentNode:t),Zn(function(){ul(e,c,n,r)}),c}function fl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=jo(o);a.call(c)}}ul(e,o,t,s)}else o=aw(n,e,t,s,r);return jo(o)}Kp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=_s(e.pendingLanes);n!==0&&(su(e,n|1),Ye(e,pe()),!(H&6)&&(Wr=pe()+500,Rn()))}break;case 13:Zn(function(){var r=qt(t,1);if(r!==null){var s=$e();Nt(r,t,1,s)}}),Fu(t,1)}};iu=function(t){if(t.tag===13){var e=qt(t,134217728);if(e!==null){var n=$e();Nt(e,t,134217728,n)}Fu(t,134217728)}};Jp=function(t){if(t.tag===13){var e=xn(t),n=qt(t,e);if(n!==null){var r=$e();Nt(n,t,e,r)}Fu(t,e)}};Xp=function(){return G};Zp=function(t,e){var n=G;try{return G=t,e()}finally{G=n}};Va=function(t,e,n){switch(e){case"input":if(Ma(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=rl(r);if(!s)throw Error(E(90));Tp(r),Ma(r,s)}}}break;case"textarea":Dp(t,n);break;case"select":e=n.value,e!=null&&Tr(t,!!n.multiple,e,!1)}};Bp=Du;$p=Zn;var cw={usingClientEntryPoint:!1,Events:[pi,br,rl,Fp,Lp,Du]},hs={findFiberByHostInstance:Un,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uw={bundleType:hs.bundleType,version:hs.version,rendererPackageName:hs.rendererPackageName,rendererConfig:hs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Vp(t),t===null?null:t.stateNode},findFiberByHostInstance:hs.findFiberByHostInstance||lw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vi.isDisabled&&Vi.supportsFiber)try{Zo=Vi.inject(uw),At=Vi}catch{}}ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cw;ot.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bu(e))throw Error(E(200));return ow(t,e,null,n)};ot.createRoot=function(t,e){if(!Bu(t))throw Error(E(299));var n=!1,r="",s=_g;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Mu(t,1,!1,null,null,n,!1,r,s),t[Ht]=e.current,Hs(t.nodeType===8?t.parentNode:t),new Lu(e)};ot.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(E(188)):(t=Object.keys(t).join(","),Error(E(268,t)));return t=Vp(e),t=t===null?null:t.stateNode,t};ot.flushSync=function(t){return Zn(t)};ot.hydrate=function(t,e,n){if(!hl(e))throw Error(E(200));return fl(null,t,e,!0,n)};ot.hydrateRoot=function(t,e,n){if(!Bu(t))throw Error(E(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=_g;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=wg(e,null,t,1,n??null,s,!1,i,o),t[Ht]=e.current,Hs(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new dl(e)};ot.render=function(t,e,n){if(!hl(e))throw Error(E(200));return fl(null,t,e,!1,n)};ot.unmountComponentAtNode=function(t){if(!hl(t))throw Error(E(40));return t._reactRootContainer?(Zn(function(){fl(null,null,t,!1,function(){t._reactRootContainer=null,t[Ht]=null})}),!0):!1};ot.unstable_batchedUpdates=Du;ot.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!hl(n))throw Error(E(200));if(t==null||t._reactInternals===void 0)throw Error(E(38));return fl(t,e,n,!1,r)};ot.version="18.3.1-next-f1338f8080-20240426";function bg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bg)}catch(t){console.error(t)}}bg(),bp.exports=ot;var dw=bp.exports,Vh=dw;ja.createRoot=Vh.createRoot,ja.hydrateRoot=Vh.hydrateRoot;/**
 * @remix-run/router v1.17.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function To(){return To=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},To.apply(this,arguments)}var dn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(dn||(dn={}));const Wh="popstate";function hw(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:c=""}=gi(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),bc("",{pathname:o,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");a=u===-1?c:c.slice(0,u)}return a+"#"+(typeof i=="string"?i:Ng(i))}function r(s,i){$u(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return pw(e,n,r,t)}function Je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $u(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fw(){return Math.random().toString(36).substr(2,8)}function Qh(t,e){return{usr:t.state,key:t.key,idx:e}}function bc(t,e,n,r){return n===void 0&&(n=null),To({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?gi(e):e,{state:n,key:e&&e.key||r||fw()})}function Ng(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function gi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function pw(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=dn.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(To({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=dn.Pop;let b=d(),g=b==null?null:b-u;u=b,c&&c({action:a,location:x.location,delta:g})}function f(b,g){a=dn.Push;let p=bc(x.location,b,g);n&&n(p,b),u=d()+1;let y=Qh(p,u),w=x.createHref(p);try{o.pushState(y,"",w)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(w)}i&&c&&c({action:a,location:x.location,delta:1})}function m(b,g){a=dn.Replace;let p=bc(x.location,b,g);n&&n(p,b),u=d();let y=Qh(p,u),w=x.createHref(p);o.replaceState(y,"",w),i&&c&&c({action:a,location:x.location,delta:0})}function v(b){let g=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof b=="string"?b:Ng(b);return p=p.replace(/ $/,"%20"),Je(g,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,g)}let x={get action(){return a},get location(){return t(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Wh,h),c=b,()=>{s.removeEventListener(Wh,h),c=null}},createHref(b){return e(s,b)},createURL:v,encodeLocation(b){let g=v(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:m,go(b){return o.go(b)}};return x}var Hh;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Hh||(Hh={}));function mw(t,e,n){return n===void 0&&(n="/"),gw(t,e,n,!1)}function gw(t,e,n,r){let s=typeof e=="string"?gi(e):e,i=Eg(s.pathname||"/",n);if(i==null)return null;let o=Cg(t);yw(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=Iw(i);a=Ew(o[c],u,r)}return a}function Cg(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Je(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Mr([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(Je(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Cg(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:Cw(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of Sg(i.path))s(i,o,c)}),e}function Sg(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Sg(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function yw(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Sw(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const vw=/^:[\w-]+$/,xw=3,ww=2,_w=1,bw=10,Nw=-2,qh=t=>t==="*";function Cw(t,e){let n=t.split("/"),r=n.length;return n.some(qh)&&(r+=Nw),e&&(r+=ww),n.filter(s=>!qh(s)).reduce((s,i)=>s+(vw.test(i)?xw:i===""?_w:bw),r)}function Sw(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Ew(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=Gh({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=Gh({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Mr([i,h.pathname]),pathnameBase:jw(Mr([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Mr([i,h.pathnameBase]))}return o}function Gh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=kw(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let x=a[h]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const v=a[h];return m&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function kw(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),$u(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Iw(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $u(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Eg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Mr=t=>t.join("/").replace(/\/\/+/g,"/"),jw=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function Tw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const kg=["post","put","patch","delete"];new Set(kg);const Aw=["get",...kg];new Set(Aw);/**
 * React Router v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ao(){return Ao=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ao.apply(this,arguments)}const Dw=_.createContext(null),Pw=_.createContext(null),Ig=_.createContext(null),pl=_.createContext(null),ml=_.createContext({outlet:null,matches:[],isDataRoute:!1}),jg=_.createContext(null);function Uu(){return _.useContext(pl)!=null}function Rw(){return Uu()||Je(!1),_.useContext(pl).location}function Ow(t,e){return Mw(t,e)}function Mw(t,e,n,r){Uu()||Je(!1);let{navigator:s}=_.useContext(Ig),{matches:i}=_.useContext(ml),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Rw(),d;if(e){var h;let b=typeof e=="string"?gi(e):e;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||Je(!1),d=b}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let b=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=mw(t,{pathname:m}),x=Uw(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:Mr([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Mr([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return e&&x?_.createElement(pl.Provider,{value:{location:Ao({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:dn.Pop}},x):x}function Fw(){let t=Qw(),e=Tw(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:s},n):null,null)}const Lw=_.createElement(Fw,null);class Bw extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(ml.Provider,{value:this.props.routeContext},_.createElement(jg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $w(t){let{routeContext:e,match:n,children:r}=t,s=_.useContext(Dw);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(ml.Provider,{value:e},r)}function Uw(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Je(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=n,v=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,v=!1,x=null,b=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,x=h.route.errorElement||Lw,c&&(u<0&&f===0?(v=!0,b=null):u===f&&(v=!0,b=h.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,f+1)),p=()=>{let y;return m?y=x:v?y=b:h.route.Component?y=_.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=d,_.createElement($w,{match:h,routeContext:{outlet:d,matches:g,isDataRoute:n!=null},children:y})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?_.createElement(Bw,{location:n.location,revalidation:n.revalidation,component:x,error:m,children:p(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):p()},null)}var Nc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Nc||{});function zw(t){let e=_.useContext(Pw);return e||Je(!1),e}function Vw(t){let e=_.useContext(ml);return e||Je(!1),e}function Ww(t){let e=Vw(),n=e.matches[e.matches.length-1];return n.route.id||Je(!1),n.route.id}function Qw(){var t;let e=_.useContext(jg),n=zw(Nc.UseRouteError),r=Ww(Nc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Fe(t){Je(!1)}function Hw(t){let{basename:e="/",children:n=null,location:r,navigationType:s=dn.Pop,navigator:i,static:o=!1,future:a}=t;Uu()&&Je(!1);let c=e.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:c,navigator:i,static:o,future:Ao({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=gi(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:v="default"}=r,x=_.useMemo(()=>{let b=Eg(d,c);return b==null?null:{location:{pathname:b,search:h,hash:f,state:m,key:v},navigationType:s}},[c,d,h,f,m,v,s]);return x==null?null:_.createElement(Ig.Provider,{value:u},_.createElement(pl.Provider,{children:n,value:x}))}function qw(t){let{children:e,location:n}=t;return Ow(Cc(e),n)}new Promise(()=>{});function Cc(t,e){e===void 0&&(e=[]);let n=[];return _.Children.forEach(t,(r,s)=>{if(!_.isValidElement(r))return;let i=[...e,s];if(r.type===_.Fragment){n.push.apply(n,Cc(r.props.children,i));return}r.type!==Fe&&Je(!1),!r.props.index||!r.props.children||Je(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Cc(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Gw="6";try{window.__reactRouterVersion=Gw}catch{}const Yw="startTransition",Yh=ex[Yw];function Kw(t){let{basename:e,children:n,future:r,window:s}=t,i=_.useRef();i.current==null&&(i.current=hw({window:s,v5Compat:!0}));let o=i.current,[a,c]=_.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=_.useCallback(h=>{u&&Yh?Yh(()=>c(h)):c(h)},[c,u]);return _.useLayoutEffect(()=>o.listen(d),[o,d]),_.createElement(Hw,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var Kh;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Kh||(Kh={}));var Jh;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Jh||(Jh={}));const fs=""+new URL("bubble-Dy97b3Cx.png",import.meta.url).href,ps=""+new URL("Pencil-shUlLtKB.png",import.meta.url).href,Tg=""+new URL("select-DKsCgP1g.png",import.meta.url).href,ee=({items:t,onSelect:e,style:n,columns:r,all:s,ICON:i,name:o})=>{const[a,c]=_.useState(!1),[u,d]=_.useState(""),[h,f]=_.useState(""),[m,v]=_.useState(""),x=N=>{N.preventDefault(),c(!0)},b=(N,C)=>{N.stopPropagation(),N.preventDefault(),console.log(C),e(s?C:C.shortForm||C.name||C.Name),c(!1)},g=N=>{N.stopPropagation(),N.preventDefault(),c(!1),d(""),f(""),v("")},p=()=>{f(""),v("")},y=N=>{const[C,k,S]=N.split("/");return new Date(`${S}-${k}-${C}`)},w=t.filter(N=>{const C=r.some(k=>String(N[k.key]||"").toLowerCase().includes(u.toLowerCase()));if(o==="invoiceList"&&h&&m){const k=y(N.date);if(isNaN(k))return!1;const S=new Date(h),j=new Date(m),T=k>=S&&k<=j;return C&&T}return C});return l.jsxs("div",{className:`absolute ${n.top} ]`,children:[l.jsx("button",{onClick:x,type:"button",children:l.jsx("img",{src:i||Tg,className:`${i?"w-6 h-6":"w-4 h-4"}`,alt:"Select"})}),a&&l.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex justify-center items-center z-50",onClick:g,children:l.jsxs("div",{className:"bg-background  rounded-lg shadow-lg p-6 w-[50vw] max-w-full max-h-[80vh] overflow-auto",onClick:N=>N.stopPropagation(),children:[l.jsx("h2",{className:"text-lg font-semibold mb-4 text-center text-blue-800 italic ",children:"Select an Item"}),l.jsx("input",{type:"text",value:u,onChange:N=>d(N.target.value),className:"border py-1 px-2 mb-4 w-full",placeholder:"Search"}),o==="invoiceList"&&l.jsxs("div",{className:"mb-4 flex items-center",children:[l.jsxs("label",{className:"mr-2",children:["From:",l.jsx("input",{type:"date",value:h,onChange:N=>f(N.target.value),className:"border p-2 mx-2"})]}),l.jsxs("label",{children:["To:",l.jsx("input",{type:"date",value:m,onChange:N=>v(N.target.value),className:"border p-2 mx-2"})]}),l.jsx("button",{onClick:p,type:"button",className:"ml-4 px-4 py-2 bg-blue-500 text-white rounded",children:"Reset"})]}),l.jsxs("table",{className:"w-full table-auto ",children:[l.jsx("thead",{className:"bg-blue-800 text-white text-sm ",children:l.jsx("tr",{className:"",children:r.map(N=>l.jsx("th",{className:"px-4 font-medium border",children:N.label},N.key))})}),l.jsx("tbody",{className:"bg-blue-100 ",children:w.length>0?w.map(N=>l.jsx("tr",{className:"cursor-pointer  hover:bg-orange-300",onClick:C=>b(C,N),children:r.map(C=>l.jsx("td",{className:"px-4 py-1 border",children:N[C.key]||""},C.key))},N.id||N.shortForm)):l.jsx("tr",{children:l.jsx("td",{colSpan:r.length,className:"px-4 py-2 text-center",children:"No results found"})})})]}),l.jsx("button",{onClick:g,type:"button",className:"mt-4 px-4 py-2 bg-red-500 text-white rounded",children:"Close"})]})})]})};var Xh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I=function(t,e){if(!t)throw Zr(e)},Zr=function(t){return new Error("Firebase Database ("+Ag.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Jw=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},zu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|u>>6,m=u&63;c||(m=64,o||(f=64)),r.push(n[d],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Dg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Jw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||h==null)throw new Xw;const f=i<<2|a>>4;if(r.push(f),u!==64){const m=a<<4&240|u>>2;if(r.push(m),h!==64){const v=u<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Xw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pg=function(t){const e=Dg(t);return zu.encodeByteArray(e,!0)},Do=function(t){return Pg(t).replace(/\./g,"")},Sc=function(t){try{return zu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(t){return Rg(void 0,t)}function Rg(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!e_(n)||(t[n]=Rg(t[n],e[n]));return t}function e_(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_=()=>t_().__FIREBASE_DEFAULTS__,r_=()=>{if(typeof process>"u"||typeof Xh>"u")return;const t=Xh.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},s_=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Sc(t[1]);return e&&JSON.parse(e)},Og=()=>{try{return n_()||r_()||s_()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},i_=t=>{var e,n;return(n=(e=Og())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},o_=t=>{const e=i_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Mg=()=>{var t;return(t=Og())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Do(JSON.stringify(n)),Do(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(a_())}function c_(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function u_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Lg(){return Ag.NODE_ADMIN===!0}function Bg(){try{return typeof indexedDB=="object"}catch{return!1}}function $g(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function d_(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="FirebaseError";class ar extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=h_,Object.setPrototypeOf(this,ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gl.prototype.create)}}class gl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?f_(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new ar(s,a,r)}}function f_(t,e){return t.replace(p_,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const p_=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t){return JSON.parse(t)}function ve(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=ti(Sc(i[0])||""),n=ti(Sc(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},m_=function(t){const e=Ug(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},g_=function(t){const e=Ug(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function er(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Zh(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Po(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function Ro(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(ef(i)&&ef(o)){if(!Ro(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ef(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const f=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,d;for(let h=0;h<80;h++){h<40?h<20?(u=a^i&(o^a),d=1518500249):(u=i^o^a,d=1859775393):h<60?(u=i&o|a&(i|o),d=2400959708):(u=i^o^a,d=3395469782);const f=(s<<5|s>>>27)+u+c+d+r[h]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function yl(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,I(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},vl=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_=1e3,__=2,b_=4*60*60*1e3,N_=.5;function tf(t,e=w_,n=__){const r=e*Math.pow(n,t),s=Math.round(N_*r*(Math.random()-.5)*2);return Math.min(b_,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t){return t&&t._delegate?t._delegate:t}class Yt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new es;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(E_(e))try{this.getOrInitializeService({instanceIdentifier:Bn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Bn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bn){return this.instances.has(e)}getOptions(e=Bn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:S_(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bn){return this.component?this.component.multipleInstances?e:Bn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function S_(t){return t===Bn?void 0:t}function E_(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new C_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(X||(X={}));const I_={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},j_=X.INFO,T_={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},A_=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=T_[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vu{constructor(e){this.name=e,this._logLevel=j_,this._logHandler=A_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in X))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?I_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...e),this._logHandler(this,X.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...e),this._logHandler(this,X.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,X.INFO,...e),this._logHandler(this,X.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,X.WARN,...e),this._logHandler(this,X.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...e),this._logHandler(this,X.ERROR,...e)}}const D_=(t,e)=>e.some(n=>t instanceof n);let nf,rf;function P_(){return nf||(nf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function R_(){return rf||(rf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zg=new WeakMap,Ec=new WeakMap,Vg=new WeakMap,ca=new WeakMap,Wu=new WeakMap;function O_(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(_n(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&zg.set(n,t)}).catch(()=>{}),Wu.set(e,t),e}function M_(t){if(Ec.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Ec.set(t,e)}let kc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ec.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Vg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _n(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function F_(t){kc=t(kc)}function L_(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ua(this),e,...n);return Vg.set(r,e.sort?e.sort():[e]),_n(r)}:R_().includes(t)?function(...e){return t.apply(ua(this),e),_n(zg.get(this))}:function(...e){return _n(t.apply(ua(this),e))}}function B_(t){return typeof t=="function"?L_(t):(t instanceof IDBTransaction&&M_(t),D_(t,P_())?new Proxy(t,kc):t)}function _n(t){if(t instanceof IDBRequest)return O_(t);if(ca.has(t))return ca.get(t);const e=B_(t);return e!==t&&(ca.set(t,e),Wu.set(e,t)),e}const ua=t=>Wu.get(t);function Wg(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=_n(o);return r&&o.addEventListener("upgradeneeded",c=>{r(_n(o.result),c.oldVersion,c.newVersion,_n(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const $_=["get","getKey","getAll","getAllKeys","count"],U_=["put","add","delete","clear"],da=new Map;function sf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(da.get(e))return da.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=U_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||$_.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return da.set(e,i),i}F_(t=>({...t,get:(e,n,r)=>sf(e,n)||t.get(e,n,r),has:(e,n)=>!!sf(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(V_(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function V_(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ic="@firebase/app",of="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt=new Vu("@firebase/app"),W_="@firebase/app-compat",Q_="@firebase/analytics-compat",H_="@firebase/analytics",q_="@firebase/app-check-compat",G_="@firebase/app-check",Y_="@firebase/auth",K_="@firebase/auth-compat",J_="@firebase/database",X_="@firebase/data-connect",Z_="@firebase/database-compat",eb="@firebase/functions",tb="@firebase/functions-compat",nb="@firebase/installations",rb="@firebase/installations-compat",sb="@firebase/messaging",ib="@firebase/messaging-compat",ob="@firebase/performance",lb="@firebase/performance-compat",ab="@firebase/remote-config",cb="@firebase/remote-config-compat",ub="@firebase/storage",db="@firebase/storage-compat",hb="@firebase/firestore",fb="@firebase/vertexai-preview",pb="@firebase/firestore-compat",mb="firebase",gb="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc="[DEFAULT]",yb={[Ic]:"fire-core",[W_]:"fire-core-compat",[H_]:"fire-analytics",[Q_]:"fire-analytics-compat",[G_]:"fire-app-check",[q_]:"fire-app-check-compat",[Y_]:"fire-auth",[K_]:"fire-auth-compat",[J_]:"fire-rtdb",[X_]:"fire-data-connect",[Z_]:"fire-rtdb-compat",[eb]:"fire-fn",[tb]:"fire-fn-compat",[nb]:"fire-iid",[rb]:"fire-iid-compat",[sb]:"fire-fcm",[ib]:"fire-fcm-compat",[ob]:"fire-perf",[lb]:"fire-perf-compat",[ab]:"fire-rc",[cb]:"fire-rc-compat",[ub]:"fire-gcs",[db]:"fire-gcs-compat",[hb]:"fire-fst",[pb]:"fire-fst-compat",[fb]:"fire-vertex","fire-js":"fire-js",[mb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=new Map,vb=new Map,Tc=new Map;function lf(t,e){try{t.container.addComponent(e)}catch(n){Kt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function kn(t){const e=t.name;if(Tc.has(e))return Kt.debug(`There were multiple attempts to register component ${e}.`),!1;Tc.set(e,t);for(const n of Oo.values())lf(n,t);for(const n of vb.values())lf(n,t);return!0}function yi(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bn=new gl("app","Firebase",xb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b=gb;function Qg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:jc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw bn.create("bad-app-name",{appName:String(s)});if(n||(n=Mg()),!n)throw bn.create("no-options");const i=Oo.get(s);if(i){if(Ro(n,i.options)&&Ro(r,i.config))return i;throw bn.create("duplicate-app",{appName:s})}const o=new k_(s);for(const c of Tc.values())o.addComponent(c);const a=new wb(n,r,o);return Oo.set(s,a),a}function Hg(t=jc){const e=Oo.get(t);if(!e&&t===jc&&Mg())return Qg();if(!e)throw bn.create("no-app",{appName:t});return e}function Pt(t,e,n){var r;let s=(r=yb[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kt.warn(a.join(" "));return}kn(new Yt(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb="firebase-heartbeat-database",Nb=1,ni="firebase-heartbeat-store";let ha=null;function qg(){return ha||(ha=Wg(bb,Nb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ni)}catch(n){console.warn(n)}}}}).catch(t=>{throw bn.create("idb-open",{originalErrorMessage:t.message})})),ha}async function Cb(t){try{const n=(await qg()).transaction(ni),r=await n.objectStore(ni).get(Gg(t));return await n.done,r}catch(e){if(e instanceof ar)Kt.warn(e.message);else{const n=bn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kt.warn(n.message)}}}async function af(t,e){try{const r=(await qg()).transaction(ni,"readwrite");await r.objectStore(ni).put(e,Gg(t)),await r.done}catch(n){if(n instanceof ar)Kt.warn(n.message);else{const r=bn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Kt.warn(r.message)}}}function Gg(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=1024,Eb=30*24*60*60*1e3;class kb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=cf();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Eb}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Kt.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=cf(),{heartbeatsToSend:r,unsentEntries:s}=Ib(this._heartbeatsCache.heartbeats),i=Do(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Kt.warn(n),""}}}function cf(){return new Date().toISOString().substring(0,10)}function Ib(t,e=Sb){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),uf(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),uf(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class jb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Bg()?$g().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Cb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return af(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return af(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function uf(t){return Do(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(t){kn(new Yt("platform-logger",e=>new z_(e),"PRIVATE")),kn(new Yt("heartbeat",e=>new kb(e),"PRIVATE")),Pt(Ic,of,t),Pt(Ic,of,"esm2017"),Pt("fire-js","")}Tb("");var df={};const hf="@firebase/database",ff="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yg="";function Ab(t){Yg=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ve(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:ti(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Et(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Db(e)}}catch{}return new Pb},Wn=Kg("localStorage"),Rb=Kg("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr=new Vu("@firebase/database"),Jg=function(){let t=1;return function(){return t++}}(),Xg=function(t){const e=x_(t),n=new v_;n.update(e);const r=n.digest();return zu.encodeByteArray(r)},vi=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=vi.apply(null,r):typeof r=="object"?e+=ve(r):e+=r,e+=" "}return e};let Ds=null,pf=!0;const Ob=function(t,e){I(!e,"Can't turn on custom loggers persistently."),Fr.logLevel=X.VERBOSE,Ds=Fr.log.bind(Fr)},ke=function(...t){if(pf===!0&&(pf=!1,Ds===null&&Rb.get("logging_enabled")===!0&&Ob()),Ds){const e=vi.apply(null,t);Ds(e)}},xi=function(t){return function(...e){ke(t,...e)}},Ac=function(...t){const e="FIREBASE INTERNAL ERROR: "+vi(...t);Fr.error(e)},Jt=function(...t){const e=`FIREBASE FATAL ERROR: ${vi(...t)}`;throw Fr.error(e),new Error(e)},Ue=function(...t){const e="FIREBASE WARNING: "+vi(...t);Fr.warn(e)},Mb=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ue("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Qu=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Fb=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},tr="[MIN_NAME]",In="[MAX_NAME]",cr=function(t,e){if(t===e)return 0;if(t===tr||e===In)return-1;if(e===tr||t===In)return 1;{const n=mf(t),r=mf(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Lb=function(t,e){return t===e?0:t<e?-1:1},ms=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ve(e))},Hu=function(t){if(typeof t!="object"||t===null)return ve(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ve(e[r]),n+=":",n+=Hu(t[e[r]]);return n+="}",n},Zg=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function Te(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const ey=function(t){I(!Qu(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const d=u.join("");let h="";for(c=0;c<64;c+=8){let f=parseInt(d.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},Bb=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},$b=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Ub(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const zb=new RegExp("^-?(0*)\\d{1,10}$"),Vb=-2147483648,Wb=2147483647,mf=function(t){if(zb.test(t)){const e=Number(t);if(e>=Vb&&e<=Wb)return e}return null},ts=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Ue("Exception was thrown by user callback.",n),e},Math.floor(0))}},Qb=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ps=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ue(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ke("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ue(e)}}class so{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}so.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu="5",ty="v",ny="s",ry="r",sy="f",iy=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,oy="ls",ly="p",Dc="ac",ay="websocket",cy="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Wn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Wn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Gb(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function dy(t,e,n){I(typeof e=="string","typeof type must == string"),I(typeof n=="object","typeof params must == object");let r;if(e===ay)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===cy)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Gb(t)&&(n.ns=t.namespace);const s=[];return Te(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(){this.counters_={}}incrementCounter(e,n=1){Et(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Zw(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa={},pa={};function Gu(t){const e=t.toString();return fa[e]||(fa[e]=new Yb),fa[e]}function Kb(t,e){const n=t.toString();return pa[n]||(pa[n]=e()),pa[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&ts(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="start",Xb="close",Zb="pLPCommand",eN="pRTLPCB",hy="id",fy="pw",py="ser",tN="cb",nN="seg",rN="ts",sN="d",iN="dframe",my=1870,gy=30,oN=my-gy,lN=25e3,aN=3e4;class jr{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=xi(e),this.stats_=Gu(n),this.urlFn=c=>(this.appCheckToken&&(c[Dc]=this.appCheckToken),dy(n,cy,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Jb(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(aN)),Fb(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Yu((...i)=>{const[o,a,c,u,d]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===gf)this.id=a,this.password=c;else if(o===Xb)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[gf]="t",r[py]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[tN]=this.scriptTagHolder.uniqueCallbackIdentifier),r[ty]=qu,this.transportSessionId&&(r[ny]=this.transportSessionId),this.lastSessionId&&(r[oy]=this.lastSessionId),this.applicationId&&(r[ly]=this.applicationId),this.appCheckToken&&(r[Dc]=this.appCheckToken),typeof location<"u"&&location.hostname&&iy.test(location.hostname)&&(r[ry]=sy);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){jr.forceAllow_=!0}static forceDisallow(){jr.forceDisallow_=!0}static isAvailable(){return jr.forceAllow_?!0:!jr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Bb()&&!$b()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ve(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Pg(n),s=Zg(r,oN);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[iN]="t",r[hy]=e,r[fy]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ve(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Yu{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Jg(),window[Zb+this.uniqueCallbackIdentifier]=e,window[eN+this.uniqueCallbackIdentifier]=n,this.myIFrame=Yu.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ke("frame writing exception"),a.stack&&ke(a.stack),ke(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ke("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[hy]=this.myID,e[fy]=this.myPW,e[py]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+gy+r.length<=my;){const o=this.pendingSegs.shift();r=r+"&"+nN+s+"="+o.seg+"&"+rN+s+"="+o.ts+"&"+sN+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(lN)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{ke("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=16384,uN=45e3;let Mo=null;typeof MozWebSocket<"u"?Mo=MozWebSocket:typeof WebSocket<"u"&&(Mo=WebSocket);class wt{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=xi(this.connId),this.stats_=Gu(n),this.connURL=wt.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[ty]=qu,typeof location<"u"&&location.hostname&&iy.test(location.hostname)&&(o[ry]=sy),n&&(o[ny]=n),r&&(o[oy]=r),s&&(o[Dc]=s),i&&(o[ly]=i),dy(e,ay,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Wn.set("previous_websocket_failure",!0);try{let r;Lg(),this.mySock=new Mo(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){wt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Mo!==null&&!wt.forceDisallow_}static previouslyFailed(){return Wn.isInMemoryStorage||Wn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Wn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=ti(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(I(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=ve(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Zg(n,cN);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(uN))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}wt.responsesRequiredToBeHealthy=2;wt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[jr,wt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=wt&&wt.isAvailable();let r=n&&!wt.previouslyFailed();if(e.webSocketOnly&&(n||Ue("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[wt];else{const s=this.transports_=[];for(const i of ri.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);ri.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ri.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=6e4,hN=5e3,fN=10*1024,pN=100*1024,ma="t",yf="d",mN="s",vf="r",gN="e",xf="o",wf="a",_f="n",bf="p",yN="h";class vN{constructor(e,n,r,s,i,o,a,c,u,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=xi("c:"+this.id+":"),this.transportManager_=new ri(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Ps(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>pN?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>fN?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ma in e){const n=e[ma];n===wf?this.upgradeIfSecondaryHealthy_():n===vf?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===xf&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ms("t",e),r=ms("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:bf,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:wf,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:_f,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ms("t",e),r=ms("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ms(ma,e);if(yf in e){const r=e[yf];if(n===yN){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===_f){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===mN?this.onConnectionShutdown_(r):n===vf?this.onReset_(r):n===gN?Ac("Server Error: "+r):n===xf?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ac("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),qu!==r&&Ue("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ps(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(dN))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ps(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(hN))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:bf,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Wn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e){this.allowedEvents_=e,this.listeners_={},I(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){I(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo extends vy{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Fg()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Fo}getInitialEvent(e){return I(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf=32,Cf=768;class Y{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function q(){return new Y("")}function $(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function jn(t){return t.pieces_.length-t.pieceNum_}function Z(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Y(t.pieces_,e)}function Ku(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function xN(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function si(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function xy(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Y(e,0)}function fe(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Y)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Y(n,0)}function U(t){return t.pieceNum_>=t.pieces_.length}function Be(t,e){const n=$(t),r=$(e);if(n===null)return e;if(n===r)return Be(Z(t),Z(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function wN(t,e){const n=si(t,0),r=si(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=cr(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function Ju(t,e){if(jn(t)!==jn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ht(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(jn(t)>jn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class _N{constructor(e,n){this.errorPrefix_=n,this.parts_=si(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=vl(this.parts_[r]);wy(this)}}function bN(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=vl(e),wy(t)}function NN(t){const e=t.parts_.pop();t.byteLength_-=vl(e),t.parts_.length>0&&(t.byteLength_-=1)}function wy(t){if(t.byteLength_>Cf)throw new Error(t.errorPrefix_+"has a key path longer than "+Cf+" bytes ("+t.byteLength_+").");if(t.parts_.length>Nf)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Nf+") or object contains a cycle "+$n(t))}function $n(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu extends vy{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Xu}getInitialEvent(e){return I(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=1e3,CN=60*5*1e3,Sf=30*1e3,SN=1.3,EN=3e4,kN="server_kill",Ef=3;class Wt extends yy{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Wt.nextPersistentConnectionId_++,this.log_=xi("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=gs,this.maxReconnectDelay_=CN,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Lg())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Xu.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Fo.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(ve(i)),I(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new es,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),I(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),I(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,u=a.s;Wt.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Et(e,"w")){const r=er(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Ue(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||g_(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Sf)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=m_(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),I(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ve(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Ac("Unrecognized action received from server: "+ve(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){I(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=gs,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=gs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>EN&&(this.reconnectDelay_=gs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*SN)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Wt.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},u=function(h){I(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:c,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?ke("getToken() completed but was canceled"):(ke("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,a=new vN(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,m=>{Ue(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(kN)},i))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&Ue(h),c())}}}interrupt(e){ke("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ke("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Zh(this.interruptReasons_)&&(this.reconnectDelay_=gs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>Hu(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Y(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){ke("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Ef&&(this.reconnectDelay_=Sf,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ke("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Ef&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Yg.replace(/\./g,"-")]=1,Fg()?e["framework.cordova"]=1:u_()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Fo.getInstance().currentlyOnline();return Zh(this.interruptReasons_)&&e}}Wt.nextPersistentConnectionId_=0;Wt.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new z(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new z(tr,e),s=new z(tr,n);return this.compare(r,s)!==0}minPost(){return z.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wi;class _y extends xl{static get __EMPTY_NODE(){return Wi}static set __EMPTY_NODE(e){Wi=e}compare(e,n){return cr(e.name,n.name)}isDefinedOn(e){throw Zr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return z.MIN}maxPost(){return new z(In,Wi)}makePost(e,n){return I(typeof e=="string","KeyIndex indexValue must always be a string."),new z(e,Wi)}toString(){return".key"}}const Gn=new _y;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class be{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??be.RED,this.left=s??He.EMPTY_NODE,this.right=i??He.EMPTY_NODE}copy(e,n,r,s,i){return new be(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return He.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return He.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,be.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,be.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}be.RED=!0;be.BLACK=!1;class IN{copy(e,n,r,s,i){return this}insert(e,n,r){return new be(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class He{constructor(e,n=He.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new He(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,be.BLACK,null,null))}remove(e){return new He(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,be.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Qi(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Qi(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Qi(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Qi(this.root_,null,this.comparator_,!0,e)}}He.EMPTY_NODE=new IN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(t,e){return cr(t.name,e.name)}function Zu(t,e){return cr(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pc;function TN(t){Pc=t}const by=function(t){return typeof t=="number"?"number:"+ey(t):"string:"+t},Ny=function(t){if(t.isLeafNode()){const e=t.val();I(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Et(e,".sv"),"Priority must be a string or number.")}else I(t===Pc||t.isEmpty(),"priority of unexpected type.");I(t===Pc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kf;class we{constructor(e,n=we.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,I(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Ny(this.priorityNode_)}static set __childrenNodeConstructor(e){kf=e}static get __childrenNodeConstructor(){return kf}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new we(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:we.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return U(e)?this:$(e)===".priority"?this.priorityNode_:we.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:we.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=$(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(I(r!==".priority"||jn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,we.__childrenNodeConstructor.EMPTY_NODE.updateChild(Z(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+by(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=ey(this.value_):e+=this.value_,this.lazyHash_=Xg(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===we.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof we.__childrenNodeConstructor?-1:(I(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=we.VALUE_TYPE_ORDER.indexOf(n),i=we.VALUE_TYPE_ORDER.indexOf(r);return I(s>=0,"Unknown leaf type: "+n),I(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}we.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cy,Sy;function AN(t){Cy=t}function DN(t){Sy=t}class PN extends xl{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?cr(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return z.MIN}maxPost(){return new z(In,new we("[PRIORITY-POST]",Sy))}makePost(e,n){const r=Cy(e);return new z(n,new we("[PRIORITY-POST]",r))}toString(){return".priority"}}const oe=new PN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=Math.log(2);class ON{constructor(e){const n=i=>parseInt(Math.log(i)/RN,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Lo=function(t,e,n,r){t.sort(e);const s=function(c,u){const d=u-c;let h,f;if(d===0)return null;if(d===1)return h=t[c],f=n?n(h):h,new be(f,h.node,be.BLACK,null,null);{const m=parseInt(d/2,10)+c,v=s(c,m),x=s(m+1,u);return h=t[m],f=n?n(h):h,new be(f,h.node,be.BLACK,v,x)}},i=function(c){let u=null,d=null,h=t.length;const f=function(v,x){const b=h-v,g=h;h-=v;const p=s(b+1,g),y=t[b],w=n?n(y):y;m(new be(w,y.node,x,null,p))},m=function(v){u?(u.left=v,u=v):(d=v,u=v)};for(let v=0;v<c.count;++v){const x=c.nextBitIsOne(),b=Math.pow(2,c.count-(v+1));x?f(b,be.BLACK):(f(b,be.BLACK),f(b,be.RED))}return d},o=new ON(t.length),a=i(o);return new He(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ga;const gr={};class zt{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return I(gr&&oe,"ChildrenNode.ts has not been loaded"),ga=ga||new zt({".priority":gr},{".priority":oe}),ga}get(e){const n=er(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof He?n:null}hasIndex(e){return Et(this.indexSet_,e.toString())}addIndex(e,n){I(e!==Gn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(z.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=Lo(r,e.getCompare()):a=gr;const c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;const d=Object.assign({},this.indexes_);return d[c]=a,new zt(d,u)}addToIndexes(e,n){const r=Po(this.indexes_,(s,i)=>{const o=er(this.indexSet_,i);if(I(o,"Missing index implementation for "+i),s===gr)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(z.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),Lo(a,o.getCompare())}else return gr;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new z(e.name,a))),c.insert(e,e.node)}});return new zt(r,this.indexSet_)}removeFromIndexes(e,n){const r=Po(this.indexes_,s=>{if(s===gr)return s;{const i=n.get(e.name);return i?s.remove(new z(e.name,i)):s}});return new zt(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ys;class O{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Ny(this.priorityNode_),this.children_.isEmpty()&&I(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ys||(ys=new O(new He(Zu),null,zt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ys}updatePriority(e){return this.children_.isEmpty()?this:new O(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ys:n}}getChild(e){const n=$(e);return n===null?this:this.getImmediateChild(n).getChild(Z(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(I(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new z(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?ys:this.priorityNode_;return new O(s,o,i)}}updateChild(e,n){const r=$(e);if(r===null)return n;{I($(e)!==".priority"||jn(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Z(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(oe,(o,a)=>{n[o]=a.val(e),r++,i&&O.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+by(this.getPriority().val())+":"),this.forEachChild(oe,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":Xg(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new z(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new z(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new z(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,z.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,z.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===wi?-1:0}withIndex(e){if(e===Gn||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new O(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Gn||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(oe),s=n.getIterator(oe);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Gn?null:this.indexMap_.get(e.toString())}}O.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class MN extends O{constructor(){super(new He(Zu),O.EMPTY_NODE,zt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return O.EMPTY_NODE}isEmpty(){return!1}}const wi=new MN;Object.defineProperties(z,{MIN:{value:new z(tr,O.EMPTY_NODE)},MAX:{value:new z(In,wi)}});_y.__EMPTY_NODE=O.EMPTY_NODE;we.__childrenNodeConstructor=O;TN(wi);DN(wi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=!0;function me(t,e=null){if(t===null)return O.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),I(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new we(n,me(e))}if(!(t instanceof Array)&&FN){const n=[];let r=!1;if(Te(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=me(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new z(o,c)))}}),n.length===0)return O.EMPTY_NODE;const i=Lo(n,jN,o=>o.name,Zu);if(r){const o=Lo(n,oe.getCompare());return new O(i,me(e),new zt({".priority":o},{".priority":oe}))}else return new O(i,me(e),zt.Default)}else{let n=O.EMPTY_NODE;return Te(t,(r,s)=>{if(Et(t,r)&&r.substring(0,1)!=="."){const i=me(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(me(e))}}AN(me);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed extends xl{constructor(e){super(),this.indexPath_=e,I(!U(e)&&$(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?cr(e.name,n.name):i}makePost(e,n){const r=me(e),s=O.EMPTY_NODE.updateChild(this.indexPath_,r);return new z(n,s)}maxPost(){const e=O.EMPTY_NODE.updateChild(this.indexPath_,wi);return new z(In,e)}toString(){return si(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN extends xl{compare(e,n){const r=e.node.compareTo(n.node);return r===0?cr(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return z.MIN}maxPost(){return z.MAX}makePost(e,n){const r=me(e);return new z(n,r)}toString(){return".value"}}const Ey=new LN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(t){return{type:"value",snapshotNode:t}}function Qr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ii(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function oi(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function BN(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){I(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(ii(n,a)):I(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Qr(n,r)):o.trackChildChange(oi(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(oe,(s,i)=>{n.hasChild(s)||r.trackChildChange(ii(s,i))}),n.isLeafNode()||n.forEachChild(oe,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(oi(s,i,o))}else r.trackChildChange(Qr(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?O.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this.indexedFilter_=new td(e.getIndex()),this.index_=e.getIndex(),this.startPost_=li.getStartPost_(e),this.endPost_=li.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new z(n,r))||(r=O.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=O.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(O.EMPTY_NODE);const i=this;return n.forEachChild(oe,(o,a)=>{i.matches(new z(o,a))||(s=s.updateImmediateChild(o,O.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new li(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new z(n,r))||(r=O.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=O.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=O.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(O.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,O.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const h=this.index_.getCompare();o=(f,m)=>h(m,f)}else o=this.index_.getCompare();const a=e;I(a.numChildren()===this.limit_,"");const c=new z(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(c);if(a.hasChild(n)){const h=a.getImmediateChild(n);let f=s.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const m=f==null?1:o(f,c);if(d&&!r.isEmpty()&&m>=0)return i!=null&&i.trackChildChange(oi(n,r,h)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(ii(n,h));const x=a.updateImmediateChild(n,O.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange(Qr(f.name,f.node)),x.updateImmediateChild(f.name,f.node)):x}}else return r.isEmpty()?e:d&&o(u,c)>=0?(i!=null&&(i.trackChildChange(ii(u.name,u.node)),i.trackChildChange(Qr(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,O.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=oe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return I(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return I(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:tr}hasEnd(){return this.endSet_}getIndexEndValue(){return I(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return I(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:In}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return I(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===oe}copy(){const e=new nd;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function UN(t){return t.loadsAllData()?new td(t.getIndex()):t.hasLimit()?new $N(t):new li(t)}function zN(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function VN(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function WN(t,e){const n=t.copy();return n.index_=e,n}function If(t){const e={};if(t.isDefault())return e;let n;if(t.index_===oe?n="$priority":t.index_===Ey?n="$value":t.index_===Gn?n="$key":(I(t.index_ instanceof ed,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ve(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=ve(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ve(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ve(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ve(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function jf(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==oe&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo extends yy{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=xi("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(I(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=Bo.getListenId_(e,r),a={};this.listens_[o]=a;const c=If(e._queryParams);this.restRequest_(i+".json",c,(u,d)=>{let h=d;if(u===404&&(h=null,u=null),u===null&&this.onDataUpdate_(i,h,!1,r),er(this.listens_,o)===a){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",s(f,null)}})}unlisten(e,n){const r=Bo.getListenId_(e,n);delete this.listens_[r]}get(e){const n=If(e._queryParams),r=e._path.toString(),s=new es;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+y_(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=ti(a.responseText)}catch{Ue("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Ue("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(){this.rootNode_=O.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(){return{value:null,children:new Map}}function Iy(t,e,n){if(U(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=$(e);t.children.has(r)||t.children.set(r,$o());const s=t.children.get(r);e=Z(e),Iy(s,e,n)}}function Rc(t,e,n){t.value!==null?n(e,t.value):HN(t,(r,s)=>{const i=new Y(e.toString()+"/"+r);Rc(s,i,n)})}function HN(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Te(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf=10*1e3,GN=30*1e3,YN=5*60*1e3;class KN{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new qN(e);const r=Tf+(GN-Tf)*Math.random();Ps(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Te(e,(s,i)=>{i>0&&Et(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Ps(this.reportStats_.bind(this),Math.floor(Math.random()*2*YN))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(_t||(_t={}));function rd(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function sd(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function id(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=_t.ACK_USER_WRITE,this.source=rd()}operationForChild(e){if(U(this.path)){if(this.affectedTree.value!=null)return I(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Y(e));return new Uo(q(),n,this.revert)}}else return I($(this.path)===e,"operationForChild called for unrelated child."),new Uo(Z(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n){this.source=e,this.path=n,this.type=_t.LISTEN_COMPLETE}operationForChild(e){return U(this.path)?new ai(this.source,q()):new ai(this.source,Z(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=_t.OVERWRITE}operationForChild(e){return U(this.path)?new nr(this.source,q(),this.snap.getImmediateChild(e)):new nr(this.source,Z(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=_t.MERGE}operationForChild(e){if(U(this.path)){const n=this.children.subtree(new Y(e));return n.isEmpty()?null:n.value?new nr(this.source,q(),n.value):new Hr(this.source,q(),n)}else return I($(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Hr(this.source,Z(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(U(e))return this.isFullyInitialized()&&!this.filtered_;const n=$(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function XN(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(BN(o.childName,o.snapshotNode))}),vs(t,s,"child_removed",e,r,n),vs(t,s,"child_added",e,r,n),vs(t,s,"child_moved",i,r,n),vs(t,s,"child_changed",e,r,n),vs(t,s,"value",e,r,n),s}function vs(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>eC(t,a,c)),o.forEach(a=>{const c=ZN(t,a,i);s.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function ZN(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function eC(t,e,n){if(e.childName==null||n.childName==null)throw Zr("Should only compare child_ events.");const r=new z(e.childName,e.snapshotNode),s=new z(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(t,e){return{eventCache:t,serverCache:e}}function Rs(t,e,n,r){return wl(new Tn(e,n,r),t.serverCache)}function jy(t,e,n,r){return wl(t.eventCache,new Tn(e,n,r))}function zo(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function rr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ya;const tC=()=>(ya||(ya=new He(Lb)),ya);class J{constructor(e,n=tC()){this.value=e,this.children=n}static fromObject(e){let n=new J(null);return Te(e,(r,s)=>{n=n.set(new Y(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:q(),value:this.value};if(U(e))return null;{const r=$(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Z(e),n);return i!=null?{path:fe(new Y(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(U(e))return this;{const n=$(e),r=this.children.get(n);return r!==null?r.subtree(Z(e)):new J(null)}}set(e,n){if(U(e))return new J(n,this.children);{const r=$(e),i=(this.children.get(r)||new J(null)).set(Z(e),n),o=this.children.insert(r,i);return new J(this.value,o)}}remove(e){if(U(e))return this.children.isEmpty()?new J(null):new J(null,this.children);{const n=$(e),r=this.children.get(n);if(r){const s=r.remove(Z(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new J(null):new J(this.value,i)}else return this}}get(e){if(U(e))return this.value;{const n=$(e),r=this.children.get(n);return r?r.get(Z(e)):null}}setTree(e,n){if(U(e))return n;{const r=$(e),i=(this.children.get(r)||new J(null)).setTree(Z(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new J(this.value,o)}}fold(e){return this.fold_(q(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(fe(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,q(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(U(e))return null;{const i=$(e),o=this.children.get(i);return o?o.findOnPath_(Z(e),fe(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,q(),n)}foreachOnPath_(e,n,r){if(U(e))return this;{this.value&&r(n,this.value);const s=$(e),i=this.children.get(s);return i?i.foreachOnPath_(Z(e),fe(n,s),r):new J(null)}}foreach(e){this.foreach_(q(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(fe(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.writeTree_=e}static empty(){return new Ct(new J(null))}}function Os(t,e,n){if(U(e))return new Ct(new J(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Be(s,e);return i=i.updateChild(o,n),new Ct(t.writeTree_.set(s,i))}else{const s=new J(n),i=t.writeTree_.setTree(e,s);return new Ct(i)}}}function Oc(t,e,n){let r=t;return Te(n,(s,i)=>{r=Os(r,fe(e,s),i)}),r}function Af(t,e){if(U(e))return Ct.empty();{const n=t.writeTree_.setTree(e,new J(null));return new Ct(n)}}function Mc(t,e){return ur(t,e)!=null}function ur(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Be(n.path,e)):null}function Df(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(oe,(r,s)=>{e.push(new z(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new z(r,s.value))}),e}function Nn(t,e){if(U(e))return t;{const n=ur(t,e);return n!=null?new Ct(new J(n)):new Ct(t.writeTree_.subtree(e))}}function Fc(t){return t.writeTree_.isEmpty()}function qr(t,e){return Ty(q(),t.writeTree_,e)}function Ty(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(I(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=Ty(fe(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(fe(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(t,e){return Ry(e,t)}function nC(t,e,n,r,s){I(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Os(t.visibleWrites,e,n)),t.lastWriteId=r}function rC(t,e,n,r){I(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Oc(t.visibleWrites,e,n),t.lastWriteId=r}function sC(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function iC(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);I(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&oC(a,r.path)?s=!1:ht(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return lC(t),!0;if(r.snap)t.visibleWrites=Af(t.visibleWrites,r.path);else{const a=r.children;Te(a,c=>{t.visibleWrites=Af(t.visibleWrites,fe(r.path,c))})}return!0}else return!1}function oC(t,e){if(t.snap)return ht(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ht(fe(t.path,n),e))return!0;return!1}function lC(t){t.visibleWrites=Ay(t.allWrites,aC,q()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function aC(t){return t.visible}function Ay(t,e,n){let r=Ct.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)ht(n,o)?(a=Be(n,o),r=Os(r,a,i.snap)):ht(o,n)&&(a=Be(o,n),r=Os(r,q(),i.snap.getChild(a)));else if(i.children){if(ht(n,o))a=Be(n,o),r=Oc(r,a,i.children);else if(ht(o,n))if(a=Be(o,n),U(a))r=Oc(r,q(),i.children);else{const c=er(i.children,$(a));if(c){const u=c.getChild(Z(a));r=Os(r,q(),u)}}}else throw Zr("WriteRecord should have .snap or .children")}}return r}function Dy(t,e,n,r,s){if(!r&&!s){const i=ur(t.visibleWrites,e);if(i!=null)return i;{const o=Nn(t.visibleWrites,e);if(Fc(o))return n;if(n==null&&!Mc(o,q()))return null;{const a=n||O.EMPTY_NODE;return qr(o,a)}}}else{const i=Nn(t.visibleWrites,e);if(!s&&Fc(i))return n;if(!s&&n==null&&!Mc(i,q()))return null;{const o=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(ht(u.path,e)||ht(e,u.path))},a=Ay(t.allWrites,o,e),c=n||O.EMPTY_NODE;return qr(a,c)}}}function cC(t,e,n){let r=O.EMPTY_NODE;const s=ur(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(oe,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Nn(t.visibleWrites,e);return n.forEachChild(oe,(o,a)=>{const c=qr(Nn(i,new Y(o)),a);r=r.updateImmediateChild(o,c)}),Df(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Nn(t.visibleWrites,e);return Df(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function uC(t,e,n,r,s){I(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=fe(e,n);if(Mc(t.visibleWrites,i))return null;{const o=Nn(t.visibleWrites,i);return Fc(o)?s.getChild(n):qr(o,s.getChild(n))}}function dC(t,e,n,r){const s=fe(e,n),i=ur(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Nn(t.visibleWrites,s);return qr(o,r.getNode().getImmediateChild(n))}else return null}function hC(t,e){return ur(t.visibleWrites,e)}function fC(t,e,n,r,s,i,o){let a;const c=Nn(t.visibleWrites,e),u=ur(c,q());if(u!=null)a=u;else if(n!=null)a=qr(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],h=o.getCompare(),f=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let m=f.getNext();for(;m&&d.length<s;)h(m,r)!==0&&d.push(m),m=f.getNext();return d}else return[]}function pC(){return{visibleWrites:Ct.empty(),allWrites:[],lastWriteId:-1}}function Vo(t,e,n,r){return Dy(t.writeTree,t.treePath,e,n,r)}function od(t,e){return cC(t.writeTree,t.treePath,e)}function Pf(t,e,n,r){return uC(t.writeTree,t.treePath,e,n,r)}function Wo(t,e){return hC(t.writeTree,fe(t.treePath,e))}function mC(t,e,n,r,s,i){return fC(t.writeTree,t.treePath,e,n,r,s,i)}function ld(t,e,n){return dC(t.writeTree,t.treePath,e,n)}function Py(t,e){return Ry(fe(t.treePath,e),t.writeTree)}function Ry(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;I(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),I(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,oi(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,ii(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Qr(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,oi(r,e.snapshotNode,s.oldSnap));else throw Zr("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Oy=new yC;class ad{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Tn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ld(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:rr(this.viewCache_),i=mC(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(t){return{filter:t}}function xC(t,e){I(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),I(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function wC(t,e,n,r,s){const i=new gC;let o,a;if(n.type===_t.OVERWRITE){const u=n;u.source.fromUser?o=Lc(t,e,u.path,u.snap,r,s,i):(I(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!U(u.path),o=Qo(t,e,u.path,u.snap,r,s,a,i))}else if(n.type===_t.MERGE){const u=n;u.source.fromUser?o=bC(t,e,u.path,u.children,r,s,i):(I(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=Bc(t,e,u.path,u.children,r,s,a,i))}else if(n.type===_t.ACK_USER_WRITE){const u=n;u.revert?o=SC(t,e,u.path,r,s,i):o=NC(t,e,u.path,u.affectedTree,r,s,i)}else if(n.type===_t.LISTEN_COMPLETE)o=CC(t,e,n.path,r,i);else throw Zr("Unknown operation type: "+n.type);const c=i.getChanges();return _C(e,o,c),{viewCache:o,changes:c}}function _C(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=zo(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(ky(zo(e)))}}function My(t,e,n,r,s,i){const o=e.eventCache;if(Wo(r,n)!=null)return e;{let a,c;if(U(n))if(I(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=rr(e),d=u instanceof O?u:O.EMPTY_NODE,h=od(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),h,i)}else{const u=Vo(r,rr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=$(n);if(u===".priority"){I(jn(n)===1,"Can't have a priority with additional path components");const d=o.getNode();c=e.serverCache.getNode();const h=Pf(r,n,d,c);h!=null?a=t.filter.updatePriority(d,h):a=o.getNode()}else{const d=Z(n);let h;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();const f=Pf(r,n,o.getNode(),c);f!=null?h=o.getNode().getImmediateChild(u).updateChild(d,f):h=o.getNode().getImmediateChild(u)}else h=ld(r,u,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),u,h,d,s,i):a=o.getNode()}}return Rs(e,a,o.isFullyInitialized()||U(n),t.filter.filtersNodes())}}function Qo(t,e,n,r,s,i,o,a){const c=e.serverCache;let u;const d=o?t.filter:t.filter.getIndexedFilter();if(U(n))u=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){const m=c.getNode().updateChild(n,r);u=d.updateFullNode(c.getNode(),m,null)}else{const m=$(n);if(!c.isCompleteForPath(n)&&jn(n)>1)return e;const v=Z(n),b=c.getNode().getImmediateChild(m).updateChild(v,r);m===".priority"?u=d.updatePriority(c.getNode(),b):u=d.updateChild(c.getNode(),m,b,v,Oy,null)}const h=jy(e,u,c.isFullyInitialized()||U(n),d.filtersNodes()),f=new ad(s,h,i);return My(t,h,n,s,f,a)}function Lc(t,e,n,r,s,i,o){const a=e.eventCache;let c,u;const d=new ad(s,e,i);if(U(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Rs(e,u,!0,t.filter.filtersNodes());else{const h=$(n);if(h===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=Rs(e,u,a.isFullyInitialized(),a.isFiltered());else{const f=Z(n),m=a.getNode().getImmediateChild(h);let v;if(U(f))v=r;else{const x=d.getCompleteChild(h);x!=null?Ku(f)===".priority"&&x.getChild(xy(f)).isEmpty()?v=x:v=x.updateChild(f,r):v=O.EMPTY_NODE}if(m.equals(v))c=e;else{const x=t.filter.updateChild(a.getNode(),h,v,f,d,o);c=Rs(e,x,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Rf(t,e){return t.eventCache.isCompleteForChild(e)}function bC(t,e,n,r,s,i,o){let a=e;return r.foreach((c,u)=>{const d=fe(n,c);Rf(e,$(d))&&(a=Lc(t,a,d,u,s,i,o))}),r.foreach((c,u)=>{const d=fe(n,c);Rf(e,$(d))||(a=Lc(t,a,d,u,s,i,o))}),a}function Of(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function Bc(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;U(n)?u=r:u=new J(null).setTree(n,r);const d=e.serverCache.getNode();return u.children.inorderTraversal((h,f)=>{if(d.hasChild(h)){const m=e.serverCache.getNode().getImmediateChild(h),v=Of(t,m,f);c=Qo(t,c,new Y(h),v,s,i,o,a)}}),u.children.inorderTraversal((h,f)=>{const m=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!d.hasChild(h)&&!m){const v=e.serverCache.getNode().getImmediateChild(h),x=Of(t,v,f);c=Qo(t,c,new Y(h),x,s,i,o,a)}}),c}function NC(t,e,n,r,s,i,o){if(Wo(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(U(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Qo(t,e,n,c.getNode().getChild(n),s,i,a,o);if(U(n)){let u=new J(null);return c.getNode().forEachChild(Gn,(d,h)=>{u=u.set(new Y(d),h)}),Bc(t,e,n,u,s,i,a,o)}else return e}else{let u=new J(null);return r.foreach((d,h)=>{const f=fe(n,d);c.isCompleteForPath(f)&&(u=u.set(d,c.getNode().getChild(f)))}),Bc(t,e,n,u,s,i,a,o)}}function CC(t,e,n,r,s){const i=e.serverCache,o=jy(e,i.getNode(),i.isFullyInitialized()||U(n),i.isFiltered());return My(t,o,n,r,Oy,s)}function SC(t,e,n,r,s,i){let o;if(Wo(r,n)!=null)return e;{const a=new ad(r,e,s),c=e.eventCache.getNode();let u;if(U(n)||$(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Vo(r,rr(e));else{const h=e.serverCache.getNode();I(h instanceof O,"serverChildren would be complete if leaf node"),d=od(r,h)}d=d,u=t.filter.updateFullNode(c,d,i)}else{const d=$(n);let h=ld(r,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=c.getImmediateChild(d)),h!=null?u=t.filter.updateChild(c,d,h,Z(n),a,i):e.eventCache.getNode().hasChild(d)?u=t.filter.updateChild(c,d,O.EMPTY_NODE,Z(n),a,i):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Vo(r,rr(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||Wo(r,q())!=null,Rs(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new td(r.getIndex()),i=UN(r);this.processor_=vC(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(O.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(O.EMPTY_NODE,a.getNode(),null),d=new Tn(c,o.isFullyInitialized(),s.filtersNodes()),h=new Tn(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=wl(h,d),this.eventGenerator_=new JN(this.query_)}get query(){return this.query_}}function kC(t){return t.viewCache_.serverCache.getNode()}function IC(t){return zo(t.viewCache_)}function jC(t,e){const n=rr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!U(e)&&!n.getImmediateChild($(e)).isEmpty())?n.getChild(e):null}function Mf(t){return t.eventRegistrations_.length===0}function TC(t,e){t.eventRegistrations_.push(e)}function Ff(t,e,n){const r=[];if(n){I(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Lf(t,e,n,r){e.type===_t.MERGE&&e.source.queryId!==null&&(I(rr(t.viewCache_),"We should always have a full cache before handling merges"),I(zo(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=wC(t.processor_,s,e,n,r);return xC(t.processor_,i.viewCache),I(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,Fy(t,i.changes,i.viewCache.eventCache.getNode(),null)}function AC(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(oe,(i,o)=>{r.push(Qr(i,o))}),n.isFullyInitialized()&&r.push(ky(n.getNode())),Fy(t,r,n.getNode(),e)}function Fy(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return XN(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ho;class Ly{constructor(){this.views=new Map}}function DC(t){I(!Ho,"__referenceConstructor has already been defined"),Ho=t}function PC(){return I(Ho,"Reference.ts has not been loaded"),Ho}function RC(t){return t.views.size===0}function cd(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return I(i!=null,"SyncTree gave us an op for an invalid query."),Lf(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(Lf(o,e,n,r));return i}}function By(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=Vo(n,s?r:null),c=!1;a?c=!0:r instanceof O?(a=od(n,r),c=!1):(a=O.EMPTY_NODE,c=!1);const u=wl(new Tn(a,c,!1),new Tn(r,s,!1));return new EC(e,u)}return o}function OC(t,e,n,r,s,i){const o=By(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),TC(o,n),AC(o,n)}function MC(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=An(t);if(s==="default")for(const[c,u]of t.views.entries())o=o.concat(Ff(u,n,r)),Mf(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||i.push(u.query));else{const c=t.views.get(s);c&&(o=o.concat(Ff(c,n,r)),Mf(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!An(t)&&i.push(new(PC())(e._repo,e._path)),{removed:i,events:o}}function $y(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Cn(t,e){let n=null;for(const r of t.views.values())n=n||jC(r,e);return n}function Uy(t,e){if(e._queryParams.loadsAllData())return bl(t);{const r=e._queryIdentifier;return t.views.get(r)}}function zy(t,e){return Uy(t,e)!=null}function An(t){return bl(t)!=null}function bl(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qo;function FC(t){I(!qo,"__referenceConstructor has already been defined"),qo=t}function LC(){return I(qo,"Reference.ts has not been loaded"),qo}let BC=1;class Bf{constructor(e){this.listenProvider_=e,this.syncPointTree_=new J(null),this.pendingWriteTree_=pC(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ud(t,e,n,r,s){return nC(t.pendingWriteTree_,e,n,r,s),s?ns(t,new nr(rd(),e,n)):[]}function $C(t,e,n,r){rC(t.pendingWriteTree_,e,n,r);const s=J.fromObject(n);return ns(t,new Hr(rd(),e,s))}function hn(t,e,n=!1){const r=sC(t.pendingWriteTree_,e);if(iC(t.pendingWriteTree_,e)){let i=new J(null);return r.snap!=null?i=i.set(q(),!0):Te(r.children,o=>{i=i.set(new Y(o),!0)}),ns(t,new Uo(r.path,i,n))}else return[]}function _i(t,e,n){return ns(t,new nr(sd(),e,n))}function UC(t,e,n){const r=J.fromObject(n);return ns(t,new Hr(sd(),e,r))}function zC(t,e){return ns(t,new ai(sd(),e))}function VC(t,e,n){const r=dd(t,n);if(r){const s=hd(r),i=s.path,o=s.queryId,a=Be(i,e),c=new ai(id(o),a);return fd(t,i,c)}else return[]}function Go(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||zy(o,e))){const c=MC(o,e,n,r);RC(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=c.removed;if(a=c.events,!s){const d=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(i,(f,m)=>An(m));if(d&&!h){const f=t.syncPointTree_.subtree(i);if(!f.isEmpty()){const m=HC(f);for(let v=0;v<m.length;++v){const x=m[v],b=x.query,g=Hy(t,x);t.listenProvider_.startListening(Ms(b),ci(t,b),g.hashFn,g.onComplete)}}}!h&&u.length>0&&!r&&(d?t.listenProvider_.stopListening(Ms(e),null):u.forEach(f=>{const m=t.queryToTagMap.get(Cl(f));t.listenProvider_.stopListening(Ms(f),m)}))}qC(t,u)}return a}function Vy(t,e,n,r){const s=dd(t,r);if(s!=null){const i=hd(s),o=i.path,a=i.queryId,c=Be(o,e),u=new nr(id(a),c,n);return fd(t,o,u)}else return[]}function WC(t,e,n,r){const s=dd(t,r);if(s){const i=hd(s),o=i.path,a=i.queryId,c=Be(o,e),u=J.fromObject(n),d=new Hr(id(a),c,u);return fd(t,o,d)}else return[]}function $c(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(f,m)=>{const v=Be(f,s);i=i||Cn(m,v),o=o||An(m)});let a=t.syncPointTree_.get(s);a?(o=o||An(a),i=i||Cn(a,q())):(a=new Ly,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=O.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((m,v)=>{const x=Cn(v,q());x&&(i=i.updateImmediateChild(m,x))}));const u=zy(a,e);if(!u&&!e._queryParams.loadsAllData()){const f=Cl(e);I(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const m=GC();t.queryToTagMap.set(f,m),t.tagToQueryMap.set(m,f)}const d=_l(t.pendingWriteTree_,s);let h=OC(a,e,n,d,i,c);if(!u&&!o&&!r){const f=Uy(a,e);h=h.concat(YC(t,e,f))}return h}function Nl(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=Be(o,e),u=Cn(a,c);if(u)return u});return Dy(s,e,i,n,!0)}function QC(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,d)=>{const h=Be(u,n);r=r||Cn(d,h)});let s=t.syncPointTree_.get(n);s?r=r||Cn(s,q()):(s=new Ly,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new Tn(r,!0,!1):null,a=_l(t.pendingWriteTree_,e._path),c=By(s,e,a,i?o.getNode():O.EMPTY_NODE,i);return IC(c)}function ns(t,e){return Wy(e,t.syncPointTree_,null,_l(t.pendingWriteTree_,q()))}function Wy(t,e,n,r){if(U(t.path))return Qy(t,e,n,r);{const s=e.get(q());n==null&&s!=null&&(n=Cn(s,q()));let i=[];const o=$(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const u=n?n.getImmediateChild(o):null,d=Py(r,o);i=i.concat(Wy(a,c,u,d))}return s&&(i=i.concat(cd(s,t,r,n))),i}}function Qy(t,e,n,r){const s=e.get(q());n==null&&s!=null&&(n=Cn(s,q()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,u=Py(r,o),d=t.operationForChild(o);d&&(i=i.concat(Qy(d,a,c,u)))}),s&&(i=i.concat(cd(s,t,r,n))),i}function Hy(t,e){const n=e.query,r=ci(t,n);return{hashFn:()=>(kC(e)||O.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?VC(t,n._path,r):zC(t,n._path);{const i=Ub(s,n);return Go(t,n,null,i)}}}}function ci(t,e){const n=Cl(e);return t.queryToTagMap.get(n)}function Cl(t){return t._path.toString()+"$"+t._queryIdentifier}function dd(t,e){return t.tagToQueryMap.get(e)}function hd(t){const e=t.indexOf("$");return I(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Y(t.substr(0,e))}}function fd(t,e,n){const r=t.syncPointTree_.get(e);I(r,"Missing sync point for query tag that we're tracking");const s=_l(t.pendingWriteTree_,e);return cd(r,n,s,null)}function HC(t){return t.fold((e,n,r)=>{if(n&&An(n))return[bl(n)];{let s=[];return n&&(s=$y(n)),Te(r,(i,o)=>{s=s.concat(o)}),s}})}function Ms(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(LC())(t._repo,t._path):t}function qC(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Cl(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function GC(){return BC++}function YC(t,e,n){const r=e._path,s=ci(t,e),i=Hy(t,n),o=t.listenProvider_.startListening(Ms(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)I(!An(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((u,d,h)=>{if(!U(u)&&d&&An(d))return[bl(d).query];{let f=[];return d&&(f=f.concat($y(d).map(m=>m.query))),Te(h,(m,v)=>{f=f.concat(v)}),f}});for(let u=0;u<c.length;++u){const d=c[u];t.listenProvider_.stopListening(Ms(d),ci(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new pd(n)}node(){return this.node_}}class md{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=fe(this.path_,e);return new md(this.syncTree_,n)}node(){return Nl(this.syncTree_,this.path_)}}const KC=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},$f=function(t,e,n){if(!t||typeof t!="object")return t;if(I(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return JC(t[".sv"],e,n);if(typeof t[".sv"]=="object")return XC(t[".sv"],e);I(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},JC=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:I(!1,"Unexpected server value: "+t)}},XC=function(t,e,n){t.hasOwnProperty("increment")||I(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&I(!1,"Unexpected increment value: "+r);const s=e.node();if(I(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},qy=function(t,e,n,r){return yd(e,new md(n,t),r)},gd=function(t,e,n){return yd(t,new pd(e),n)};function yd(t,e,n){const r=t.getPriority().val(),s=$f(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=$f(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new we(a,me(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new we(s))),o.forEachChild(oe,(a,c)=>{const u=yd(c,e.getImmediateChild(a),n);u!==c&&(i=i.updateImmediateChild(a,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Sl(t,e){let n=e instanceof Y?e:new Y(e),r=t,s=$(n);for(;s!==null;){const i=er(r.node.children,s)||{children:{},childCount:0};r=new vd(s,r,i),n=Z(n),s=$(n)}return r}function dr(t){return t.node.value}function xd(t,e){t.node.value=e,Uc(t)}function Gy(t){return t.node.childCount>0}function ZC(t){return dr(t)===void 0&&!Gy(t)}function El(t,e){Te(t.node.children,(n,r)=>{e(new vd(n,t,r))})}function Yy(t,e,n,r){n&&!r&&e(t),El(t,s=>{Yy(s,e,!0,r)}),n&&r&&e(t)}function e1(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function bi(t){return new Y(t.parent===null?t.name:bi(t.parent)+"/"+t.name)}function Uc(t){t.parent!==null&&t1(t.parent,t.name,t)}function t1(t,e,n){const r=ZC(n),s=Et(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,Uc(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,Uc(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=/[\[\].#$\/\u0000-\u001F\u007F]/,r1=/[\[\].#$\u0000-\u001F\u007F]/,va=10*1024*1024,wd=function(t){return typeof t=="string"&&t.length!==0&&!n1.test(t)},Ky=function(t){return typeof t=="string"&&t.length!==0&&!r1.test(t)},s1=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Ky(t)},Yo=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Qu(t)||t&&typeof t=="object"&&Et(t,".sv")},Ni=function(t,e,n,r){r&&e===void 0||Ci(yl(t,"value"),e,n)},Ci=function(t,e,n){const r=n instanceof Y?new _N(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+$n(r));if(typeof e=="function")throw new Error(t+"contains a function "+$n(r)+" with contents = "+e.toString());if(Qu(e))throw new Error(t+"contains "+e.toString()+" "+$n(r));if(typeof e=="string"&&e.length>va/3&&vl(e)>va)throw new Error(t+"contains a string greater than "+va+" utf8 bytes "+$n(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(Te(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!wd(o)))throw new Error(t+" contains an invalid key ("+o+") "+$n(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);bN(r,o),Ci(t,a,r),NN(r)}),s&&i)throw new Error(t+' contains ".value" child '+$n(r)+" in addition to actual children.")}},i1=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=si(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!wd(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(wN);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&ht(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},o1=function(t,e,n,r){const s=yl(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];Te(e,(o,a)=>{const c=new Y(o);if(Ci(s,a,fe(n,c)),Ku(c)===".priority"&&!Yo(a))throw new Error(s+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(c)}),i1(s,i)},_d=function(t,e,n,r){if(!Ky(n))throw new Error(yl(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},l1=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),_d(t,e,n)},kl=function(t,e){if($(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},a1=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!wd(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!s1(n))throw new Error(yl(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Il(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!Ju(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function Jy(t,e,n){Il(t,n),Xy(t,r=>Ju(r,e))}function it(t,e,n){Il(t,n),Xy(t,r=>ht(r,e)||ht(e,r))}function Xy(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(u1(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function u1(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Ds&&ke("event: "+n.toString()),ts(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="repo_interrupt",h1=25;class f1{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new c1,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$o(),this.transactionQueueTree_=new vd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function p1(t,e,n){if(t.stats_=Gu(t.repoInfo_),t.forceRestClient_||Qb())t.server_=new Bo(t.repoInfo_,(r,s,i,o)=>{Uf(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>zf(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ve(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Wt(t.repoInfo_,e,(r,s,i,o)=>{Uf(t,r,s,i,o)},r=>{zf(t,r)},r=>{m1(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Kb(t.repoInfo_,()=>new KN(t.stats_,t.server_)),t.infoData_=new QN,t.infoSyncTree_=new Bf({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=_i(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),bd(t,"connected",!1),t.serverSyncTree_=new Bf({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const u=o(a,c);it(t.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function Zy(t){const n=t.infoData_.getNode(new Y(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Si(t){return KC({timestamp:Zy(t)})}function Uf(t,e,n,r,s){t.dataUpdateCount++;const i=new Y(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=Po(n,u=>me(u));o=WC(t.serverSyncTree_,i,c,s)}else{const c=me(n);o=Vy(t.serverSyncTree_,i,c,s)}else if(r){const c=Po(n,u=>me(u));o=UC(t.serverSyncTree_,i,c)}else{const c=me(n);o=_i(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=Gr(t,i)),it(t.eventQueue_,a,o)}function zf(t,e){bd(t,"connected",e),e===!1&&x1(t)}function m1(t,e){Te(e,(n,r)=>{bd(t,n,r)})}function bd(t,e,n){const r=new Y("/.info/"+e),s=me(n);t.infoData_.updateSnapshot(r,s);const i=_i(t.infoSyncTree_,r,s);it(t.eventQueue_,r,i)}function jl(t){return t.nextWriteId_++}function g1(t,e,n){const r=QC(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=me(s).withIndex(e._queryParams.getIndex());$c(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=_i(t.serverSyncTree_,e._path,i);else{const a=ci(t.serverSyncTree_,e);o=Vy(t.serverSyncTree_,e._path,i,a)}return it(t.eventQueue_,e._path,o),Go(t.serverSyncTree_,e,n,null,!0),i},s=>(rs(t,"get for query "+ve(e)+" failed: "+s),Promise.reject(new Error(s))))}function y1(t,e,n,r,s){rs(t,"set",{path:e.toString(),value:n,priority:r});const i=Si(t),o=me(n,r),a=Nl(t.serverSyncTree_,e),c=gd(o,a,i),u=jl(t),d=ud(t.serverSyncTree_,e,c,u,!0);Il(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(f,m)=>{const v=f==="ok";v||Ue("set at "+e+" failed: "+f);const x=hn(t.serverSyncTree_,u,!v);it(t.eventQueue_,e,x),zc(t,s,f,m)});const h=Cd(t,e);Gr(t,h),it(t.eventQueue_,h,[])}function v1(t,e,n,r){rs(t,"update",{path:e.toString(),value:n});let s=!0;const i=Si(t),o={};if(Te(n,(a,c)=>{s=!1,o[a]=qy(fe(e,a),me(c),t.serverSyncTree_,i)}),s)ke("update() called with empty data.  Don't do anything."),zc(t,r,"ok",void 0);else{const a=jl(t),c=$C(t.serverSyncTree_,e,o,a);Il(t.eventQueue_,c),t.server_.merge(e.toString(),n,(u,d)=>{const h=u==="ok";h||Ue("update at "+e+" failed: "+u);const f=hn(t.serverSyncTree_,a,!h),m=f.length>0?Gr(t,e):e;it(t.eventQueue_,m,f),zc(t,r,u,d)}),Te(n,u=>{const d=Cd(t,fe(e,u));Gr(t,d)}),it(t.eventQueue_,e,[])}}function x1(t){rs(t,"onDisconnectEvents");const e=Si(t),n=$o();Rc(t.onDisconnect_,q(),(s,i)=>{const o=qy(s,i,t.serverSyncTree_,e);Iy(n,s,o)});let r=[];Rc(n,q(),(s,i)=>{r=r.concat(_i(t.serverSyncTree_,s,i));const o=Cd(t,s);Gr(t,o)}),t.onDisconnect_=$o(),it(t.eventQueue_,q(),r)}function w1(t,e,n){let r;$(e._path)===".info"?r=$c(t.infoSyncTree_,e,n):r=$c(t.serverSyncTree_,e,n),Jy(t.eventQueue_,e._path,r)}function _1(t,e,n){let r;$(e._path)===".info"?r=Go(t.infoSyncTree_,e,n):r=Go(t.serverSyncTree_,e,n),Jy(t.eventQueue_,e._path,r)}function b1(t){t.persistentConnection_&&t.persistentConnection_.interrupt(d1)}function rs(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ke(n,...e)}function zc(t,e,n,r){e&&ts(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function N1(t,e,n,r,s,i){rs(t,"transaction on "+e);const o={path:e,update:n,onComplete:r,status:null,order:Jg(),applyLocally:i,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=Nd(t,e,void 0);o.currentInputSnapshot=a;const c=o.update(a.val());if(c===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Ci("transaction failed: Data returned ",c,o.path),o.status=0;const u=Sl(t.transactionQueueTree_,e),d=dr(u)||[];d.push(o),xd(u,d);let h;typeof c=="object"&&c!==null&&Et(c,".priority")?(h=er(c,".priority"),I(Yo(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(Nl(t.serverSyncTree_,e)||O.EMPTY_NODE).getPriority().val();const f=Si(t),m=me(c,h),v=gd(m,a,f);o.currentOutputSnapshotRaw=m,o.currentOutputSnapshotResolved=v,o.currentWriteId=jl(t);const x=ud(t.serverSyncTree_,e,v,o.currentWriteId,o.applyLocally);it(t.eventQueue_,e,x),Tl(t,t.transactionQueueTree_)}}function Nd(t,e,n){return Nl(t.serverSyncTree_,e,n)||O.EMPTY_NODE}function Tl(t,e=t.transactionQueueTree_){if(e||Al(t,e),dr(e)){const n=tv(t,e);I(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&C1(t,bi(e),n)}else Gy(e)&&El(e,n=>{Tl(t,n)})}function C1(t,e,n){const r=n.map(u=>u.currentWriteId),s=Nd(t,e,r);let i=s;const o=s.hash();for(let u=0;u<n.length;u++){const d=n[u];I(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=Be(e,d.path);i=i.updateChild(h,d.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,u=>{rs(t,"transaction put response",{path:c.toString(),status:u});let d=[];if(u==="ok"){const h=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat(hn(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Al(t,Sl(t.transactionQueueTree_,e)),Tl(t,t.transactionQueueTree_),it(t.eventQueue_,e,d);for(let f=0;f<h.length;f++)ts(h[f])}else{if(u==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{Ue("transaction at "+c.toString()+" failed: "+u);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=u}Gr(t,e)}},o)}function Gr(t,e){const n=ev(t,e),r=bi(n),s=tv(t,n);return S1(t,s,r),r}function S1(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],u=Be(n,c.path);let d=!1,h;if(I(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,h=c.abortReason,s=s.concat(hn(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=h1)d=!0,h="maxretry",s=s.concat(hn(t.serverSyncTree_,c.currentWriteId,!0));else{const f=Nd(t,c.path,o);c.currentInputSnapshot=f;const m=e[a].update(f.val());if(m!==void 0){Ci("transaction failed: Data returned ",m,c.path);let v=me(m);typeof m=="object"&&m!=null&&Et(m,".priority")||(v=v.updatePriority(f.getPriority()));const b=c.currentWriteId,g=Si(t),p=gd(v,f,g);c.currentOutputSnapshotRaw=v,c.currentOutputSnapshotResolved=p,c.currentWriteId=jl(t),o.splice(o.indexOf(b),1),s=s.concat(ud(t.serverSyncTree_,c.path,p,c.currentWriteId,c.applyLocally)),s=s.concat(hn(t.serverSyncTree_,b,!0))}else d=!0,h="nodata",s=s.concat(hn(t.serverSyncTree_,c.currentWriteId,!0))}it(t.eventQueue_,n,s),s=[],d&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}Al(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)ts(r[a]);Tl(t,t.transactionQueueTree_)}function ev(t,e){let n,r=t.transactionQueueTree_;for(n=$(e);n!==null&&dr(r)===void 0;)r=Sl(r,n),e=Z(e),n=$(e);return r}function tv(t,e){const n=[];return nv(t,e,n),n.sort((r,s)=>r.order-s.order),n}function nv(t,e,n){const r=dr(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);El(e,s=>{nv(t,s,n)})}function Al(t,e){const n=dr(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,xd(e,n.length>0?n:void 0)}El(e,r=>{Al(t,r)})}function Cd(t,e){const n=bi(ev(t,e)),r=Sl(t.transactionQueueTree_,e);return e1(r,s=>{xa(t,s)}),xa(t,r),Yy(r,s=>{xa(t,s)}),n}function xa(t,e){const n=dr(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(I(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(I(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(hn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?xd(e,void 0):n.length=i+1,it(t.eventQueue_,bi(e),s);for(let o=0;o<r.length;o++)ts(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function k1(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ue(`Invalid query segment '${n}' in query '${t}'`)}return e}const Vf=function(t,e){const n=I1(t),r=n.namespace;n.domain==="firebase.com"&&Jt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Jt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Mb();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new uy(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Y(n.pathString)}},I1=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let d=t.indexOf("/");d===-1&&(d=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(d,h)),d<h&&(s=E1(t.substring(d,h)));const f=k1(t.substring(Math.min(t.length,h)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const m=e.slice(0,u);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),i=r}"ns"in f&&(i=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",j1=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=Wf.charAt(n%64),n=Math.floor(n/64);I(n===0,"Cannot push at time == 0");let o=i.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=Wf.charAt(e[s]);return I(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ve(this.snapshot.exportVal())}}class A1{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return I(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return U(this._path)?null:Ku(this._path)}get ref(){return new Rt(this._repo,this._path)}get _queryIdentifier(){const e=jf(this._queryParams),n=Hu(e);return n==="{}"?"default":n}get _queryObject(){return jf(this._queryParams)}isEqual(e){if(e=kt(e),!(e instanceof ss))return!1;const n=this._repo===e._repo,r=Ju(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+xN(this._path)}}function D1(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Sd(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Gn){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==tr)throw new Error(r);if(typeof e!="string")throw new Error(s)}if(t.hasEnd()){if(t.getIndexEndName()!==In)throw new Error(r);if(typeof n!="string")throw new Error(s)}}else if(t.getIndex()===oe){if(e!=null&&!Yo(e)||n!=null&&!Yo(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(I(t.getIndex()instanceof ed||t.getIndex()===Ey,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function sv(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Rt extends ss{constructor(e,n){super(e,n,new nd,!1)}get parent(){const e=xy(this._path);return e===null?null:new Rt(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Yr{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Y(e),r=ui(this.ref,e);return new Yr(this._node.getChild(n),r,oe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new Yr(s,ui(this.ref,r),oe)))}hasChild(e){const n=new Y(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function A(t,e){return t=kt(t),t._checkNotDeleted("ref"),e!==void 0?ui(t._root,e):t._root}function ui(t,e){return t=kt(t),$(t._path)===null?l1("child","path",e):_d("child","path",e),new Rt(t._repo,fe(t._path,e))}function Ot(t,e){t=kt(t),kl("push",t._path),Ni("push",e,t._path,!0);const n=Zy(t._repo),r=j1(n),s=ui(t,r),i=ui(t,r);let o;return o=Promise.resolve(i),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function On(t){return kl("remove",t._path),at(t,null)}function at(t,e){t=kt(t),kl("set",t._path),Ni("set",e,t._path,!1);const n=new es;return y1(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Re(t,e){o1("update",e,t._path);const n=new es;return v1(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function L(t){t=kt(t);const e=new rv(()=>{}),n=new Dl(e);return g1(t._repo,t,n).then(r=>new Yr(r,new Rt(t._repo,t._path),t._queryParams.getIndex()))}class Dl{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new T1("value",this,new Yr(e.snapshotNode,new Rt(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new A1(this,e,n):null}matches(e){return e instanceof Dl?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function P1(t,e,n,r,s){const i=new rv(n,void 0),o=new Dl(i);return w1(t._repo,t,o),()=>_1(t._repo,t,o)}function R1(t,e,n,r){return P1(t,"value",e)}class Pl{}class O1 extends Pl{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){Ni("endAt",this._value,e._path,!0);const n=VN(e._queryParams,this._value,this._key);if(sv(n),Sd(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ss(e._repo,e._path,n,e._orderByCalled)}}class M1 extends Pl{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){Ni("startAt",this._value,e._path,!0);const n=zN(e._queryParams,this._value,this._key);if(sv(n),Sd(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ss(e._repo,e._path,n,e._orderByCalled)}}class F1 extends Pl{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){D1(e,"orderByChild");const n=new Y(this._path);if(U(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new ed(n),s=WN(e._queryParams,r);return Sd(s),new ss(e._repo,e._path,s,!0)}}function Xt(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return _d("orderByChild","path",t),new F1(t)}class L1 extends Pl{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(Ni("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new O1(this._value,this._key)._apply(new M1(this._value,this._key)._apply(e))}}function Zt(t,e){return new L1(t,e)}function en(t,...e){let n=kt(t);for(const r of e)n=r._apply(n);return n}DC(Rt);FC(Rt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="FIREBASE_DATABASE_EMULATOR_HOST",Vc={};let $1=!1;function U1(t,e,n,r){t.repoInfo_=new uy(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function z1(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Jt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ke("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Vf(i,s),a=o.repoInfo,c;typeof process<"u"&&df&&(c=df[B1]),c?(i=`http://${c}?ns=${a.namespace}`,o=Vf(i,s),a=o.repoInfo):o.repoInfo.secure;const u=new qb(t.name,t.options,e);a1("Invalid Firebase Database URL",o),U(o.path)||Jt("Database URL must point to the root of a Firebase Database (not including a child path).");const d=W1(a,t,u,new Hb(t.name,n));return new Q1(d,t)}function V1(t,e){const n=Vc[e];(!n||n[t.key]!==t)&&Jt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),b1(t),delete n[t.key]}function W1(t,e,n,r){let s=Vc[e.name];s||(s={},Vc[e.name]=s);let i=s[t.toURLString()];return i&&Jt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new f1(t,$1,n,r),s[t.toURLString()]=i,i}class Q1{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(p1(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Rt(this._repo,q())),this._rootInternal}_delete(){return this._rootInternal!==null&&(V1(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Jt("Cannot call "+e+" on a deleted database.")}}function iv(t=Hg(),e){const n=yi(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=o_("database");r&&H1(n,...r)}return n}function H1(t,e,n,r={}){t=kt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Jt("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Jt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new so(so.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:l_(r.mockUserToken,t.app.options.projectId);i=new so(o)}U1(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(t){Ab(_b),kn(new Yt("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return z1(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Pt(hf,ff,t),Pt(hf,ff,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function Ei(t,e,n){var r;if(t=kt(t),kl("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const s=(r=void 0)!==null&&r!==void 0?r:!0,i=new es,o=(c,u,d)=>{let h=null;c?i.reject(c):(h=new Yr(d,new Rt(t._repo,t._path),oe),i.resolve(new G1(u,h)))},a=R1(t,()=>{});return N1(t._repo,t._path,e,o,a,s),i.promise}Wt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Wt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};q1();var Y1="firebase",K1="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pt(Y1,K1,"app");const ov="@firebase/installations",Ed="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv=1e4,av=`w:${Ed}`,cv="FIS_v2",J1="https://firebaseinstallations.googleapis.com/v1",X1=60*60*1e3,Z1="installations",eS="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},sr=new gl(Z1,eS,tS);function uv(t){return t instanceof ar&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv({projectId:t}){return`${J1}/projects/${t}/installations`}function hv(t){return{token:t.token,requestStatus:2,expiresIn:rS(t.expiresIn),creationTime:Date.now()}}async function fv(t,e){const r=(await e.json()).error;return sr.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function pv({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function nS(t,{refreshToken:e}){const n=pv(t);return n.append("Authorization",sS(e)),n}async function mv(t){const e=await t();return e.status>=500&&e.status<600?t():e}function rS(t){return Number(t.replace("s","000"))}function sS(t){return`${cv} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iS({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=dv(t),s=pv(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:n,authVersion:cv,appId:t.appId,sdkVersion:av},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await mv(()=>fetch(r,a));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:hv(u.authToken)}}else throw await fv("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=/^[cdef][\w-]{21}$/,Wc="";function aS(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=cS(t);return lS.test(n)?n:Wc}catch{return Wc}}function cS(t){return oS(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=new Map;function vv(t,e){const n=Rl(t);xv(n,e),uS(n,e)}function xv(t,e){const n=yv.get(t);if(n)for(const r of n)r(e)}function uS(t,e){const n=dS();n&&n.postMessage({key:t,fid:e}),hS()}let Qn=null;function dS(){return!Qn&&"BroadcastChannel"in self&&(Qn=new BroadcastChannel("[Firebase] FID Change"),Qn.onmessage=t=>{xv(t.data.key,t.data.fid)}),Qn}function hS(){yv.size===0&&Qn&&(Qn.close(),Qn=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="firebase-installations-database",pS=1,ir="firebase-installations-store";let wa=null;function kd(){return wa||(wa=Wg(fS,pS,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ir)}}})),wa}async function Ko(t,e){const n=Rl(t),s=(await kd()).transaction(ir,"readwrite"),i=s.objectStore(ir),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&vv(t,e.fid),e}async function wv(t){const e=Rl(t),r=(await kd()).transaction(ir,"readwrite");await r.objectStore(ir).delete(e),await r.done}async function Ol(t,e){const n=Rl(t),s=(await kd()).transaction(ir,"readwrite"),i=s.objectStore(ir),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&vv(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Id(t){let e;const n=await Ol(t.appConfig,r=>{const s=mS(r),i=gS(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Wc?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function mS(t){const e=t||{fid:aS(),registrationStatus:0};return _v(e)}function gS(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(sr.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=yS(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:vS(t)}:{installationEntry:e}}async function yS(t,e){try{const n=await iS(t,e);return Ko(t.appConfig,n)}catch(n){throw uv(n)&&n.customData.serverCode===409?await wv(t.appConfig):await Ko(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function vS(t){let e=await Qf(t.appConfig);for(;e.registrationStatus===1;)await gv(100),e=await Qf(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Id(t);return r||n}return e}function Qf(t){return Ol(t,e=>{if(!e)throw sr.create("installation-not-found");return _v(e)})}function _v(t){return xS(t)?{fid:t.fid,registrationStatus:0}:t}function xS(t){return t.registrationStatus===1&&t.registrationTime+lv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wS({appConfig:t,heartbeatServiceProvider:e},n){const r=_S(t,n),s=nS(t,n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:av,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await mv(()=>fetch(r,a));if(c.ok){const u=await c.json();return hv(u)}else throw await fv("Generate Auth Token",c)}function _S(t,{fid:e}){return`${dv(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jd(t,e=!1){let n;const r=await Ol(t.appConfig,i=>{if(!bv(i))throw sr.create("not-registered");const o=i.authToken;if(!e&&CS(o))return i;if(o.requestStatus===1)return n=bS(t,e),i;{if(!navigator.onLine)throw sr.create("app-offline");const a=ES(i);return n=NS(t,a),a}});return n?await n:r.authToken}async function bS(t,e){let n=await Hf(t.appConfig);for(;n.authToken.requestStatus===1;)await gv(100),n=await Hf(t.appConfig);const r=n.authToken;return r.requestStatus===0?jd(t,e):r}function Hf(t){return Ol(t,e=>{if(!bv(e))throw sr.create("not-registered");const n=e.authToken;return kS(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function NS(t,e){try{const n=await wS(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Ko(t.appConfig,r),n}catch(n){if(uv(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await wv(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Ko(t.appConfig,r)}throw n}}function bv(t){return t!==void 0&&t.registrationStatus===2}function CS(t){return t.requestStatus===2&&!SS(t)}function SS(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+X1}function ES(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function kS(t){return t.requestStatus===1&&t.requestTime+lv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IS(t){const e=t,{installationEntry:n,registrationPromise:r}=await Id(e);return r?r.catch(console.error):jd(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(t,e=!1){const n=t;return await TS(n),(await jd(n,e)).token}async function TS(t){const{registrationPromise:e}=await Id(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(t){if(!t||!t.options)throw _a("App Configuration");if(!t.name)throw _a("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw _a(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function _a(t){return sr.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="installations",DS="installations-internal",PS=t=>{const e=t.getProvider("app").getImmediate(),n=AS(e),r=yi(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},RS=t=>{const e=t.getProvider("app").getImmediate(),n=yi(e,Nv).getImmediate();return{getId:()=>IS(n),getToken:s=>jS(n,s)}};function OS(){kn(new Yt(Nv,PS,"PUBLIC")),kn(new Yt(DS,RS,"PRIVATE"))}OS();Pt(ov,Ed);Pt(ov,Ed,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo="analytics",MS="firebase_id",FS="origin",LS=60*1e3,BS="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Td="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ke=new Vu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},rt=new gl("analytics","Analytics",$S);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t){if(!t.startsWith(Td)){const e=rt.create("invalid-gtag-resource",{gtagURL:t});return Ke.warn(e.message),""}return t}function Cv(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function zS(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function VS(t,e){const n=zS("firebase-js-sdk-policy",{createScriptURL:US}),r=document.createElement("script"),s=`${Td}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function WS(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function QS(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const c=(await Cv(n)).find(u=>u.measurementId===s);c&&await e[c.appId]}}catch(a){Ke.error(a)}t("config",s,i)}async function HS(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await Cv(n);for(const c of o){const u=a.find(h=>h.measurementId===c),d=u&&e[u.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Ke.error(i)}}function qS(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,c]=o;await HS(t,e,n,a,c)}else if(i==="config"){const[a,c]=o;await QS(t,e,n,r,a,c)}else if(i==="consent"){const[a,c]=o;t("consent",a,c)}else if(i==="get"){const[a,c,u]=o;t("get",a,c,u)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){Ke.error(a)}}return s}function GS(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=qS(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function YS(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Td)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=30,JS=1e3;class XS{constructor(e={},n=JS){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Sv=new XS;function ZS(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function eE(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:ZS(r)},i=BS.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw rt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function tE(t,e=Sv,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw rt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw rt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new sE;return setTimeout(async()=>{a.abort()},LS),Ev({appId:r,apiKey:s,measurementId:i},o,a,e)}async function Ev(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=Sv){var i;const{appId:o,measurementId:a}=t;try{await nE(r,e)}catch(c){if(a)return Ke.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw c}try{const c=await eE(t);return s.deleteThrottleMetadata(o),c}catch(c){const u=c;if(!rE(u)){if(s.deleteThrottleMetadata(o),a)return Ke.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw c}const d=Number((i=u==null?void 0:u.customData)===null||i===void 0?void 0:i.httpStatus)===503?tf(n,s.intervalMillis,KS):tf(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(o,h),Ke.debug(`Calling attemptFetch again in ${d} millis`),Ev(t,h,r,s)}}function nE(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(rt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function rE(t){if(!(t instanceof ar)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class sE{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function iE(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oE(){if(Bg())try{await $g()}catch(t){return Ke.warn(rt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ke.warn(rt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function lE(t,e,n,r,s,i,o){var a;const c=tE(t);c.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Ke.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Ke.error(m)),e.push(c);const u=oE().then(m=>{if(m)return r.getId()}),[d,h]=await Promise.all([c,u]);YS(i)||VS(i,d.measurementId),s("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[FS]="firebase",f.update=!0,h!=null&&(f[MS]=h),s("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e){this.app=e}_delete(){return delete Fs[this.app.options.appId],Promise.resolve()}}let Fs={},qf=[];const Gf={};let ba="dataLayer",cE="gtag",Yf,kv,Kf=!1;function uE(){const t=[];if(c_()&&t.push("This is a browser extension environment."),d_()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=rt.create("invalid-analytics-context",{errorInfo:e});Ke.warn(n.message)}}function dE(t,e,n){uE();const r=t.options.appId;if(!r)throw rt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ke.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw rt.create("no-api-key");if(Fs[r]!=null)throw rt.create("already-exists",{id:r});if(!Kf){WS(ba);const{wrappedGtag:i,gtagCore:o}=GS(Fs,qf,Gf,ba,cE);kv=i,Yf=o,Kf=!0}return Fs[r]=lE(t,qf,Gf,e,Yf,ba,n),new aE(t)}function hE(t=Hg()){t=kt(t);const e=yi(t,Jo);return e.isInitialized()?e.getImmediate():fE(t)}function fE(t,e={}){const n=yi(t,Jo);if(n.isInitialized()){const s=n.getImmediate();if(Ro(e,n.getOptions()))return s;throw rt.create("already-initialized")}return n.initialize({options:e})}function pE(t,e,n,r){t=kt(t),iE(kv,Fs[t.app.options.appId],e,n,r).catch(s=>Ke.error(s))}const Jf="@firebase/analytics",Xf="0.10.8";function mE(){kn(new Yt(Jo,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return dE(r,s,n)},"PUBLIC")),kn(new Yt("analytics-internal",t,"PRIVATE")),Pt(Jf,Xf),Pt(Jf,Xf,"esm2017");function t(e){try{const n=e.getProvider(Jo).getImmediate();return{logEvent:(r,s,i)=>pE(n,r,s,i)}}catch(n){throw rt.create("interop-component-reg-failed",{reason:n})}}}mE();const gE={apiKey:"AIzaSyCIZn8NmNqICZqkEevSpjTA33FhATJ_Dak",authDomain:"sherazpos.firebaseapp.com",databaseURL:"https://sherazpos-default-rtdb.firebaseio.com",projectId:"sherazpos",storageBucket:"sherazpos.appspot.com",messagingSenderId:"597415567946",appId:"1:597415567946:web:9eb38d977357f825273cb3",measurementId:"G-56K9B8HK61"},Ad=Qg(gE);hE(Ad);const Ce=iv(Ad),R=iv(Ad),yE=async t=>{try{const e=A(Ce,"areas/"),n=Ot(e);if((await Ei(e,s=>{if(s=s||{},!Object.values(s).some(i=>i.name.toLowerCase()===t.name.toLowerCase()||i.shortForm.toLowerCase()===t.shortForm.toLowerCase()))return s[n.key]={...t,id:n.key},s})).committed)return await at(n,{...t,id:n.key}),n.key;throw new Error("Area already exists.")}catch(e){throw console.error("Failed to add area:",e),new Error("Failed to add area")}},Dd=async()=>{try{const t=A(Ce,"areas/"),e=await L(t);if(e.exists()){const n=[];return e.forEach(r=>{const s=r.val();n.push({id:r.key,...s})}),n}else return console.log("No areas found."),[]}catch(t){throw console.error("Failed to retrieve areas:",t),new Error("Failed to retrieve areas")}},vE=async t=>{try{const e=A(Ce,"areas"),n=await L(e);if(n.exists()){let r=null;if(n.forEach(s=>{s.val().name===t&&(r=s.key)}),r){const s=A(Ce,`areas/${r}`);await at(s,null),console.log(`Area with ID ${t} has been deleted.`)}else console.log(`No area found with ID ${t}.`)}else console.log("No areas found.")}catch(e){throw console.error("Failed to delete area:",e),new Error("Failed to delete area")}},Zf=async t=>{try{t.discount=isNaN(t.discount)?0:t.discount,console.log(t);const e=Ot(A(R,"cashInvoices"));t.id=e.key,await at(e,t);for(const n of t.products){const r=en(A(R,"products"),Xt("productCode"),Zt(n.productCode)),i=(await L(r)).val();if(i){const o=Object.keys(i)[0],a=i[o],u=(isNaN(a.quantity)?0:parseInt(a.quantity))-parseInt(n.quantity);await Re(A(R,`products/${o}`),{quantity:u})}}return console.log("Cash Invoice Added"),t.id}catch(e){console.error("Failed to add cash invoice and update product quantities:",e)}},xE=async(t,e)=>{try{const n=A(R,`cashInvoices/${t}`),s=(await L(n)).val();if(!s)throw new Error("Invoice not found");if(console.log(`Updates: ${JSON.stringify(e,null,2)} | Invoice ID: ${t}`),s.products&&s.products.length>0)for(const i of s.products){const o=en(A(R,"products"),Xt("productCode"),Zt(i.productCode)),c=(await L(o)).val();if(c){const u=Object.keys(c)[0],d=c[u],f=(isNaN(d.quantity)?0:Number(d.quantity||0))-Number(i.quantity||0);await Re(A(R,`products/${u}`),{quantity:f})}}if(await Re(n,e),e.products)for(const i of e.products){const o=en(A(R,"products"),Xt("productCode"),Zt(i.productCode)),c=(await L(o)).val();if(c){const u=Object.keys(c)[0],d=c[u],f=(isNaN(d.quantity)?0:Number(d.quantity||0))-Number(i.quantity);await Re(A(R,`products/${u}`),{quantity:f})}}}catch(n){console.error("Failed to update cash invoice and product quantities:",n)}},wE=async t=>{try{const e=A(R,`cashInvoices/${t}`),r=(await L(e)).val();if(!r)throw new Error("Invoice not found");if(r.products&&r.products.length>0)for(const s of r.products){const i=en(A(R,"products"),Xt("productCode"),Zt(s.productCode)),a=(await L(i)).val();if(a){const c=Object.keys(a)[0],u=a[c],h=(isNaN(u.quantity)?0:Number(u.quantity))-Number(s.quantity);await Re(A(R,`products/${c}`),{quantity:h})}}await On(e)}catch(e){console.error("Failed to delete cash invoice and revert product quantities:",e)}},Iv=async()=>{try{const t=A(R,"cashInvoices"),e=await L(t);return e.val()?Object.values(e.val()):[]}catch(t){console.error("Failed to retrieve cash invoices:",t)}},_E=async t=>{try{const e=A(R,"cashInvoices"),n=await L(e);return(n.val()?Object.values(n.val()):[]).filter(i=>i.products.some(o=>o.productCode===t))}catch(e){return console.error("Failed to retrieve cash invoices by product code:",e),[]}},bE=async t=>{try{const e=Ot(A(R,"customers"));return await at(e,{...t,id:e.key}),e.key}catch(e){console.error("Failed to add customer:",e)}},NE=async()=>{try{const t=await L(A(R,"customers"));return t.exists()?Object.values(t.val()):[]}catch(t){console.error("Failed to retrieve customers:",t)}},CE=async()=>{try{const t=en(A(R,"customers"),Xt("accountType"),Zt("Supplier")),e=await L(t);return e.exists()?Object.values(e.val()):[]}catch(t){return console.error("Failed to retrieve suppliers:",t),[]}},SE=async()=>{try{const t=en(A(R,"customers"),Xt("accountType"),Zt("Customer")),e=await L(t);return e.exists()?Object.values(e.val()):[]}catch(t){return console.error("Failed to retrieve customers:",t),[]}},EE=async(t,e)=>{try{const n=A(R,`customers/${t}`);await Re(n,e)}catch(n){console.error("Failed to update customer:",n)}},kE=async t=>{try{const e=A(R,`customers/${t}`);await On(e)}catch(e){console.error("Failed to delete customer:",e)}},ep=async t=>{try{t.discount=isNaN(t.discount)?0:t.discount;const e=A(R,"deliveryNotes"),n=Ot(e);await at(n,t);const r=t.products.map(async s=>{if(s.productCode&&s.productCode!==""){const i=en(A(R,"products"),Xt("productCode"),Zt(s.productCode)),o=await L(i);if(o.exists()){const a=o.val();console.log(a);const c=Object.keys(a)[0],d=(isNaN(a.quantity)?0:parseInt(a.quantity))-parseInt(s.quantity);await Re(A(R,`products/${c}`),{quantity:d})}}});return await Promise.all(r),n.key}catch(e){console.error("Failed to add delivery note and update product quantities:",e)}},IE=async(t,e)=>{try{console.log(t);const n=A(R,`deliveryNotes/${t}`),r=await L(n);if(!r.exists())throw new Error("Delivery note not found");const s=r.val();let i=[];s.products&&s.products.length>0&&(i=s.products.map(async a=>{const c=en(A(R,"products"),Xt("productCode"),Zt(a.productCode)),u=await L(c);if(u.exists()){const d=u.val(),f=(isNaN(d.quantity)?0:Number(d.quantity||0))+Number(a.quantity),m=Object.keys(d)[0];await Re(A(R,`products/${m}`),{quantity:f})}}));let o=[];e.products&&e.products.length>0&&(o=e.products.map(async a=>{const c=en(A(R,"products"),Xt("productCode"),Zt(a.productCode)),u=await L(c);if(u.exists()){const d=u.val(),f=(isNaN(d.quantity)?0:Number(d.quantity))-Number(a.quantity),m=Object.keys(d)[0];await Re(A(R,`products/${m}`),{quantity:f})}})),await Promise.all([...i,...o]),await Re(n,e)}catch(n){console.error("Failed to update delivery note and product quantities:",n)}},jE=async t=>{try{const e=A(R,`deliveryNotes/${t}`),n=await L(e);if(!n.exists())throw new Error("Delivery note not found");const r=n.val();let s=[];r.products&&r.products.length>0&&(s=r.products.map(async i=>{const o=A(R,`products/${i.productCode}`),a=await L(o);if(a.exists()){const c=a.val(),d=(isNaN(c.quantity)?0:Number(c.quantity))-Number(i.quantity),h=Object.keys(c)[0];await Re(A(R,`products/${h}`),{quantity:d})}})),await On(e),await Promise.all(s)}catch(e){console.error("Failed to delete delivery note and revert product quantities:",e)}},jv=async()=>{try{const t=await L(A(R,"deliveryNotes"));return t.exists()?Object.entries(t.val()).map(([e,n])=>({id:e,...n})):[]}catch(t){console.error("Failed to retrieve delivery notes:",t)}},TE=async t=>{try{const e=await L(A(R,"deliveryNotes")),n=e.exists()?e.val():{};return Object.keys(n).flatMap(s=>{const i=n[s];return i.products.filter(a=>a.productCode===t).map(a=>({...i,...a}))})}catch(e){return console.error("Failed to retrieve delivery notes:",e),[]}},AE=async t=>{try{t.discount=isNaN(t.discount)?0:t.discount;const e=Ot(A(R,"quotations"));return await at(e,t),e.key}catch(e){console.error("Failed to add quotation:",e)}},DE=async(t,e)=>{try{console.log(t),await Re(A(R,`quotations/${t}`),e)}catch(n){console.error("Failed to update quotation:",n)}},Na=async t=>{try{await On(A(R,`quotations/${t}`))}catch(e){console.error("Failed to delete quotation:",e)}},Pd=async()=>{try{const t=A(R,"quotations"),e=await L(t);return e.exists()?Object.entries(e.val()).map(([n,r])=>({id:n,...r})):[]}catch(t){console.error("Failed to get all quotations:",t)}},PE=async t=>{try{return(await Pd()).flatMap(r=>r.products.filter(i=>i.productCode===t).map(i=>({...r,...i})))}catch(e){return console.error("Failed to retrieve quotations:",e),[]}},Rd=async t=>{const e=t.toLowerCase();try{const r=(await L(A(R,"products"))).val();return r?Object.values(r).find(i=>i.productCode===e):null}catch(n){return console.error("Failed to retrieve product:",n),null}},RE=async t=>{try{const e=t.productCode.toLowerCase();if(await Rd(e)){alert("Product already exists with this code");return}const n=Ot(A(R,"products")),r=n.key,s=(t.alternatives||[]).filter(i=>i.productCode&&i.productCode.trim()!=="");if(await at(n,{...t,id:r,productCode:e,alternatives:s}),s.length>0)for(let i of s){const a=(await L(A(R,"products"))).val(),c=Object.values(a).find(u=>u.productCode===i.productCode);if(c){const u=A(R,`products/${c.id}`);await Ei(u,d=>(d&&d.alternatives.push({productCode:e,brand:t.brand,name:t.name,sellingPrice1:t.sellingPrice1}),d))}}return r}catch(e){console.error("Failed to add product and manage alternatives:",e)}},Tv=async()=>{try{const t=await L(A(R,"products"));return t.exists()?Object.values(t.val()):[]}catch(t){return console.error("Failed to retrieve products:",t),[]}},OE=async(t,e)=>{try{const n=A(R,`products/${t}`),s=(await L(n)).val();if(!s)throw new Error(`Product with ID ${t} not found`);const i=s.productCode,o=(e.alternatives||[]).filter(a=>a.productCode&&a.productCode.trim()!=="");await Re(n,e);for(let a of o){const u=(await L(A(R,"products"))).val(),d=Object.values(u).find(h=>h.productCode===a.productCode);if(d){const h=A(R,`products/${d.id}`);await Ei(h,f=>(f&&(f.alternatives=f.alternatives.filter(m=>m.productCode!==i),f.alternatives.push({productCode:i,brand:e.brand||s.brand,name:e.name||s.name,sellingPrice1:e.sellingPrice1||s.sellingPrice1})),f))}}}catch(n){console.error("Failed to update product and manage alternatives:",n)}},ME=async t=>{try{const n=(await L(A(R,`products/${t}`))).val();if(!n)throw new Error(`Product with ID ${t} not found`);const r=n.productCode,s=n.alternatives||[];for(let i of s){const a=(await L(A(R,"products"))).val(),c=Object.values(a).find(u=>u.productCode===i.productCode);if(c){const u=A(R,`products/${c.id}`);await Ei(u,d=>(d&&(d.alternatives=d.alternatives.filter(h=>h.productCode!==r)),d))}}await On(A(R,`products/${t}`))}catch(e){console.error("Failed to delete product and manage alternatives:",e)}},FE=async t=>{try{const e=A(Ce,"categories"),n=Ot(e);return await at(n,{id:n.key,name:t.name,shortForm:t.shortForm,subCategories:t.subCategories||[]}),n.key}catch(e){throw console.error("Failed to add category:",e),new Error("Failed to add category")}},Ml=async()=>{try{const t=A(Ce,"categories"),e=await L(t);if(e.exists()){const n=[];return e.forEach(r=>{const s=r.val();n.push({id:r.key,...s})}),n}else return console.log("No categories found."),[]}catch(t){throw console.error("Failed to retrieve categories:",t),new Error("Failed to retrieve categories")}},LE=async(t,e)=>{try{const n=A(Ce,`categories/${t}/subCategories`),r=Ot(n);await at(r,{name:e.name,shortForm:e.shortForm})}catch(n){throw console.error("Failed to add subcategory:",n),new Error("Failed to add subcategory")}},BE=async()=>{try{const t=A(Ce,"categories"),e=await L(t),n=[];return e.exists()?(e.forEach(r=>{const s=r.key,i=A(Ce,`categories/${s}/subCategories`);L(i).then(o=>{o.exists()?o.forEach(a=>{const c=a.val();n.push({id:a.key,...c,categoryId:s})}):console.log(`No subcategories found for category ${s}.`)})}),n):(console.log("No categories found."),[])}catch(t){throw console.error("Failed to retrieve subcategories:",t),new Error("Failed to retrieve subcategories")}},$E=async t=>{try{const e=A(Ce,"categories"),n=await L(e);if(n.exists()){let r=!1;n.forEach(s=>{if(s.val().name===t){const o=A(Ce,`categories/${s.key}`);On(o),r=!0,console.log(`Deleted category with name: ${t}`)}}),r||console.log(`No category found with name: ${t}`)}else console.log("No categories found.")}catch(e){throw console.error("Failed to delete category:",e),new Error("Failed to delete category")}},UE=async t=>{try{const e=A(Ce,"categories"),n=await L(e);if(n.exists()){let r=!1;n.forEach(s=>{const i=s.key,o=A(Ce,`categories/${i}/subCategories`);L(o).then(a=>{a.exists()?a.forEach(c=>{if(c.key===t){const u=A(Ce,`categories/${i}/subCategories/${t}`);On(u),r=!0,console.log(`Deleted subcategory with ID: "${t}" in category ID: "${i}"`)}}):console.log(`No subcategories found in category ID: "${i}".`)})}),r||console.log(`No subcategory found with ID: "${t}" in any category.`)}else console.log("No categories found.")}catch(e){throw console.error("Failed to delete subcategory:",e),new Error("Failed to delete subcategory")}},zE=({machines:t,onSelectMachine:e})=>l.jsxs("select",{onChange:n=>e(n.target.value),className:"w-full border p-1 mb-2",children:[l.jsx("option",{value:"",children:"Select Machine"}),t.map(n=>l.jsxs("option",{value:n.id,children:[n.shortForm," : ",n.name]},n.id))]}),VE=({submachines:t,onSelectSubmachine:e})=>l.jsxs("select",{onChange:n=>e(n.target.value),className:"w-full border p-1 mb-2",children:[l.jsx("option",{value:"",children:"Select Submachine"}),t.map(n=>l.jsxs("option",{value:n.shortForm,children:[n.shortForm," : ",n.name]},n.shortForm))]}),WE=({products:t,onSelectProduct:e})=>{const n=Object.keys(t.length>0?t[0]:{}),r=["alternatives","appliedModels","picture"],s=n.filter(o=>!r.includes(o)),i=o=>{e(o)};return l.jsxs("table",{className:"min-w-full max-w-full overflow-auto  border ",style:{zIndex:500},children:[l.jsx("thead",{children:l.jsx("tr",{className:"text-white bg-blue-800",children:s.map((o,a)=>l.jsx("th",{className:"py-1 px-4 text-sm font-normal border-b text-left",children:o.replace(/([A-Z])/g," $1").replace(/^./,c=>c.toUpperCase())},a))})}),l.jsx("tbody",{className:"bg-blue-100 ",children:t.map((o,a)=>l.jsx("tr",{className:"cursor-pointer hover:bg-gray-100 py-1 text-sm ",onClick:()=>i(o),children:s.map((c,u)=>l.jsx("td",{className:"py-2 px-4 border-b",children:typeof o[c]=="string"&&o[c].length>10?o[c].substring(0,10)+"...":o[c]},u))},a))})]})},Mn=({onProductSelect:t,productCode:e})=>{const[n,r]=_.useState(null),[s,i]=_.useState(null),[o,a]=_.useState([]);_.useEffect(()=>{(async()=>{const k=await Ml();a(k)})()},[]);const[c,u]=_.useState([]),[d,h]=_.useState(""),[f,m]=_.useState(""),[v,x]=_.useState(""),[b,g]=_.useState("");_.useEffect(()=>{(async()=>{const k=await Tv();u(k)})()},[]);const p=c.filter(C=>n&&!C.appliedModels.some(S=>S.make.toLowerCase()===n.shortForm.toLowerCase())||s&&!C.appliedModels.some(S=>S.type.toLowerCase()===s.shortForm.toLowerCase())?!1:C.name.toLowerCase().includes(d.toLowerCase())&&C.uniqueId.toLowerCase().includes(v.toLowerCase())&&C.productCode.toLowerCase().includes(b.toLowerCase())),y=C=>{const k=o.find(S=>S.id===parseInt(C));r(k),i(null)},w=C=>{const k=n.subCategories.find(S=>S.shortForm===C);i(k)},N=C=>{t(C)};return l.jsxs("div",{className:"flex min-h-[70vh] max-h-[70vh] bg-background scrollbar relative",style:{zIndex:100},children:[l.jsxs("div",{className:"w-[15%] p-4",children:[l.jsx("h2",{className:"font-bold mb-2",children:"Machines"}),l.jsx(zE,{machines:o,onSelectMachine:y}),n&&l.jsx(VE,{submachines:n.subCategories,onSelectSubmachine:w})]}),l.jsxs("div",{className:"w-[85%] p-4",children:[l.jsx("h2",{className:"mb-2",children:"Products"}),l.jsxs("div",{className:"mb-2 flex gap-2",children:[l.jsx("input",{type:"text",placeholder:"Search by Product Name",value:d,onChange:C=>h(C.target.value),className:"w-full border p-2 mb-2"}),l.jsx("input",{type:"text",placeholder:"Search by Product Code",value:e||b,onChange:C=>g(C.target.value),className:"w-full border p-2 mb-2"}),l.jsx("input",{type:"text",placeholder:"Search by OEM Code",value:f,onChange:C=>m(C.target.value),className:"w-full border p-2 mb-2"}),l.jsx("input",{type:"text",placeholder:"Search by Unique ID",value:v,onChange:C=>x(C.target.value),className:"w-full border p-2 mb-2"})]}),l.jsx("div",{className:"overflow-auto",style:{maxHeight:"50vh"},children:l.jsx(WE,{products:p,onSelectProduct:N})})]})]})};function Av({formData:t,onDataChange:e,Rows:n,mode:r}){const[s,i]=_.useState([]),[o,a]=_.useState(1),[c,u]=_.useState(!1),[d,h]=_.useState(null);_.useEffect(()=>{if(n&&n.length>0){i(n);const p=Math.max(...n.map(y=>y.siNo));a(p+1)}},[n]);const f=()=>{const p={siNo:o,type:"",productCode:"",brand:"",description:"",unit:"",quantity:1,gAmount:0,discount:0,totalVat:0},y=[...s,p];i(y),a(o+1),e(y)},m=p=>{const y=s.filter((w,N)=>N!==p);i(y),e(y)},v=(p,y,w)=>{const N=s.map((C,k)=>k===p?{...C,[y]:w}:C);i(N),e(N)},x=p=>{h(p),u(!0)},b=()=>{u(!1),h(null)},g=p=>{if(d!==null){let y=!1,w=s.map((N,C)=>C===d?{...N,brand:p.brand,description:p.name,unit:p.basicUnit,totalVat:Number(p.vatType),productCode:p.productCode,gAmount:Number(p.sellingPrice1)}:C!==d&&N.productCode===p.productCode?(y=!0,{...N,quantity:N.quantity+1}):N);y&&(w=w.filter((N,C)=>C!==d)),i(w),e(w)}b()};return l.jsxs("div",{className:"mt-6 min-h-[10vh] w-[98%] mx-auto",children:[l.jsx("button",{onClick:f,className:"bg-white text-black border-gray-300 border  px-6 py-2 mb-3 focus:scale-95",type:"button",children:"Add Product"}),l.jsx("div",{className:"min-h-[30vh] max-h-[30vh] scrollbar overflow-auto bg-blue-100",children:l.jsxs("table",{className:"w-full border-collapse border border-gray-300 bg-blue-100",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-blue-900 text-white",children:[l.jsx("th",{className:"border border-gray-300 px-1 italic font-bold text-sm bg-yellow-100 text-black",children:"S.I No"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Type"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Product Code"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Brand"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Description"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Unit"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Quantity"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"G. Amount"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Discount %"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Total VAT %"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Actions"})]})}),l.jsx("tbody",{children:s.map((p,y)=>l.jsxs("tr",{children:[l.jsx("td",{className:"border min-w-20 border-gray-300 text-center",children:p.siNo}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.type,onChange:w=>v(y,"type",w.target.value),className:"bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.productCode,onClick:()=>x(y),readOnly:!0,className:"w-full bg-transparent outline-none cursor-pointer focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.brand,onChange:w=>v(y,"brand",w.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.description,onChange:w=>v(y,"description",w.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.unit,onChange:w=>v(y,"unit",w.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.quantity,min:0,onChange:w=>v(y,"quantity",w.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.gAmount,min:0,onChange:w=>v(y,"gAmount",w.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.discount,min:0,onChange:w=>v(y,"discount",w.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.totalVat,min:0,onChange:w=>v(y,"totalVat",w.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 py-1 text-center px-1",children:l.jsx("button",{onClick:()=>m(y),className:"text-red-500",type:"button",children:"Delete"})})]},p.siNo))})]})}),c&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background",children:[l.jsx("button",{className:"text-red-500 mb-2",type:"button",onClick:b,children:"Close"}),l.jsx(Mn,{onProductSelect:g})]})})]})}function QE({formData:t,onDataChange:e,Rows:n,mode:r}){const[s,i]=_.useState([]),[o,a]=_.useState(1),[c,u]=_.useState(!1),[d,h]=_.useState(null);_.useEffect(()=>{if(n&&n.length>0){i(n);const p=Math.max(...n.map(y=>y.siNo));a(p+1)}},[n]);const f=()=>{const p={siNo:o,type:"",productCode:"",brand:"",description:"",unit:"",quantity:1,gAmount:0,discount:0,totalVat:0},y=[...s,p];i(y),a(o+1),e(y)},m=p=>{const y=s.filter((w,N)=>N!==p);i(y),e(y)},v=(p,y,w)=>{const N=s.map((C,k)=>k===p?{...C,[y]:w}:C);i(N),e(N)},x=p=>{h(p),u(!0)},b=()=>{u(!1),h(null)},g=p=>{if(d!==null){let y=!1,w=s.map((N,C)=>C===d?{...N,brand:p.brand,description:p.name,unit:p.basicUnit,totalVat:Number(p.vatType),productCode:p.productCode,gAmount:Number(p.sellingPrice1)}:C!==d&&N.productCode===p.productCode?(y=!0,{...N,quantity:N.quantity+1}):N);y&&(w=w.filter((N,C)=>C!==d)),i(w),e(w)}b()};return l.jsxs("div",{className:"mt-6 min-h-[10vh] w-[98%] mx-auto",children:[l.jsx("button",{onClick:f,className:"bg-white text-black border-gray-300 border  px-6 py-2 mb-3 focus:scale-95",type:"button",children:"Add Product"}),l.jsx("div",{className:"min-h-[30vh] max-h-[30vh] scrollbar overflow-auto bg-blue-100",children:l.jsxs("table",{className:"w-full border-collapse border border-gray-300 bg-blue-100",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-blue-900 text-white",children:[l.jsx("th",{className:"border border-gray-300 px-1 italic font-bold text-sm bg-yellow-100 text-black",children:"S.I No"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Type"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Product Code"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Brand"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Description"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Unit"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Quantity"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"G. Amount"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Discount %"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Total VAT %"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Actions"})]})}),l.jsx("tbody",{children:s.map((p,y)=>l.jsxs("tr",{children:[l.jsx("td",{className:"border min-w-20 border-gray-300 text-center",children:p.siNo}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.type,onChange:w=>v(y,"type",w.target.value),className:"bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.productCode,onClick:()=>x(y),readOnly:!0,className:"w-full bg-transparent outline-none cursor-pointer focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.brand,onChange:w=>v(y,"brand",w.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.description,onChange:w=>v(y,"description",w.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.unit,onChange:w=>v(y,"unit",w.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.quantity,min:0,onChange:w=>v(y,"quantity",w.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.gAmount,min:0,onChange:w=>v(y,"gAmount",w.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.discount,min:0,onChange:w=>v(y,"discount",w.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.totalVat,min:0,onChange:w=>v(y,"totalVat",w.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 py-1 text-center px-1",children:l.jsx("button",{onClick:()=>m(y),className:"text-red-500",type:"button",children:"Delete"})})]},p.siNo))})]})}),c&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background",children:[l.jsx("button",{className:"text-red-500 mb-2",type:"button",onClick:b,children:"Close"}),l.jsx(Mn,{onProductSelect:g})]})})]})}function HE({formData:t,onDataChange:e,Rows:n,mode:r}){const[s,i]=_.useState([]),[o,a]=_.useState(1),[c,u]=_.useState(!1);_.useState(null),_.useState("Quotation");const[d,h]=_.useState({terms:"",LOC:"",DocNo:"",date:new Date().toISOString().split("T")[0],accCode:"",accountName:"",refNo:"",curr:"",rate:1,docType:"",note:"",docNo1:"",sMan:"",MDoc:"",payment:"",delPlace:"",area:"",PONo:"",type:""});_.useEffect(()=>{if(n&&n.length>0){i(n);const x=Math.max(...n.map(b=>b.siNo));a(x+1)}},[n]);const f=()=>{const x={siNo:o,type:"",productCode:"",brand:"",description:"",unit:"",quantity:1,gAmount:0,discount:0,totalVat:0},b=[...s,x];i(b),a(o+1),e(b)},m=x=>{const{name:b,value:g}=x.target;h(p=>({...p,[b]:g}))},v=x=>{const b=s.filter((g,p)=>p!==x);i(b),e(b)};return l.jsxs("div",{className:"mt-10 mb-10 min-h-[10vh] w-[98%] mx-auto",children:[l.jsxs("div",{className:"grid grid-cols-6 gap-3 mb-6",children:[l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[35%] text-right inline-block",children:"Terms:"}),l.jsx("input",{type:"text",name:"terms",value:d.terms,onChange:m,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:r==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[50%] text-right inline-block",children:"Branch:"}),l.jsx("input",{type:"text",name:"branch",value:2,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:!0})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[13%] text-right inline-block",children:"Name:"}),l.jsx("input",{type:"text",name:"name",value:"Main Branch",className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:!0})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"LOC:"}),l.jsx("input",{type:"text",name:"LOC",value:d.LOC,onChange:m,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:r==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Doc.No:"}),l.jsx("input",{type:"number",name:"DocNo",value:d.DocNo,onChange:m,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:r==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[30%] text-right inline-block",children:"Date:"}),l.jsx("input",{type:"text",name:"date",value:d.date,onChange:m,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:r==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[36%] text-right inline-block",children:"Acc.Code:"}),l.jsx("input",{type:"text",name:"accCode",value:d.accCode,onChange:m,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:r==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[13%] text-right inline-block",children:"Name:"}),l.jsx("input",{type:"text",name:"accountName",value:d.accountName,onChange:m,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:r==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Ref No:"}),l.jsx("input",{type:"text",name:"refNo",value:d.refNo,onChange:m,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:r==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Curr:"}),l.jsx("input",{type:"text",name:"curr",value:d.curr,onChange:m,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:r==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[30%] text-right inline-block",children:"Rate:"}),l.jsx("input",{type:"text",name:"rate",value:d.rate,onChange:m,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:r==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"Doc Type:"}),l.jsx("input",{type:"text",name:"docType",value:d.docType,onChange:m,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:r==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[13%] text-right inline-block",children:"Note:"}),l.jsx("input",{type:"text",name:"note",value:d.note,onChange:m,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:r==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"S.Man:"}),l.jsx("input",{type:"text",name:"sMan",value:d.sMan,onChange:m,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:r==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[30%] text-right inline-block",children:"MDoc:"}),l.jsx("input",{type:"number",name:"MDoc",value:d.MDoc,onChange:m,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:r==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"Payment:"}),l.jsx("input",{type:"text",name:"payment",value:d.payment,onChange:m,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:r==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[28%] text-right inline-block",children:"DelPlace:"}),l.jsx("input",{type:"text",name:"delPlace",value:d.delPlace,onChange:m,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:r==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"Area:"}),l.jsx("input",{type:"text",name:"area",value:d.area,onChange:m,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:r==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"PO No:"}),l.jsx("input",{type:"number",name:"PONo",value:d.PONo,onChange:m,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:r==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Type:"}),l.jsx("input",{type:"text",name:"type",value:d.type,onChange:m,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:r==="delete"})]})]}),l.jsx("button",{onClick:f,className:"bg-white text-black border-gray-300 border px-6 py-2 mb-3 focus:scale-95",type:"button",children:"Add Product"}),l.jsx("div",{className:"min-h-[30vh] max-h-[30vh] overflow-auto bg-blue-100",children:l.jsxs("table",{className:"w-full border-collapse border border-gray-300 bg-blue-100",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-blue-900 text-white",children:[l.jsx("th",{className:"border border-gray-300 px-1 italic font-bold text-sm bg-yellow-100 text-black",children:"S.I No"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Type"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Product Code"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Brand"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Description"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Unit"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Quantity"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"G. Amount"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Discount %"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Total VAT %"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Actions"})]})}),l.jsx("tbody",{children:s.map((x,b)=>l.jsxs("tr",{children:[l.jsx("td",{className:"border min-w-20 border-gray-300 text-center",children:x.siNo}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:x.type,onChange:g=>m(b,"type",g.target.value),className:"bg-transparent outline-none focus:bg-white w-full",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:x.productCode,onClick:()=>handleOpenModal(b),readOnly:!0,className:"w-full bg-transparent outline-none cursor-pointer focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:x.brand,onChange:g=>m(b,"brand",g.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:x.description,onChange:g=>m(b,"description",g.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:x.unit,onChange:g=>m(b,"unit",g.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:x.quantity,min:0,onChange:g=>m(b,"quantity",g.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:x.gAmount,min:0,onChange:g=>m(b,"gAmount",g.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:x.discount,min:0,onChange:g=>m(b,"discount",g.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:x.totalVat,min:0,onChange:g=>m(b,"totalVat",g.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 py-1 text-center px-1",children:l.jsx("button",{onClick:()=>v(b),className:"text-red-500",type:"button",children:"Delete"})})]},x.siNo))})]})}),c&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background",children:[l.jsx("button",{className:"text-red-500 mb-2",type:"button",onClick:handleCloseModal,children:"Close"}),l.jsx(Mn,{onProductSelect:handleProductSelect})]})})]})}const qE=({mode:t,formData:e,totalDetails:n,onPaymentChange:r})=>{const[s,i]=_.useState(0),[o,a]=_.useState(0),[c,u]=_.useState(n.total||0);_.useEffect(()=>{if(n.total){const h=parseFloat(n.total),f=Math.floor(h);u(f),console.log("PaymentFields - Received totalAmount:",f)}else console.log("PaymentFields - formData.total is undefined or zero")},[n.total]),_.useEffect(()=>{if(e.payment==="Both"&&!isNaN(c)&&!isNaN(s)){const h=Math.max(c-s,0);a(h),console.log("Calculated Credit Amount:",h),r({cashAmount:s,creditAmount:h}),console.log("Passing to Parent - Cash Amount:",s,"Credit Amount:",h)}},[s,c,e.payment]);const d=h=>{const f=parseFloat(h.target.value)||0;f>c?(i(c),console.log("Cash Amount exceeded total, set to Total Amount:",c)):(i(f),console.log("Updated Cash Amount:",f))};return e.payment!=="Both"?null:l.jsxs("div",{className:"flex items-center col-span-2 gap-4",children:[l.jsxs("div",{className:"flex relative items-center flex-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"Cash Amount:"}),l.jsx("input",{type:"number",value:s||"",onChange:d,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!=="delete"?"bg-white":""}`,disabled:t==="delete",min:"0",max:c,step:"0.01"})]}),l.jsxs("div",{className:"flex relative items-center flex-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"Credit Amount:"}),l.jsx("input",{type:"number",value:o||"",className:"h-7 px-1 border border-gray-600 w-full ml-1 bg-gray-100",readOnly:!0})]})]})};function GE(t){if(!(t instanceof Date))throw new Error("Input must be a Date object");const e=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return`${e}/${n}/${r}`}function Dv({mode:t,initialInvoice:e}){_.useState("unPaid");const[n,r]=_.useState(t||"none"),[s,i]=_.useState(e||null),[o,a]=_.useState(!1),[c,u]=_.useState([]),[d,h]=_.useState([]),[f,m]=_.useState([]),[v,x]=_.useState([]),[b,g]=_.useState([]),[p,y]=_.useState(!1),[w,N]=_.useState(!1),C=async()=>{const M=await Iv();m(M);const ne=await jv();g(ne);const Me=await Pd();x(Me)};_.useEffect(()=>{const M=async()=>{const ne=await Dd();u(ne);const Me=await SE();h(Me)};C(),M()},[]);const k=M=>{i(M),a(!1),y(M.status==="paid")},S=M=>{r(M),i(null),a(M==="edit")},j=async()=>{s&&(s.invoiceType==="Delivery"||s.invoiceType==="delivery")&&(i(M=>({...M,status:"paid"})),y(!0))},T=()=>{N(M=>!M)};return l.jsx("div",{children:l.jsxs("div",{className:"w-[98%] mx-auto",children:[l.jsxs("nav",{className:"flex gap-1",children:[!w&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>S("add"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Add"}),l.jsx("button",{onClick:()=>S("edit"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Edit"}),l.jsx("button",{onClick:()=>S("delete"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Delete"})]}),l.jsx("button",{onClick:T,className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:w?"Hide Quotation Table":"Show Quotation Table"})]}),w?l.jsxs("div",{className:"mt-4",children:[l.jsx(HE,{}),l.jsx(QE,{})]}):l.jsxs(l.Fragment,{children:[n==="none"&&l.jsx(Ca,{mode:"delete",initialInvoice:{},areas:c,customers:d,cb:C}),(n==="edit"||n==="delete")&&!s&&l.jsxs("div",{className:"h-[94vh] w-[85%] mx-auto mt-6 flex justify-between",children:[l.jsxs("div",{className:"relative",children:["Select Invoice: ",l.jsx("input",{type:"text"}),l.jsx(ee,{items:f,onSelect:k,style:{top:"top-[3px] left-[92%]"},columns:[{key:"id",label:"Id"},{key:"accountName",label:"Customer"},{key:"DocNo",label:"DocNo"},{key:"date",label:"Date"},{key:"total",label:"Total"}],name:"invoiceList",all:!0})]}),l.jsxs("div",{className:"relative",children:["Select Quotation: ",l.jsx("input",{type:"text"}),l.jsx(ee,{items:v,onSelect:k,style:{top:"top-[3px] left-[92%]"},columns:[{key:"id",label:"Id"},{key:"accountName",label:"Customer"},{key:"DocNo",label:"DocNo"},{key:"date",label:"Date"},{key:"total",label:"Total"}],name:"invoiceList",all:!0})]}),l.jsxs("div",{className:"relative",children:["Select Delivery Note: ",l.jsx("input",{type:"text"}),l.jsx(ee,{items:b,onSelect:k,style:{top:"top-[3px] left-[92%]"},columns:[{key:"id",label:"Id"},{key:"accountName",label:"Customer"},{key:"DocNo",label:"DocNo"},{key:"date",label:"Date"},{key:"total",label:"Total"}],name:"invoiceList",all:!0})]})]}),n==="add"&&l.jsx(Ca,{mode:"add",initialInvoice:{terms:"Cash",branch:2,LOC:2,date:GE(new Date(Date.now()))},areas:c,customers:d,cb:C}),(n==="edit"||n==="delete")&&s&&l.jsx(Ca,{mode:n,initialInvoice:s,areas:c,customers:d,cb:C}),s&&(s.invoiceType==="Delivery"||s.invoiceType==="delivery")&&l.jsx("button",{onClick:j,className:`mt-1 text-white px-4 py-2 w-full ${p?"bg-gray-500":"bg-blue-500"}`,disabled:s.status==="paid",children:"Mark as Paid"})]})]})})}const YE=[{shortForm:"UAE",name:"Dirham"},{shortForm:"USD",name:"American Dollar"}],KE=[{shortForm:"Cash",name:"Cash Invoice"},{shortForm:"Delivery",name:"Delivery Note"},{shortForm:"Quotation",name:"Quotation"}],JE=[{name:"Salesman 1"},{name:"Salesman 2"},{name:"Salesman 3"},{name:"Salesman 4"}],XE=[{name:"Cash"},{name:"Credit Card"},{name:"Both"}],ZE=[{name:"Local"},{name:"International"}],le={id:"",terms:"Cash",LOC:"",DocNo:"",date:new Date(Date.now()),accCode:"",accountName:"",refNo:"",curr:"",rate:"",docType:"",note:"",docNo1:"",sMan:"",MDoc:"",payment:"Cash",delPlace:"",area:"",type:"",PONo:"",total:0,products:[]},rn={grossTotal:0,discount:0,disAmount:0,vatAmount:0,total:0,netTotal:0};function Ca({mode:t,initialInvoice:e,fullheight:n,areas:r,customers:s,cb:i}){const[o,a]=_.useState(le),[c,u]=_.useState("Cash"),[d,h]=_.useState(e.invoiceType||null),[f,m]=_.useState(rn),[v,x]=_.useState({cashAmount:0,creditAmount:0}),b=W=>{x(W),a(Q=>({...Q,cashAmount:W.cashAmount,creditAmount:W.creditAmount}))},g=W=>{a(Q=>({...Q,accountName:W}))},p=W=>{a(Q=>({...Q,curr:W}))},y=W=>{a(Q=>({...Q,docType:W})),u(W)},w=W=>{a(Q=>({...Q,sMan:W}))},N=W=>{a(Q=>({...Q,payment:W}))},C=W=>{a(Q=>({...Q,area:W.name}))},k=W=>{a(Q=>({...Q,type:W}))},S=W=>{let Q=0,Se=0,Xe=0,D=0,F=0,B=0;W.forEach(K=>{const de=Number(K.gAmount||0)*K.quantity,hr=Number(K.totalVat||0),Mt=Number(K.discount||0);Q+=de;let fr=Number((de*hr/100).toFixed(3));D+=fr;let Ft=Number((de+fr).toFixed(3)),pr=Number((Ft*Mt/100).toFixed(3));Xe+=pr}),Se=Number((Xe/Q*100).toFixed(3)),F=(Q+D).toFixed(3),B=(F-Xe).toFixed(3),m({grossTotal:Q,discount:Se,disAmount:Xe,vatAmount:D,total:F,netTotal:B}),a(K=>({...K,products:W}))};_.useEffect(()=>{a(W=>({...W,id:e.id||le.id,terms:e.terms||le.terms,LOC:e.LOC||le.LOC,DocNo:e.DocNo||le.DocNo,date:e.date||le.date,accCode:e.accCode||le.accCode,accountName:e.accountName||"",refNo:e.refNo||le.refNo,curr:e.curr||le.curr,rate:e.rate|le.rate,docType:e.docType|le.docType,note:e.note||le.note,docNo1:e.docNo1||le.docNo1,sMan:e.sMan||le.sMan,MDoc:e.MDoc||le.MDoc,payment:e.payment||le.payment,delPlace:e.delPlace||le.delPlace,area:e.area||le.area,PONo:e.PONo||le.PONo,type:e.type||le.type,products:e.products||le.products,total:e.total||le.total})),m({grossTotal:e.grossTotal||rn.grossTotal,discount:e.discount||rn.discount,disAmount:e.disAmount||rn.disAmount,vatAmount:e.vatAmount||rn.vatAmount,total:e.total||rn.total,netTotal:e.netTotal||rn.netTotal}),u(e.invoiceType||"Cash"),h(e.invoiceType||null)},[e]);const j=W=>{const{name:Q,value:Se}=W.target;a(Xe=>({...Xe,[Q]:Se}))},T=async W=>{W.preventDefault();const{id:Q,...Se}=o;if(console.log(o),t==="add")c==="Cash"?(await Zf({...Se,...f,invoiceType:c}),alert("Cash Invoice Created")):c==="Delivery"?(await ep({...Se,...f,invoiceType:c}),alert("Delivery Note Created")):(await AE({...Se,...f,invoiceType:c}),alert("Quotation Created"));else if(t==="edit"){console.log(c+" "+d);let Xe=!0;d==="Cash"&&c==="Cash"&&await xE(Q,{...Se,...f}),d==="Delivery"&&c==="Delivery"&&await IE(Q,{...Se,...f}),d==="Quotation"&&c==="Quotation"?await DE(Q,{...Se,...f}):d==="Quotation"&&c==="Cash"?(await Zf({...Se,...f,invoiceType:c}),await Na(Q)):d==="Quotation"&&c==="Delivery"?(await ep({...Se,...f,invoiceType:c}),await Na(Q)):(Xe=!1,alert("Cannot change invoice type...")),Xe&&alert("Updated Invoice")}else t==="delete"&&(c==="Cash"?(await wE(Q),alert("Cash Invoice deleted")):c==="Delivery"?(await jE(Q),alert("Delivery Note deleted")):c==="Quotation"&&(await Na(Q),alert("Quotation deleted")));a(le),m(rn),i&&i()},[M,ne]=_.useState(t==="delete"),Me=W=>Math.floor(W);return l.jsxs("form",{onSubmit:T,className:`${n?"min-h-[100vh]  ":"min-h-[92vh]"}`,children:[l.jsx("div",{className:"mx-auto",children:l.jsxs("div",{className:"flex items-center w-[30%] mx-auto",children:[l.jsx("span",{className:"w-[35%] text-right inline-block",children:"Invoice Type:"}),l.jsxs("select",{name:"invoiceType",value:c,onChange:W=>u(W.target.value),className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete",children:[l.jsx("option",{value:"Cash",children:"Cash Invoice"}),l.jsx("option",{value:"Delivery",children:"Delivery Note"}),l.jsx("option",{value:"Quotation",children:"Quotation"})]})]})}),l.jsxs("div",{className:`w-[96%] mx-auto  grid grid-cols-6 gap-3 p-3 ${n?"mt-0":"mt-10"}`,children:[l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[35%] text-right inline-block",children:"Terms:"}),l.jsx("input",{type:"text",name:"terms",value:o.terms,onChange:j,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[50%] text-right inline-block",children:"Branch:"}),l.jsx("input",{type:"text",name:"branch",value:2,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:!0})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[13%] text-right inline-block",children:"Name:"}),l.jsx("input",{type:"text",name:"name",value:"Main Branch",className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:!0})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"LOC:"}),l.jsx("input",{type:"text",name:"LOC",value:o.LOC,onChange:j,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Doc.No:"}),l.jsx("input",{type:"number",name:"DocNo",value:o.DocNo,onChange:j,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[30%] text-right inline-block",children:"Date:"}),l.jsx("input",{type:"text",value:o.date,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:!0})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[36%] text-right inline-block",children:"Acc.Code:"}),l.jsx("input",{type:"text",name:"accCode",value:o.accCode,onChange:j,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2 relative",children:[l.jsx("span",{className:"w-[13%] text-right inline-block",children:"Name:"}),l.jsx("input",{type:"text",value:o.accountName,onChange:g,className:`h-7 px-1 border border-gray-600  w-full ml-1  ${t!="delete"?"bg-white":""} `,disabled:!0}),!M&&l.jsx(ee,{items:s,onSelect:g,style:{top:"top-1 left-[95%]"},columns:[{key:"name",label:"Name"},{key:"address",label:"Address"},{key:"mobile",label:"Mobile"},{key:"email",label:"Email"},{key:"description",label:"Description"},{key:"SAL",label:"SAL#"},{key:"area",label:"Area"},{key:"vatCode",label:"VAT code"},{key:"TmId",label:"TmID"}]})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Ref No:"}),l.jsx("input",{type:"text",name:"refNo",value:o.refNo,onChange:j,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1 relative",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Curr:"}),l.jsx("input",{type:"text",name:"curr",value:o.curr,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}    `,disabled:!0}),!M&&l.jsx(ee,{items:YE,onSelect:p,style:{top:"top-1 left-[93%]"},columns:[{key:"shortForm",label:"Short Form"},{key:"name",label:"Name"}]})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[30%] text-right inline-block",children:"Rate:"}),l.jsx("input",{type:"text",name:"rate",value:o.rate,onChange:j,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block text-nowrap",children:"Doc Type:"}),l.jsx("input",{type:"text",name:"Invoice Type",value:c,onChange:j,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0}),!M&&l.jsx(ee,{items:KE,onSelect:y,style:{top:"top-1 left-[92%]"},columns:[{key:"shortForm",label:"Type"},{key:"name",label:"Name"}]})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[13%] text-right inline-block",children:"Note:"}),l.jsx("input",{type:"text",name:"note",value:o.note,onChange:j,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Doc No:"}),l.jsx("input",{type:"text",name:"docNo1",value:o.docNo1,onChange:j,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"S.Man:"}),l.jsx("input",{type:"text",name:"sMan",value:o.sMan,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0}),!M&&l.jsx(ee,{items:JE,onSelect:w,style:{top:"top-1 left-[93%]"},columns:[{key:"name",label:"Name"}]})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[30%] text-right inline-block",children:"MDoc:"}),l.jsx("input",{type:"Number",name:"MDoc",value:o.MDoc,onChange:j,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"Payment:"}),l.jsx("input",{type:"text",name:"payment",value:o.payment,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0}),!M&&l.jsx(ee,{items:XE,onSelect:N,style:{top:"top-1 left-[92%]"},columns:[{key:"name",label:"Mode of Payment"}]})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[28%] text-right inline-block",children:"DelPlace:"}),l.jsx("input",{type:"text",name:"delPlace",value:o.delPlace,onChange:j,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"Area:"}),l.jsx("input",{type:"text",name:"area",value:o.area,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0}),!M&&l.jsx(ee,{items:r,onSelect:C,style:{top:"top-1 left-[92%]"},columns:[{key:"name",label:"Area Name"},{key:"shortForm",label:"Area ShortForm"}],all:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"PO No:"}),l.jsx("input",{type:"Number",name:"PONo",value:o.PONo,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:M,onChange:j})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Type:"}),l.jsx("input",{type:"text",name:"type",value:o.type,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0}),!M&&l.jsx(ee,{items:ZE,onSelect:k,style:{top:"top-1 left-[93%]"},columns:[{key:"name",label:"Name"}]})]})]}),l.jsx("div",{children:l.jsx(Av,{formData:o,onDataChange:S,Rows:e.products,mode:t})}),l.jsxs("div",{className:"grid grid-cols-4 gap-3 mt-4 mb-4",children:[l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Gross Total:"}),l.jsx("input",{value:f.grossTotal||0,name:"grossTotal",className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Discount%:"}),l.jsx("input",{type:"number",value:f.discount||0,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Amount:"}),l.jsx("input",{type:"number",name:"",value:f.disAmount||0,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Net Total:"}),l.jsx("input",{type:"number",name:"",value:f.netTotal||0,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Vat Amount:"}),l.jsx("input",{type:"number",name:"",value:f.vatAmount||0,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Total:"}),console.log(f.total),l.jsx("input",{type:"number",value:Me(f.total)||0,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!=="delete"?"bg-white":""}`,disabled:!0})]}),l.jsx(qE,{mode:t,formData:o,totalDetails:f,onPaymentChange:b})]}),!(t==="delete"&&!Object.keys(e).length===0)&&l.jsx("div",{className:"flex space-x-2 mt-2",children:l.jsxs("button",{type:"submit",onClick:T,className:"bg-white px-5 py-1 w-full border border-gray-100",children:[t," Invoice"]})})]})}const ek=()=>l.jsx("div",{children:l.jsx("div",{className:"border border-gray-400 ",children:l.jsxs("ul",{className:"flex gap-2 ml-6",children:[l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openCashInvoice")},className:"nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-95",children:l.jsxs("li",{className:"flex w-full h-full",children:[l.jsx("img",{src:fs,className:"lg:w-5 nah-h mr-1 w-4 lg:mr-5"}),"Quotation"]})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openInvoiceViewer")},className:"ml-1 mr-8    nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-75 transition-all",children:l.jsx("img",{src:ps,className:"lg:w-4 nav-ph w-3 "})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openPurchaseInvoice")},className:"nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-95",children:l.jsxs("li",{className:"flex w-full h-full",children:[l.jsx("img",{src:fs,className:"lg:w-5  mr-1 w-4 nah-h lg:mr-5"}),"Sales Order"]})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openInvoiceViewer")},className:"ml-1 mr-8    nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-75 transition-all",children:l.jsx("img",{src:ps,className:"lg:w-4 w-3 nav-ph"})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openCashInvoice")},className:"nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-95",children:l.jsxs("li",{className:"flex w-full h-full",children:[l.jsx("img",{src:fs,className:"lg:w-5 mr-1 w-4 nah-h lg:mr-5"}),"Delivery Note"]})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openInvoiceViewer")},className:"ml-1 mr-8    nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-75 transition-all",children:l.jsx("img",{src:ps,className:"lg:w-4 w-3 nav-ph"})}),l.jsx("button",{className:"nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-95",onClick:()=>{window.electron.ipcRenderer.send("openCashInvoice")},children:l.jsxs("li",{className:"flex w-full h-full",children:[l.jsx("img",{src:fs,className:"lg:w-5 mr-1 w-4 nah-h lg:mr-5"}),"Cash Invoice"]})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openInvoiceViewer")},className:"ml-1 mr-8 nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-75 transition-all",children:l.jsx("img",{src:ps,className:"lg:w-4 w-3 nav-ph"})}),l.jsx("button",{className:"nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-95",onClick:()=>{window.electron.ipcRenderer.send("openReturn")},children:l.jsxs("li",{className:"flex w-full h-full",children:[l.jsx("img",{src:fs,className:"lg:w-5 mr-1 w-4 nah-h lg:mr-5"}),"Product Return"]})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openReturn")},className:"ml-1 mr-8 nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-75 transition-all",children:l.jsx("img",{src:ps,className:"lg:w-4 w-3 nav-ph"})})]})})}),tk=""+new URL("open-092cw3Jk.png",import.meta.url).href,nk=({selectedProduct:t,setSelectedProduct:e})=>{const[n,r]=_.useState(!1),s=()=>{r(!0)},i=()=>{r(!1)};_.useEffect(()=>(window.addEventListener("keydown",c=>{c.code==="Escape"&&n&&i()}),()=>window.addEventListener("keydown",c=>{c.code==="Escape"&&n&&i()})),[n]);const o=c=>{e(c),i()},a=async c=>{const{value:u}=c.target;e(h=>({...h,productCode:u}));const d=await Rd(u);d&&e(d)};return l.jsx(l.Fragment,{children:l.jsxs("div",{className:"w-[96%] font-medium mx-auto gap-8  flex justify-between",children:[l.jsxs("div",{className:"flex flex-col gap-1  2xl:w-[30%] w-[50%]",children:[l.jsxs("div",{className:"flex w-full ",children:[l.jsx("span",{className:"font-bold w-[35%] 2xl:w-[25%] text-blue-800 text-sm",children:"Product Code:"}),l.jsxs("div",{className:"text-sm 2xl:w-[75%] w-[65%] border uppercase bg-blue-100 border-gray-600 px-1 flex items-center justify-between",children:[l.jsx("input",{type:"text",className:"bg-transparent w-full outline-none",value:t.productCode||"",onChange:a}),l.jsx("button",{onClick:s,children:l.jsx("img",{src:tk,alt:"Open Search",className:"w-4 h-4"})})]})]}),n&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center ",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background  ",children:[l.jsx("button",{className:"text-red-500 mb-2",onClick:i,children:"Close"}),l.jsx(Mn,{onProductSelect:o})]})}),l.jsxs("div",{className:"flex border  w-full",children:[l.jsx("span",{className:"font-bold w-[35%] 2xl:w-[25%]  text-blue-800 text-sm",children:"Description:"}),l.jsx("div",{className:"text-sm   2xl:w-[75%]  w-[65%]   border  uppercase bg-white border-gray-600 px-1 ",children:t.description||"NA"})]}),l.jsxs("div",{className:"flex border  w-full",children:[l.jsx("span",{className:"font-bold w-[35%] 2xl:w-[25%]  text-red-950 text-sm",children:"Specification:"}),l.jsx("div",{className:"text-sm h-14 overflow-y-scroll 2xl:w-[75%]  w-[65%]   border  uppercase bg-blue-100 border-gray-600 px-1 ",children:t.description2||"NA"})]}),l.jsxs("div",{className:"flex border justify-between  items-center",children:[l.jsxs("div",{className:`flex justify-between    items-center  2xl:w-[40%] \r
                        w-[50%]  2xl:gap-0  gap-8`,children:[l.jsx("span",{className:"font-bold text-center text-red-950 text-sm 2xl:w-[90%] w-full   ",children:"Pack Qty:"}),l.jsx("div",{className:"bg-white w-[6rem] border border-gray-600 px-1",children:t.quantity||"NA"})]}),l.jsxs("div",{className:"flex justify-between items-center w-[40%]",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"Unit:"}),l.jsx("div",{className:"bg-white w-24 border border-gray-600 px-1",children:t.basicUnit||"NA"})]})]}),l.jsxs("div",{className:"flex border  w-full",children:[l.jsx("span",{className:"font-bold w-[35%] 2xl:w-[25%]  text-red-950 text-sm",children:"Max Order:"}),l.jsx("div",{className:"text-sm  2xl:w-[75%]  w-[65%]   border  uppercase bg-white border-gray-600 px-1 text-right ",children:t.maxOrder||"NA"})]}),l.jsxs("div",{className:"flex border  w-full",children:[l.jsx("span",{className:"font-bold w-[35%] 2xl:w-[25%]  text-red-950 text-sm",children:"Re-Order:"}),l.jsx("div",{className:"text-sm  2xl:w-[75%]  w-[65%]   border  uppercase bg-white border-gray-600 px-1 text-right ",children:t.reOrder||"NA"})]})]}),l.jsxs("div",{className:"flex flex-col gap-2  2xl:w-[30%] w-[50%] ",children:[l.jsxs("div",{className:"flex items-center   justify-center    ",children:[l.jsx("span",{className:"text-sm 2xl:w-[20%] w-[30%] font-bold text-center  text-red-950",children:"OEM No:"}),l.jsx("div",{className:" ml-1 text-sm     w-[80%]  border  uppercase bg-white border-gray-600 px-1",children:"0"})]}),l.jsxs("div",{className:"flex items-center  justify-center    ",children:[l.jsx("span",{className:"text-sm  2xl:w-[20%] w-[30%] text-center font-bold   text-red-950",children:"Lst Suppl:"}),l.jsx("div",{className:" ml-1 text-sm     w-[80%]  border  uppercase bg-white border-gray-600 px-1",children:t.lastSupplier||"NA"})]}),l.jsxs("div",{className:"flex justify-between ",children:[l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[4.8rem]  text-center font-bold   text-red-950",children:"Lst Pur.Cst:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white w-[40%]  border  uppercase  border-gray-600 px-1",children:t.lastPurCost||"NA"})]}),l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[3.8rem]  text-center font-bold   text-red-950",children:"AvgCost:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white  w-[70%] border  uppercase  border-gray-600 px-1",children:t.averageCost||"NA"})]})]}),l.jsx("div",{children:l.jsxs("div",{className:"flex items-center  justify-center    ",children:[l.jsx("span",{className:"text-sm 2xl:w-[20%] w-[30%]  font-bold text-left  text-red-950",children:"Sell Price2:"}),l.jsx("div",{className:" ml-1 text-sm text-right  w-[80%]  border  uppercase bg-white border-gray-600 px-1",children:t.sellingPrice2||"NA"})]})}),l.jsxs("div",{className:"flex justify-between ",children:[l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[4.8rem]  text-center font-bold   text-red-950",children:"Sell Price1:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white w-[40%]  border  uppercase  border-gray-600 px-1",children:t.sellingPrice1||"NA"})]}),l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[3.8rem]  text-center font-bold   text-red-950",children:"Margin%:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white  w-[70%] border  uppercase  border-gray-600 px-1",children:t.averageCost&&t.sellingPrice1?(t.sellingPrice1-t.averageCost)/100:0})]})]}),l.jsxs("div",{className:"flex justify-between ",children:[l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[4.8rem]  text-right font-bold   text-red-950",children:"Vat out:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white w-[40%]  border  uppercase  border-gray-600 px-1",children:t.vatType||"NA"})]}),l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[3.8rem]  text-right font-bold   text-red-950",children:"%:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white  w-[70%] border  uppercase  border-gray-600 px-1",children:"0"})]})]}),l.jsxs("div",{className:"flex items-center  justify-center    ",children:[l.jsx("span",{className:"text-sm  2xl:w-[20%] w-[50%] text-center font-bold   text-red-950",children:"vat Price:"}),l.jsx("div",{className:" ml-1 text-sm      w-[80%]  border  uppercase bg-white border-gray-600 px-1",children:"Local purchase"})]})]}),l.jsxs("div",{className:"flex flex-col  gap-[5px] 2xl:w-[30%] w-[50%] ",children:[l.jsxs("div",{className:"flex items-center w-full ",children:[l.jsx("span",{className:"text-sm 2xl:w-[12%] w-[30%]  font-bold  text-red-950",children:"Brand:"}),l.jsx("div",{className:"  text-sm   mr-1  2xl:w-[30%] w-[40%]  border  uppercase bg-white border-gray-600 px-1",children:t.brand||"NA"}),l.jsx("div",{className:"  text-sm     w-[60%]  border  uppercase bg-white border-gray-600 px-1",children:t.brand||"NA"})]}),l.jsxs("div",{className:"flex gap-3   ",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"Dept:"}),l.jsx("div",{className:"  text-sm     w-[90%]  border  uppercase bg-white border-gray-600 px-1",children:t.department||"NA"})]}),l.jsxs("div",{className:"flex w-full justify-between  items-center",children:[l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm  ",children:"Group:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:t.category||"NA"})]}),l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"Sub.Grp:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:t.subCategory||"NA"})]})]}),l.jsxs("div",{className:"flex w-full justify-between  items-center",children:[l.jsxs("div",{className:"flex justify-between gap-6 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm  ",children:"Loc:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:"2"})]}),l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"Stk.Typ:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:"HY"})]})]}),l.jsxs("div",{className:"flex w-full justify-between  items-center",children:[l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm  ",children:"Origin:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:t.origin||"NA"})]}),l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-blue-800 text-sm",children:"Unq.ID:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:t.uniqueId||"NA"})]})]}),l.jsxs("div",{className:"flex w-full justify-between  items-center",children:[l.jsxs("div",{className:"flex justify-between gap-5 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm  ",children:"ETA:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:"//"})]}),l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"ETD:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:"//"})]})]}),l.jsxs("div",{className:"flex w-full justify-between  items-center",children:[l.jsxs("div",{className:"flex justify-between -ml-5 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm  ",children:"Prod Type:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:"HY"})]}),l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"Qty"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:t.quantity||"NA"})]})]})]})]})})},et=({name:t,data:e,columns:n,highlightColumn:r,height:s,handleRowClick:i})=>{const o=c=>typeof c!="string"?c:c.length>13?c.slice(0,13)+"...":c,a=n.length>0?n:[];return l.jsxs("div",{className:`${s?"h-80":"min-h-full"} bg-blue-100 max-h-52 overflow-auto scrollbar`,children:[l.jsx("div",{className:"bg-gray-500 font-semibold text-sm mb-2 text-white text-center uppercase",children:t}),l.jsx("div",{className:"max-h-52",children:l.jsxs("table",{className:"w-full ",children:[l.jsx("thead",{children:l.jsx("tr",{children:a.map((c,u)=>l.jsx("th",{className:`text-left text-sm px-2 py-0 border-r-2 border-r-gray-400 ${u===0?"bg-yellow-200 italic font-bold":"bg-blue-800 text-white font-medium"}`,children:c.header},u))})}),l.jsx("tbody",{children:e.length>0?e.map((c,u)=>l.jsx("tr",{onClick:()=>i&&i(c),children:a.map((d,h)=>{var f;return l.jsx("td",{className:`px-2 py-1 font-semibold border-r-2 border-r-gray-300 text-[0.85rem] uppercase whitespace-nowrap ${u===0&&d.key===r?"bg-orange-400":""}`,children:d.render?d.render(c):o(((f=c[d.key])==null?void 0:f.toString())||"")},h)})},u)):l.jsx("tr",{children:a.map((c,u)=>l.jsx("td",{className:"px-2 py-1 border-r-2 border-r-gray-300 text-[0.85rem] uppercase whitespace-nowrap",children:""},u))})})]})})]})},rk=async t=>{try{const e=Ot(A(R,"purchaseInvoices")),n=e.key;await at(e,{...t,id:n});for(const r of t.products){const s=A(R,`products/${r.productCode}`),i=await L(s);if(i.exists()){const o=i.val(),a=(parseInt(o.quantity)||0)+parseInt(r.quantity);await Re(s,{quantity:a,lastSupplier:t.supplierName,lastPurCost:parseFloat(r.price)})}else console.warn(`Product with productCode ${r.productCode} not found.`)}return n}catch(e){throw console.error("Failed to add purchase invoice and update product quantities:",e),e}},sk=async(t,e)=>{try{const n=A(R,`purchaseInvoices/${t}`),r=await L(n);if(!r.exists())throw new Error(`Purchase invoice with ID ${t} not found.`);const s=r.val(),i=new Map(s.products.map(o=>[o.productCode,o]));for(const o of e.products){const a=i.get(o.productCode),c=Number(o.quantity)-(a?Number(a.quantity):0),u=A(R,`products/${o.productCode}`),d=await L(u);if(d.exists()){const h=d.val();await Re(u,{quantity:Number(h.quantity||0)+Number(c)})}else console.warn(`Product with productCode ${o.productCode} not found.`)}await Re(n,e)}catch(n){throw console.error("Failed to update purchase invoice and adjust product quantities:",n),n}},Pv=async()=>{try{const t=await L(A(R,"purchaseInvoices"));return t.exists()?Object.values(t.val()):[]}catch(t){throw console.error("Failed to retrieve purchase invoices:",t),t}},ik=async t=>{try{await On(A(R,`purchaseInvoices/${t}`))}catch(e){throw console.error("Failed to delete purchase invoice:",e),e}},ok=async t=>{try{const e=await L(A(R,"purchaseInvoices"));return e.exists()?Object.values(e.val()).flatMap(s=>s.products.filter(i=>i.productCode===t).map(i=>({id:s.id,invoiceNo:s.invoiceNo,supplierName:s.supplierName,supplierId:s.supplierId,date:s.date,productCode:i.productCode,name:i.name,quantity:i.quantity,price:i.price,total:Number(i.quantity)*Number(i.price)}))):[]}catch(e){throw console.error("Failed to retrieve purchase invoices with product details:",e),e}},lk=""+new URL("example-I_cYwQiU.png",import.meta.url).href,tp=()=>{const[t,e]=_.useState({productNo:"",name:"",supplierName:"",oemCode:"",uniqueId:"",description:"",specification:"",packQty:"HY",unit:"HY",maxOrder:0,reOrder:0,oemNo:0,lstSuppl:"Local purchase",lstPurCst:14.78,avgCost:14.78,sellPrice2:0,sellPrice1:14.78,margin:0,vatOut:14.78,vatPrice:"Local purchase",brand:"Origin",dept:0,group:"HY",subGrp:"HY",loc:"HY",stkTyp:"HY",origin:"HY",eta:"",etd:"",prodType:"HY",qty:"HY",alternatives:[],appliedModels:[]}),[n,r]=_.useState([]),[s,i]=_.useState([]),[o,a]=_.useState([]),[c,u]=_.useState([]);_.useEffect(()=>{t&&(async()=>{const m=await _E(t.productCode);r(m);const v=await PE(t.productCode);i(v);const x=await TE(t.productCode);a(x);const b=await ok(t.productCode);u(b)})()},[t]);const d=async f=>{if(!f)return;const m=await Rd(f);e(m)},h=[];return l.jsxs("div",{className:"bg-background min-h-[100vh]",children:[l.jsx(ek,{}),l.jsx("div",{className:"border-b border-t border-b-gray-300 border-t-gray-300",children:l.jsxs("div",{className:"xl:w-[100%] w-[100%] m-auto flex flex-wrap items-center justify-center gap-3",children:[l.jsxs("div",{className:"w-[50%] flex gap-10 items-center",children:[l.jsxs("div",{className:"w-[20%] flex items-center",children:[l.jsxs("label",{htmlFor:"Branch",className:"text-sm font-semibold",children:["Branch:"," "]}),l.jsx("input",{type:"text",id:"Branch",className:"outline-none border border-gray-700 w-[99%] text-center ml-2 bg-white font-semibold",value:2,disabled:!0})]}),l.jsxs("div",{className:"flex items-center w-[80%]",children:[l.jsxs("label",{htmlFor:"Name",className:"text-sm font-semibold",children:["Name:"," "]}),l.jsx("input",{type:"text",id:"Name",className:"outline-none border w-[90%] border-gray-700 ml-2 bg-white px-2 font-semibold",value:t.name,disabled:!0})]})]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsx("a",{href:"/",className:"text-blue-500 underline text-xs",children:"edit"}),l.jsx("a",{href:"/",className:"text-blue-500 underline text-xs",children:"Product transactions"}),l.jsx("a",{href:"/",className:"text-blue-500 underline text-xs",children:"Transaction Search"}),l.jsx("a",{href:"/",className:"text-blue-500 underline text-xs",children:"Product Search"}),l.jsx("a",{href:"/",className:"text-blue-500 underline text-xs",children:"Duplicate"})]})]})}),l.jsxs("div",{className:"flex mt-5",children:[l.jsx("div",{className:"w-[76%]",children:l.jsx(nk,{selectedProduct:t,setSelectedProduct:e})}),l.jsx("div",{className:"w-[22%] border  mr-2",children:l.jsx(et,{name:"Multilocation",data:h,columns:[{key:"station",header:"Station"},{key:"lastPrice",header:"Last Price"},{key:"qty",header:"Qty"},{key:"location",header:"Location"}],highlightColumn:"station",heighValue:10})})]}),l.jsxs("div",{className:"mt-5",children:[l.jsxs("div",{className:"w-[97%] max-h-[20vh] flex justify-between 2xl:gap-0 gap-4 mx-auto",children:[l.jsxs("div",{className:"w-[12%] 2xl:w-[15%] flex flex-col items-center justify-center overflow-hidden",children:[l.jsx("div",{className:"w-full min-h-5 bg-gray-500"}),l.jsx("div",{className:"w-80 h-56 bg-no-repeat",style:{backgroundPosition:"center",backgroundSize:"contain",backgroundImage:`url(${t.picture||lk})`}})]}),l.jsx("div",{className:"w-[14.5%] 2xl:w-[22%]",children:l.jsx(et,{name:"Applied Model",data:t.appliedModels,columns:[{key:"make",header:"Make"},{key:"type",header:"Type"},{key:"remarks",header:"Remarks"}],highlightColumn:"Make"})}),l.jsx("div",{className:"w-40%",children:l.jsx(et,{name:"Purchase History",data:c,columns:[{key:"Br",header:"Br"},{key:"id",header:"GRN.No"},{key:"date",header:"Pur.Date"},{key:"Type",header:"Type"},{key:"supplierName",header:"Supplier Name"},{key:"quantity",header:"Qty"},{key:"price",header:"Unit Price"},{key:"total",header:"Total"}],highlightColumn:"UnitPrice"})}),l.jsx("div",{className:"w-[30%] 2xl:w-[23%]",children:l.jsx(et,{name:"Product Details",data:t.alternatives,columns:[{key:"productCode",header:"Product Code"},{key:"brand",header:"Brand"},{key:"name",header:"Product Name"},{key:"sellingPrice1",header:"Selling"}],handleRowClick:f=>{d(f.productCode)},highlightColumn:"productCode"})})]}),l.jsxs("div",{className:"w-[97%] flex min-h-[30vh] justify-between mx-auto mt-8",children:[l.jsx("div",{className:"w-[33%]",children:l.jsx(et,{name:"Quotation History",data:s,columns:[{key:"Br",header:"Br"},{key:"id",header:"Qutn.No"},{key:"date",header:"Qutn Date"},{key:"accountName",header:"Customer"},{key:"quantity",header:"Qty"},{key:"gAmount",header:"Unit Price"},{key:"total",header:"Total"}],highlightColumn:"Br"})}),l.jsx("div",{className:"w-[33%]",children:l.jsx(et,{name:"Delivery Note History",data:o,columns:[{key:"Br",header:"Br"},{key:"id",header:"DO.No"},{key:"date",header:"DO Date"},{key:"type",header:"Doc.Type"},{key:"accountName",header:"Customer"},{key:"quantity",header:"Qty"},{key:"gAmount",header:"Unit Price"},{key:"total",header:"Total"}],highlightColumn:"Br"})}),l.jsx("div",{className:"w-[32%]",children:l.jsx(et,{name:"Sales History",data:n,columns:[{key:"Br",header:"Br"},{key:"id",header:"Bill.No"},{key:"date",header:"Bill Date"},{key:"type",header:"Type"},{key:"accountName",header:"Customer"},{key:"quantity",header:"Qty"},{key:"gAmount",header:"Unit Price"}],highlightColumn:"Customer"})})]})]})]})},ak="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAABk9JREFUeF7t3MFOG1EQRNGB//9mElkiyiKyGbUxVZM+bMOj+9Wdm7KNkrfDlwQkcDeBN9lIQAL3EyCIp0MCDxIgiMdDAgTxDEhgloAGmeXm1JIECLIEtGvOEiDILDenliRAkCWgXXOWAEFmuTm1JAGCLAHtmrMECDLLzaklCRBkCWjXnCVAkFluTi1JgCBLQLvmLAGCzHJzakkCBFkC2jVnCRBklptTSxIgyBLQrjlLgCCz3JxakgBBloB2zVkCBJnl5tSSBAiyBLRrzhIgyCw3p5YkQJAloF1zlgBBZrk5tSQBgiwB7ZqzBAgyy82pJQkQZAlo15wlQJBZbk4tSYAgS0C75iwBgsxyc2pJAgRZAto1ZwkQZJabU0sSIMgS0K45S4Ags9ycWpIAQZaAds1ZAgSZ5ebUkgQIsgS0a84SIMgsN6eWJECQJaBdc5YAQWa5ObUkAYIsAe2aswQIMsvNqSUJEGQJaNecJUCQWW5OLUmAIHnQH8dx3OPw6ziO9/yKezcgSJ49QfIM7m5AkDwcguQZEKSYwe1l1KMvf4kF4Qk/GP7naILkGWiQYgYEKYajQfJwCJJnoEGKGRCkGI4GycMhSJ6BBilmQJBiOBokD+eRIH6THuZDkDCA4zgIkmfgJVYxA4IUw9EgeTgEyTPQIMUMCFIMR4Pk4RAkz0CDFDMgSDEcDZKHQ5A8Aw1SzIAgxXA0SB4OQfIMNEgxA4IUw9EgeTgEyTPQIMUMCFIMR4Pk4RAkz0CDFDMgSDEcDZKHQ5A8Aw1SzIAgxXA0SB4OQfIMNEgxA4IUw9EgeTgEyTPQIMUMCFIMR4Pk4RAkz0CDFDMgSDEcDZKHQ5A8Aw1SzIAgxXA0SB4OQfIMNEgxA//1aDEcDZKHQ5A8Aw1SzIAgxXA0SB4OQfIMNEgxA4IUw9EgeTg+xcoz0CDFDAhSDEeD5OEQJM9AgxQzIEgxHA2Sh+NNep6BBilmQJBiOBokD4cgeQYapJgBQYrhaJA8nI/jOO5xuMnznl9x7wZXFuTRg3UVojcBrszgbM6XFf3KcL56aXIWnu97fQIEeX3G/0wgSCD04UiCDIN75hhBnknv589e8tXKJZf+ZEuQn3/In5l4yWftkksT5JnnNHb2ks/aJZcmSOwhf2bwJZ+1Sy79San9Y94/LwEf/Y7jdpUrMzgrjDfpZ5Pyff8k8JXoGwSqfSyEn0dDkDyDuxsQJA/nq0/jMAoyEn4w/JMfNmAUZCT8YPgnBLnsm9t8rN+zAUG+J8dnfop/cvtMei8+S5AXB3zixxPkREipbyFIKvm/cwmSZ+BTrGIGBCmGo0HycHzMm2egQYoZEKQYjgbJwyFInoEGKWZAkGI4GiQPhyB5BhqkmAFBiuFokDwcguQZaJBiBgQphqNB8nAIkmegQYoZEKQYjgbJwyFInoEGKWZAkGI4GiQPhyB5BhqkmAFBiuFokDwcguQZaJBiBgQphqNB8nAIkmegQYoZEKQYjgbJwyFInoEGKWZAkGI4GiQPhyB5BhqkmAFBiuFokDwcguQZaJBiBgQphqNB8nAIkmegQYoZEKQYjgbJwyFInoEGKWZAkGI4GiQPhyB5BhqkmAFBiuFokDwcguQZaJBiBgQphqNB8nAIkmegQYoZEKQYjgbJwyFInoEGKWZAkGI4GiQPhyB5BhqkmAFBiuFokDwcguQZaJBiBo8Euf3Ze/Hu//1qGiSP+OM4jnscCBLmQ5AwAOO7EyBINx/bhRMgSBiA8d0JEKSbj+3CCRAkDMD47gQI0s3HduEECBIGYHx3AgTp5mO7cAIECQMwvjsBgnTzsV04AYKEARjfnQBBuvnYLpwAQcIAjO9OgCDdfGwXToAgYQDGdydAkG4+tgsnQJAwAOO7EyBINx/bhRMgSBiA8d0JEKSbj+3CCRAkDMD47gQI0s3HduEECBIGYHx3AgTp5mO7cAIECQMwvjsBgnTzsV04AYKEARjfnQBBuvnYLpwAQcIAjO9OgCDdfGwXToAgYQDGdydAkG4+tgsnQJAwAOO7EyBINx/bhRMgSBiA8d0JEKSbj+3CCRAkDMD47gQI0s3HduEECBIGYHx3AgTp5mO7cAIECQMwvjsBgnTzsV04AYKEARjfnQBBuvnYLpwAQcIAjO9OgCDdfGwXTuA35fycyVmrI7cAAAAASUVORK5CYII=",ck=({AppliedModel:t,Alternative:e,mode:n,onAlternativeChange:r,onAppliedModelChange:s,categories:i})=>{const[o,a]=_.useState([]),[c,u]=_.useState([]),[d,h]=_.useState("alternative"),[f,m]=_.useState(!1),[v,x]=_.useState([]);_.useEffect(()=>{t&&a(t),e&&u(e)},[t,e]),_.useEffect(()=>{s(o)},[o]),_.useEffect(()=>{r(c)},[c]);const b=S=>{const{productCode:j,brand:T,name:M,sellingPrice1:ne}=S;u(Me=>[...Me,{productCode:j,brand:T,name:M,sellingPrice1:ne}]),m(!1)},g=S=>{if(S.preventDefault(),d==="applied"){const j={make:"",type:"",remarks:""};a(T=>[...T,j]),x(T=>[...T,[]])}else m(!0)},p=(S,j)=>{j==="applied"?(a(T=>T.filter((M,ne)=>ne!==S)),x(T=>T.filter((M,ne)=>ne!==S))):u(T=>T.filter((M,ne)=>ne!==S))},y=S=>{h(S)},w=(S,j,T)=>{a(M=>M.map((ne,Me)=>Me===S?{...ne,[j]:T}:ne))},N=(S,j)=>{w(S,"type",j.shortForm)},C=(S,j)=>{x(T=>T.map((M,ne)=>ne===S?j.subCategories:M)),w(S,"make",j.shortForm)},k=()=>{m(!1)};return l.jsxs("div",{className:"relative w-full flex flex-col",children:[l.jsxs("div",{className:"flex justify-center gap-2",children:[l.jsx("button",{onClick:()=>y("applied"),className:"px-6 py-1 text-sm bg-white border border-gray-300",type:"button",children:"Applied Model"}),l.jsx("button",{onClick:()=>y("alternative"),className:"px-6 py-1 text-sm bg-white border border-gray-300",type:"button",children:"Alternative"}),l.jsx("button",{onClick:g,className:"px-3 bg-white border border-gray-300 text-sm",type:"button",children:l.jsx("img",{src:ak,alt:"",className:"w-6 h-6"})})]}),d==="applied"&&l.jsx("div",{className:"min-h-32 bg-blue-100 mt-2 ml-2",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-blue-800 text-white",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-2 py-1 text-sm bg-yellow-200 font-bold italic text-black",children:"Make"}),l.jsx("th",{className:"px-2 py-1 text-sm",children:"Type"}),l.jsx("th",{className:"px-1 py-1 text-sm font-normal",children:"Remarks"}),l.jsx("th",{className:"py-1 text-sm font-normal",children:"Actions"})]})}),l.jsx("tbody",{children:o.map((S,j)=>l.jsxs("tr",{children:[l.jsxs("td",{className:"border text-sm relative",children:[l.jsx("div",{className:"px-1 py-1 text-xs w-full h-full whitespace-nowrap overflow-hidden text-ellipsis",children:l.jsx("input",{type:"text",value:S.make.length>6?S.make.substring(0,6)+"...":S.make,className:"w-full py-1 px-1 h-full outline-none bg-white",disabled:n==="delete"||!0,title:S.make})}),n!=="delete"&&l.jsx(ee,{items:i,onSelect:T=>C(j,T),columns:[{key:"shortForm",label:"Category ID"},{key:"name",label:"Category Name"}],style:{top:"top-4 left-[78%]"},all:!0})]}),l.jsxs("td",{className:"border text-sm relative",children:[l.jsx("div",{className:"px-1 py-1 text-xs w-full h-full whitespace-nowrap overflow-hidden text-ellipsis",children:l.jsx("input",{type:"text",value:S.type.length>6?S.type.substring(0,6)+"...":S.type,className:"w-full py-1 px-1 h-full outline-none bg-white",disabled:n==="delete",title:S.type})}),n!=="delete"&&l.jsx(ee,{items:v[j]||[],onSelect:T=>N(j,T),columns:[{key:"name",label:"Category Name"},{key:"shortForm",label:"Short Form"}],style:{top:"top-4 left-[78%]"},all:!0})]}),l.jsx("td",{className:"px-4 py-2 border text-sm",children:l.jsx("input",{type:"text",value:S.remarks,onChange:T=>w(j,"remarks",T.target.value),className:"  px-2 py-1 text-sm w-full bg-transparent outline-none focus:bg-white",disabled:n==="delete"})}),l.jsx("td",{className:"px-4 py-2 border text-sm",children:l.jsx("button",{onClick:()=>p(j,"applied"),className:"px-2 py-1 text-sm bg-red-500 text-white rounded",type:"button",children:"Delete"})})]},j))})]})}),d==="alternative"&&l.jsx("div",{className:"min-h-32 bg-blue-100 mt-2 ml-2",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-blue-800 text-white",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-2 border text-sm bg-orange-400 font-normal",children:"Alternate Id"}),l.jsx("th",{className:"px-1 border text-sm font-normal",children:"Brand"}),l.jsx("th",{className:"border text-sm font-normal",children:"Actions"})]})}),l.jsx("tbody",{children:c.map((S,j)=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-1 border text-sm border-r-gray-300 border-r-2",children:S.productCode}),l.jsx("td",{className:"px-4 py-1 border text-sm border-r-gray-300 border-r-2",children:S.brand}),l.jsx("td",{className:"px-4 py-1 border text-sm border-r-gray-300 border-r-2",children:l.jsx("button",{onClick:()=>p(j,"alternative"),className:"px-2 py-1 text-sm bg-red-500 text-white rounded",type:"button",children:"Delete"})})]},j))})]})}),d==="alternative"&&f&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center ",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background  ",children:[l.jsx("button",{className:"text-red-500 mb-2",onClick:k,children:"Close"}),l.jsx(Mn,{onProductSelect:b})]})})]})},uk=async t=>{try{const e=A(Ce,"brands/"),n=Ot(e);if((await Ei(e,s=>{if(s=s||{},!Object.values(s).some(o=>o.name.toLowerCase()===t.name.toLowerCase()||o.shortForm.toLowerCase()===t.shortForm.toLowerCase()))return s[n.key]={...t,id:n.key},s})).committed)return await at(n,{...t,id:n.key}),n.key;throw new Error("Brand already exists.")}catch(e){throw console.error("Failed to add brand:",e),new Error("Failed to add brand")}},Rv=async()=>{try{const t=A(Ce,"brands/"),e=await L(t);if(e.exists()){const n=[];return e.forEach(r=>{const s=r.val();n.push({id:r.key,...s})}),n}else return console.log("No brands found."),[]}catch(t){throw console.error("Failed to retrieve brands:",t),new Error("Failed to retrieve brands")}},dk=async t=>{try{const e=A(Ce,"brands"),n=await L(e);if(n.exists()){let r=null;if(n.forEach(s=>{s.val().name===t&&(r=s.key)}),r){const s=A(Ce,`brands/${r}`);await at(s,null),console.log(`Brand with ID ${t} has been deleted.`)}else console.log(`No brand found with ID ${t}.`)}else console.log("No brands found.")}catch(e){throw console.error("Failed to delete brand:",e),new Error("Failed to delete brand")}},hk=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result),r.onerror=s=>n(s)}),np=async t=>await hk(t),Qc=[{shortForm:"EX1",Description:"No Vat",Vatpercentage:"0.00",startDate:"12/0/0"},{shortForm:"EX2",Description:"Standard Vat",Vatpercentage:"5",startDate:"12/0/0"}];function fk(){const[t,e]=_.useState("none"),[n,r]=_.useState(null),[s,i]=_.useState(!1),[o,a]=_.useState(!1),[c,u]=_.useState([]),[d,h]=_.useState([]),[f,m]=_.useState([]),v=async()=>{const w=await Rv();h(w);const N=await Ml();m(N)},x=async()=>{const w=await Tv();u(w)};_.useEffect(()=>{x(),v()},[]);const b=w=>{r(w),i(!1),y()},g=w=>{e(w),r(null),i(w==="edit")},p=()=>{a(!0)},y=()=>{a(!1)};return l.jsx("div",{children:l.jsxs("div",{className:"w-[98%] mx-auto",children:[l.jsxs("nav",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>g("add"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Add"}),l.jsx("button",{onClick:()=>g("edit"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Edit"}),l.jsx("button",{onClick:()=>g("delete"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Delete"})]}),t==="none"&&l.jsx(Ea,{mode:"delete",initialProduct:{},cb:x,handleActionChange:g,brands:d,categories:f}),(t==="edit"||t==="delete")&&!n&&l.jsxs("div",{className:"h-[94vh] flex flex-col items-center",children:[l.jsxs("div",{children:["Select Product:"," ",l.jsx("input",{type:"text",disabled:!0,className:"bg-white"}),l.jsxs("button",{className:"w-6 relative",onClick:p,children:[l.jsx("img",{src:Tg,className:"w-4 h-4 absolute -top-3 -left-5     "})," "]})]}),o&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center ",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background  ",children:[l.jsx("button",{className:"text-red-500 mb-2",onClick:y,children:"Close"}),l.jsx(Mn,{onProductSelect:b})]})})]}),t==="add"&&l.jsx(Ea,{mode:"add",initialProduct:{branch:1},cb:x,handleActionChange:g,brands:d,categories:f}),(t==="edit"||t==="delete")&&n&&l.jsx(l.Fragment,{children:l.jsx(Ea,{mode:t,initialProduct:n,cb:x,handleActionChange:g,brands:d,categories:f})})]})})}const Sa={id:"",name:"",productCode:"",brand:"",description:"",description2:"",department:"",category:"",basicUnit:"",status:"",class:"",subCategory:"",uniqueId:"",sellingPrice1:"",sellingPrice2:"",sellingPrice3:"",picture:"",reOrder:"",hsCode:"",minOrder:"",maxOrder:"",shelfLife:"",vatType:"",origin:"",alternatives:[],appliedModels:[]};function Ea({mode:t,initialProduct:e,cb:n,handleActionChange:r,brands:s,categories:i}){const[o,a]=_.useState(t==="delete"),c=S=>{const{name:j,value:T}=S.target;d(M=>({...M,[j]:T}))},[u,d]=_.useState(Sa),[h,f]=_.useState(null);_.useEffect(()=>{d(t==="edit"||t==="delete"?{id:e.id||"",branch:e.branch||"",name:e.name||"",productCode:e.productCode||"",brand:e.brand||"",description:e.description||"",description2:e.description2||"",department:e.department||"",category:e.category||"",basicUnit:e.basicUnit||"",status:e.status||"",class:e.class||"",subCategory:e.subCategory||"",uniqueId:e.uniqueId||"",copyAllBranch:e.copyAllBranch||"NO",sellingPrice1:e.sellingPrice1||"",sellingPrice2:e.sellingPrice2||"",sellingPrice3:e.sellingPrice3||"",picture:e.picture||"",reOrder:e.reOrder||"",hsCode:e.hsCode||"",minOrder:e.minOrder||"",maxOrder:e.maxOrder||"",shelfLife:e.shelfLife,vatType:e.vatType||"",origin:e.origin||"",barCode:e.barCode||"",appliedModels:e.appliedModels||[],alternatives:e.alternatives||[]}:Sa)},[t,e]);const[m,v]=_.useState(null),x=S=>{v(S.target.files[0])},b=[],g=S=>{d(j=>({...j,brand:S||""}))},p=S=>{const j=i.find(T=>T.shortForm===S);j&&j.subCategories&&typeof j.subCategories=="object"?j.subCategories=Object.values(j.subCategories):j.subCategories=[],d(T=>({...T,category:j?j.name:""})),f(j)},y=S=>{d(j=>({...j,subCategory:S||""}))},w=S=>{const j=Qc.find(T=>T.shortForm===S);d(T=>({...T,vatType:j?j.Vatpercentage:""}))},N=async S=>{S.preventDefault();const{id:j,...T}=u;if(t==="add"){if(m){const ne=await np(m);T.picture=ne}await RE(T)&&alert("Product Added Successfully")}else if(t==="edit"){if(m){const M=await np(m);T.picture=M}await OE(j,T),alert("Product Updated Successfully")}else t==="delete"&&(await ME(j),alert("Product Deleted Successfully"));n&&n(),d(Sa),v(null)},C=S=>{d(j=>({...j,appliedModels:S}))},k=S=>{d(j=>({...j,alternatives:S}))};return l.jsx("form",{onSubmit:N,className:"min-h-[92vh] ",children:l.jsxs("div",{className:"w-[100%]  mx-auto mt-4",children:[l.jsxs("div",{className:"flex justify-between  py-10 px-2 shadow-lg",children:[l.jsxs("div",{className:"flex flex-col gap-2 w-[45%] ",children:[l.jsxs("div",{className:"flex w-full ",children:[l.jsxs("div",{className:"w-1/4 flex items-center",children:[l.jsx("span",{className:"w-1/2  text-right inline-block",children:"Branch:"}),l.jsx("input",{type:"number",name:"branch",value:1,onChange:c,className:"w-1/2 h-7 px-1 border  border-gray-600 ml-1",disabled:!0})]}),l.jsxs("div",{className:"w-3/4 flex items-center",children:[l.jsx("span",{className:"w-1/4 text-right inline-block",children:"Name:"}),l.jsx("input",{type:"text",name:"name",value:u.name,onChange:c,className:"uppercase  w-3/4 h-7 border px-1 border-gray-600 ml-1",disabled:o})]})]}),l.jsxs("div",{className:"flex w-full",children:[l.jsxs("div",{className:"relative w-1/4 flex items-center",children:[l.jsx("span",{className:"w-1/2 text-right mr-[2px] inline-block",children:"Brand:"}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",name:"brand",value:u.brand||"",className:`${t=="edit"||t=="add"?"bg-white":""} w-full px-2 h-7   border border-gray-600`,disabled:!0}),!o&&l.jsx(ee,{items:s,onSelect:g,style:{top:"top-1 left-[75%]"},columns:[{key:"shortForm",label:"Brand Id"},{key:"name",label:"Name"}]})]})]}),l.jsxs("div",{className:"w-3/4 flex items-center",children:[l.jsx("span",{className:"2xl:w-1/4 w-1/2 text-right inline-block",children:"Product Code:"}),l.jsx("input",{type:"text",name:"productCode",value:u.productCode,onChange:c,className:"uppercase w-3/4 h-7  border px-1 border-gray-600 ml-1",disabled:o})]})]}),l.jsxs("div",{className:"w-full flex items-center",children:[l.jsx("span",{className:"w-[12.5%]  text-left inline-block",children:"Description:"}),l.jsx("input",{type:"text",name:"description",value:u.description,onChange:c,className:" w-[87.5%] h-7  border px-1 border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-full flex items-center",children:[l.jsx("span",{className:"w-[15%]  text-left inline-block ",children:"Description2:"}),l.jsx("input",{type:"text",name:"description2",value:u.description2,onChange:c,className:" w-[85%] h-7 border px-1  border-gray-600 ",disabled:o})]})]}),l.jsxs("div",{className:"flex flex-col gap-2 w-[45%]",children:[l.jsxs("div",{className:"flex w-full  justify-between",children:[l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Department:"}),l.jsx("input",{type:"text",name:"department",value:u.department,onChange:c,className:"flex-1 h-7 px-1 border  border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Class:"}),l.jsx("input",{type:"text",name:"class",value:u.class,onChange:c,className:"uppercase flex-1 h-7  border px-1 border-gray-600 ml-1",disabled:o})]})]}),l.jsxs("div",{className:"flex w-full  justify-between",children:[l.jsxs("div",{className:" relative w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Category:"}),l.jsx("input",{type:"text",name:"category",value:u.category||"",className:` ${t=="edit"||t=="add"?"bg-white":""} flex-1 h-7 px-1 border border-gray-600 ml-1 `,disabled:!0}),!o&&l.jsx(ee,{items:i,onSelect:p,style:{top:"top-1 left-[92%]"},columns:[{key:"shortForm",label:"Category Id"},{key:"name",label:"Category Name"}]})]}),l.jsxs("div",{className:"w-[45%] relative flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Sub.Category:"}),l.jsx("input",{type:"text",name:"subCategory",value:u.subCategory||"",disabled:!0,className:` ${t=="edit"||t=="add"?"bg-white":""} flex-1 h-7 px-1 border border-gray-600 ml-1 `}),!o&&l.jsx(ee,{items:h?h.subCategories:[],onSelect:y,style:{top:"top-1 left-[94%]"},columns:[{key:"shortForm",label:"Sub Category Id"},{key:"name",label:"Category Name"}]})]})]}),l.jsxs("div",{className:"flex w-full  justify-between",children:[l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Basic Unit:"}),l.jsx("input",{type:"text",name:"basicUnit",value:u.basicUnit,onChange:c,className:"flex-1 h-7      px-1 border border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"UniqueID:"}),l.jsx("input",{type:"text",name:"uniqueId",value:u.uniqueId,onChange:c,className:"uppercase      flex-1 h-7 border px-1 border-gray-600 ml-1",disabled:o})]})]}),l.jsxs("div",{className:"flex w-full  justify-between",children:[l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Status:"}),l.jsx("input",{type:"text",name:"status",value:u.status,onChange:c,className:"flex-1 h-7      px-1 border border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Copy In Branches:"}),l.jsxs("select",{name:"copyAllBranch",value:u.copyAllBranch,onChange:c,className:"uppercase      flex-1 h-7 border px-1 border-gray-600 ml-1",disabled:o,children:[l.jsx("option",{value:"Yes",children:"Yes"}),l.jsx("option",{value:"No",children:"No"})]})]})]})]})]}),l.jsxs("div",{className:"py-5 px-2  shadow-lg mt-6 ",children:[l.jsx("h1",{className:"ml-4 text-lg font-medium",children:"General"}),l.jsxs("div",{className:"w-[95%] mx-auto mt-5  flex gap-2 flex-wrap",children:[l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Selling Price 1:"}),l.jsx("input",{type:"number",name:"sellingPrice1",value:u.sellingPrice1,onChange:c,className:"flex-1 h-7 px-1 border       border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Re-Order:"}),l.jsx("input",{type:"number",name:"reOrder",value:u.reOrder,onChange:c,className:"flex-1 h-7 px-1 border      border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Origin:"}),l.jsx("input",{type:"text",name:"origin",value:u.origin,onChange:c,className:"flex-1 h-7 px-1 border       border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Selling Price 2:"}),l.jsx("input",{type:"number",name:"sellingPrice2",value:u.sellingPrice2,onChange:c,className:"flex-1 h-7 px-1 border       border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Min-Order:"}),l.jsx("input",{type:"number",name:"minOrder",value:u.minOrder,onChange:c,className:"flex-1 h-7 px-1 border      border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"HS code:"}),l.jsx("input",{type:"text",name:"hsCode",value:u.hsCode,onChange:c,className:"flex-1 h-7 px-1 border  border-gray-600 ml-1     ",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Selling Price 3:"}),l.jsx("input",{type:"number",name:"sellingPrice3",value:u.sellingPrice3,onChange:c,className:"flex-1 h-7 px-1 border  border-gray-600 ml-1     ",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Max-Order:"}),l.jsx("input",{type:"number",name:"maxOrder",value:u.maxOrder,onChange:c,className:"flex-1 h-7 px-1 border  border-gray-600 ml-1     ",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Bar Code:"}),l.jsx("input",{type:"number",name:"barCode",value:u.barCode,onChange:c,className:"flex-1 h-7      px-1 border  border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center flex-col",children:[l.jsxs("div",{className:"flex justify-between w-[100%]",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Picture:"}),l.jsx("input",{type:"file",name:"picture",onChange:x,className:"flex-1 h-7      px-1 border  border-gray-600 ml-1",disabled:o})]}),u.picture&&l.jsx("p",{children:pk(u.picture)})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Shelf Life:"}),l.jsx("input",{type:"text",name:"shelfLife",value:u.shelfLife,onChange:c,className:"flex-1 h-7      px-1 border  border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] relative flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Vat type:"}),l.jsx("input",{type:"text",name:"vatType",value:u.vatType,disabled:!0,className:` ${t=="edit"||t=="add"?"bg-white":""} flex-1 h-7      px-1 border  border-gray-600 ml-1 `}),!o&&l.jsx(ee,{items:Qc,onSelect:w,style:{top:"top-1 left-[94%]"},columns:[{key:"shortForm",label:"VAT Code"},{key:"Description",label:"Description"},{key:"Vatpercentage",label:"VAT Percentage"}]})]})]})]}),l.jsxs("div",{className:"mt-8 flex",children:[l.jsx("div",{className:"w-[70%] min-h-36 ",children:l.jsx(et,{data:b,columns:[{key:"unit",header:"Unit"},{key:"Fraction",header:"Fraction"},{key:"GWeight",header:"Gross Weight"},{key:"NetWeight",header:"Net Weight"},{key:"length",header:"Length"},{key:"height",header:"Height"},{key:"breadth",header:"Breadth"},{key:"volume",header:"Volume"},{key:"packingSize",header:"Packing Size"},{key:"ID",header:"ID"}],highlightColumn:"unit",name:"Details"})}),l.jsx("div",{className:"w-[30%]",children:l.jsx(ck,{Alternative:e.alternatives,AppliedModel:e.appliedModels,onAlternativeChange:k,onAppliedModelChange:C,categories:i})})]}),!(Object.keys(e).length===0&&t==="delete")&&l.jsxs("button",{type:"submit",onClick:N,className:"  bg-white   px-5 py-1 w-full  border border-gray-100 mt-2",children:[t," product"," "]})]})})}function pk(t){const e=t.split("\\"),r=e[e.length-1].split(";");return r[r.length-1]}function mk({initialRows:t,onDataChange:e,mode:n}){const[r,s]=_.useState([]),[i,o]=_.useState(!1),[a,c]=_.useState(null);_.useEffect(()=>{t&&t.length>0&&s(t)},[t]);const u=()=>{const x={productCode:"",name:"",quantity:1,price:""},b=[...r,x];s(b),e(b)},d=x=>{const b=r.filter((g,p)=>p!==x);s(b),e(b)},h=(x,b,g)=>{const p=r.map((y,w)=>w===x?{...y,[b]:g}:y);s(p),e(p)},f=x=>{c(x),o(!0)},m=()=>{o(!1),c(null)},v=x=>{if(a!==null){const b=r.map((g,p)=>p===a?{...g,productCode:x.productCode,name:x.name,price:x.sellingPrice1}:g);s(b),e(b)}m()};return l.jsxs("div",{className:"mt-6 min-h-[10vh] w-[98%] mx-auto",children:[n!=="none"&&n!=="Delete"&&l.jsx("button",{onClick:u,className:"bg-white text-black border-gray-300 border px-6 py-2 mb-3 focus:scale-95",type:"button",children:"Add Product"}),l.jsx("div",{className:"min-h-[30vh] max-h-[30vh] scrollbar overflow-auto bg-blue-100",children:l.jsxs("table",{className:"w-full border-collapse border border-gray-300 bg-blue-100 ",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-blue-900 text-white",children:[l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Product Code"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Name"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Quantity"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Price"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Actions"})]})}),l.jsx("tbody",{children:r.map((x,b)=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:x.productCode,onClick:()=>f(b),readOnly:!0,className:"w-full bg-transparent outline-none cursor-pointer focus:bg-white",disabled:n==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:x.name,onChange:g=>h(b,"name",g.target.value),disabled:n==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:x.quantity,onChange:g=>h(b,"quantity",g.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:n==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:x.price,onChange:g=>h(b,"price",g.target.value),disabled:n==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 py-1 text-center px-1",children:l.jsx("button",{onClick:()=>d(b),className:"text-red-500",children:"Delete"})})]},b))})]})}),i&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background",children:[l.jsx("button",{className:"text-red-500 mb-2",onClick:m,children:"Close"}),l.jsx(Mn,{onProductSelect:v})]})})]})}function Ov(t){if(!(t instanceof Date))throw new Error("Input must be a Date object");const e=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return`${e}/${n}/${r}`}function Mv({mode:t,initialInvoice:e}){const[n,r]=_.useState(t||"none"),[s,i]=_.useState(e||null),[o,a]=_.useState([]),[c,u]=_.useState([]),d=async()=>{const m=await Pv();u(m)};_.useEffect(()=>{(async()=>{const v=await CE();a(v),d()})()},[]);const h=m=>{i(m)},f=m=>{r(m),i(null)};return l.jsx("div",{children:l.jsxs("div",{className:"w-[98%] mx-auto",children:[l.jsxs("nav",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>f("Add"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Add"}),l.jsx("button",{onClick:()=>f("Edit"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Edit"}),l.jsx("button",{onClick:()=>f("Delete"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Delete"})]}),n==="none"&&l.jsx(ka,{mode:"none",initialInvoice:{},suppliers:o,cb:d}),(n==="Edit"||n==="Delete")&&!s&&l.jsx("div",{className:"h-[94vh] flex flex-col items-center",children:l.jsxs("div",{children:["Select Invoice: ",l.jsx("input",{type:"text"}),l.jsx(ee,{items:c,onSelect:h,style:{top:"top-11 left-[895px]"},columns:[{key:"id",label:"Invoice No"},{key:"supplierName",label:"Supplier Name"}],all:!0})]})}),n==="Add"&&l.jsx(ka,{mode:"Add",initialInvoice:{},suppliers:o,cb:d}),(n==="Edit"||n==="Delete")&&s&&l.jsx(ka,{mode:n,initialInvoice:s,suppliers:o,cb:d})]})})}const rp={supplierId:"",supplierName:"",products:[],invoiceNo:"",date:Ov(new Date)},ka=({initialInvoice:t,mode:e,fullHeight:n,suppliers:r,cb:s})=>{const[i,o]=_.useState(rp),[a,c]=_.useState(e==="Delete");_.useEffect(()=>{o({supplierId:t.supplierId||"",supplierName:t.supplierName||"",products:t.products||[],invoiceNo:t.id||"",date:t.date?t.date:Ov(new Date)})},[t]);const u=async m=>{const{invoiceNo:v,...x}=i;m.preventDefault(),e==="Edit"?(await sk(v,x),alert("Purchase Invoice edited")):e==="Add"?(await rk(x),alert("Purchase Invoice added")):e==="Delete"&&(await ik(v),alert("Purchase Invoice deleted")),o(rp),s&&s()},d=m=>{o(v=>({...v,supplierName:m.name,supplierId:m.id}))},h=m=>{o(v=>({...v,products:m}))},f=m=>m?m.reduce((v,x)=>v+x.quantity*x.price,0).toFixed(2):0;return l.jsxs("form",{onSubmit:u,className:` ${n?"min-h-[99vh]":"min-h-[88.4vh]"}     bg-background`,children:[l.jsxs("div",{className:`flex justify-around    ${n?"":"mt-10"}  border w-[70%] mx-auto`,children:[l.jsxs("div",{className:`flex items-center relative ${n?"mt-20":""}`,children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Supplier Name:"}),l.jsx("input",{type:"text",value:i.supplierName,className:`h-7 px-1 border border-gray-600 ml-1 ${!a&&e!=="none"?"bg-white":""}`,disabled:a||e==="none",readOnly:!0}),!a&&e!=="none"&&l.jsx(ee,{items:r,onSelect:d,style:{top:"top-1 left-[284px]"},columns:[{key:"id",label:"Supplier ID"},{key:"name",label:"Supplier Name"}],all:!0})]}),l.jsxs("div",{className:`flex items-center relative ${n?"mt-20":""}`,children:[l.jsx("span",{className:"w-[30%] text-right inline-block",children:"Supplier Id:"}),l.jsx("input",{type:"text",value:i.supplierId,className:`h-7 px-1 border border-gray-600 ml-1 ${!a&&e!=="none"?"bg-white":""}`,disabled:a||e==="none",readOnly:!0})]}),l.jsx("div",{className:`flex items-center relative ${n?"mt-20":""}`,children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"w-[50%] text-right inline-block",children:"Date:"}),l.jsx("input",{type:"text",value:i.date,className:`h-7 px-1 border border-gray-600 ml-1 ${!a&&e!=="none"?"bg-white":""}`,disabled:!0,readOnly:!0})]})})]}),l.jsx("div",{className:"mt-16",children:l.jsx(mk,{initialRows:t.products,mode:e,onDataChange:h})}),l.jsxs("div",{className:"flex ml-4 mt-5 items-center",children:[l.jsx("span",{className:"text-right inline-block",children:"Total Price:"}),l.jsx("input",{type:"text",value:f(i.products),className:"h-7 px-1 bg-white border border-gray-600 ml-1",disabled:!0})]}),e!=="none"&&l.jsxs("button",{type:"submit",className:"w-full mt-5 py-1 bg-white border-gray-300",children:[e," Invoice"]})]})},gk=()=>{const[t,e]=_.useState([]),[n,r]=_.useState([]),[s,i]=_.useState([]),[o,a]=_.useState([]);_.useEffect(()=>{const x=async()=>{const g=await Iv();e(g)},b=async()=>{const g=await Pv();a(g)};x(),b(),c(),u()},[]);const c=async()=>{const x=await jv();r(x)},u=async()=>{const x=await Pd();i(x)},[d,h]=_.useState(!0),[f,m]=_.useState({}),v=x=>{m(x),h(!1)};return l.jsxs(l.Fragment,{children:[d&&l.jsxs("div",{className:"min-h-[100vh]",children:[l.jsxs("div",{className:"min-h-[20vh] flex   justify-center",children:[l.jsxs("div",{className:"flex  border relative mt-10 justify-center mx-auto w-[30%]",children:[l.jsx("span",{className:"mr-2",children:"Select Cash Invoice:"}),l.jsx("input",{type:"text",className:"border w-[55%] h-7 px-1 text-sm bg-white cursor-pointer",placeholder:"View Invoices",disabled:!0,readOnly:!0}),l.jsx(ee,{items:t,columns:[{key:"DocNo",label:"Bill No"},{key:"date",label:"Bill Date"},{key:"accCode",label:"Account"},{key:"accountName",label:"Account Name"},{key:"total",label:"Amount"},{key:"doctype",label:"DOC type"},{key:"sMan",label:"S.Id"},{key:"payment",label:"Tr.type"}],onSelect:v,style:{top:"top-[5px] left-[88%] "},all:!0,name:"invoiceList"})]}),l.jsxs("div",{className:"flex  border relative mt-10 justify-center mx-auto w-[40%]",children:[l.jsx("span",{className:"mr-2",children:"Select Purchase Invoice:"}),l.jsx("input",{type:"text",className:"border w-[40%] h-7 px-1 text-sm bg-white cursor-pointer",placeholder:"View Invoices",disabled:!0,readOnly:!0}),l.jsx(ee,{items:o,columns:[{key:"invoiceNo",label:"Bill No"},{key:"supplierId",label:"Supplier ID"},{key:"supplierName",label:"Supplier Name"},{key:"date",label:"Date"}],onSelect:v,style:{top:"top-[5px] left-[81%] "},all:!0,name:"invoiceList"})]})]}),l.jsxs("div",{className:"min-h-[20vh] flex   justify-center",children:[l.jsxs("div",{className:"flex  border relative mt-10 justify-center mx-auto w-[30%]",children:[l.jsx("span",{className:"mr-2",children:"Select Delivery Note:"}),l.jsx("input",{type:"text",className:"border w-[55%] h-7 px-1 text-sm bg-white cursor-pointer",placeholder:"View Invoices",disabled:!0,readOnly:!0}),l.jsx(ee,{items:n,columns:[{key:"DocNo",label:"Bill No"},{key:"date",label:"Bill Date"},{key:"accCode",label:"Account"},{key:"accountName",label:"Account Name"},{key:"total",label:"Amount"},{key:"doctype",label:"DOC type"},{key:"sMan",label:"S.Id"},{key:"payment",label:"Tr.type"}],onSelect:v,style:{top:"top-[5px] left-[88%] "},all:!0,name:"invoiceList"})]}),l.jsxs("div",{className:"flex  border relative mt-10 justify-center mx-auto w-[40%]",children:[l.jsx("span",{className:"mr-2 w-[26%] text-right",children:"Select Quotation :"}),l.jsx("input",{type:"text",className:"border w-[40%] h-7 px-1 text-sm bg-white cursor-pointer",placeholder:"View Invoices",disabled:!0,readOnly:!0}),l.jsx(ee,{items:s,columns:[{key:"DocNo",label:"Bill No"},{key:"date",label:"Bill Date"},{key:"accCode",label:"Account"},{key:"accountName",label:"Account Name"},{key:"total",label:"Amount"},{key:"doctype",label:"DOC type"},{key:"sMan",label:"S.Id"},{key:"payment",label:"Tr.type"}],onSelect:v,style:{top:"top-[5px] left-[80%] "},all:!0,name:"invoiceList"})]})]})]}),Object.keys(f).includes("supplierName")?l.jsx("div",{div:!0,className:"w-[95%] mx-auto mt-1",children:l.jsx(Mv,{mode:"Edit",initialInvoice:f})}):Object.keys(f).length>0&&l.jsx("div",{className:"w-[95%] mx-auto mt-1",children:l.jsx(Dv,{mode:"edit",initialInvoice:f})})]})};function yk(){const[t,e]=_.useState("none"),[n,r]=_.useState(null),[s,i]=_.useState([]),[o,a]=_.useState([]),c=async()=>{const f=await Dd();i(f)},u=async()=>{const f=await NE();a(f)};_.useEffect(()=>{c(),u()},[]);const d=f=>{r(f)},h=f=>{e(f),r(null)};return l.jsx("div",{children:l.jsxs("div",{className:"w-[98%] mx-auto",children:[l.jsxs("nav",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>h("add"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Add"}),l.jsx("button",{onClick:()=>h("edit"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Edit"}),l.jsx("button",{onClick:()=>h("delete"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Delete"})]}),t==="none"&&l.jsx(Ia,{areas:s,mode:"delete",initialSupplier:{},cb:u,customers:o}),(t==="edit"||t==="delete")&&!n&&l.jsx("div",{className:"h-[94vh] flex flex-col items-center",children:l.jsxs("div",{children:["Select Supplier: ",l.jsx("input",{type:"text"}),l.jsx(ee,{items:o,onSelect:f=>d(f),style:{top:"top-11 left-[56%]"},columns:[{key:"name",label:"Supplier Name"},{key:"address",label:"Address"},{key:"mobile",label:"Mobile"}],all:!0})]})}),t==="add"&&l.jsx(Ia,{mode:"add",areas:s,initialSupplier:{},cb:u,customers:o}),(t==="edit"||t==="delete")&&n&&l.jsx(Ia,{areas:s,mode:t,initialSupplier:n,cb:u})]})})}const sp={id:"",name:"",accountType:"Customer",referenceId:"",createdOn:new Date().toISOString().split("T")[0],supplierName:"",area:"",deliveryPlace:"",creditLimit:"",address:"",telephone:"",mobile:"",email:"",salId:"",vatCode:"",tmId:"",legalName:"",active:"Yes"};function Ia({mode:t,initialSupplier:e,areas:n,cb:r,customers:s}){const[i,o]=_.useState(sp);_.useEffect(()=>{o({id:e.id||"",name:e.name||"",accountType:e.accountType||"Customer",referenceId:e.referenceId||"",createdOn:e.createdOn||new Date().toISOString().split("T")[0],supplierName:e.supplierName||"",area:e.area||"",deliveryPlace:e.deliveryPlace||"",creditLimit:e.creditLimit||"",address:e.address||"",telephone:e.telephone||"",mobile:e.mobile||"",email:e.email||"",description:e.description||"",salId:e.salId||"",vatCode:e.vatCode||"",tmId:e.tmId||"",legalName:e.legalName||"",active:e.active||"Yes"})},[e]);const a=h=>{const{name:f,value:m}=h.target;o(v=>({...v,[f]:m}))},c=h=>{o(f=>({...f,area:h.name}))},u=async h=>{h.preventDefault();const{id:f,...m}=i;if(t==="add"){const v=await bE(m);alert(v?"Customer added sucessfully":"Failed to add customer")}else t==="edit"?(await EE(f,m),alert("Customer Updated Sucessfully")):t==="delete"&&(await kE(f),alert("Customer Deleted Sucessfully"));r&&r(),o(sp)},d=h=>{o(f=>({...f,vatCode:h||""}))};return l.jsxs("form",{onSubmit:u,className:"min-h-[88.5vh]",children:[l.jsxs("div",{className:"w-[96%] mx-auto grid grid-cols-9 gap-3 p-2 mt-10",children:[l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[74%] text-right inline-block",children:"Branch:"}),l.jsx("input",{type:"text",name:"branch",value:1,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:!0})]}),l.jsx("div",{className:"flex items-center col-span-2",children:l.jsx("input",{type:"text",name:"branchName",value:"Main Branch",className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:!0})}),l.jsxs("div",{className:"flex items-center col-span-2 border ",children:[l.jsx("span",{className:"w-[60%] text-right inline-block",children:"Acc.Type:"}),l.jsxs("select",{name:"accountType",value:i.accountType,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete",children:[l.jsx("option",{value:"Customer",children:"Customer"}),l.jsx("option",{value:"Supplier",children:"Supplier"})]})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[50%] text-right inline-block",children:"Reference ID:"}),l.jsx("input",{type:"text",name:"referenceId",value:i.referenceId,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Date:"}),l.jsx("input",{type:"date",name:"createdOn",value:i.createdOn,onChange:a,className:"h-7 w-full px-1 border border-gray-600  ml-1",disabled:!0})]}),l.jsxs("div",{className:"flex items-center col-span-3",children:[l.jsx("span",{className:"w-[14.5%] text-right inline-block",children:"Name:"}),l.jsx("input",{type:"text",name:"name",value:i.name,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2 relative",children:[l.jsx("span",{className:"w-[60%] text-right inline-block",children:"Area:"}),l.jsx("input",{type:"text",name:"area",value:i.area,className:`h-7 px-1 border border-gray-600  w-full ml-1   ${t!=="delete"&&"bg-white"} `,disabled:!0}),t!=="delete"&&l.jsx(ee,{items:n,onSelect:c,style:{top:"top-[25%] left-[94%] "},columns:[{key:"name",label:"Area Name"},{key:"shortForm",label:"Short Form"}],all:!0})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[50%] text-right inline-block",children:"Del.Place:"}),l.jsx("input",{type:"text",name:"deliveryPlace",value:i.deliveryPlace,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Credit Limit:"}),l.jsx("input",{type:"text",name:"creditLimit",value:i.creditLimit,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-3",children:[l.jsx("span",{className:"w-[14%] text-right inline-block",children:"Address:"}),l.jsx("input",{type:"text",name:"address",value:i.address,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[60%] text-right inline-block",children:"Tel.No:"}),l.jsx("input",{type:"text",name:"telephone",value:i.telephone,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[50%] text-right inline-block",children:"Mob:"}),l.jsx("input",{type:"text",name:"mobile",value:i.mobile,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Sal.Id:"}),l.jsx("input",{type:"text",name:"salId",value:i.salId,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-3",children:[l.jsx("span",{className:"w-[15%] text-right inline-block",children:"Email:"}),l.jsx("input",{type:"email",name:"email",value:i.email,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[60%] text-right inline-block",children:"Active:"}),l.jsxs("select",{name:"active",value:i.active,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete",children:[l.jsx("option",{value:"Yes",children:"Yes"}),l.jsx("option",{value:"No",children:"No"})]})]}),l.jsxs("div",{className:" relative flex items-center col-span-2 ",children:[l.jsx("span",{className:"w-[33%]   text-right inline-block",children:"Vat type:"}),l.jsx("input",{type:"text",name:"vatType",value:i.vatCode,disabled:!0,className:` ${t=="edit"||t=="add"?"bg-white":""} flex-1 h-7      px-1 border  border-gray-600 ml-1 `}),t!=="delete"&&l.jsx(ee,{items:Qc,onSelect:d,style:{top:"top-1 left-[92%]"},columns:[{key:"shortForm",label:"VAT Code"},{key:"Description",label:"Description"},{key:"Vatpercentage",label:"VAT Percentage"},{key:"startDate",label:"Start Date"}]})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"TmID:"}),l.jsx("input",{type:"text",name:"tmId",value:i.tmId,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-3",children:[l.jsx("span",{className:"w-[30%]   inline-block",children:"Legal Name:"}),l.jsx("input",{type:"text",name:"legalName",value:i.legalName,onChange:a,className:"h-7 px-1 border border-gray-600 w-full",disabled:t==="delete"})]})]}),l.jsx("div",{className:" mt-7 min-h-[40vh]",children:l.jsx(et,{data:t==="add"?s:[i],name:"Details",columns:[{key:"id",header:"Id"},{key:"name",header:"Name"},{key:"accountType",header:"Account Type"},{key:"referenceId",header:"Reference ID"},{key:"createdOn",header:"Date"},{key:"area",header:"Area"},{key:"deliveryPlace",header:"Delivery Place"},{key:"creditLimit",header:"Credit Limit"},{key:"address",header:"Address"},{key:"telephone",header:"Telephone Number"},{key:"mobile",header:"Mobile Number"},{key:"salId",header:"Sales ID"},{key:"email",header:"Email"},{key:"active",header:"Active?"},{key:"vatCode",header:"VAT Code"},{key:"tmId",header:"Tm ID"},{key:"legalName",header:"Legal Name"}],highlightColumn:"Id",height:40})}),l.jsxs("div",{className:"mt-2",children:[(t==="add"||t==="edit")&&l.jsxs("button",{type:"submit",className:" px-5 py-1   bg-white w-full  ",children:[t==="add"?"Add":"Update"," Customer"]}),t==="delete"&&Object.keys(e).length!=0&&l.jsx("button",{type:"submit",className:" px-5 py-1  bg-white w-full  ",children:"Delete Customer"})]})]})}const ip={name:"",shortForm:""},vk=()=>{const[t,e]=_.useState(ip),[n,r]=_.useState([]),s=async()=>{const c=await Dd();r(c)};_.useEffect(()=>{s()},[]);const i=c=>{const{name:u,value:d}=c.target;e(h=>({...h,[u]:d}))},o=async c=>{if(c.preventDefault(),n.some(d=>d.shortForm.toLowerCase()===t.shortForm.toLowerCase()||d.name.toLowerCase()===t.name.toLowerCase()))return alert("This area already exists.");await yE(t),e(ip),await s()},a=async(c,u)=>{c.preventDefault();try{await vE(u),await s(),console.log(`Deleting brand with ID: ${u}`)}catch(d){console.error("Error deleting brand:",d)}};return l.jsxs("div",{className:"min-h-[100vh]",children:[l.jsx("h1",{className:"text-center relative top-10  text-3xl",children:"Add Area"}),l.jsxs("form",{className:" mt-28",onSubmit:o,children:[l.jsxs("div",{className:"flex justify-between w-[80%] mx-auto",children:[l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter Name:"}),l.jsx("input",{type:"text",name:"name",className:"ml-1 px-2",onChange:i,required:!0,value:t.name})]}),l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter Shortform:"}),l.jsx("input",{type:"text",name:"shortForm",className:"ml-1 px-2",onChange:i,required:!0,value:t.shortForm})]})]}),l.jsx("div",{className:"w-[80%] mx-auto mt-16 h-[40vh]",children:l.jsx(et,{name:"Available Areas",data:n,columns:[{key:"name",header:"Area Name"},{key:"shortForm",header:"Short Form"},{key:"delete",header:"Delete",render:c=>l.jsx("button",{type:"button",onClick:u=>a(u,c.shortForm),children:"Delete"})}]})}),l.jsx("div",{className:"w-[80%] mx-auto mt-4",children:l.jsx("button",{type:"submit",className:"bg-white border border-gray-300 w-full  py-1 px-3 ",children:"Add"})})]})]})},op={name:"",shortForm:""},xk=()=>{const[t,e]=_.useState(op),[n,r]=_.useState([]),s=async()=>{const c=await Rv();r(c)};_.useEffect(()=>{s()},[]);const i=c=>{const{name:u,value:d}=c.target;e(h=>({...h,[u]:d}))},o=async c=>{if(c.preventDefault(),n.some(d=>d.shortForm.toLowerCase()===t.shortForm.toLowerCase()))return alert("This brand already exists.");await uk(t),e(op),s()},a=async(c,u)=>{c.preventDefault();try{await dk(u),await s(),console.log(`Deleting brand with ID: ${u}`)}catch(d){console.error("Error deleting brand:",d)}};return l.jsxs("div",{className:"min-h-[100vh]",children:[l.jsx("h1",{className:"text-center relative top-10  text-3xl",children:"Add Brand"}),l.jsxs("form",{className:" mt-28",onSubmit:o,children:[l.jsxs("div",{className:"flex justify-between w-[80%] mx-auto",children:[l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter Name:"}),l.jsx("input",{type:"text",name:"name",className:"ml-1 px-2",onChange:i,required:!0,value:t.name})]}),l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter ID:"}),l.jsx("input",{type:"text",name:"shortForm",className:"ml-1 px-2",onChange:i,required:!0,value:t.shortForm})]})]}),l.jsx("div",{className:"w-[80%] mx-auto mt-16",children:l.jsx(et,{name:"Available Areas",data:n,columns:[{key:"shortForm",header:"Brand Id"},{key:"name",header:"Brand Name"},{key:"delete",header:"Delete",render:c=>l.jsx("button",{type:"button",onClick:u=>a(u,c.shortForm),children:"Delete"})}]})}),l.jsx("div",{className:"w-[80%] mx-auto mt-4",children:l.jsx("button",{type:"submit",className:"bg-white border border-gray-300 w-full  py-1 px-3 ",children:"Add"})})]})]})},lp={name:"",shortForm:"",category:""},wk=()=>{const[t,e]=_.useState([]),[n,r]=_.useState(lp),[s,i]=_.useState(null),[o,a]=_.useState([]),c=async()=>{const v=await Ml();e(v)},u=async()=>{const v=await BE();a(v)};_.useEffect(()=>{c(),u()},[]);const d=v=>{i(v),r(x=>({...x,category:v.name}))},h=v=>{const{name:x,value:b}=v.target;r(g=>({...g,[x]:b}))},f=async v=>{if(v.preventDefault(),!s)return alert("Please select a category first");const x={name:n.name,shortForm:n.shortForm,id:s.id};await LE(s.id,x),a(b=>[...b,x]),r(lp)},m=async(v,x)=>{v.preventDefault();try{await UE(x),await u(),console.log(`Deleting subcategory with ID: ${x}`)}catch(b){console.error("Error subcategory brand:",b)}};return l.jsxs("div",{className:"min-h-[100vh]",children:[l.jsx("h1",{className:"text-center relative top-10 text-3xl",children:"Add Sub-Category"}),l.jsxs("form",{className:"mt-28",onSubmit:f,children:[l.jsxs("div",{className:"grid grid-cols-2 gap-5 w-[80%] mx-auto",children:[l.jsxs("div",{className:"col-span-1",children:[l.jsx("span",{children:"Enter Name:"}),l.jsx("input",{type:"text",name:"name",className:"ml-1 px-2",onChange:h,required:!0,value:n.name||""})]}),l.jsxs("div",{className:"col-span-1",children:[l.jsx("span",{children:"Enter ID:"}),l.jsx("input",{type:"text",name:"shortForm",className:"ml-1 px-2",onChange:h,required:!0,value:n.shortForm||""})]}),l.jsxs("div",{className:"relative col-span-1 -left-6",children:[l.jsx("span",{className:"w-[29%] border inline-block",children:"Enter Category:"}),l.jsx("input",{type:"text",className:"ml-1 px-2 bg-white",value:s?s.name:"",disabled:!0}),l.jsx(ee,{items:t,columns:[{key:"shortForm",label:"Category ID"},{key:"name",label:"Category Name"}],all:!0,onSelect:d,style:{top:"top-[5px] left-[76%]"}})]})]}),l.jsx("div",{className:"w-[80%] mx-auto mt-12",children:l.jsx(et,{name:"Details",data:o.length>0?o:[{name:"No results found",shortForm:""}],columns:[{key:"shortForm",header:"SubCategory Id"},{key:"name",header:"SubCategory Name"},{key:"id",header:"SubCategory Unique Key"},{key:"delete",header:"Delete",render:v=>l.jsx("button",{type:"button",onClick:x=>m(x,v.id),children:"Delete"})}]})}),l.jsx("div",{className:"w-[80%] mx-auto mt-10",children:l.jsx("button",{type:"submit",className:"bg-white border border-gray-300 w-full py-1 px-3",children:"Add"})})]})]})},ap={name:"",shortForm:""},cp=()=>{const[t,e]=_.useState(ap),[n,r]=_.useState([]),s=c=>{const{name:u,value:d}=c.target;e(h=>({...h,[u]:d}))},i=async()=>{const c=await Ml();r(c)};_.useEffect(()=>{i()},[]);const o=async c=>{if(c.preventDefault(),n.some(h=>h.shortForm.toLowerCase()===t.shortForm.toLowerCase())){alert("This category already exists.");return}const d=await FE(t);i(),d&&e(ap)},a=async(c,u)=>{c.preventDefault();try{await $E(u),await i(),console.log(`Deleting Category with ID: ${u}`)}catch(d){console.error("Error deleting Category:",d)}};return l.jsxs("div",{className:"min-h-[100vh]",children:[l.jsx("h1",{className:"text-center relative top-10  text-3xl",children:"Add Category"}),l.jsxs("form",{className:" mt-28",onSubmit:o,children:[l.jsxs("div",{className:"flex justify-between w-[80%] mx-auto",children:[l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter Name:"}),l.jsx("input",{type:"text",name:"name",className:"ml-1 px-2",onChange:s,required:!0,value:t.name})]}),l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter ID:"}),l.jsx("input",{type:"text",name:"shortForm",className:"ml-1 px-2",onChange:s,required:!0,value:t.shortForm})]})]}),l.jsx("div",{className:"w-[80%] mx-auto mt-16",children:l.jsx(et,{name:"Available Categories",data:n,columns:[{key:"shortForm",header:"Category Id"},{key:"name",header:"Category Name"},{key:"delete",header:"Delete",render:c=>l.jsx("button",{type:"button",onClick:u=>a(u,c.shortForm),children:"Delete"})}]})}),l.jsx("div",{className:"w-[80%] mx-auto mt-4",children:l.jsx("button",{type:"submit",className:"bg-white border border-gray-300 w-full  py-1 px-3 ",children:"Add"})})]})]})},_k=()=>{const[t,e]=_.useState("none"),[n,r]=_.useState(null);_.useState([]);const s=o=>{e(o),r(null)},i=()=>{window.confirm("Are you sure you want to return this invoice?")&&alert("Return successful!")};return l.jsxs("div",{className:"w-[98%] mx-auto",children:[l.jsxs("nav",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>s("add"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Add"}),l.jsx("button",{onClick:()=>s("delete"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Delete"})]}),l.jsx("div",{className:"mt-4 h-[80vh] overflow-auto border border-gray-200",children:l.jsx(Av,{formData:n,onDataChange:o=>r(o),mode:t})}),l.jsx("div",{className:"flex space-x-2 mt-4",children:l.jsx("button",{onClick:i,className:"bg-white text-gray-500 px-5 py-1 w-full active:scale-95 border border-gray-300",children:"Return"})})]})};function bk(){return _.useEffect(()=>{const t=e=>{e.key==="Escape"&&(console.log({path:window.location}),window.location.hash!=="#/"&&window.location.hash!==""&&window.close())};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[]),l.jsx(Kw,{children:l.jsx("div",{className:"bg-background",children:l.jsxs(qw,{children:[l.jsx(Fe,{path:"/",element:l.jsx(tp,{})}),l.jsx(Fe,{path:"/ProductMastery",element:l.jsx(fk,{})}),l.jsx(Fe,{path:"/CashInvoice",element:l.jsx(Dv,{})}),l.jsx(Fe,{path:"/selectProduct",element:l.jsx(Mn,{})}),l.jsx(Fe,{path:"/InvoiceViewer",element:l.jsx(gk,{})}),l.jsx(Fe,{path:"/Return",element:l.jsx(_k,{})}),l.jsx(Fe,{path:"/PurchaseInvoice",element:l.jsx(Mv,{})}),l.jsx(Fe,{path:"/CustomerMastery",element:l.jsx(yk,{})}),l.jsx(Fe,{path:"/AddArea",element:l.jsx(vk,{})}),l.jsx(Fe,{path:"/AddBrand",element:l.jsx(xk,{})}),l.jsx(Fe,{path:"/AddSubCategory",element:l.jsx(wk,{})}),l.jsx(Fe,{path:"/AddCategory",element:l.jsx(cp,{})}),l.jsx(Fe,{path:"/PrintReport",element:l.jsx(cp,{})}),l.jsx(Fe,{path:"*",element:l.jsx(tp,{})})," "]})})})}ja.createRoot(document.getElementById("root")).render(l.jsx(wp.StrictMode,{children:l.jsx(bk,{})}));
