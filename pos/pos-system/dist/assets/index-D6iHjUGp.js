function Qv(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function mp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function qv(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var gp={exports:{}},Xo={},yp={exports:{}},Q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ui=Symbol.for("react.element"),Gv=Symbol.for("react.portal"),Kv=Symbol.for("react.fragment"),Yv=Symbol.for("react.strict_mode"),Jv=Symbol.for("react.profiler"),Xv=Symbol.for("react.provider"),Zv=Symbol.for("react.context"),ex=Symbol.for("react.forward_ref"),tx=Symbol.for("react.suspense"),nx=Symbol.for("react.memo"),rx=Symbol.for("react.lazy"),Md=Symbol.iterator;function sx(t){return t===null||typeof t!="object"?null:(t=Md&&t[Md]||t["@@iterator"],typeof t=="function"?t:null)}var vp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xp=Object.assign,wp={};function qr(t,e,n){this.props=t,this.context=e,this.refs=wp,this.updater=n||vp}qr.prototype.isReactComponent={};qr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _p(){}_p.prototype=qr.prototype;function qc(t,e,n){this.props=t,this.context=e,this.refs=wp,this.updater=n||vp}var Gc=qc.prototype=new _p;Gc.constructor=qc;xp(Gc,qr.prototype);Gc.isPureReactComponent=!0;var Ld=Array.isArray,bp=Object.prototype.hasOwnProperty,Kc={current:null},Cp={key:!0,ref:!0,__self:!0,__source:!0};function Np(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)bp.call(e,r)&&!Cp.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:ui,type:t,key:i,ref:o,props:s,_owner:Kc.current}}function ix(t,e){return{$$typeof:ui,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yc(t){return typeof t=="object"&&t!==null&&t.$$typeof===ui}function ox(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Fd=/\/+/g;function Ll(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ox(""+t.key):e.toString(36)}function Qi(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ui:case Gv:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ll(o,0):r,Ld(s)?(n="",t!=null&&(n=t.replace(Fd,"$&/")+"/"),Qi(s,e,n,"",function(u){return u})):s!=null&&(Yc(s)&&(s=ix(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Fd,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ld(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+Ll(i,a);o+=Qi(i,e,n,c,s)}else if(c=sx(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+Ll(i,a++),o+=Qi(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ii(t,e,n){if(t==null)return t;var r=[],s=0;return Qi(t,r,"","",function(i){return e.call(n,i,s++)}),r}function lx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ue={current:null},qi={transition:null},ax={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:qi,ReactCurrentOwner:Kc};function Sp(){throw Error("act(...) is not supported in production builds of React.")}Q.Children={map:Ii,forEach:function(t,e,n){Ii(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ii(t,function(){e++}),e},toArray:function(t){return Ii(t,function(e){return e})||[]},only:function(t){if(!Yc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Q.Component=qr;Q.Fragment=Kv;Q.Profiler=Jv;Q.PureComponent=qc;Q.StrictMode=Yv;Q.Suspense=tx;Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ax;Q.act=Sp;Q.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=xp({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Kc.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)bp.call(e,c)&&!Cp.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:ui,type:t.type,key:s,ref:i,props:r,_owner:o}};Q.createContext=function(t){return t={$$typeof:Zv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Xv,_context:t},t.Consumer=t};Q.createElement=Np;Q.createFactory=function(t){var e=Np.bind(null,t);return e.type=t,e};Q.createRef=function(){return{current:null}};Q.forwardRef=function(t){return{$$typeof:ex,render:t}};Q.isValidElement=Yc;Q.lazy=function(t){return{$$typeof:rx,_payload:{_status:-1,_result:t},_init:lx}};Q.memo=function(t,e){return{$$typeof:nx,type:t,compare:e===void 0?null:e}};Q.startTransition=function(t){var e=qi.transition;qi.transition={};try{t()}finally{qi.transition=e}};Q.unstable_act=Sp;Q.useCallback=function(t,e){return Ue.current.useCallback(t,e)};Q.useContext=function(t){return Ue.current.useContext(t)};Q.useDebugValue=function(){};Q.useDeferredValue=function(t){return Ue.current.useDeferredValue(t)};Q.useEffect=function(t,e){return Ue.current.useEffect(t,e)};Q.useId=function(){return Ue.current.useId()};Q.useImperativeHandle=function(t,e,n){return Ue.current.useImperativeHandle(t,e,n)};Q.useInsertionEffect=function(t,e){return Ue.current.useInsertionEffect(t,e)};Q.useLayoutEffect=function(t,e){return Ue.current.useLayoutEffect(t,e)};Q.useMemo=function(t,e){return Ue.current.useMemo(t,e)};Q.useReducer=function(t,e,n){return Ue.current.useReducer(t,e,n)};Q.useRef=function(t){return Ue.current.useRef(t)};Q.useState=function(t){return Ue.current.useState(t)};Q.useSyncExternalStore=function(t,e,n){return Ue.current.useSyncExternalStore(t,e,n)};Q.useTransition=function(){return Ue.current.useTransition()};Q.version="18.3.1";yp.exports=Q;var b=yp.exports;const Ep=mp(b),cx=Qv({__proto__:null,default:Ep},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ux=b,dx=Symbol.for("react.element"),hx=Symbol.for("react.fragment"),fx=Object.prototype.hasOwnProperty,px=ux.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mx={key:!0,ref:!0,__self:!0,__source:!0};function Ip(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)fx.call(e,r)&&!mx.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:dx,type:t,key:i,ref:o,props:s,_owner:px.current}}Xo.Fragment=hx;Xo.jsx=Ip;Xo.jsxs=Ip;gp.exports=Xo;var l=gp.exports,ka={},jp={exports:{}},st={},kp={exports:{}},Tp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,B){var F=A.length;A.push(B);e:for(;0<F;){var ne=F-1>>>1,pe=A[ne];if(0<s(pe,B))A[ne]=B,A[F]=pe,F=ne;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var B=A[0],F=A.pop();if(F!==B){A[0]=F;e:for(var ne=0,pe=A.length,dr=pe>>>1;ne<dr;){var Et=2*(ne+1)-1,rs=A[Et],Ot=Et+1,Ei=A[Ot];if(0>s(rs,F))Ot<pe&&0>s(Ei,rs)?(A[ne]=Ei,A[Ot]=F,ne=Ot):(A[ne]=rs,A[Et]=F,ne=Et);else if(Ot<pe&&0>s(Ei,F))A[ne]=Ei,A[Ot]=F,ne=Ot;else break e}}return B}function s(A,B){var F=A.sortIndex-B.sortIndex;return F!==0?F:A.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],h=1,d=null,f=3,y=!1,x=!1,g=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(A){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=A)r(u),B.sortIndex=B.expirationTime,e(c,B);else break;B=n(u)}}function w(A){if(g=!1,m(A),!x)if(n(c)!==null)x=!0,Ye(C);else{var B=n(u);B!==null&&On(w,B.startTime-A)}}function C(A,B){x=!1,g&&(g=!1,v(S),S=-1),y=!0;var F=f;try{for(m(B),d=n(c);d!==null&&(!(d.expirationTime>B)||A&&!W());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,f=d.priorityLevel;var pe=ne(d.expirationTime<=B);B=t.unstable_now(),typeof pe=="function"?d.callback=pe:d===n(c)&&r(c),m(B)}else r(c);d=n(c)}if(d!==null)var dr=!0;else{var Et=n(u);Et!==null&&On(w,Et.startTime-B),dr=!1}return dr}finally{d=null,f=F,y=!1}}var N=!1,I=null,S=-1,k=5,T=-1;function W(){return!(t.unstable_now()-T<k)}function V(){if(I!==null){var A=t.unstable_now();T=A;var B=!0;try{B=I(!0,A)}finally{B?O():(N=!1,I=null)}}else N=!1}var O;if(typeof p=="function")O=function(){p(V)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,we=L.port2;L.port1.onmessage=V,O=function(){we.postMessage(null)}}else O=function(){_(V,0)};function Ye(A){I=A,N||(N=!0,O())}function On(A,B){S=_(function(){A(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){x||y||(x=!0,Ye(C))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(A){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var F=f;f=B;try{return A()}finally{f=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,B){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var F=f;f=A;try{return B()}finally{f=F}},t.unstable_scheduleCallback=function(A,B,F){var ne=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?ne+F:ne):F=ne,A){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=F+pe,A={id:h++,callback:B,priorityLevel:A,startTime:F,expirationTime:pe,sortIndex:-1},F>ne?(A.sortIndex=F,e(u,A),n(c)===null&&A===n(u)&&(g?(v(S),S=-1):g=!0,On(w,F-ne))):(A.sortIndex=pe,e(c,A),x||y||(x=!0,Ye(C))),A},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(A){var B=f;return function(){var F=f;f=B;try{return A.apply(this,arguments)}finally{f=F}}}})(Tp);kp.exports=Tp;var gx=kp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yx=b,nt=gx;function E(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ap=new Set,Ls={};function ir(t,e){Or(t,e),Or(t+"Capture",e)}function Or(t,e){for(Ls[t]=e,t=0;t<e.length;t++)Ap.add(e[t])}var Wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ta=Object.prototype.hasOwnProperty,vx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bd={},Ud={};function xx(t){return Ta.call(Ud,t)?!0:Ta.call(Bd,t)?!1:vx.test(t)?Ud[t]=!0:(Bd[t]=!0,!1)}function wx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _x(t,e,n,r){if(e===null||typeof e>"u"||wx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ze(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){je[t]=new ze(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];je[e]=new ze(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){je[t]=new ze(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){je[t]=new ze(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){je[t]=new ze(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){je[t]=new ze(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){je[t]=new ze(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){je[t]=new ze(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){je[t]=new ze(t,5,!1,t.toLowerCase(),null,!1,!1)});var Jc=/[\-:]([a-z])/g;function Xc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Jc,Xc);je[e]=new ze(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Jc,Xc);je[e]=new ze(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Jc,Xc);je[e]=new ze(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){je[t]=new ze(t,1,!1,t.toLowerCase(),null,!1,!1)});je.xlinkHref=new ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){je[t]=new ze(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zc(t,e,n,r){var s=je.hasOwnProperty(e)?je[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_x(e,n,s,r)&&(n=null),r||s===null?xx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var en=yx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ji=Symbol.for("react.element"),pr=Symbol.for("react.portal"),mr=Symbol.for("react.fragment"),eu=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Pp=Symbol.for("react.provider"),Dp=Symbol.for("react.context"),tu=Symbol.for("react.forward_ref"),Pa=Symbol.for("react.suspense"),Da=Symbol.for("react.suspense_list"),nu=Symbol.for("react.memo"),rn=Symbol.for("react.lazy"),Rp=Symbol.for("react.offscreen"),zd=Symbol.iterator;function ss(t){return t===null||typeof t!="object"?null:(t=zd&&t[zd]||t["@@iterator"],typeof t=="function"?t:null)}var ue=Object.assign,Fl;function vs(t){if(Fl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fl=e&&e[1]||""}return`
`+Fl+t}var Bl=!1;function Ul(t,e){if(!t||Bl)return"";Bl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{Bl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?vs(t):""}function bx(t){switch(t.tag){case 5:return vs(t.type);case 16:return vs("Lazy");case 13:return vs("Suspense");case 19:return vs("SuspenseList");case 0:case 2:case 15:return t=Ul(t.type,!1),t;case 11:return t=Ul(t.type.render,!1),t;case 1:return t=Ul(t.type,!0),t;default:return""}}function Ra(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case mr:return"Fragment";case pr:return"Portal";case Aa:return"Profiler";case eu:return"StrictMode";case Pa:return"Suspense";case Da:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Dp:return(t.displayName||"Context")+".Consumer";case Pp:return(t._context.displayName||"Context")+".Provider";case tu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case nu:return e=t.displayName||null,e!==null?e:Ra(t.type)||"Memo";case rn:e=t._payload,t=t._init;try{return Ra(t(e))}catch{}}return null}function Cx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ra(e);case 8:return e===eu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Nn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Op(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Nx(t){var e=Op(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ki(t){t._valueTracker||(t._valueTracker=Nx(t))}function Mp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Op(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function io(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Oa(t,e){var n=e.checked;return ue({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $d(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Nn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Lp(t,e){e=e.checked,e!=null&&Zc(t,"checked",e,!1)}function Ma(t,e){Lp(t,e);var n=Nn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?La(t,e.type,n):e.hasOwnProperty("defaultValue")&&La(t,e.type,Nn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Wd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function La(t,e,n){(e!=="number"||io(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xs=Array.isArray;function Ir(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Nn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Fa(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return ue({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Vd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(E(92));if(xs(n)){if(1<n.length)throw Error(E(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Nn(n)}}function Fp(t,e){var n=Nn(e.value),r=Nn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Hd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Bp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ba(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Bp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ti,Up=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ti=Ti||document.createElement("div"),Ti.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ti.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var bs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sx=["Webkit","ms","Moz","O"];Object.keys(bs).forEach(function(t){Sx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bs[e]=bs[t]})});function zp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||bs.hasOwnProperty(t)&&bs[t]?(""+e).trim():e+"px"}function $p(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=zp(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Ex=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ua(t,e){if(e){if(Ex[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function za(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $a=null;function ru(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wa=null,jr=null,kr=null;function Qd(t){if(t=fi(t)){if(typeof Wa!="function")throw Error(E(280));var e=t.stateNode;e&&(e=rl(e),Wa(t.stateNode,t.type,e))}}function Wp(t){jr?kr?kr.push(t):kr=[t]:jr=t}function Vp(){if(jr){var t=jr,e=kr;if(kr=jr=null,Qd(t),e)for(t=0;t<e.length;t++)Qd(e[t])}}function Hp(t,e){return t(e)}function Qp(){}var zl=!1;function qp(t,e,n){if(zl)return t(e,n);zl=!0;try{return Hp(t,e,n)}finally{zl=!1,(jr!==null||kr!==null)&&(Qp(),Vp())}}function Bs(t,e){var n=t.stateNode;if(n===null)return null;var r=rl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(E(231,e,typeof n));return n}var Va=!1;if(Wt)try{var is={};Object.defineProperty(is,"passive",{get:function(){Va=!0}}),window.addEventListener("test",is,is),window.removeEventListener("test",is,is)}catch{Va=!1}function Ix(t,e,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Cs=!1,oo=null,lo=!1,Ha=null,jx={onError:function(t){Cs=!0,oo=t}};function kx(t,e,n,r,s,i,o,a,c){Cs=!1,oo=null,Ix.apply(jx,arguments)}function Tx(t,e,n,r,s,i,o,a,c){if(kx.apply(this,arguments),Cs){if(Cs){var u=oo;Cs=!1,oo=null}else throw Error(E(198));lo||(lo=!0,Ha=u)}}function or(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Gp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qd(t){if(or(t)!==t)throw Error(E(188))}function Ax(t){var e=t.alternate;if(!e){if(e=or(t),e===null)throw Error(E(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return qd(s),t;if(i===r)return qd(s),e;i=i.sibling}throw Error(E(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(E(189))}}if(n.alternate!==r)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?t:e}function Kp(t){return t=Ax(t),t!==null?Yp(t):null}function Yp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Yp(t);if(e!==null)return e;t=t.sibling}return null}var Jp=nt.unstable_scheduleCallback,Gd=nt.unstable_cancelCallback,Px=nt.unstable_shouldYield,Dx=nt.unstable_requestPaint,fe=nt.unstable_now,Rx=nt.unstable_getCurrentPriorityLevel,su=nt.unstable_ImmediatePriority,Xp=nt.unstable_UserBlockingPriority,ao=nt.unstable_NormalPriority,Ox=nt.unstable_LowPriority,Zp=nt.unstable_IdlePriority,Zo=null,Tt=null;function Mx(t){if(Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(Zo,t,void 0,(t.current.flags&128)===128)}catch{}}var xt=Math.clz32?Math.clz32:Bx,Lx=Math.log,Fx=Math.LN2;function Bx(t){return t>>>=0,t===0?32:31-(Lx(t)/Fx|0)|0}var Ai=64,Pi=4194304;function ws(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function co(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ws(a):(i&=o,i!==0&&(r=ws(i)))}else o=n&~s,o!==0?r=ws(o):i!==0&&(r=ws(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-xt(e),s=1<<n,r|=t[n],e&=~s;return r}function Ux(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-xt(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=Ux(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function Qa(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function em(){var t=Ai;return Ai<<=1,!(Ai&4194240)&&(Ai=64),t}function $l(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function di(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xt(e),t[e]=n}function $x(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-xt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function iu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-xt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var K=0;function tm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nm,ou,rm,sm,im,qa=!1,Di=[],hn=null,fn=null,pn=null,Us=new Map,zs=new Map,on=[],Wx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kd(t,e){switch(t){case"focusin":case"focusout":hn=null;break;case"dragenter":case"dragleave":fn=null;break;case"mouseover":case"mouseout":pn=null;break;case"pointerover":case"pointerout":Us.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zs.delete(e.pointerId)}}function os(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=fi(e),e!==null&&ou(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Vx(t,e,n,r,s){switch(e){case"focusin":return hn=os(hn,t,e,n,r,s),!0;case"dragenter":return fn=os(fn,t,e,n,r,s),!0;case"mouseover":return pn=os(pn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Us.set(i,os(Us.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,zs.set(i,os(zs.get(i)||null,t,e,n,r,s)),!0}return!1}function om(t){var e=Un(t.target);if(e!==null){var n=or(e);if(n!==null){if(e=n.tag,e===13){if(e=Gp(n),e!==null){t.blockedOn=e,im(t.priority,function(){rm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gi(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ga(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$a=r,n.target.dispatchEvent(r),$a=null}else return e=fi(n),e!==null&&ou(e),t.blockedOn=n,!1;e.shift()}return!0}function Yd(t,e,n){Gi(t)&&n.delete(e)}function Hx(){qa=!1,hn!==null&&Gi(hn)&&(hn=null),fn!==null&&Gi(fn)&&(fn=null),pn!==null&&Gi(pn)&&(pn=null),Us.forEach(Yd),zs.forEach(Yd)}function ls(t,e){t.blockedOn===e&&(t.blockedOn=null,qa||(qa=!0,nt.unstable_scheduleCallback(nt.unstable_NormalPriority,Hx)))}function $s(t){function e(s){return ls(s,t)}if(0<Di.length){ls(Di[0],t);for(var n=1;n<Di.length;n++){var r=Di[n];r.blockedOn===t&&(r.blockedOn=null)}}for(hn!==null&&ls(hn,t),fn!==null&&ls(fn,t),pn!==null&&ls(pn,t),Us.forEach(e),zs.forEach(e),n=0;n<on.length;n++)r=on[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<on.length&&(n=on[0],n.blockedOn===null);)om(n),n.blockedOn===null&&on.shift()}var Tr=en.ReactCurrentBatchConfig,uo=!0;function Qx(t,e,n,r){var s=K,i=Tr.transition;Tr.transition=null;try{K=1,lu(t,e,n,r)}finally{K=s,Tr.transition=i}}function qx(t,e,n,r){var s=K,i=Tr.transition;Tr.transition=null;try{K=4,lu(t,e,n,r)}finally{K=s,Tr.transition=i}}function lu(t,e,n,r){if(uo){var s=Ga(t,e,n,r);if(s===null)Xl(t,e,r,ho,n),Kd(t,r);else if(Vx(s,t,e,n,r))r.stopPropagation();else if(Kd(t,r),e&4&&-1<Wx.indexOf(t)){for(;s!==null;){var i=fi(s);if(i!==null&&nm(i),i=Ga(t,e,n,r),i===null&&Xl(t,e,r,ho,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Xl(t,e,r,null,n)}}var ho=null;function Ga(t,e,n,r){if(ho=null,t=ru(r),t=Un(t),t!==null)if(e=or(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Gp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ho=t,null}function lm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rx()){case su:return 1;case Xp:return 4;case ao:case Ox:return 16;case Zp:return 536870912;default:return 16}default:return 16}}var an=null,au=null,Ki=null;function am(){if(Ki)return Ki;var t,e=au,n=e.length,r,s="value"in an?an.value:an.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ki=s.slice(t,1<r?1-r:void 0)}function Yi(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ri(){return!0}function Jd(){return!1}function it(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ri:Jd,this.isPropagationStopped=Jd,this}return ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ri)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ri)},persist:function(){},isPersistent:Ri}),e}var Gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cu=it(Gr),hi=ue({},Gr,{view:0,detail:0}),Gx=it(hi),Wl,Vl,as,el=ue({},hi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==as&&(as&&t.type==="mousemove"?(Wl=t.screenX-as.screenX,Vl=t.screenY-as.screenY):Vl=Wl=0,as=t),Wl)},movementY:function(t){return"movementY"in t?t.movementY:Vl}}),Xd=it(el),Kx=ue({},el,{dataTransfer:0}),Yx=it(Kx),Jx=ue({},hi,{relatedTarget:0}),Hl=it(Jx),Xx=ue({},Gr,{animationName:0,elapsedTime:0,pseudoElement:0}),Zx=it(Xx),e0=ue({},Gr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),t0=it(e0),n0=ue({},Gr,{data:0}),Zd=it(n0),r0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},i0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function o0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=i0[t])?!!e[t]:!1}function uu(){return o0}var l0=ue({},hi,{key:function(t){if(t.key){var e=r0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?s0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uu,charCode:function(t){return t.type==="keypress"?Yi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),a0=it(l0),c0=ue({},el,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eh=it(c0),u0=ue({},hi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uu}),d0=it(u0),h0=ue({},Gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),f0=it(h0),p0=ue({},el,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),m0=it(p0),g0=[9,13,27,32],du=Wt&&"CompositionEvent"in window,Ns=null;Wt&&"documentMode"in document&&(Ns=document.documentMode);var y0=Wt&&"TextEvent"in window&&!Ns,cm=Wt&&(!du||Ns&&8<Ns&&11>=Ns),th=" ",nh=!1;function um(t,e){switch(t){case"keyup":return g0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gr=!1;function v0(t,e){switch(t){case"compositionend":return dm(e);case"keypress":return e.which!==32?null:(nh=!0,th);case"textInput":return t=e.data,t===th&&nh?null:t;default:return null}}function x0(t,e){if(gr)return t==="compositionend"||!du&&um(t,e)?(t=am(),Ki=au=an=null,gr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return cm&&e.locale!=="ko"?null:e.data;default:return null}}var w0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!w0[t.type]:e==="textarea"}function hm(t,e,n,r){Wp(r),e=fo(e,"onChange"),0<e.length&&(n=new cu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ss=null,Ws=null;function _0(t){Cm(t,0)}function tl(t){var e=xr(t);if(Mp(e))return t}function b0(t,e){if(t==="change")return e}var fm=!1;if(Wt){var Ql;if(Wt){var ql="oninput"in document;if(!ql){var sh=document.createElement("div");sh.setAttribute("oninput","return;"),ql=typeof sh.oninput=="function"}Ql=ql}else Ql=!1;fm=Ql&&(!document.documentMode||9<document.documentMode)}function ih(){Ss&&(Ss.detachEvent("onpropertychange",pm),Ws=Ss=null)}function pm(t){if(t.propertyName==="value"&&tl(Ws)){var e=[];hm(e,Ws,t,ru(t)),qp(_0,e)}}function C0(t,e,n){t==="focusin"?(ih(),Ss=e,Ws=n,Ss.attachEvent("onpropertychange",pm)):t==="focusout"&&ih()}function N0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tl(Ws)}function S0(t,e){if(t==="click")return tl(e)}function E0(t,e){if(t==="input"||t==="change")return tl(e)}function I0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bt=typeof Object.is=="function"?Object.is:I0;function Vs(t,e){if(bt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ta.call(e,s)||!bt(t[s],e[s]))return!1}return!0}function oh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lh(t,e){var n=oh(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=oh(n)}}function mm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?mm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gm(){for(var t=window,e=io();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=io(t.document)}return e}function hu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function j0(t){var e=gm(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&mm(n.ownerDocument.documentElement,n)){if(r!==null&&hu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=lh(n,i);var o=lh(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var k0=Wt&&"documentMode"in document&&11>=document.documentMode,yr=null,Ka=null,Es=null,Ya=!1;function ah(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ya||yr==null||yr!==io(r)||(r=yr,"selectionStart"in r&&hu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Es&&Vs(Es,r)||(Es=r,r=fo(Ka,"onSelect"),0<r.length&&(e=new cu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=yr)))}function Oi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vr={animationend:Oi("Animation","AnimationEnd"),animationiteration:Oi("Animation","AnimationIteration"),animationstart:Oi("Animation","AnimationStart"),transitionend:Oi("Transition","TransitionEnd")},Gl={},ym={};Wt&&(ym=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);function nl(t){if(Gl[t])return Gl[t];if(!vr[t])return t;var e=vr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ym)return Gl[t]=e[n];return t}var vm=nl("animationend"),xm=nl("animationiteration"),wm=nl("animationstart"),_m=nl("transitionend"),bm=new Map,ch="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function An(t,e){bm.set(t,e),ir(e,[t])}for(var Kl=0;Kl<ch.length;Kl++){var Yl=ch[Kl],T0=Yl.toLowerCase(),A0=Yl[0].toUpperCase()+Yl.slice(1);An(T0,"on"+A0)}An(vm,"onAnimationEnd");An(xm,"onAnimationIteration");An(wm,"onAnimationStart");An("dblclick","onDoubleClick");An("focusin","onFocus");An("focusout","onBlur");An(_m,"onTransitionEnd");Or("onMouseEnter",["mouseout","mouseover"]);Or("onMouseLeave",["mouseout","mouseover"]);Or("onPointerEnter",["pointerout","pointerover"]);Or("onPointerLeave",["pointerout","pointerover"]);ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ir("onBeforeInput",["compositionend","keypress","textInput","paste"]);ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _s="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P0=new Set("cancel close invalid load scroll toggle".split(" ").concat(_s));function uh(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Tx(r,e,void 0,t),t.currentTarget=null}function Cm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;uh(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;uh(s,a,u),i=c}}}if(lo)throw t=Ha,lo=!1,Ha=null,t}function re(t,e){var n=e[tc];n===void 0&&(n=e[tc]=new Set);var r=t+"__bubble";n.has(r)||(Nm(e,t,2,!1),n.add(r))}function Jl(t,e,n){var r=0;e&&(r|=4),Nm(n,t,r,e)}var Mi="_reactListening"+Math.random().toString(36).slice(2);function Hs(t){if(!t[Mi]){t[Mi]=!0,Ap.forEach(function(n){n!=="selectionchange"&&(P0.has(n)||Jl(n,!1,t),Jl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Mi]||(e[Mi]=!0,Jl("selectionchange",!1,e))}}function Nm(t,e,n,r){switch(lm(e)){case 1:var s=Qx;break;case 4:s=qx;break;default:s=lu}n=s.bind(null,e,n,t),s=void 0,!Va||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Xl(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Un(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}qp(function(){var u=i,h=ru(n),d=[];e:{var f=bm.get(t);if(f!==void 0){var y=cu,x=t;switch(t){case"keypress":if(Yi(n)===0)break e;case"keydown":case"keyup":y=a0;break;case"focusin":x="focus",y=Hl;break;case"focusout":x="blur",y=Hl;break;case"beforeblur":case"afterblur":y=Hl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Xd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Yx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=d0;break;case vm:case xm:case wm:y=Zx;break;case _m:y=f0;break;case"scroll":y=Gx;break;case"wheel":y=m0;break;case"copy":case"cut":case"paste":y=t0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=eh}var g=(e&4)!==0,_=!g&&t==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var p=u,m;p!==null;){m=p;var w=m.stateNode;if(m.tag===5&&w!==null&&(m=w,v!==null&&(w=Bs(p,v),w!=null&&g.push(Qs(p,w,m)))),_)break;p=p.return}0<g.length&&(f=new y(f,x,null,n,h),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&n!==$a&&(x=n.relatedTarget||n.fromElement)&&(Un(x)||x[Vt]))break e;if((y||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,y?(x=n.relatedTarget||n.toElement,y=u,x=x?Un(x):null,x!==null&&(_=or(x),x!==_||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=u),y!==x)){if(g=Xd,w="onMouseLeave",v="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(g=eh,w="onPointerLeave",v="onPointerEnter",p="pointer"),_=y==null?f:xr(y),m=x==null?f:xr(x),f=new g(w,p+"leave",y,n,h),f.target=_,f.relatedTarget=m,w=null,Un(h)===u&&(g=new g(v,p+"enter",x,n,h),g.target=m,g.relatedTarget=_,w=g),_=w,y&&x)t:{for(g=y,v=x,p=0,m=g;m;m=hr(m))p++;for(m=0,w=v;w;w=hr(w))m++;for(;0<p-m;)g=hr(g),p--;for(;0<m-p;)v=hr(v),m--;for(;p--;){if(g===v||v!==null&&g===v.alternate)break t;g=hr(g),v=hr(v)}g=null}else g=null;y!==null&&dh(d,f,y,g,!1),x!==null&&_!==null&&dh(d,_,x,g,!0)}}e:{if(f=u?xr(u):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var C=b0;else if(rh(f))if(fm)C=E0;else{C=N0;var N=C0}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=S0);if(C&&(C=C(t,u))){hm(d,C,n,h);break e}N&&N(t,f,u),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&La(f,"number",f.value)}switch(N=u?xr(u):window,t){case"focusin":(rh(N)||N.contentEditable==="true")&&(yr=N,Ka=u,Es=null);break;case"focusout":Es=Ka=yr=null;break;case"mousedown":Ya=!0;break;case"contextmenu":case"mouseup":case"dragend":Ya=!1,ah(d,n,h);break;case"selectionchange":if(k0)break;case"keydown":case"keyup":ah(d,n,h)}var I;if(du)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else gr?um(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(cm&&n.locale!=="ko"&&(gr||S!=="onCompositionStart"?S==="onCompositionEnd"&&gr&&(I=am()):(an=h,au="value"in an?an.value:an.textContent,gr=!0)),N=fo(u,S),0<N.length&&(S=new Zd(S,t,null,n,h),d.push({event:S,listeners:N}),I?S.data=I:(I=dm(n),I!==null&&(S.data=I)))),(I=y0?v0(t,n):x0(t,n))&&(u=fo(u,"onBeforeInput"),0<u.length&&(h=new Zd("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=I))}Cm(d,e)})}function Qs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function fo(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Bs(t,n),i!=null&&r.unshift(Qs(t,i,s)),i=Bs(t,e),i!=null&&r.push(Qs(t,i,s))),t=t.return}return r}function hr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dh(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=Bs(n,i),c!=null&&o.unshift(Qs(n,c,a))):s||(c=Bs(n,i),c!=null&&o.push(Qs(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var D0=/\r\n?/g,R0=/\u0000|\uFFFD/g;function hh(t){return(typeof t=="string"?t:""+t).replace(D0,`
`).replace(R0,"")}function Li(t,e,n){if(e=hh(e),hh(t)!==e&&n)throw Error(E(425))}function po(){}var Ja=null,Xa=null;function Za(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ec=typeof setTimeout=="function"?setTimeout:void 0,O0=typeof clearTimeout=="function"?clearTimeout:void 0,fh=typeof Promise=="function"?Promise:void 0,M0=typeof queueMicrotask=="function"?queueMicrotask:typeof fh<"u"?function(t){return fh.resolve(null).then(t).catch(L0)}:ec;function L0(t){setTimeout(function(){throw t})}function Zl(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),$s(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);$s(e)}function mn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ph(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Kr=Math.random().toString(36).slice(2),kt="__reactFiber$"+Kr,qs="__reactProps$"+Kr,Vt="__reactContainer$"+Kr,tc="__reactEvents$"+Kr,F0="__reactListeners$"+Kr,B0="__reactHandles$"+Kr;function Un(t){var e=t[kt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vt]||n[kt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ph(t);t!==null;){if(n=t[kt])return n;t=ph(t)}return e}t=n,n=t.parentNode}return null}function fi(t){return t=t[kt]||t[Vt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(E(33))}function rl(t){return t[qs]||null}var nc=[],wr=-1;function Pn(t){return{current:t}}function se(t){0>wr||(t.current=nc[wr],nc[wr]=null,wr--)}function te(t,e){wr++,nc[wr]=t.current,t.current=e}var Sn={},Re=Pn(Sn),He=Pn(!1),Gn=Sn;function Mr(t,e){var n=t.type.contextTypes;if(!n)return Sn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Qe(t){return t=t.childContextTypes,t!=null}function mo(){se(He),se(Re)}function mh(t,e,n){if(Re.current!==Sn)throw Error(E(168));te(Re,e),te(He,n)}function Sm(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(E(108,Cx(t)||"Unknown",s));return ue({},n,r)}function go(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Sn,Gn=Re.current,te(Re,t),te(He,He.current),!0}function gh(t,e,n){var r=t.stateNode;if(!r)throw Error(E(169));n?(t=Sm(t,e,Gn),r.__reactInternalMemoizedMergedChildContext=t,se(He),se(Re),te(Re,t)):se(He),te(He,n)}var Lt=null,sl=!1,ea=!1;function Em(t){Lt===null?Lt=[t]:Lt.push(t)}function U0(t){sl=!0,Em(t)}function Dn(){if(!ea&&Lt!==null){ea=!0;var t=0,e=K;try{var n=Lt;for(K=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Lt=null,sl=!1}catch(s){throw Lt!==null&&(Lt=Lt.slice(t+1)),Jp(su,Dn),s}finally{K=e,ea=!1}}return null}var _r=[],br=0,yo=null,vo=0,ot=[],lt=0,Kn=null,Ft=1,Bt="";function Mn(t,e){_r[br++]=vo,_r[br++]=yo,yo=t,vo=e}function Im(t,e,n){ot[lt++]=Ft,ot[lt++]=Bt,ot[lt++]=Kn,Kn=t;var r=Ft;t=Bt;var s=32-xt(r)-1;r&=~(1<<s),n+=1;var i=32-xt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ft=1<<32-xt(e)+s|n<<s|r,Bt=i+t}else Ft=1<<i|n<<s|r,Bt=t}function fu(t){t.return!==null&&(Mn(t,1),Im(t,1,0))}function pu(t){for(;t===yo;)yo=_r[--br],_r[br]=null,vo=_r[--br],_r[br]=null;for(;t===Kn;)Kn=ot[--lt],ot[lt]=null,Bt=ot[--lt],ot[lt]=null,Ft=ot[--lt],ot[lt]=null}var et=null,Ze=null,ie=!1,gt=null;function jm(t,e){var n=at(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function yh(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,et=t,Ze=mn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,et=t,Ze=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Kn!==null?{id:Ft,overflow:Bt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=at(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,et=t,Ze=null,!0):!1;default:return!1}}function rc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sc(t){if(ie){var e=Ze;if(e){var n=e;if(!yh(t,e)){if(rc(t))throw Error(E(418));e=mn(n.nextSibling);var r=et;e&&yh(t,e)?jm(r,n):(t.flags=t.flags&-4097|2,ie=!1,et=t)}}else{if(rc(t))throw Error(E(418));t.flags=t.flags&-4097|2,ie=!1,et=t}}}function vh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;et=t}function Fi(t){if(t!==et)return!1;if(!ie)return vh(t),ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Za(t.type,t.memoizedProps)),e&&(e=Ze)){if(rc(t))throw km(),Error(E(418));for(;e;)jm(t,e),e=mn(e.nextSibling)}if(vh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(E(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ze=mn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ze=null}}else Ze=et?mn(t.stateNode.nextSibling):null;return!0}function km(){for(var t=Ze;t;)t=mn(t.nextSibling)}function Lr(){Ze=et=null,ie=!1}function mu(t){gt===null?gt=[t]:gt.push(t)}var z0=en.ReactCurrentBatchConfig;function cs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var r=n.stateNode}if(!r)throw Error(E(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,t))}return t}function Bi(t,e){throw t=Object.prototype.toString.call(e),Error(E(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xh(t){var e=t._init;return e(t._payload)}function Tm(t){function e(v,p){if(t){var m=v.deletions;m===null?(v.deletions=[p],v.flags|=16):m.push(p)}}function n(v,p){if(!t)return null;for(;p!==null;)e(v,p),p=p.sibling;return null}function r(v,p){for(v=new Map;p!==null;)p.key!==null?v.set(p.key,p):v.set(p.index,p),p=p.sibling;return v}function s(v,p){return v=xn(v,p),v.index=0,v.sibling=null,v}function i(v,p,m){return v.index=m,t?(m=v.alternate,m!==null?(m=m.index,m<p?(v.flags|=2,p):m):(v.flags|=2,p)):(v.flags|=1048576,p)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,p,m,w){return p===null||p.tag!==6?(p=la(m,v.mode,w),p.return=v,p):(p=s(p,m),p.return=v,p)}function c(v,p,m,w){var C=m.type;return C===mr?h(v,p,m.props.children,w,m.key):p!==null&&(p.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===rn&&xh(C)===p.type)?(w=s(p,m.props),w.ref=cs(v,p,m),w.return=v,w):(w=ro(m.type,m.key,m.props,null,v.mode,w),w.ref=cs(v,p,m),w.return=v,w)}function u(v,p,m,w){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=aa(m,v.mode,w),p.return=v,p):(p=s(p,m.children||[]),p.return=v,p)}function h(v,p,m,w,C){return p===null||p.tag!==7?(p=Qn(m,v.mode,w,C),p.return=v,p):(p=s(p,m),p.return=v,p)}function d(v,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=la(""+p,v.mode,m),p.return=v,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ji:return m=ro(p.type,p.key,p.props,null,v.mode,m),m.ref=cs(v,null,p),m.return=v,m;case pr:return p=aa(p,v.mode,m),p.return=v,p;case rn:var w=p._init;return d(v,w(p._payload),m)}if(xs(p)||ss(p))return p=Qn(p,v.mode,m,null),p.return=v,p;Bi(v,p)}return null}function f(v,p,m,w){var C=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return C!==null?null:a(v,p,""+m,w);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ji:return m.key===C?c(v,p,m,w):null;case pr:return m.key===C?u(v,p,m,w):null;case rn:return C=m._init,f(v,p,C(m._payload),w)}if(xs(m)||ss(m))return C!==null?null:h(v,p,m,w,null);Bi(v,m)}return null}function y(v,p,m,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(m)||null,a(p,v,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ji:return v=v.get(w.key===null?m:w.key)||null,c(p,v,w,C);case pr:return v=v.get(w.key===null?m:w.key)||null,u(p,v,w,C);case rn:var N=w._init;return y(v,p,m,N(w._payload),C)}if(xs(w)||ss(w))return v=v.get(m)||null,h(p,v,w,C,null);Bi(p,w)}return null}function x(v,p,m,w){for(var C=null,N=null,I=p,S=p=0,k=null;I!==null&&S<m.length;S++){I.index>S?(k=I,I=null):k=I.sibling;var T=f(v,I,m[S],w);if(T===null){I===null&&(I=k);break}t&&I&&T.alternate===null&&e(v,I),p=i(T,p,S),N===null?C=T:N.sibling=T,N=T,I=k}if(S===m.length)return n(v,I),ie&&Mn(v,S),C;if(I===null){for(;S<m.length;S++)I=d(v,m[S],w),I!==null&&(p=i(I,p,S),N===null?C=I:N.sibling=I,N=I);return ie&&Mn(v,S),C}for(I=r(v,I);S<m.length;S++)k=y(I,v,S,m[S],w),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?S:k.key),p=i(k,p,S),N===null?C=k:N.sibling=k,N=k);return t&&I.forEach(function(W){return e(v,W)}),ie&&Mn(v,S),C}function g(v,p,m,w){var C=ss(m);if(typeof C!="function")throw Error(E(150));if(m=C.call(m),m==null)throw Error(E(151));for(var N=C=null,I=p,S=p=0,k=null,T=m.next();I!==null&&!T.done;S++,T=m.next()){I.index>S?(k=I,I=null):k=I.sibling;var W=f(v,I,T.value,w);if(W===null){I===null&&(I=k);break}t&&I&&W.alternate===null&&e(v,I),p=i(W,p,S),N===null?C=W:N.sibling=W,N=W,I=k}if(T.done)return n(v,I),ie&&Mn(v,S),C;if(I===null){for(;!T.done;S++,T=m.next())T=d(v,T.value,w),T!==null&&(p=i(T,p,S),N===null?C=T:N.sibling=T,N=T);return ie&&Mn(v,S),C}for(I=r(v,I);!T.done;S++,T=m.next())T=y(I,v,S,T.value,w),T!==null&&(t&&T.alternate!==null&&I.delete(T.key===null?S:T.key),p=i(T,p,S),N===null?C=T:N.sibling=T,N=T);return t&&I.forEach(function(V){return e(v,V)}),ie&&Mn(v,S),C}function _(v,p,m,w){if(typeof m=="object"&&m!==null&&m.type===mr&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case ji:e:{for(var C=m.key,N=p;N!==null;){if(N.key===C){if(C=m.type,C===mr){if(N.tag===7){n(v,N.sibling),p=s(N,m.props.children),p.return=v,v=p;break e}}else if(N.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===rn&&xh(C)===N.type){n(v,N.sibling),p=s(N,m.props),p.ref=cs(v,N,m),p.return=v,v=p;break e}n(v,N);break}else e(v,N);N=N.sibling}m.type===mr?(p=Qn(m.props.children,v.mode,w,m.key),p.return=v,v=p):(w=ro(m.type,m.key,m.props,null,v.mode,w),w.ref=cs(v,p,m),w.return=v,v=w)}return o(v);case pr:e:{for(N=m.key;p!==null;){if(p.key===N)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){n(v,p.sibling),p=s(p,m.children||[]),p.return=v,v=p;break e}else{n(v,p);break}else e(v,p);p=p.sibling}p=aa(m,v.mode,w),p.return=v,v=p}return o(v);case rn:return N=m._init,_(v,p,N(m._payload),w)}if(xs(m))return x(v,p,m,w);if(ss(m))return g(v,p,m,w);Bi(v,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(n(v,p.sibling),p=s(p,m),p.return=v,v=p):(n(v,p),p=la(m,v.mode,w),p.return=v,v=p),o(v)):n(v,p)}return _}var Fr=Tm(!0),Am=Tm(!1),xo=Pn(null),wo=null,Cr=null,gu=null;function yu(){gu=Cr=wo=null}function vu(t){var e=xo.current;se(xo),t._currentValue=e}function ic(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ar(t,e){wo=t,gu=Cr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(We=!0),t.firstContext=null)}function dt(t){var e=t._currentValue;if(gu!==t)if(t={context:t,memoizedValue:e,next:null},Cr===null){if(wo===null)throw Error(E(308));Cr=t,wo.dependencies={lanes:0,firstContext:t}}else Cr=Cr.next=t;return e}var zn=null;function xu(t){zn===null?zn=[t]:zn.push(t)}function Pm(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,xu(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ht(t,r)}function Ht(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var sn=!1;function wu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,q&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ht(t,n)}return s=r.interleaved,s===null?(e.next=e,xu(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ht(t,n)}function Ji(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,iu(t,n)}}function wh(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function _o(t,e,n,r){var s=t.updateQueue;sn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,h=u=c=null,a=i;do{var f=a.lane,y=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,g=a;switch(f=e,y=n,g.tag){case 1:if(x=g.payload,typeof x=="function"){d=x.call(y,d,f);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=g.payload,f=typeof x=="function"?x.call(y,d,f):x,f==null)break e;d=ue({},d,f);break e;case 2:sn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else y={eventTime:y,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=y,c=d):h=h.next=y,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Jn|=o,t.lanes=o,t.memoizedState=d}}function _h(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(E(191,s));s.call(r)}}}var pi={},At=Pn(pi),Gs=Pn(pi),Ks=Pn(pi);function $n(t){if(t===pi)throw Error(E(174));return t}function _u(t,e){switch(te(Ks,e),te(Gs,t),te(At,pi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ba(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ba(e,t)}se(At),te(At,e)}function Br(){se(At),se(Gs),se(Ks)}function Rm(t){$n(Ks.current);var e=$n(At.current),n=Ba(e,t.type);e!==n&&(te(Gs,t),te(At,n))}function bu(t){Gs.current===t&&(se(At),se(Gs))}var ae=Pn(0);function bo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ta=[];function Cu(){for(var t=0;t<ta.length;t++)ta[t]._workInProgressVersionPrimary=null;ta.length=0}var Xi=en.ReactCurrentDispatcher,na=en.ReactCurrentBatchConfig,Yn=0,ce=null,ye=null,be=null,Co=!1,Is=!1,Ys=0,$0=0;function Te(){throw Error(E(321))}function Nu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bt(t[n],e[n]))return!1;return!0}function Su(t,e,n,r,s,i){if(Yn=i,ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xi.current=t===null||t.memoizedState===null?Q0:q0,t=n(r,s),Is){i=0;do{if(Is=!1,Ys=0,25<=i)throw Error(E(301));i+=1,be=ye=null,e.updateQueue=null,Xi.current=G0,t=n(r,s)}while(Is)}if(Xi.current=No,e=ye!==null&&ye.next!==null,Yn=0,be=ye=ce=null,Co=!1,e)throw Error(E(300));return t}function Eu(){var t=Ys!==0;return Ys=0,t}function jt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?ce.memoizedState=be=t:be=be.next=t,be}function ht(){if(ye===null){var t=ce.alternate;t=t!==null?t.memoizedState:null}else t=ye.next;var e=be===null?ce.memoizedState:be.next;if(e!==null)be=e,ye=t;else{if(t===null)throw Error(E(310));ye=t,t={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},be===null?ce.memoizedState=be=t:be=be.next=t}return be}function Js(t,e){return typeof e=="function"?e(t):e}function ra(t){var e=ht(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=ye,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var h=u.lane;if((Yn&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,ce.lanes|=h,Jn|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,bt(r,e.memoizedState)||(We=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ce.lanes|=i,Jn|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function sa(t){var e=ht(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);bt(i,e.memoizedState)||(We=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Om(){}function Mm(t,e){var n=ce,r=ht(),s=e(),i=!bt(r.memoizedState,s);if(i&&(r.memoizedState=s,We=!0),r=r.queue,Iu(Bm.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||be!==null&&be.memoizedState.tag&1){if(n.flags|=2048,Xs(9,Fm.bind(null,n,r,s,e),void 0,null),Ne===null)throw Error(E(349));Yn&30||Lm(n,e,s)}return s}function Lm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ce.updateQueue,e===null?(e={lastEffect:null,stores:null},ce.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Fm(t,e,n,r){e.value=n,e.getSnapshot=r,Um(e)&&zm(t)}function Bm(t,e,n){return n(function(){Um(e)&&zm(t)})}function Um(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bt(t,n)}catch{return!0}}function zm(t){var e=Ht(t,1);e!==null&&wt(e,t,1,-1)}function bh(t){var e=jt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:t},e.queue=t,t=t.dispatch=H0.bind(null,ce,t),[e.memoizedState,t]}function Xs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ce.updateQueue,e===null?(e={lastEffect:null,stores:null},ce.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function $m(){return ht().memoizedState}function Zi(t,e,n,r){var s=jt();ce.flags|=t,s.memoizedState=Xs(1|e,n,void 0,r===void 0?null:r)}function il(t,e,n,r){var s=ht();r=r===void 0?null:r;var i=void 0;if(ye!==null){var o=ye.memoizedState;if(i=o.destroy,r!==null&&Nu(r,o.deps)){s.memoizedState=Xs(e,n,i,r);return}}ce.flags|=t,s.memoizedState=Xs(1|e,n,i,r)}function Ch(t,e){return Zi(8390656,8,t,e)}function Iu(t,e){return il(2048,8,t,e)}function Wm(t,e){return il(4,2,t,e)}function Vm(t,e){return il(4,4,t,e)}function Hm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Qm(t,e,n){return n=n!=null?n.concat([t]):null,il(4,4,Hm.bind(null,e,t),n)}function ju(){}function qm(t,e){var n=ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Gm(t,e){var n=ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Km(t,e,n){return Yn&21?(bt(n,e)||(n=em(),ce.lanes|=n,Jn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,We=!0),t.memoizedState=n)}function W0(t,e){var n=K;K=n!==0&&4>n?n:4,t(!0);var r=na.transition;na.transition={};try{t(!1),e()}finally{K=n,na.transition=r}}function Ym(){return ht().memoizedState}function V0(t,e,n){var r=vn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Jm(t))Xm(e,n);else if(n=Pm(t,e,n,r),n!==null){var s=Fe();wt(n,t,r,s),Zm(n,e,r)}}function H0(t,e,n){var r=vn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jm(t))Xm(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,bt(a,o)){var c=e.interleaved;c===null?(s.next=s,xu(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Pm(t,e,s,r),n!==null&&(s=Fe(),wt(n,t,r,s),Zm(n,e,r))}}function Jm(t){var e=t.alternate;return t===ce||e!==null&&e===ce}function Xm(t,e){Is=Co=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Zm(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,iu(t,n)}}var No={readContext:dt,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useInsertionEffect:Te,useLayoutEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useMutableSource:Te,useSyncExternalStore:Te,useId:Te,unstable_isNewReconciler:!1},Q0={readContext:dt,useCallback:function(t,e){return jt().memoizedState=[t,e===void 0?null:e],t},useContext:dt,useEffect:Ch,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zi(4194308,4,Hm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zi(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zi(4,2,t,e)},useMemo:function(t,e){var n=jt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=jt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=V0.bind(null,ce,t),[r.memoizedState,t]},useRef:function(t){var e=jt();return t={current:t},e.memoizedState=t},useState:bh,useDebugValue:ju,useDeferredValue:function(t){return jt().memoizedState=t},useTransition:function(){var t=bh(!1),e=t[0];return t=W0.bind(null,t[1]),jt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ce,s=jt();if(ie){if(n===void 0)throw Error(E(407));n=n()}else{if(n=e(),Ne===null)throw Error(E(349));Yn&30||Lm(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Ch(Bm.bind(null,r,i,t),[t]),r.flags|=2048,Xs(9,Fm.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=jt(),e=Ne.identifierPrefix;if(ie){var n=Bt,r=Ft;n=(r&~(1<<32-xt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ys++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},q0={readContext:dt,useCallback:qm,useContext:dt,useEffect:Iu,useImperativeHandle:Qm,useInsertionEffect:Wm,useLayoutEffect:Vm,useMemo:Gm,useReducer:ra,useRef:$m,useState:function(){return ra(Js)},useDebugValue:ju,useDeferredValue:function(t){var e=ht();return Km(e,ye.memoizedState,t)},useTransition:function(){var t=ra(Js)[0],e=ht().memoizedState;return[t,e]},useMutableSource:Om,useSyncExternalStore:Mm,useId:Ym,unstable_isNewReconciler:!1},G0={readContext:dt,useCallback:qm,useContext:dt,useEffect:Iu,useImperativeHandle:Qm,useInsertionEffect:Wm,useLayoutEffect:Vm,useMemo:Gm,useReducer:sa,useRef:$m,useState:function(){return sa(Js)},useDebugValue:ju,useDeferredValue:function(t){var e=ht();return ye===null?e.memoizedState=t:Km(e,ye.memoizedState,t)},useTransition:function(){var t=sa(Js)[0],e=ht().memoizedState;return[t,e]},useMutableSource:Om,useSyncExternalStore:Mm,useId:Ym,unstable_isNewReconciler:!1};function pt(t,e){if(t&&t.defaultProps){e=ue({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function oc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ol={isMounted:function(t){return(t=t._reactInternals)?or(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Fe(),s=vn(t),i=zt(r,s);i.payload=e,n!=null&&(i.callback=n),e=gn(t,i,s),e!==null&&(wt(e,t,s,r),Ji(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Fe(),s=vn(t),i=zt(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=gn(t,i,s),e!==null&&(wt(e,t,s,r),Ji(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Fe(),r=vn(t),s=zt(n,r);s.tag=2,e!=null&&(s.callback=e),e=gn(t,s,r),e!==null&&(wt(e,t,r,n),Ji(e,t,r))}};function Nh(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Vs(n,r)||!Vs(s,i):!0}function eg(t,e,n){var r=!1,s=Sn,i=e.contextType;return typeof i=="object"&&i!==null?i=dt(i):(s=Qe(e)?Gn:Re.current,r=e.contextTypes,i=(r=r!=null)?Mr(t,s):Sn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ol,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Sh(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ol.enqueueReplaceState(e,e.state,null)}function lc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},wu(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=dt(i):(i=Qe(e)?Gn:Re.current,s.context=Mr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(oc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ol.enqueueReplaceState(s,s.state,null),_o(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ur(t,e){try{var n="",r=e;do n+=bx(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ia(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ac(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var K0=typeof WeakMap=="function"?WeakMap:Map;function tg(t,e,n){n=zt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Eo||(Eo=!0,vc=r),ac(t,e)},n}function ng(t,e,n){n=zt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ac(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ac(t,e),typeof r!="function"&&(yn===null?yn=new Set([this]):yn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Eh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new K0;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=cw.bind(null,t,e,n),e.then(t,t))}function Ih(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jh(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=zt(-1,1),e.tag=2,gn(n,e,1))),n.lanes|=1),t)}var Y0=en.ReactCurrentOwner,We=!1;function Me(t,e,n,r){e.child=t===null?Am(e,null,n,r):Fr(e,t.child,n,r)}function kh(t,e,n,r,s){n=n.render;var i=e.ref;return Ar(e,s),r=Su(t,e,n,r,i,s),n=Eu(),t!==null&&!We?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qt(t,e,s)):(ie&&n&&fu(e),e.flags|=1,Me(t,e,r,s),e.child)}function Th(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Mu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,rg(t,e,i,r,s)):(t=ro(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Vs,n(o,r)&&t.ref===e.ref)return Qt(t,e,s)}return e.flags|=1,t=xn(i,r),t.ref=e.ref,t.return=e,e.child=t}function rg(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Vs(i,r)&&t.ref===e.ref)if(We=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(We=!0);else return e.lanes=t.lanes,Qt(t,e,s)}return cc(t,e,n,r,s)}function sg(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},te(Sr,Je),Je|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,te(Sr,Je),Je|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,te(Sr,Je),Je|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,te(Sr,Je),Je|=r;return Me(t,e,s,n),e.child}function ig(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cc(t,e,n,r,s){var i=Qe(n)?Gn:Re.current;return i=Mr(e,i),Ar(e,s),n=Su(t,e,n,r,i,s),r=Eu(),t!==null&&!We?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qt(t,e,s)):(ie&&r&&fu(e),e.flags|=1,Me(t,e,n,s),e.child)}function Ah(t,e,n,r,s){if(Qe(n)){var i=!0;go(e)}else i=!1;if(Ar(e,s),e.stateNode===null)eo(t,e),eg(e,n,r),lc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=dt(u):(u=Qe(n)?Gn:Re.current,u=Mr(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&Sh(e,o,r,u),sn=!1;var f=e.memoizedState;o.state=f,_o(e,r,o,s),c=e.memoizedState,a!==r||f!==c||He.current||sn?(typeof h=="function"&&(oc(e,n,h,r),c=e.memoizedState),(a=sn||Nh(e,n,a,r,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Dm(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:pt(e.type,a),o.props=u,d=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=dt(c):(c=Qe(n)?Gn:Re.current,c=Mr(e,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==c)&&Sh(e,o,r,c),sn=!1,f=e.memoizedState,o.state=f,_o(e,r,o,s);var x=e.memoizedState;a!==d||f!==x||He.current||sn?(typeof y=="function"&&(oc(e,n,y,r),x=e.memoizedState),(u=sn||Nh(e,n,u,r,f,x,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return uc(t,e,n,r,i,s)}function uc(t,e,n,r,s,i){ig(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&gh(e,n,!1),Qt(t,e,i);r=e.stateNode,Y0.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Fr(e,t.child,null,i),e.child=Fr(e,null,a,i)):Me(t,e,a,i),e.memoizedState=r.state,s&&gh(e,n,!0),e.child}function og(t){var e=t.stateNode;e.pendingContext?mh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&mh(t,e.context,!1),_u(t,e.containerInfo)}function Ph(t,e,n,r,s){return Lr(),mu(s),e.flags|=256,Me(t,e,n,r),e.child}var dc={dehydrated:null,treeContext:null,retryLane:0};function hc(t){return{baseLanes:t,cachePool:null,transitions:null}}function lg(t,e,n){var r=e.pendingProps,s=ae.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),te(ae,s&1),t===null)return sc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=cl(o,r,0,null),t=Qn(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=hc(n),e.memoizedState=dc,t):ku(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return J0(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=xn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=xn(a,i):(i=Qn(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?hc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=dc,r}return i=t.child,t=i.sibling,r=xn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ku(t,e){return e=cl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ui(t,e,n,r){return r!==null&&mu(r),Fr(e,t.child,null,n),t=ku(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function J0(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=ia(Error(E(422))),Ui(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=cl({mode:"visible",children:r.children},s,0,null),i=Qn(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Fr(e,t.child,null,o),e.child.memoizedState=hc(o),e.memoizedState=dc,i);if(!(e.mode&1))return Ui(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(E(419)),r=ia(i,r,void 0),Ui(t,e,o,r)}if(a=(o&t.childLanes)!==0,We||a){if(r=Ne,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ht(t,s),wt(r,t,s,-1))}return Ou(),r=ia(Error(E(421))),Ui(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=uw.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ze=mn(s.nextSibling),et=e,ie=!0,gt=null,t!==null&&(ot[lt++]=Ft,ot[lt++]=Bt,ot[lt++]=Kn,Ft=t.id,Bt=t.overflow,Kn=e),e=ku(e,r.children),e.flags|=4096,e)}function Dh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ic(t.return,e,n)}function oa(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ag(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Me(t,e,r.children,n),r=ae.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dh(t,n,e);else if(t.tag===19)Dh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(te(ae,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&bo(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),oa(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&bo(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}oa(e,!0,n,null,i);break;case"together":oa(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function eo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Jn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(E(153));if(e.child!==null){for(t=e.child,n=xn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function X0(t,e,n){switch(e.tag){case 3:og(e),Lr();break;case 5:Rm(e);break;case 1:Qe(e.type)&&go(e);break;case 4:_u(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;te(xo,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(te(ae,ae.current&1),e.flags|=128,null):n&e.child.childLanes?lg(t,e,n):(te(ae,ae.current&1),t=Qt(t,e,n),t!==null?t.sibling:null);te(ae,ae.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ag(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),te(ae,ae.current),r)break;return null;case 22:case 23:return e.lanes=0,sg(t,e,n)}return Qt(t,e,n)}var cg,fc,ug,dg;cg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fc=function(){};ug=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,$n(At.current);var i=null;switch(n){case"input":s=Oa(t,s),r=Oa(t,r),i=[];break;case"select":s=ue({},s,{value:void 0}),r=ue({},r,{value:void 0}),i=[];break;case"textarea":s=Fa(t,s),r=Fa(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=po)}Ua(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ls.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ls.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&re("scroll",t),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};dg=function(t,e,n,r){n!==r&&(e.flags|=4)};function us(t,e){if(!ie)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ae(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Z0(t,e,n){var r=e.pendingProps;switch(pu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ae(e),null;case 1:return Qe(e.type)&&mo(),Ae(e),null;case 3:return r=e.stateNode,Br(),se(He),se(Re),Cu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Fi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gt!==null&&(_c(gt),gt=null))),fc(t,e),Ae(e),null;case 5:bu(e);var s=$n(Ks.current);if(n=e.type,t!==null&&e.stateNode!=null)ug(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(E(166));return Ae(e),null}if(t=$n(At.current),Fi(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[kt]=e,r[qs]=i,t=(e.mode&1)!==0,n){case"dialog":re("cancel",r),re("close",r);break;case"iframe":case"object":case"embed":re("load",r);break;case"video":case"audio":for(s=0;s<_s.length;s++)re(_s[s],r);break;case"source":re("error",r);break;case"img":case"image":case"link":re("error",r),re("load",r);break;case"details":re("toggle",r);break;case"input":$d(r,i),re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},re("invalid",r);break;case"textarea":Vd(r,i),re("invalid",r)}Ua(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Li(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Li(r.textContent,a,t),s=["children",""+a]):Ls.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&re("scroll",r)}switch(n){case"input":ki(r),Wd(r,i,!0);break;case"textarea":ki(r),Hd(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=po)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Bp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[kt]=e,t[qs]=r,cg(t,e,!1,!1),e.stateNode=t;e:{switch(o=za(n,r),n){case"dialog":re("cancel",t),re("close",t),s=r;break;case"iframe":case"object":case"embed":re("load",t),s=r;break;case"video":case"audio":for(s=0;s<_s.length;s++)re(_s[s],t);s=r;break;case"source":re("error",t),s=r;break;case"img":case"image":case"link":re("error",t),re("load",t),s=r;break;case"details":re("toggle",t),s=r;break;case"input":$d(t,r),s=Oa(t,r),re("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ue({},r,{value:void 0}),re("invalid",t);break;case"textarea":Vd(t,r),s=Fa(t,r),re("invalid",t);break;default:s=r}Ua(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?$p(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Up(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Fs(t,c):typeof c=="number"&&Fs(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ls.hasOwnProperty(i)?c!=null&&i==="onScroll"&&re("scroll",t):c!=null&&Zc(t,i,c,o))}switch(n){case"input":ki(t),Wd(t,r,!1);break;case"textarea":ki(t),Hd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Nn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ir(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ir(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=po)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ae(e),null;case 6:if(t&&e.stateNode!=null)dg(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(E(166));if(n=$n(Ks.current),$n(At.current),Fi(e)){if(r=e.stateNode,n=e.memoizedProps,r[kt]=e,(i=r.nodeValue!==n)&&(t=et,t!==null))switch(t.tag){case 3:Li(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Li(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[kt]=e,e.stateNode=r}return Ae(e),null;case 13:if(se(ae),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ie&&Ze!==null&&e.mode&1&&!(e.flags&128))km(),Lr(),e.flags|=98560,i=!1;else if(i=Fi(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(E(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(E(317));i[kt]=e}else Lr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ae(e),i=!1}else gt!==null&&(_c(gt),gt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ae.current&1?xe===0&&(xe=3):Ou())),e.updateQueue!==null&&(e.flags|=4),Ae(e),null);case 4:return Br(),fc(t,e),t===null&&Hs(e.stateNode.containerInfo),Ae(e),null;case 10:return vu(e.type._context),Ae(e),null;case 17:return Qe(e.type)&&mo(),Ae(e),null;case 19:if(se(ae),i=e.memoizedState,i===null)return Ae(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)us(i,!1);else{if(xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=bo(t),o!==null){for(e.flags|=128,us(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return te(ae,ae.current&1|2),e.child}t=t.sibling}i.tail!==null&&fe()>zr&&(e.flags|=128,r=!0,us(i,!1),e.lanes=4194304)}else{if(!r)if(t=bo(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),us(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ie)return Ae(e),null}else 2*fe()-i.renderingStartTime>zr&&n!==1073741824&&(e.flags|=128,r=!0,us(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=fe(),e.sibling=null,n=ae.current,te(ae,r?n&1|2:n&1),e):(Ae(e),null);case 22:case 23:return Ru(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Je&1073741824&&(Ae(e),e.subtreeFlags&6&&(e.flags|=8192)):Ae(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function ew(t,e){switch(pu(e),e.tag){case 1:return Qe(e.type)&&mo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Br(),se(He),se(Re),Cu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return bu(e),null;case 13:if(se(ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(E(340));Lr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return se(ae),null;case 4:return Br(),null;case 10:return vu(e.type._context),null;case 22:case 23:return Ru(),null;case 24:return null;default:return null}}var zi=!1,Pe=!1,tw=typeof WeakSet=="function"?WeakSet:Set,P=null;function Nr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){de(t,e,r)}else n.current=null}function pc(t,e,n){try{n()}catch(r){de(t,e,r)}}var Rh=!1;function nw(t,e){if(Ja=uo,t=gm(),hu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var y;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(y=d.firstChild)!==null;)f=d,d=y;for(;;){if(d===t)break t;if(f===n&&++u===s&&(a=o),f===i&&++h===r&&(c=o),(y=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=y}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xa={focusedElem:t,selectionRange:n},uo=!1,P=e;P!==null;)if(e=P,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,P=t;else for(;P!==null;){e=P;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var g=x.memoizedProps,_=x.memoizedState,v=e.stateNode,p=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:pt(e.type,g),_);v.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(w){de(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,P=t;break}P=e.return}return x=Rh,Rh=!1,x}function js(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&pc(e,n,i)}s=s.next}while(s!==r)}}function ll(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function mc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function hg(t){var e=t.alternate;e!==null&&(t.alternate=null,hg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[kt],delete e[qs],delete e[tc],delete e[F0],delete e[B0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fg(t){return t.tag===5||t.tag===3||t.tag===4}function Oh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=po));else if(r!==4&&(t=t.child,t!==null))for(gc(t,e,n),t=t.sibling;t!==null;)gc(t,e,n),t=t.sibling}function yc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yc(t,e,n),t=t.sibling;t!==null;)yc(t,e,n),t=t.sibling}var Se=null,mt=!1;function tn(t,e,n){for(n=n.child;n!==null;)pg(t,e,n),n=n.sibling}function pg(t,e,n){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(Zo,n)}catch{}switch(n.tag){case 5:Pe||Nr(n,e);case 6:var r=Se,s=mt;Se=null,tn(t,e,n),Se=r,mt=s,Se!==null&&(mt?(t=Se,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Se.removeChild(n.stateNode));break;case 18:Se!==null&&(mt?(t=Se,n=n.stateNode,t.nodeType===8?Zl(t.parentNode,n):t.nodeType===1&&Zl(t,n),$s(t)):Zl(Se,n.stateNode));break;case 4:r=Se,s=mt,Se=n.stateNode.containerInfo,mt=!0,tn(t,e,n),Se=r,mt=s;break;case 0:case 11:case 14:case 15:if(!Pe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&pc(n,e,o),s=s.next}while(s!==r)}tn(t,e,n);break;case 1:if(!Pe&&(Nr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){de(n,e,a)}tn(t,e,n);break;case 21:tn(t,e,n);break;case 22:n.mode&1?(Pe=(r=Pe)||n.memoizedState!==null,tn(t,e,n),Pe=r):tn(t,e,n);break;default:tn(t,e,n)}}function Mh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new tw),e.forEach(function(r){var s=dw.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ft(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Se=a.stateNode,mt=!1;break e;case 3:Se=a.stateNode.containerInfo,mt=!0;break e;case 4:Se=a.stateNode.containerInfo,mt=!0;break e}a=a.return}if(Se===null)throw Error(E(160));pg(i,o,s),Se=null,mt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){de(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)mg(e,t),e=e.sibling}function mg(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ft(e,t),It(t),r&4){try{js(3,t,t.return),ll(3,t)}catch(g){de(t,t.return,g)}try{js(5,t,t.return)}catch(g){de(t,t.return,g)}}break;case 1:ft(e,t),It(t),r&512&&n!==null&&Nr(n,n.return);break;case 5:if(ft(e,t),It(t),r&512&&n!==null&&Nr(n,n.return),t.flags&32){var s=t.stateNode;try{Fs(s,"")}catch(g){de(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Lp(s,i),za(a,o);var u=za(a,i);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?$p(s,d):h==="dangerouslySetInnerHTML"?Up(s,d):h==="children"?Fs(s,d):Zc(s,h,d,u)}switch(a){case"input":Ma(s,i);break;case"textarea":Fp(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Ir(s,!!i.multiple,y,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ir(s,!!i.multiple,i.defaultValue,!0):Ir(s,!!i.multiple,i.multiple?[]:"",!1))}s[qs]=i}catch(g){de(t,t.return,g)}}break;case 6:if(ft(e,t),It(t),r&4){if(t.stateNode===null)throw Error(E(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){de(t,t.return,g)}}break;case 3:if(ft(e,t),It(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$s(e.containerInfo)}catch(g){de(t,t.return,g)}break;case 4:ft(e,t),It(t);break;case 13:ft(e,t),It(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Pu=fe())),r&4&&Mh(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Pe=(u=Pe)||h,ft(e,t),Pe=u):ft(e,t),It(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(P=t,h=t.child;h!==null;){for(d=P=h;P!==null;){switch(f=P,y=f.child,f.tag){case 0:case 11:case 14:case 15:js(4,f,f.return);break;case 1:Nr(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(g){de(r,n,g)}}break;case 5:Nr(f,f.return);break;case 22:if(f.memoizedState!==null){Fh(d);continue}}y!==null?(y.return=f,P=y):Fh(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=zp("display",o))}catch(g){de(t,t.return,g)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){de(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ft(e,t),It(t),r&4&&Mh(t);break;case 21:break;default:ft(e,t),It(t)}}function It(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(fg(n)){var r=n;break e}n=n.return}throw Error(E(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Fs(s,""),r.flags&=-33);var i=Oh(t);yc(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Oh(t);gc(t,a,o);break;default:throw Error(E(161))}}catch(c){de(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rw(t,e,n){P=t,gg(t)}function gg(t,e,n){for(var r=(t.mode&1)!==0;P!==null;){var s=P,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||zi;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Pe;a=zi;var u=Pe;if(zi=o,(Pe=c)&&!u)for(P=s;P!==null;)o=P,c=o.child,o.tag===22&&o.memoizedState!==null?Bh(s):c!==null?(c.return=o,P=c):Bh(s);for(;i!==null;)P=i,gg(i),i=i.sibling;P=s,zi=a,Pe=u}Lh(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,P=i):Lh(t)}}function Lh(t){for(;P!==null;){var e=P;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pe||ll(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Pe)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:pt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&_h(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}_h(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&$s(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}Pe||e.flags&512&&mc(e)}catch(f){de(e,e.return,f)}}if(e===t){P=null;break}if(n=e.sibling,n!==null){n.return=e.return,P=n;break}P=e.return}}function Fh(t){for(;P!==null;){var e=P;if(e===t){P=null;break}var n=e.sibling;if(n!==null){n.return=e.return,P=n;break}P=e.return}}function Bh(t){for(;P!==null;){var e=P;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ll(4,e)}catch(c){de(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){de(e,s,c)}}var i=e.return;try{mc(e)}catch(c){de(e,i,c)}break;case 5:var o=e.return;try{mc(e)}catch(c){de(e,o,c)}}}catch(c){de(e,e.return,c)}if(e===t){P=null;break}var a=e.sibling;if(a!==null){a.return=e.return,P=a;break}P=e.return}}var sw=Math.ceil,So=en.ReactCurrentDispatcher,Tu=en.ReactCurrentOwner,ut=en.ReactCurrentBatchConfig,q=0,Ne=null,ge=null,Ie=0,Je=0,Sr=Pn(0),xe=0,Zs=null,Jn=0,al=0,Au=0,ks=null,$e=null,Pu=0,zr=1/0,Mt=null,Eo=!1,vc=null,yn=null,$i=!1,cn=null,Io=0,Ts=0,xc=null,to=-1,no=0;function Fe(){return q&6?fe():to!==-1?to:to=fe()}function vn(t){return t.mode&1?q&2&&Ie!==0?Ie&-Ie:z0.transition!==null?(no===0&&(no=em()),no):(t=K,t!==0||(t=window.event,t=t===void 0?16:lm(t.type)),t):1}function wt(t,e,n,r){if(50<Ts)throw Ts=0,xc=null,Error(E(185));di(t,n,r),(!(q&2)||t!==Ne)&&(t===Ne&&(!(q&2)&&(al|=n),xe===4&&ln(t,Ie)),qe(t,r),n===1&&q===0&&!(e.mode&1)&&(zr=fe()+500,sl&&Dn()))}function qe(t,e){var n=t.callbackNode;zx(t,e);var r=co(t,t===Ne?Ie:0);if(r===0)n!==null&&Gd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Gd(n),e===1)t.tag===0?U0(Uh.bind(null,t)):Em(Uh.bind(null,t)),M0(function(){!(q&6)&&Dn()}),n=null;else{switch(tm(r)){case 1:n=su;break;case 4:n=Xp;break;case 16:n=ao;break;case 536870912:n=Zp;break;default:n=ao}n=Ng(n,yg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function yg(t,e){if(to=-1,no=0,q&6)throw Error(E(327));var n=t.callbackNode;if(Pr()&&t.callbackNode!==n)return null;var r=co(t,t===Ne?Ie:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=jo(t,r);else{e=r;var s=q;q|=2;var i=xg();(Ne!==t||Ie!==e)&&(Mt=null,zr=fe()+500,Hn(t,e));do try{lw();break}catch(a){vg(t,a)}while(!0);yu(),So.current=i,q=s,ge!==null?e=0:(Ne=null,Ie=0,e=xe)}if(e!==0){if(e===2&&(s=Qa(t),s!==0&&(r=s,e=wc(t,s))),e===1)throw n=Zs,Hn(t,0),ln(t,r),qe(t,fe()),n;if(e===6)ln(t,r);else{if(s=t.current.alternate,!(r&30)&&!iw(s)&&(e=jo(t,r),e===2&&(i=Qa(t),i!==0&&(r=i,e=wc(t,i))),e===1))throw n=Zs,Hn(t,0),ln(t,r),qe(t,fe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(E(345));case 2:Ln(t,$e,Mt);break;case 3:if(ln(t,r),(r&130023424)===r&&(e=Pu+500-fe(),10<e)){if(co(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Fe(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ec(Ln.bind(null,t,$e,Mt),e);break}Ln(t,$e,Mt);break;case 4:if(ln(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-xt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*sw(r/1960))-r,10<r){t.timeoutHandle=ec(Ln.bind(null,t,$e,Mt),r);break}Ln(t,$e,Mt);break;case 5:Ln(t,$e,Mt);break;default:throw Error(E(329))}}}return qe(t,fe()),t.callbackNode===n?yg.bind(null,t):null}function wc(t,e){var n=ks;return t.current.memoizedState.isDehydrated&&(Hn(t,e).flags|=256),t=jo(t,e),t!==2&&(e=$e,$e=n,e!==null&&_c(e)),t}function _c(t){$e===null?$e=t:$e.push.apply($e,t)}function iw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!bt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ln(t,e){for(e&=~Au,e&=~al,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xt(e),r=1<<n;t[n]=-1,e&=~r}}function Uh(t){if(q&6)throw Error(E(327));Pr();var e=co(t,0);if(!(e&1))return qe(t,fe()),null;var n=jo(t,e);if(t.tag!==0&&n===2){var r=Qa(t);r!==0&&(e=r,n=wc(t,r))}if(n===1)throw n=Zs,Hn(t,0),ln(t,e),qe(t,fe()),n;if(n===6)throw Error(E(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ln(t,$e,Mt),qe(t,fe()),null}function Du(t,e){var n=q;q|=1;try{return t(e)}finally{q=n,q===0&&(zr=fe()+500,sl&&Dn())}}function Xn(t){cn!==null&&cn.tag===0&&!(q&6)&&Pr();var e=q;q|=1;var n=ut.transition,r=K;try{if(ut.transition=null,K=1,t)return t()}finally{K=r,ut.transition=n,q=e,!(q&6)&&Dn()}}function Ru(){Je=Sr.current,se(Sr)}function Hn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,O0(n)),ge!==null)for(n=ge.return;n!==null;){var r=n;switch(pu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&mo();break;case 3:Br(),se(He),se(Re),Cu();break;case 5:bu(r);break;case 4:Br();break;case 13:se(ae);break;case 19:se(ae);break;case 10:vu(r.type._context);break;case 22:case 23:Ru()}n=n.return}if(Ne=t,ge=t=xn(t.current,null),Ie=Je=e,xe=0,Zs=null,Au=al=Jn=0,$e=ks=null,zn!==null){for(e=0;e<zn.length;e++)if(n=zn[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}zn=null}return t}function vg(t,e){do{var n=ge;try{if(yu(),Xi.current=No,Co){for(var r=ce.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Co=!1}if(Yn=0,be=ye=ce=null,Is=!1,Ys=0,Tu.current=null,n===null||n.return===null){xe=1,Zs=e,ge=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Ie,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Ih(o);if(y!==null){y.flags&=-257,jh(y,o,a,i,e),y.mode&1&&Eh(i,u,e),e=y,c=u;var x=e.updateQueue;if(x===null){var g=new Set;g.add(c),e.updateQueue=g}else x.add(c);break e}else{if(!(e&1)){Eh(i,u,e),Ou();break e}c=Error(E(426))}}else if(ie&&a.mode&1){var _=Ih(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),jh(_,o,a,i,e),mu(Ur(c,a));break e}}i=c=Ur(c,a),xe!==4&&(xe=2),ks===null?ks=[i]:ks.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=tg(i,c,e);wh(i,v);break e;case 1:a=c;var p=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(yn===null||!yn.has(m)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=ng(i,a,e);wh(i,w);break e}}i=i.return}while(i!==null)}_g(n)}catch(C){e=C,ge===n&&n!==null&&(ge=n=n.return);continue}break}while(!0)}function xg(){var t=So.current;return So.current=No,t===null?No:t}function Ou(){(xe===0||xe===3||xe===2)&&(xe=4),Ne===null||!(Jn&268435455)&&!(al&268435455)||ln(Ne,Ie)}function jo(t,e){var n=q;q|=2;var r=xg();(Ne!==t||Ie!==e)&&(Mt=null,Hn(t,e));do try{ow();break}catch(s){vg(t,s)}while(!0);if(yu(),q=n,So.current=r,ge!==null)throw Error(E(261));return Ne=null,Ie=0,xe}function ow(){for(;ge!==null;)wg(ge)}function lw(){for(;ge!==null&&!Px();)wg(ge)}function wg(t){var e=Cg(t.alternate,t,Je);t.memoizedProps=t.pendingProps,e===null?_g(t):ge=e,Tu.current=null}function _g(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ew(n,e),n!==null){n.flags&=32767,ge=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xe=6,ge=null;return}}else if(n=Z0(n,e,Je),n!==null){ge=n;return}if(e=e.sibling,e!==null){ge=e;return}ge=e=t}while(e!==null);xe===0&&(xe=5)}function Ln(t,e,n){var r=K,s=ut.transition;try{ut.transition=null,K=1,aw(t,e,n,r)}finally{ut.transition=s,K=r}return null}function aw(t,e,n,r){do Pr();while(cn!==null);if(q&6)throw Error(E(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(E(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if($x(t,i),t===Ne&&(ge=Ne=null,Ie=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$i||($i=!0,Ng(ao,function(){return Pr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ut.transition,ut.transition=null;var o=K;K=1;var a=q;q|=4,Tu.current=null,nw(t,n),mg(n,t),j0(Xa),uo=!!Ja,Xa=Ja=null,t.current=n,rw(n),Dx(),q=a,K=o,ut.transition=i}else t.current=n;if($i&&($i=!1,cn=t,Io=s),i=t.pendingLanes,i===0&&(yn=null),Mx(n.stateNode),qe(t,fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Eo)throw Eo=!1,t=vc,vc=null,t;return Io&1&&t.tag!==0&&Pr(),i=t.pendingLanes,i&1?t===xc?Ts++:(Ts=0,xc=t):Ts=0,Dn(),null}function Pr(){if(cn!==null){var t=tm(Io),e=ut.transition,n=K;try{if(ut.transition=null,K=16>t?16:t,cn===null)var r=!1;else{if(t=cn,cn=null,Io=0,q&6)throw Error(E(331));var s=q;for(q|=4,P=t.current;P!==null;){var i=P,o=i.child;if(P.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(P=u;P!==null;){var h=P;switch(h.tag){case 0:case 11:case 15:js(8,h,i)}var d=h.child;if(d!==null)d.return=h,P=d;else for(;P!==null;){h=P;var f=h.sibling,y=h.return;if(hg(h),h===u){P=null;break}if(f!==null){f.return=y,P=f;break}P=y}}}var x=i.alternate;if(x!==null){var g=x.child;if(g!==null){x.child=null;do{var _=g.sibling;g.sibling=null,g=_}while(g!==null)}}P=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,P=o;else e:for(;P!==null;){if(i=P,i.flags&2048)switch(i.tag){case 0:case 11:case 15:js(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,P=v;break e}P=i.return}}var p=t.current;for(P=p;P!==null;){o=P;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,P=m;else e:for(o=p;P!==null;){if(a=P,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ll(9,a)}}catch(C){de(a,a.return,C)}if(a===o){P=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,P=w;break e}P=a.return}}if(q=s,Dn(),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(Zo,t)}catch{}r=!0}return r}finally{K=n,ut.transition=e}}return!1}function zh(t,e,n){e=Ur(n,e),e=tg(t,e,1),t=gn(t,e,1),e=Fe(),t!==null&&(di(t,1,e),qe(t,e))}function de(t,e,n){if(t.tag===3)zh(t,t,n);else for(;e!==null;){if(e.tag===3){zh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(yn===null||!yn.has(r))){t=Ur(n,t),t=ng(e,t,1),e=gn(e,t,1),t=Fe(),e!==null&&(di(e,1,t),qe(e,t));break}}e=e.return}}function cw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Fe(),t.pingedLanes|=t.suspendedLanes&n,Ne===t&&(Ie&n)===n&&(xe===4||xe===3&&(Ie&130023424)===Ie&&500>fe()-Pu?Hn(t,0):Au|=n),qe(t,e)}function bg(t,e){e===0&&(t.mode&1?(e=Pi,Pi<<=1,!(Pi&130023424)&&(Pi=4194304)):e=1);var n=Fe();t=Ht(t,e),t!==null&&(di(t,e,n),qe(t,n))}function uw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),bg(t,n)}function dw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(e),bg(t,n)}var Cg;Cg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||He.current)We=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return We=!1,X0(t,e,n);We=!!(t.flags&131072)}else We=!1,ie&&e.flags&1048576&&Im(e,vo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;eo(t,e),t=e.pendingProps;var s=Mr(e,Re.current);Ar(e,n),s=Su(null,e,r,t,s,n);var i=Eu();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qe(r)?(i=!0,go(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,wu(e),s.updater=ol,e.stateNode=s,s._reactInternals=e,lc(e,r,t,n),e=uc(null,e,r,!0,i,n)):(e.tag=0,ie&&i&&fu(e),Me(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(eo(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=fw(r),t=pt(r,t),s){case 0:e=cc(null,e,r,t,n);break e;case 1:e=Ah(null,e,r,t,n);break e;case 11:e=kh(null,e,r,t,n);break e;case 14:e=Th(null,e,r,pt(r.type,t),n);break e}throw Error(E(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pt(r,s),cc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pt(r,s),Ah(t,e,r,s,n);case 3:e:{if(og(e),t===null)throw Error(E(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Dm(t,e),_o(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ur(Error(E(423)),e),e=Ph(t,e,r,n,s);break e}else if(r!==s){s=Ur(Error(E(424)),e),e=Ph(t,e,r,n,s);break e}else for(Ze=mn(e.stateNode.containerInfo.firstChild),et=e,ie=!0,gt=null,n=Am(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Lr(),r===s){e=Qt(t,e,n);break e}Me(t,e,r,n)}e=e.child}return e;case 5:return Rm(e),t===null&&sc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Za(r,s)?o=null:i!==null&&Za(r,i)&&(e.flags|=32),ig(t,e),Me(t,e,o,n),e.child;case 6:return t===null&&sc(e),null;case 13:return lg(t,e,n);case 4:return _u(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Fr(e,null,r,n):Me(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pt(r,s),kh(t,e,r,s,n);case 7:return Me(t,e,e.pendingProps,n),e.child;case 8:return Me(t,e,e.pendingProps.children,n),e.child;case 12:return Me(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,te(xo,r._currentValue),r._currentValue=o,i!==null)if(bt(i.value,o)){if(i.children===s.children&&!He.current){e=Qt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=zt(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),ic(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(E(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ic(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Me(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ar(e,n),s=dt(s),r=r(s),e.flags|=1,Me(t,e,r,n),e.child;case 14:return r=e.type,s=pt(r,e.pendingProps),s=pt(r.type,s),Th(t,e,r,s,n);case 15:return rg(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pt(r,s),eo(t,e),e.tag=1,Qe(r)?(t=!0,go(e)):t=!1,Ar(e,n),eg(e,r,s),lc(e,r,s,n),uc(null,e,r,!0,t,n);case 19:return ag(t,e,n);case 22:return sg(t,e,n)}throw Error(E(156,e.tag))};function Ng(t,e){return Jp(t,e)}function hw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function at(t,e,n,r){return new hw(t,e,n,r)}function Mu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fw(t){if(typeof t=="function")return Mu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===tu)return 11;if(t===nu)return 14}return 2}function xn(t,e){var n=t.alternate;return n===null?(n=at(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ro(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Mu(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case mr:return Qn(n.children,s,i,e);case eu:o=8,s|=8;break;case Aa:return t=at(12,n,e,s|2),t.elementType=Aa,t.lanes=i,t;case Pa:return t=at(13,n,e,s),t.elementType=Pa,t.lanes=i,t;case Da:return t=at(19,n,e,s),t.elementType=Da,t.lanes=i,t;case Rp:return cl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Pp:o=10;break e;case Dp:o=9;break e;case tu:o=11;break e;case nu:o=14;break e;case rn:o=16,r=null;break e}throw Error(E(130,t==null?t:typeof t,""))}return e=at(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Qn(t,e,n,r){return t=at(7,t,r,e),t.lanes=n,t}function cl(t,e,n,r){return t=at(22,t,r,e),t.elementType=Rp,t.lanes=n,t.stateNode={isHidden:!1},t}function la(t,e,n){return t=at(6,t,null,e),t.lanes=n,t}function aa(t,e,n){return e=at(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function pw(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$l(0),this.expirationTimes=$l(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$l(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Lu(t,e,n,r,s,i,o,a,c){return t=new pw(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=at(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wu(i),t}function mw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Sg(t){if(!t)return Sn;t=t._reactInternals;e:{if(or(t)!==t||t.tag!==1)throw Error(E(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(t.tag===1){var n=t.type;if(Qe(n))return Sm(t,n,e)}return e}function Eg(t,e,n,r,s,i,o,a,c){return t=Lu(n,r,!0,t,s,i,o,a,c),t.context=Sg(null),n=t.current,r=Fe(),s=vn(n),i=zt(r,s),i.callback=e??null,gn(n,i,s),t.current.lanes=s,di(t,s,r),qe(t,r),t}function ul(t,e,n,r){var s=e.current,i=Fe(),o=vn(s);return n=Sg(n),e.context===null?e.context=n:e.pendingContext=n,e=zt(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=gn(s,e,o),t!==null&&(wt(t,s,o,i),Ji(t,s,o)),o}function ko(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $h(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Fu(t,e){$h(t,e),(t=t.alternate)&&$h(t,e)}function gw(){return null}var Ig=typeof reportError=="function"?reportError:function(t){console.error(t)};function Bu(t){this._internalRoot=t}dl.prototype.render=Bu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(E(409));ul(t,e,null,null)};dl.prototype.unmount=Bu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xn(function(){ul(null,t,null,null)}),e[Vt]=null}};function dl(t){this._internalRoot=t}dl.prototype.unstable_scheduleHydration=function(t){if(t){var e=sm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<on.length&&e!==0&&e<on[n].priority;n++);on.splice(n,0,t),n===0&&om(t)}};function Uu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Wh(){}function yw(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=ko(o);i.call(u)}}var o=Eg(e,r,t,0,null,!1,!1,"",Wh);return t._reactRootContainer=o,t[Vt]=o.current,Hs(t.nodeType===8?t.parentNode:t),Xn(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=ko(c);a.call(u)}}var c=Lu(t,0,!1,null,null,!1,!1,"",Wh);return t._reactRootContainer=c,t[Vt]=c.current,Hs(t.nodeType===8?t.parentNode:t),Xn(function(){ul(e,c,n,r)}),c}function fl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=ko(o);a.call(c)}}ul(e,o,t,s)}else o=yw(n,e,t,s,r);return ko(o)}nm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ws(e.pendingLanes);n!==0&&(iu(e,n|1),qe(e,fe()),!(q&6)&&(zr=fe()+500,Dn()))}break;case 13:Xn(function(){var r=Ht(t,1);if(r!==null){var s=Fe();wt(r,t,1,s)}}),Fu(t,1)}};ou=function(t){if(t.tag===13){var e=Ht(t,134217728);if(e!==null){var n=Fe();wt(e,t,134217728,n)}Fu(t,134217728)}};rm=function(t){if(t.tag===13){var e=vn(t),n=Ht(t,e);if(n!==null){var r=Fe();wt(n,t,e,r)}Fu(t,e)}};sm=function(){return K};im=function(t,e){var n=K;try{return K=t,e()}finally{K=n}};Wa=function(t,e,n){switch(e){case"input":if(Ma(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=rl(r);if(!s)throw Error(E(90));Mp(r),Ma(r,s)}}}break;case"textarea":Fp(t,n);break;case"select":e=n.value,e!=null&&Ir(t,!!n.multiple,e,!1)}};Hp=Du;Qp=Xn;var vw={usingClientEntryPoint:!1,Events:[fi,xr,rl,Wp,Vp,Du]},ds={findFiberByHostInstance:Un,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xw={bundleType:ds.bundleType,version:ds.version,rendererPackageName:ds.rendererPackageName,rendererConfig:ds.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:en.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Kp(t),t===null?null:t.stateNode},findFiberByHostInstance:ds.findFiberByHostInstance||gw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wi.isDisabled&&Wi.supportsFiber)try{Zo=Wi.inject(xw),Tt=Wi}catch{}}st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vw;st.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uu(e))throw Error(E(200));return mw(t,e,null,n)};st.createRoot=function(t,e){if(!Uu(t))throw Error(E(299));var n=!1,r="",s=Ig;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Lu(t,1,!1,null,null,n,!1,r,s),t[Vt]=e.current,Hs(t.nodeType===8?t.parentNode:t),new Bu(e)};st.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(E(188)):(t=Object.keys(t).join(","),Error(E(268,t)));return t=Kp(e),t=t===null?null:t.stateNode,t};st.flushSync=function(t){return Xn(t)};st.hydrate=function(t,e,n){if(!hl(e))throw Error(E(200));return fl(null,t,e,!0,n)};st.hydrateRoot=function(t,e,n){if(!Uu(t))throw Error(E(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Ig;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Eg(e,null,t,1,n??null,s,!1,i,o),t[Vt]=e.current,Hs(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new dl(e)};st.render=function(t,e,n){if(!hl(e))throw Error(E(200));return fl(null,t,e,!1,n)};st.unmountComponentAtNode=function(t){if(!hl(t))throw Error(E(40));return t._reactRootContainer?(Xn(function(){fl(null,null,t,!1,function(){t._reactRootContainer=null,t[Vt]=null})}),!0):!1};st.unstable_batchedUpdates=Du;st.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!hl(n))throw Error(E(200));if(t==null||t._reactInternals===void 0)throw Error(E(38));return fl(t,e,n,!1,r)};st.version="18.3.1-next-f1338f8080-20240426";function jg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jg)}catch(t){console.error(t)}}jg(),jp.exports=st;var ww=jp.exports,Vh=ww;ka.createRoot=Vh.createRoot,ka.hydrateRoot=Vh.hydrateRoot;/**
 * @remix-run/router v1.17.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function To(){return To=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},To.apply(this,arguments)}var un;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(un||(un={}));const Hh="popstate";function _w(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:c=""}=mi(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),bc("",{pathname:o,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");a=u===-1?c:c.slice(0,u)}return a+"#"+(typeof i=="string"?i:kg(i))}function r(s,i){zu(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return Cw(e,n,r,t)}function Ke(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function zu(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bw(){return Math.random().toString(36).substr(2,8)}function Qh(t,e){return{usr:t.state,key:t.key,idx:e}}function bc(t,e,n,r){return n===void 0&&(n=null),To({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?mi(e):e,{state:n,key:e&&e.key||r||bw()})}function kg(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function mi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Cw(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=un.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(To({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=un.Pop;let _=h(),v=_==null?null:_-u;u=_,c&&c({action:a,location:g.location,delta:v})}function f(_,v){a=un.Push;let p=bc(g.location,_,v);n&&n(p,_),u=h()+1;let m=Qh(p,u),w=g.createHref(p);try{o.pushState(m,"",w)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(w)}i&&c&&c({action:a,location:g.location,delta:1})}function y(_,v){a=un.Replace;let p=bc(g.location,_,v);n&&n(p,_),u=h();let m=Qh(p,u),w=g.createHref(p);o.replaceState(m,"",w),i&&c&&c({action:a,location:g.location,delta:0})}function x(_){let v=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof _=="string"?_:kg(_);return p=p.replace(/ $/,"%20"),Ke(v,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,v)}let g={get action(){return a},get location(){return t(s,o)},listen(_){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Hh,d),c=_,()=>{s.removeEventListener(Hh,d),c=null}},createHref(_){return e(s,_)},createURL:x,encodeLocation(_){let v=x(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:y,go(_){return o.go(_)}};return g}var qh;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(qh||(qh={}));function Nw(t,e,n){return n===void 0&&(n="/"),Sw(t,e,n,!1)}function Sw(t,e,n,r){let s=typeof e=="string"?mi(e):e,i=Pg(s.pathname||"/",n);if(i==null)return null;let o=Tg(t);Ew(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=Lw(i);a=Ow(o[c],u,r)}return a}function Tg(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ke(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Dr([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(Ke(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Tg(i.children,e,h,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:Dw(u,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of Ag(i.path))s(i,o,c)}),e}function Ag(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Ag(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function Ew(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Rw(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Iw=/^:[\w-]+$/,jw=3,kw=2,Tw=1,Aw=10,Pw=-2,Gh=t=>t==="*";function Dw(t,e){let n=t.split("/"),r=n.length;return n.some(Gh)&&(r+=Pw),e&&(r+=kw),n.filter(s=>!Gh(s)).reduce((s,i)=>s+(Iw.test(i)?jw:i===""?Tw:Aw),r)}function Rw(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Ow(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",d=Kh({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),f=c.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=Kh({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Dr([i,d.pathname]),pathnameBase:Fw(Dr([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=Dr([i,d.pathnameBase]))}return o}function Kh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Mw(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,h,d)=>{let{paramName:f,isOptional:y}=h;if(f==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const x=a[d];return y&&!x?u[f]=void 0:u[f]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function Mw(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),zu(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Lw(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zu(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Pg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Dr=t=>t.join("/").replace(/\/\/+/g,"/"),Fw=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function Bw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Dg=["post","put","patch","delete"];new Set(Dg);const Uw=["get",...Dg];new Set(Uw);/**
 * React Router v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ao(){return Ao=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ao.apply(this,arguments)}const zw=b.createContext(null),$w=b.createContext(null),Rg=b.createContext(null),pl=b.createContext(null),ml=b.createContext({outlet:null,matches:[],isDataRoute:!1}),Og=b.createContext(null);function $u(){return b.useContext(pl)!=null}function Ww(){return $u()||Ke(!1),b.useContext(pl).location}function Vw(t,e){return Hw(t,e)}function Hw(t,e,n,r){$u()||Ke(!1);let{navigator:s}=b.useContext(Rg),{matches:i}=b.useContext(ml),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Ww(),h;if(e){var d;let _=typeof e=="string"?mi(e):e;c==="/"||(d=_.pathname)!=null&&d.startsWith(c)||Ke(!1),h=_}else h=u;let f=h.pathname||"/",y=f;if(c!=="/"){let _=c.replace(/^\//,"").split("/");y="/"+f.replace(/^\//,"").split("/").slice(_.length).join("/")}let x=Nw(t,{pathname:y}),g=Yw(x&&x.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:Dr([c,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:Dr([c,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,n,r);return e&&g?b.createElement(pl.Provider,{value:{location:Ao({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:un.Pop}},g):g}function Qw(){let t=e_(),e=Bw(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:s},n):null,null)}const qw=b.createElement(Qw,null);class Gw extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(ml.Provider,{value:this.props.routeContext},b.createElement(Og.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Kw(t){let{routeContext:e,match:n,children:r}=t,s=b.useContext(zw);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(ml.Provider,{value:e},r)}function Yw(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Ke(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:y}=n,x=d.route.loader&&f[d.route.id]===void 0&&(!y||y[d.route.id]===void 0);if(d.route.lazy||x){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let y,x=!1,g=null,_=null;n&&(y=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||qw,c&&(u<0&&f===0?(x=!0,_=null):u===f&&(x=!0,_=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),p=()=>{let m;return y?m=g:x?m=_:d.route.Component?m=b.createElement(d.route.Component,null):d.route.element?m=d.route.element:m=h,b.createElement(Kw,{match:d,routeContext:{outlet:h,matches:v,isDataRoute:n!=null},children:m})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?b.createElement(Gw,{location:n.location,revalidation:n.revalidation,component:g,error:y,children:p(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):p()},null)}var Cc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Cc||{});function Jw(t){let e=b.useContext($w);return e||Ke(!1),e}function Xw(t){let e=b.useContext(ml);return e||Ke(!1),e}function Zw(t){let e=Xw(),n=e.matches[e.matches.length-1];return n.route.id||Ke(!1),n.route.id}function e_(){var t;let e=b.useContext(Og),n=Jw(Cc.UseRouteError),r=Zw(Cc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Oe(t){Ke(!1)}function t_(t){let{basename:e="/",children:n=null,location:r,navigationType:s=un.Pop,navigator:i,static:o=!1,future:a}=t;$u()&&Ke(!1);let c=e.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:c,navigator:i,static:o,future:Ao({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=mi(r));let{pathname:h="/",search:d="",hash:f="",state:y=null,key:x="default"}=r,g=b.useMemo(()=>{let _=Pg(h,c);return _==null?null:{location:{pathname:_,search:d,hash:f,state:y,key:x},navigationType:s}},[c,h,d,f,y,x,s]);return g==null?null:b.createElement(Rg.Provider,{value:u},b.createElement(pl.Provider,{children:n,value:g}))}function n_(t){let{children:e,location:n}=t;return Vw(Nc(e),n)}new Promise(()=>{});function Nc(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,s)=>{if(!b.isValidElement(r))return;let i=[...e,s];if(r.type===b.Fragment){n.push.apply(n,Nc(r.props.children,i));return}r.type!==Oe&&Ke(!1),!r.props.index||!r.props.children||Ke(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Nc(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const r_="6";try{window.__reactRouterVersion=r_}catch{}const s_="startTransition",Yh=cx[s_];function i_(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=_w({window:s,v5Compat:!0}));let o=i.current,[a,c]=b.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=b.useCallback(d=>{u&&Yh?Yh(()=>c(d)):c(d)},[c,u]);return b.useLayoutEffect(()=>o.listen(h),[o,h]),b.createElement(t_,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var Jh;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Jh||(Jh={}));var Xh;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Xh||(Xh={}));const hs=""+new URL("bubble-Dy97b3Cx.png",import.meta.url).href,fs=""+new URL("Pencil-shUlLtKB.png",import.meta.url).href,Mg=""+new URL("select-DKsCgP1g.png",import.meta.url).href,ee=({items:t,onSelect:e,style:n,columns:r,all:s,ICON:i,name:o})=>{const[a,c]=b.useState(!1),[u,h]=b.useState(""),[d,f]=b.useState(""),[y,x]=b.useState(""),g=C=>{C.preventDefault(),c(!0)},_=(C,N)=>{C.stopPropagation(),C.preventDefault(),console.log(N),e(s?N:N.shortForm||N.name||N.Name),c(!1)},v=C=>{C.stopPropagation(),C.preventDefault(),c(!1),h(""),f(""),x("")},p=()=>{f(""),x("")},m=C=>{const[N,I,S]=C.split("/");return new Date(`${S}-${I}-${N}`)},w=t.filter(C=>{const N=r.some(I=>String(C[I.key]||"").toLowerCase().includes(u.toLowerCase()));if(o==="invoiceList"&&d&&y){const I=m(C.date);if(isNaN(I))return!1;const S=new Date(d),k=new Date(y),T=I>=S&&I<=k;return N&&T}return N});return l.jsxs("div",{className:`absolute ${n.top} ]`,children:[l.jsx("button",{onClick:g,type:"button",children:l.jsx("img",{src:i||Mg,className:`${i?"w-6 h-6":"w-4 h-4"}`,alt:"Select"})}),a&&l.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex justify-center items-center z-50",onClick:v,children:l.jsxs("div",{className:"bg-background  rounded-lg shadow-lg p-6 w-[50vw] max-w-full max-h-[80vh] overflow-auto",onClick:C=>C.stopPropagation(),children:[l.jsx("h2",{className:"text-lg font-semibold mb-4 text-center text-blue-800 italic ",children:"Select an Item"}),l.jsx("input",{type:"text",value:u,onChange:C=>h(C.target.value),className:"border py-1 px-2 mb-4 w-full",placeholder:"Search"}),o==="invoiceList"&&l.jsxs("div",{className:"mb-4 flex items-center",children:[l.jsxs("label",{className:"mr-2",children:["From:",l.jsx("input",{type:"date",value:d,onChange:C=>f(C.target.value),className:"border p-2 mx-2"})]}),l.jsxs("label",{children:["To:",l.jsx("input",{type:"date",value:y,onChange:C=>x(C.target.value),className:"border p-2 mx-2"})]}),l.jsx("button",{onClick:p,type:"button",className:"ml-4 px-4 py-2 bg-blue-500 text-white rounded",children:"Reset"})]}),l.jsxs("table",{className:"w-full table-auto ",children:[l.jsx("thead",{className:"bg-blue-800 text-white text-sm ",children:l.jsx("tr",{className:"",children:r.map(C=>l.jsx("th",{className:"px-4 font-medium border",children:C.label},C.key))})}),l.jsx("tbody",{className:"bg-blue-100 ",children:w.length>0?w.map(C=>l.jsx("tr",{className:"cursor-pointer  hover:bg-orange-300",onClick:N=>_(N,C),children:r.map(N=>l.jsx("td",{className:"px-4 py-1 border",children:C[N.key]||""},N.key))},C.id||C.shortForm)):l.jsx("tr",{children:l.jsx("td",{colSpan:r.length,className:"px-4 py-2 text-center",children:"No results found"})})})]}),l.jsx("button",{onClick:v,type:"button",className:"mt-4 px-4 py-2 bg-red-500 text-white rounded",children:"Close"})]})})]})};var Lg={exports:{}};(function(t,e){(function(r,s){t.exports=s()})(window,function(){return function(n){var r={};function s(i){if(r[i])return r[i].exports;var o=r[i]={i,l:!1,exports:{}};return n[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=n,s.c=r,s.d=function(i,o,a){s.o(i,o)||Object.defineProperty(i,o,{enumerable:!0,get:a})},s.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},s.t=function(i,o){if(o&1&&(i=s(i)),o&8||o&4&&typeof i=="object"&&i&&i.__esModule)return i;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:i}),o&2&&typeof i!="string")for(var c in i)s.d(a,c,(function(u){return i[u]}).bind(null,c));return a},s.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(o,"a",o),o},s.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},s.p="",s(s.s=0)}({"./src/index.js":function(n,r,s){s.r(r),s("./src/sass/index.scss");var i=s("./src/js/init.js"),o=i.default.init;typeof window<"u"&&(window.printJS=o),r.default=o},"./src/js/browser.js":function(n,r,s){s.r(r);var i={isFirefox:function(){return typeof InstallTrigger<"u"},isIE:function(){return navigator.userAgent.indexOf("MSIE")!==-1||!!document.documentMode},isEdge:function(){return!i.isIE()&&!!window.StyleMedia},isChrome:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;return!!a.chrome},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||navigator.userAgent.toLowerCase().indexOf("safari")!==-1},isIOSChrome:function(){return navigator.userAgent.toLowerCase().indexOf("crios")!==-1}};r.default=i},"./src/js/functions.js":function(n,r,s){s.r(r),s.d(r,"addWrapper",function(){return c}),s.d(r,"capitalizePrint",function(){return u}),s.d(r,"collectStyles",function(){return h}),s.d(r,"addHeader",function(){return f}),s.d(r,"cleanUp",function(){return y}),s.d(r,"isRawHTML",function(){return x});var i=s("./src/js/modal.js"),o=s("./src/js/browser.js");function a(g){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(v){return typeof v}:a=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},a(g)}function c(g,_){var v="font-family:"+_.font+" !important; font-size: "+_.font_size+" !important; width:100%;";return'<div style="'+v+'">'+g+"</div>"}function u(g){return g.charAt(0).toUpperCase()+g.slice(1)}function h(g,_){for(var v=document.defaultView||window,p="",m=v.getComputedStyle(g,""),w=0;w<m.length;w++)(_.targetStyles.indexOf("*")!==-1||_.targetStyle.indexOf(m[w])!==-1||d(_.targetStyles,m[w]))&&m.getPropertyValue(m[w])&&(p+=m[w]+":"+m.getPropertyValue(m[w])+";");return p+="max-width: "+_.maxWidth+"px !important; font-size: "+_.font_size+" !important;",p}function d(g,_){for(var v=0;v<g.length;v++)if(a(_)==="object"&&_.indexOf(g[v])!==-1)return!0;return!1}function f(g,_){var v=document.createElement("div");if(x(_.header))v.innerHTML=_.header;else{var p=document.createElement("h1"),m=document.createTextNode(_.header);p.appendChild(m),p.setAttribute("style",_.headerStyle),v.appendChild(p)}g.insertBefore(v,g.childNodes[0])}function y(g){g.showModal&&i.default.close(),g.onLoadingEnd&&g.onLoadingEnd(),(g.showModal||g.onLoadingStart)&&window.URL.revokeObjectURL(g.printable);var _="mouseover";(o.default.isChrome()||o.default.isFirefox())&&(_="focus");var v=function p(){window.removeEventListener(_,p),g.onPrintDialogClose();var m=document.getElementById(g.frameId);m&&m.remove()};window.addEventListener(_,v)}function x(g){var _=new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>");return _.test(g)}},"./src/js/html.js":function(n,r,s){s.r(r);var i=s("./src/js/functions.js"),o=s("./src/js/print.js");function a(h){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(f){return typeof f}:a=function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},a(h)}r.default={print:function(d,f){var y=u(d.printable)?d.printable:document.getElementById(d.printable);if(!y){window.console.error("Invalid HTML element id: "+d.printable);return}d.printableElement=c(y,d),d.header&&Object(i.addHeader)(d.printableElement,d),o.default.send(d,f)}};function c(h,d){for(var f=h.cloneNode(),y=Array.prototype.slice.call(h.childNodes),x=0;x<y.length;x++)if(d.ignoreElements.indexOf(y[x].id)===-1){var g=c(y[x],d);f.appendChild(g)}switch(d.scanStyles&&h.nodeType===1&&f.setAttribute("style",Object(i.collectStyles)(h,d)),h.tagName){case"SELECT":f.value=h.value;break;case"CANVAS":f.getContext("2d").drawImage(h,0,0);break}return f}function u(h){return a(h)==="object"&&h&&(h instanceof HTMLElement||h.nodeType===1)}},"./src/js/image.js":function(n,r,s){s.r(r);var i=s("./src/js/functions.js"),o=s("./src/js/print.js"),a=s("./src/js/browser.js");r.default={print:function(u,h){u.printable.constructor!==Array&&(u.printable=[u.printable]),u.printableElement=document.createElement("div"),u.printable.forEach(function(d){var f=document.createElement("img");if(f.setAttribute("style",u.imageStyle),f.src=d,a.default.isFirefox()){var y=f.src;f.src=y}var x=document.createElement("div");x.appendChild(f),u.printableElement.appendChild(x)}),u.header&&Object(i.addHeader)(u.printableElement,u),o.default.send(u,h)}}},"./src/js/init.js":function(n,r,s){s.r(r);var i=s("./src/js/browser.js"),o=s("./src/js/modal.js"),a=s("./src/js/pdf.js"),c=s("./src/js/html.js"),u=s("./src/js/raw-html.js"),h=s("./src/js/image.js"),d=s("./src/js/json.js");function f(x){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?f=function(_){return typeof _}:f=function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},f(x)}var y=["pdf","html","image","json","raw-html"];r.default={init:function(){var g={printable:null,fallbackPrintable:null,type:"pdf",header:null,headerStyle:"font-weight: 300;",maxWidth:800,properties:null,gridHeaderStyle:"font-weight: bold; padding: 5px; border: 1px solid #dddddd;",gridStyle:"border: 1px solid lightgray; margin-bottom: -1px;",showModal:!1,onError:function(N){throw N},onLoadingStart:null,onLoadingEnd:null,onPrintDialogClose:function(){},onIncompatibleBrowser:function(){},modalMessage:"Retrieving Document...",frameId:"printJS",printableElement:null,documentTitle:"Document",targetStyle:["clear","display","width","min-width","height","min-height","max-height"],targetStyles:["border","box","break","text-decoration"],ignoreElements:[],repeatTableHeader:!0,css:null,style:null,scanStyles:!0,base64:!1,onPdfOpen:null,font:"TimesNewRoman",font_size:"12pt",honorMarginPadding:!0,honorColor:!1,imageStyle:"max-width: 100%;"},_=arguments[0];if(_===void 0)throw new Error("printJS expects at least 1 attribute.");switch(f(_)){case"string":g.printable=encodeURI(_),g.fallbackPrintable=g.printable,g.type=arguments[1]||g.type;break;case"object":g.printable=_.printable,g.fallbackPrintable=typeof _.fallbackPrintable<"u"?_.fallbackPrintable:g.printable,g.fallbackPrintable=g.base64?"data:application/pdf;base64,".concat(g.fallbackPrintable):g.fallbackPrintable;for(var v in g)v==="printable"||v==="fallbackPrintable"||(g[v]=typeof _[v]<"u"?_[v]:g[v]);break;default:throw new Error('Unexpected argument type! Expected "string" or "object", got '+f(_))}if(!g.printable)throw new Error("Missing printable information.");if(!g.type||typeof g.type!="string"||y.indexOf(g.type.toLowerCase())===-1)throw new Error("Invalid print type. Available types are: pdf, html, image and json.");g.showModal&&o.default.show(g),g.onLoadingStart&&g.onLoadingStart();var p=document.getElementById(g.frameId);p&&p.parentNode.removeChild(p);var m=document.createElement("iframe");switch(i.default.isFirefox()?m.setAttribute("style","width: 1px; height: 100px; position: fixed; left: 0; top: 0; opacity: 0; border-width: 0; margin: 0; padding: 0"):m.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),m.setAttribute("id",g.frameId),g.type!=="pdf"&&(m.srcdoc="<html><head><title>"+g.documentTitle+"</title>",g.css&&(Array.isArray(g.css)||(g.css=[g.css]),g.css.forEach(function(C){m.srcdoc+='<link rel="stylesheet" href="'+C+'">'})),m.srcdoc+="</head><body></body></html>"),g.type){case"pdf":if(i.default.isIE())try{console.info("Print.js doesn't support PDF printing in Internet Explorer.");var w=window.open(g.fallbackPrintable,"_blank");w.focus(),g.onIncompatibleBrowser()}catch(C){g.onError(C)}finally{g.showModal&&o.default.close(),g.onLoadingEnd&&g.onLoadingEnd()}else a.default.print(g,m);break;case"image":h.default.print(g,m);break;case"html":c.default.print(g,m);break;case"raw-html":u.default.print(g,m);break;case"json":d.default.print(g,m);break}}}},"./src/js/json.js":function(n,r,s){s.r(r);var i=s("./src/js/functions.js"),o=s("./src/js/print.js");function a(u){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(d){return typeof d}:a=function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},a(u)}r.default={print:function(h,d){if(a(h.printable)!=="object")throw new Error("Invalid javascript data object (JSON).");if(typeof h.repeatTableHeader!="boolean")throw new Error("Invalid value for repeatTableHeader attribute (JSON).");if(!h.properties||!Array.isArray(h.properties))throw new Error("Invalid properties array for your JSON data.");h.properties=h.properties.map(function(f){return{field:a(f)==="object"?f.field:f,displayName:a(f)==="object"?f.displayName:f,columnSize:a(f)==="object"&&f.columnSize?f.columnSize+";":100/h.properties.length+"%;"}}),h.printableElement=document.createElement("div"),h.header&&Object(i.addHeader)(h.printableElement,h),h.printableElement.innerHTML+=c(h),o.default.send(h,d)}};function c(u){var h=u.printable,d=u.properties,f='<table style="border-collapse: collapse; width: 100%;">';u.repeatTableHeader&&(f+="<thead>"),f+="<tr>";for(var y=0;y<d.length;y++)f+='<th style="width:'+d[y].columnSize+";"+u.gridHeaderStyle+'">'+Object(i.capitalizePrint)(d[y].displayName)+"</th>";f+="</tr>",u.repeatTableHeader&&(f+="</thead>"),f+="<tbody>";for(var x=0;x<h.length;x++){f+="<tr>";for(var g=0;g<d.length;g++){var _=h[x],v=d[g].field.split(".");if(v.length>1)for(var p=0;p<v.length;p++)_=_[v[p]];else _=_[d[g].field];f+='<td style="width:'+d[g].columnSize+u.gridStyle+'">'+_+"</td>"}f+="</tr>"}return f+="</tbody></table>",f}},"./src/js/modal.js":function(n,r,s){s.r(r);var i={show:function(a){var c="font-family:sans-serif; display:table; text-align:center; font-weight:300; font-size:30px; left:0; top:0;position:fixed; z-index: 9990;color: #0460B5; width: 100%; height: 100%; background-color:rgba(255,255,255,.9);transition: opacity .3s ease;",u=document.createElement("div");u.setAttribute("style",c),u.setAttribute("id","printJS-Modal");var h=document.createElement("div");h.setAttribute("style","display:table-cell; vertical-align:middle; padding-bottom:100px;");var d=document.createElement("div");d.setAttribute("class","printClose"),d.setAttribute("id","printClose"),h.appendChild(d);var f=document.createElement("span");f.setAttribute("class","printSpinner"),h.appendChild(f);var y=document.createTextNode(a.modalMessage);h.appendChild(y),u.appendChild(h),document.getElementsByTagName("body")[0].appendChild(u),document.getElementById("printClose").addEventListener("click",function(){i.close()})},close:function(){var a=document.getElementById("printJS-Modal");a&&a.parentNode.removeChild(a)}};r.default=i},"./src/js/pdf.js":function(n,r,s){s.r(r);var i=s("./src/js/print.js"),o=s("./src/js/functions.js");r.default={print:function(u,h){if(u.base64){var d=Uint8Array.from(atob(u.printable),function(y){return y.charCodeAt(0)});a(u,h,d);return}u.printable=/^(blob|http|\/\/)/i.test(u.printable)?u.printable:window.location.origin+(u.printable.charAt(0)!=="/"?"/"+u.printable:u.printable);var f=new window.XMLHttpRequest;f.responseType="arraybuffer",f.addEventListener("error",function(){Object(o.cleanUp)(u),u.onError(f.statusText,f)}),f.addEventListener("load",function(){if([200,201].indexOf(f.status)===-1){Object(o.cleanUp)(u),u.onError(f.statusText,f);return}a(u,h,f.response)}),f.open("GET",u.printable,!0),f.send()}};function a(c,u,h){var d=new window.Blob([h],{type:"application/pdf"});d=window.URL.createObjectURL(d),u.setAttribute("src",d),i.default.send(c,u)}},"./src/js/print.js":function(n,r,s){s.r(r);var i=s("./src/js/browser.js"),o=s("./src/js/functions.js"),a={send:function(f,y){document.getElementsByTagName("body")[0].appendChild(y);var x=document.getElementById(f.frameId);x.onload=function(){if(f.type==="pdf"){i.default.isFirefox()?setTimeout(function(){return c(x,f)},1e3):c(x,f);return}var g=x.contentWindow||x.contentDocument;if(g.document&&(g=g.document),g.body.appendChild(f.printableElement),f.type!=="pdf"&&f.style){var _=document.createElement("style");_.innerHTML=f.style,g.head.appendChild(_)}var v=g.getElementsByTagName("img");v.length>0?u(Array.from(v)).then(function(){return c(x,f)}):c(x,f)}}};function c(d,f){try{if(d.focus(),i.default.isEdge()||i.default.isIE())try{d.contentWindow.document.execCommand("print",!1,null)}catch{d.contentWindow.print()}else d.contentWindow.print()}catch(y){f.onError(y)}finally{i.default.isFirefox()&&(d.style.visibility="hidden",d.style.left="-1px"),Object(o.cleanUp)(f)}}function u(d){var f=d.map(function(y){if(y.src&&y.src!==window.location.href)return h(y)});return Promise.all(f)}function h(d){return new Promise(function(f){var y=function x(){!d||typeof d.naturalWidth>"u"||d.naturalWidth===0||!d.complete?setTimeout(x,500):f()};y()})}r.default=a},"./src/js/raw-html.js":function(n,r,s){s.r(r);var i=s("./src/js/print.js");r.default={print:function(a,c){a.printableElement=document.createElement("div"),a.printableElement.setAttribute("style","width:100%"),a.printableElement.innerHTML=a.printable,i.default.send(a,c)}}},"./src/sass/index.scss":function(n,r,s){},0:function(n,r,s){n.exports=s("./src/index.js")}}).default})})(Lg);var o_=Lg.exports;const l_=mp(o_),a_=()=>{l_({printable:"product-list",type:"html",style:".product-list { font-size: 14px; }"})},c_=({invoiceData:t})=>{const[e,n]=b.useState(null);if(b.useEffect(()=>{n(t)},[t]),!e)return l.jsx("p",{children:"Loading..."});const r=()=>{a_()};return l.jsxs("div",{id:"invoice-container",style:{width:"100%",padding:"20px",fontFamily:"Arial, sans-serif"},children:[l.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[l.jsx("img",{src:"path/to/shop-logo.png",alt:"Shop Logo",style:{width:"100%"}}),l.jsx("h2",{children:"Shop Name"}),l.jsx("p",{children:"123 Main St, City, State"}),l.jsx("p",{children:"Phone: (123) 456-7890 | Email: shop@example.com"})]}),l.jsxs("div",{children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Invoice #:"})," ",e.DocNo]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Date:"})," ",new Date(e.date).toLocaleDateString()]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Customer:"})," ",e.name]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Salesman:"})," ",e.sMan]})]}),l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"20px"},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Product"}),l.jsx("th",{children:"Quantity"}),l.jsx("th",{children:"Price"}),l.jsx("th",{children:"Total"})]})}),l.jsx("tbody",{children:e.products.map((s,i)=>l.jsxs("tr",{children:[l.jsx("td",{children:s.name}),l.jsx("td",{style:{textAlign:"center"},children:s.quantity}),l.jsxs("td",{style:{textAlign:"right"},children:["$",s.price]}),l.jsxs("td",{style:{textAlign:"right"},children:["$",s.quantity*s.price]})]},i))})]}),l.jsxs("div",{style:{textAlign:"right",marginTop:"20px"},children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Gross Total:"})," $",e.grossTotal]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Discount:"})," $",e.discount]}),l.jsxs("p",{children:[l.jsx("strong",{children:"VAT:"})," $",e.vatAmount]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Net Total:"})," $",e.netTotal]})]}),l.jsx("button",{onClick:r,style:{marginTop:"20px"},children:"Print Invoice"})]})};var Zh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j=function(t,e){if(!t)throw Yr(e)},Yr=function(t){return new Error("Firebase Database ("+Fg.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},u_=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Wu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let f=(a&15)<<2|u>>6,y=u&63;c||(y=64,o||(f=64)),r.push(n[h],n[d],n[f],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Bg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):u_(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||d==null)throw new d_;const f=i<<2|a>>4;if(r.push(f),u!==64){const y=a<<4&240|u>>2;if(r.push(y),d!==64){const x=u<<6&192|d;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class d_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ug=function(t){const e=Bg(t);return Wu.encodeByteArray(e,!0)},Po=function(t){return Ug(t).replace(/\./g,"")},Sc=function(t){try{return Wu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(t){return zg(void 0,t)}function zg(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!f_(n)||(t[n]=zg(t[n],e[n]));return t}function f_(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_=()=>p_().__FIREBASE_DEFAULTS__,g_=()=>{if(typeof process>"u"||typeof Zh>"u")return;const t=Zh.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},y_=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Sc(t[1]);return e&&JSON.parse(e)},$g=()=>{try{return m_()||g_()||y_()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},v_=t=>{var e,n;return(n=(e=$g())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},x_=t=>{const e=v_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Wg=()=>{var t;return(t=$g())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Po(JSON.stringify(n)),Po(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(__())}function b_(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function C_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Hg(){return Fg.NODE_ADMIN===!0}function Qg(){try{return typeof indexedDB=="object"}catch{return!1}}function qg(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function N_(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="FirebaseError";class lr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=S_,Object.setPrototypeOf(this,lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gl.prototype.create)}}class gl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?E_(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new lr(s,a,r)}}function E_(t,e){return t.replace(I_,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const I_=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(t){return JSON.parse(t)}function ve(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=ei(Sc(i[0])||""),n=ei(Sc(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},j_=function(t){const e=Gg(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},k_=function(t){const e=Gg(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Zn(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function ef(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Do(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function Ro(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(tf(i)&&tf(o)){if(!Ro(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function tf(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,h;for(let d=0;d<80;d++){d<40?d<20?(u=a^i&(o^a),h=1518500249):(u=i^o^a,h=1859775393):d<60?(u=i&o|a&(i|o),h=2400959708):(u=i^o^a,h=3395469782);const f=(s<<5|s>>>27)+u+c+h+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function yl(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,j(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},vl=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=1e3,R_=2,O_=4*60*60*1e3,M_=.5;function nf(t,e=D_,n=R_){const r=e*Math.pow(n,t),s=Math.round(M_*r*(Math.random()-.5)*2);return Math.min(O_,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(t){return t&&t._delegate?t._delegate:t}class qt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Jr;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(B_(e))try{this.getOrInitializeService({instanceIdentifier:Fn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Fn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fn){return this.instances.has(e)}getOptions(e=Fn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:F_(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fn){return this.component?this.component.multipleInstances?e:Fn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function F_(t){return t===Fn?void 0:t}function B_(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new L_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(X||(X={}));const z_={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},$_=X.INFO,W_={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},V_=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=W_[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vu{constructor(e){this.name=e,this._logLevel=$_,this._logHandler=V_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in X))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?z_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...e),this._logHandler(this,X.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...e),this._logHandler(this,X.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,X.INFO,...e),this._logHandler(this,X.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,X.WARN,...e),this._logHandler(this,X.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...e),this._logHandler(this,X.ERROR,...e)}}const H_=(t,e)=>e.some(n=>t instanceof n);let rf,sf;function Q_(){return rf||(rf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function q_(){return sf||(sf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kg=new WeakMap,Ec=new WeakMap,Yg=new WeakMap,ca=new WeakMap,Hu=new WeakMap;function G_(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(wn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Kg.set(n,t)}).catch(()=>{}),Hu.set(e,t),e}function K_(t){if(Ec.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Ec.set(t,e)}let Ic={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ec.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Yg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Y_(t){Ic=t(Ic)}function J_(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ua(this),e,...n);return Yg.set(r,e.sort?e.sort():[e]),wn(r)}:q_().includes(t)?function(...e){return t.apply(ua(this),e),wn(Kg.get(this))}:function(...e){return wn(t.apply(ua(this),e))}}function X_(t){return typeof t=="function"?J_(t):(t instanceof IDBTransaction&&K_(t),H_(t,Q_())?new Proxy(t,Ic):t)}function wn(t){if(t instanceof IDBRequest)return G_(t);if(ca.has(t))return ca.get(t);const e=X_(t);return e!==t&&(ca.set(t,e),Hu.set(e,t)),e}const ua=t=>Hu.get(t);function Jg(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=wn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(wn(o.result),c.oldVersion,c.newVersion,wn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Z_=["get","getKey","getAll","getAllKeys","count"],eb=["put","add","delete","clear"],da=new Map;function of(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(da.get(e))return da.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=eb.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Z_.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return da.set(e,i),i}Y_(t=>({...t,get:(e,n,r)=>of(e,n)||t.get(e,n,r),has:(e,n)=>!!of(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nb(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function nb(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jc="@firebase/app",lf="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt=new Vu("@firebase/app"),rb="@firebase/app-compat",sb="@firebase/analytics-compat",ib="@firebase/analytics",ob="@firebase/app-check-compat",lb="@firebase/app-check",ab="@firebase/auth",cb="@firebase/auth-compat",ub="@firebase/database",db="@firebase/data-connect",hb="@firebase/database-compat",fb="@firebase/functions",pb="@firebase/functions-compat",mb="@firebase/installations",gb="@firebase/installations-compat",yb="@firebase/messaging",vb="@firebase/messaging-compat",xb="@firebase/performance",wb="@firebase/performance-compat",_b="@firebase/remote-config",bb="@firebase/remote-config-compat",Cb="@firebase/storage",Nb="@firebase/storage-compat",Sb="@firebase/firestore",Eb="@firebase/vertexai-preview",Ib="@firebase/firestore-compat",jb="firebase",kb="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc="[DEFAULT]",Tb={[jc]:"fire-core",[rb]:"fire-core-compat",[ib]:"fire-analytics",[sb]:"fire-analytics-compat",[lb]:"fire-app-check",[ob]:"fire-app-check-compat",[ab]:"fire-auth",[cb]:"fire-auth-compat",[ub]:"fire-rtdb",[db]:"fire-data-connect",[hb]:"fire-rtdb-compat",[fb]:"fire-fn",[pb]:"fire-fn-compat",[mb]:"fire-iid",[gb]:"fire-iid-compat",[yb]:"fire-fcm",[vb]:"fire-fcm-compat",[xb]:"fire-perf",[wb]:"fire-perf-compat",[_b]:"fire-rc",[bb]:"fire-rc-compat",[Cb]:"fire-gcs",[Nb]:"fire-gcs-compat",[Sb]:"fire-fst",[Ib]:"fire-fst-compat",[Eb]:"fire-vertex","fire-js":"fire-js",[jb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=new Map,Ab=new Map,Tc=new Map;function af(t,e){try{t.container.addComponent(e)}catch(n){Gt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function En(t){const e=t.name;if(Tc.has(e))return Gt.debug(`There were multiple attempts to register component ${e}.`),!1;Tc.set(e,t);for(const n of Oo.values())af(n,t);for(const n of Ab.values())af(n,t);return!0}function gi(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_n=new gl("app","Firebase",Pb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _n.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb=kb;function Xg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:kc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw _n.create("bad-app-name",{appName:String(s)});if(n||(n=Wg()),!n)throw _n.create("no-options");const i=Oo.get(s);if(i){if(Ro(n,i.options)&&Ro(r,i.config))return i;throw _n.create("duplicate-app",{appName:s})}const o=new U_(s);for(const c of Tc.values())o.addComponent(c);const a=new Db(n,r,o);return Oo.set(s,a),a}function Zg(t=kc){const e=Oo.get(t);if(!e&&t===kc&&Wg())return Xg();if(!e)throw _n.create("no-app",{appName:t});return e}function Pt(t,e,n){var r;let s=(r=Tb[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gt.warn(a.join(" "));return}En(new qt(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="firebase-heartbeat-database",Mb=1,ti="firebase-heartbeat-store";let ha=null;function ey(){return ha||(ha=Jg(Ob,Mb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ti)}catch(n){console.warn(n)}}}}).catch(t=>{throw _n.create("idb-open",{originalErrorMessage:t.message})})),ha}async function Lb(t){try{const n=(await ey()).transaction(ti),r=await n.objectStore(ti).get(ty(t));return await n.done,r}catch(e){if(e instanceof lr)Gt.warn(e.message);else{const n=_n.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gt.warn(n.message)}}}async function cf(t,e){try{const r=(await ey()).transaction(ti,"readwrite");await r.objectStore(ti).put(e,ty(t)),await r.done}catch(n){if(n instanceof lr)Gt.warn(n.message);else{const r=_n.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Gt.warn(r.message)}}}function ty(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb=1024,Bb=30*24*60*60*1e3;class Ub{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $b(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=uf();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Bb}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Gt.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=uf(),{heartbeatsToSend:r,unsentEntries:s}=zb(this._heartbeatsCache.heartbeats),i=Po(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Gt.warn(n),""}}}function uf(){return new Date().toISOString().substring(0,10)}function zb(t,e=Fb){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),df(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),df(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class $b{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Qg()?qg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Lb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return cf(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return cf(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function df(t){return Po(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(t){En(new qt("platform-logger",e=>new tb(e),"PRIVATE")),En(new qt("heartbeat",e=>new Ub(e),"PRIVATE")),Pt(jc,lf,t),Pt(jc,lf,"esm2017"),Pt("fire-js","")}Wb("");var hf={};const ff="@firebase/database",pf="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ny="";function Vb(t){ny=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ve(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:ei(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ct(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Hb(e)}}catch{}return new Qb},Wn=ry("localStorage"),qb=ry("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new Vu("@firebase/database"),sy=function(){let t=1;return function(){return t++}}(),iy=function(t){const e=P_(t),n=new A_;n.update(e);const r=n.digest();return Wu.encodeByteArray(r)},yi=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=yi.apply(null,r):typeof r=="object"?e+=ve(r):e+=r,e+=" "}return e};let As=null,mf=!0;const Gb=function(t,e){j(!e,"Can't turn on custom loggers persistently."),Rr.logLevel=X.VERBOSE,As=Rr.log.bind(Rr)},Ee=function(...t){if(mf===!0&&(mf=!1,As===null&&qb.get("logging_enabled")===!0&&Gb()),As){const e=yi.apply(null,t);As(e)}},vi=function(t){return function(...e){Ee(t,...e)}},Ac=function(...t){const e="FIREBASE INTERNAL ERROR: "+yi(...t);Rr.error(e)},Kt=function(...t){const e=`FIREBASE FATAL ERROR: ${yi(...t)}`;throw Rr.error(e),new Error(e)},Be=function(...t){const e="FIREBASE WARNING: "+yi(...t);Rr.warn(e)},Kb=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Be("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Qu=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Yb=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},er="[MIN_NAME]",In="[MAX_NAME]",ar=function(t,e){if(t===e)return 0;if(t===er||e===In)return-1;if(e===er||t===In)return 1;{const n=gf(t),r=gf(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Jb=function(t,e){return t===e?0:t<e?-1:1},ps=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ve(e))},qu=function(t){if(typeof t!="object"||t===null)return ve(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ve(e[r]),n+=":",n+=qu(t[e[r]]);return n+="}",n},oy=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function ke(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const ly=function(t){j(!Qu(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const h=u.join("");let d="";for(c=0;c<64;c+=8){let f=parseInt(h.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},Xb=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Zb=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function eC(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const tC=new RegExp("^-?(0*)\\d{1,10}$"),nC=-2147483648,rC=2147483647,gf=function(t){if(tC.test(t)){const e=Number(t);if(e>=nC&&e<=rC)return e}return null},Xr=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Be("Exception was thrown by user callback.",n),e},Math.floor(0))}},sC=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ps=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Be(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ee("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Be(e)}}class so{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}so.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu="5",ay="v",cy="s",uy="r",dy="f",hy=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,fy="ls",py="p",Pc="ac",my="websocket",gy="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Wn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Wn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function lC(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function vy(t,e,n){j(typeof e=="string","typeof type must == string"),j(typeof n=="object","typeof params must == object");let r;if(e===my)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===gy)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);lC(t)&&(n.ns=t.namespace);const s=[];return ke(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(){this.counters_={}}incrementCounter(e,n=1){Ct(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return h_(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa={},pa={};function Ku(t){const e=t.toString();return fa[e]||(fa[e]=new aC),fa[e]}function cC(t,e){const n=t.toString();return pa[n]||(pa[n]=e()),pa[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Xr(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf="start",dC="close",hC="pLPCommand",fC="pRTLPCB",xy="id",wy="pw",_y="ser",pC="cb",mC="seg",gC="ts",yC="d",vC="dframe",by=1870,Cy=30,xC=by-Cy,wC=25e3,_C=3e4;class Er{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=vi(e),this.stats_=Ku(n),this.urlFn=c=>(this.appCheckToken&&(c[Pc]=this.appCheckToken),vy(n,gy,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new uC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(_C)),Yb(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Yu((...i)=>{const[o,a,c,u,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===yf)this.id=a,this.password=c;else if(o===dC)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[yf]="t",r[_y]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[pC]=this.scriptTagHolder.uniqueCallbackIdentifier),r[ay]=Gu,this.transportSessionId&&(r[cy]=this.transportSessionId),this.lastSessionId&&(r[fy]=this.lastSessionId),this.applicationId&&(r[py]=this.applicationId),this.appCheckToken&&(r[Pc]=this.appCheckToken),typeof location<"u"&&location.hostname&&hy.test(location.hostname)&&(r[uy]=dy);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Er.forceAllow_=!0}static forceDisallow(){Er.forceDisallow_=!0}static isAvailable(){return Er.forceAllow_?!0:!Er.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Xb()&&!Zb()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ve(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Ug(n),s=oy(r,xC);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[vC]="t",r[xy]=e,r[wy]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ve(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Yu{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=sy(),window[hC+this.uniqueCallbackIdentifier]=e,window[fC+this.uniqueCallbackIdentifier]=n,this.myIFrame=Yu.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ee("frame writing exception"),a.stack&&Ee(a.stack),Ee(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ee("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[xy]=this.myID,e[wy]=this.myPW,e[_y]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Cy+r.length<=by;){const o=this.pendingSegs.shift();r=r+"&"+mC+s+"="+o.seg+"&"+gC+s+"="+o.ts+"&"+yC+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(wC)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ee("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=16384,CC=45e3;let Mo=null;typeof MozWebSocket<"u"?Mo=MozWebSocket:typeof WebSocket<"u"&&(Mo=WebSocket);class yt{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=vi(this.connId),this.stats_=Ku(n),this.connURL=yt.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[ay]=Gu,typeof location<"u"&&location.hostname&&hy.test(location.hostname)&&(o[uy]=dy),n&&(o[cy]=n),r&&(o[fy]=r),s&&(o[Pc]=s),i&&(o[py]=i),vy(e,my,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Wn.set("previous_websocket_failure",!0);try{let r;Hg(),this.mySock=new Mo(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){yt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Mo!==null&&!yt.forceDisallow_}static previouslyFailed(){return Wn.isInMemoryStorage||Wn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Wn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=ei(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(j(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=ve(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=oy(n,bC);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(CC))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}yt.responsesRequiredToBeHealthy=2;yt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Er,yt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=yt&&yt.isAvailable();let r=n&&!yt.previouslyFailed();if(e.webSocketOnly&&(n||Be("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[yt];else{const s=this.transports_=[];for(const i of ni.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);ni.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ni.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=6e4,SC=5e3,EC=10*1024,IC=100*1024,ma="t",vf="d",jC="s",xf="r",kC="e",wf="o",_f="a",bf="n",Cf="p",TC="h";class AC{constructor(e,n,r,s,i,o,a,c,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=vi("c:"+this.id+":"),this.transportManager_=new ni(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Ps(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>IC?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>EC?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ma in e){const n=e[ma];n===_f?this.upgradeIfSecondaryHealthy_():n===xf?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===wf&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ps("t",e),r=ps("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Cf,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:_f,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:bf,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ps("t",e),r=ps("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ps(ma,e);if(vf in e){const r=e[vf];if(n===TC){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===bf){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===jC?this.onConnectionShutdown_(r):n===xf?this.onReset_(r):n===kC?Ac("Server Error: "+r):n===wf?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ac("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Gu!==r&&Be("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ps(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(NC))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ps(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(SC))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Cf,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Wn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e){this.allowedEvents_=e,this.listeners_={},j(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){j(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends Sy{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Vg()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Lo}getInitialEvent(e){return j(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf=32,Sf=768;class Y{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function G(){return new Y("")}function U(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function jn(t){return t.pieces_.length-t.pieceNum_}function Z(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Y(t.pieces_,e)}function Ju(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function PC(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ri(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Ey(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Y(e,0)}function he(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Y)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Y(n,0)}function z(t){return t.pieceNum_>=t.pieces_.length}function Le(t,e){const n=U(t),r=U(e);if(n===null)return e;if(n===r)return Le(Z(t),Z(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function DC(t,e){const n=ri(t,0),r=ri(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=ar(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function Xu(t,e){if(jn(t)!==jn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ct(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(jn(t)>jn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class RC{constructor(e,n){this.errorPrefix_=n,this.parts_=ri(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=vl(this.parts_[r]);Iy(this)}}function OC(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=vl(e),Iy(t)}function MC(t){const e=t.parts_.pop();t.byteLength_-=vl(e),t.parts_.length>0&&(t.byteLength_-=1)}function Iy(t){if(t.byteLength_>Sf)throw new Error(t.errorPrefix_+"has a key path longer than "+Sf+" bytes ("+t.byteLength_+").");if(t.parts_.length>Nf)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Nf+") or object contains a cycle "+Bn(t))}function Bn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu extends Sy{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Zu}getInitialEvent(e){return j(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=1e3,LC=60*5*1e3,Ef=30*1e3,FC=1.3,BC=3e4,UC="server_kill",If=3;class $t extends Ny{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=$t.nextPersistentConnectionId_++,this.log_=vi("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ms,this.maxReconnectDelay_=LC,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Hg())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Zu.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Lo.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(ve(i)),j(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Jr,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),j(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),j(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,u=a.s;$t.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Ct(e,"w")){const r=Zn(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Be(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||k_(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Ef)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=j_(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),j(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ve(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Ac("Unrecognized action received from server: "+ve(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){j(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ms,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ms,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>BC&&(this.reconnectDelay_=ms),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*FC)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+$t.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},u=function(d){j(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?Ee("getToken() completed but was canceled"):(Ee("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,a=new AC(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,y=>{Be(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(UC)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Be(d),c())}}}interrupt(e){Ee("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ee("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ef(this.interruptReasons_)&&(this.reconnectDelay_=ms,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>qu(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Y(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Ee("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=If&&(this.reconnectDelay_=Ef,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ee("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=If&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+ny.replace(/\./g,"-")]=1,Vg()?e["framework.cordova"]=1:C_()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Lo.getInstance().currentlyOnline();return ef(this.interruptReasons_)&&e}}$t.nextPersistentConnectionId_=0;$t.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new $(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new $(er,e),s=new $(er,n);return this.compare(r,s)!==0}minPost(){return $.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vi;class jy extends xl{static get __EMPTY_NODE(){return Vi}static set __EMPTY_NODE(e){Vi=e}compare(e,n){return ar(e.name,n.name)}isDefinedOn(e){throw Yr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return $.MIN}maxPost(){return new $(In,Vi)}makePost(e,n){return j(typeof e=="string","KeyIndex indexValue must always be a string."),new $(e,Vi)}toString(){return".key"}}const qn=new jy;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ce{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ce.RED,this.left=s??Ve.EMPTY_NODE,this.right=i??Ve.EMPTY_NODE}copy(e,n,r,s,i){return new Ce(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ve.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Ve.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ce.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ce.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ce.RED=!0;Ce.BLACK=!1;class zC{copy(e,n,r,s,i){return this}insert(e,n,r){return new Ce(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ve{constructor(e,n=Ve.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ve(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ce.BLACK,null,null))}remove(e){return new Ve(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ce.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Hi(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Hi(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Hi(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Hi(this.root_,null,this.comparator_,!0,e)}}Ve.EMPTY_NODE=new zC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(t,e){return ar(t.name,e.name)}function ed(t,e){return ar(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dc;function WC(t){Dc=t}const ky=function(t){return typeof t=="number"?"number:"+ly(t):"string:"+t},Ty=function(t){if(t.isLeafNode()){const e=t.val();j(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ct(e,".sv"),"Priority must be a string or number.")}else j(t===Dc||t.isEmpty(),"priority of unexpected type.");j(t===Dc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jf;class _e{constructor(e,n=_e.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,j(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Ty(this.priorityNode_)}static set __childrenNodeConstructor(e){jf=e}static get __childrenNodeConstructor(){return jf}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new _e(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:_e.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return z(e)?this:U(e)===".priority"?this.priorityNode_:_e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:_e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=U(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(j(r!==".priority"||jn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,_e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Z(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+ky(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=ly(this.value_):e+=this.value_,this.lazyHash_=iy(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===_e.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof _e.__childrenNodeConstructor?-1:(j(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=_e.VALUE_TYPE_ORDER.indexOf(n),i=_e.VALUE_TYPE_ORDER.indexOf(r);return j(s>=0,"Unknown leaf type: "+n),j(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}_e.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ay,Py;function VC(t){Ay=t}function HC(t){Py=t}class QC extends xl{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?ar(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return $.MIN}maxPost(){return new $(In,new _e("[PRIORITY-POST]",Py))}makePost(e,n){const r=Ay(e);return new $(n,new _e("[PRIORITY-POST]",r))}toString(){return".priority"}}const oe=new QC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=Math.log(2);class GC{constructor(e){const n=i=>parseInt(Math.log(i)/qC,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Fo=function(t,e,n,r){t.sort(e);const s=function(c,u){const h=u-c;let d,f;if(h===0)return null;if(h===1)return d=t[c],f=n?n(d):d,new Ce(f,d.node,Ce.BLACK,null,null);{const y=parseInt(h/2,10)+c,x=s(c,y),g=s(y+1,u);return d=t[y],f=n?n(d):d,new Ce(f,d.node,Ce.BLACK,x,g)}},i=function(c){let u=null,h=null,d=t.length;const f=function(x,g){const _=d-x,v=d;d-=x;const p=s(_+1,v),m=t[_],w=n?n(m):m;y(new Ce(w,m.node,g,null,p))},y=function(x){u?(u.left=x,u=x):(h=x,u=x)};for(let x=0;x<c.count;++x){const g=c.nextBitIsOne(),_=Math.pow(2,c.count-(x+1));g?f(_,Ce.BLACK):(f(_,Ce.BLACK),f(_,Ce.RED))}return h},o=new GC(t.length),a=i(o);return new Ve(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ga;const fr={};class Ut{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return j(fr&&oe,"ChildrenNode.ts has not been loaded"),ga=ga||new Ut({".priority":fr},{".priority":oe}),ga}get(e){const n=Zn(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ve?n:null}hasIndex(e){return Ct(this.indexSet_,e.toString())}addIndex(e,n){j(e!==qn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator($.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=Fo(r,e.getCompare()):a=fr;const c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;const h=Object.assign({},this.indexes_);return h[c]=a,new Ut(h,u)}addToIndexes(e,n){const r=Do(this.indexes_,(s,i)=>{const o=Zn(this.indexSet_,i);if(j(o,"Missing index implementation for "+i),s===fr)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator($.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),Fo(a,o.getCompare())}else return fr;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new $(e.name,a))),c.insert(e,e.node)}});return new Ut(r,this.indexSet_)}removeFromIndexes(e,n){const r=Do(this.indexes_,s=>{if(s===fr)return s;{const i=n.get(e.name);return i?s.remove(new $(e.name,i)):s}});return new Ut(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gs;class M{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Ty(this.priorityNode_),this.children_.isEmpty()&&j(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return gs||(gs=new M(new Ve(ed),null,Ut.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||gs}updatePriority(e){return this.children_.isEmpty()?this:new M(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?gs:n}}getChild(e){const n=U(e);return n===null?this:this.getImmediateChild(n).getChild(Z(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(j(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new $(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?gs:this.priorityNode_;return new M(s,o,i)}}updateChild(e,n){const r=U(e);if(r===null)return n;{j(U(e)!==".priority"||jn(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Z(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(oe,(o,a)=>{n[o]=a.val(e),r++,i&&M.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+ky(this.getPriority().val())+":"),this.forEachChild(oe,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":iy(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new $(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new $(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new $(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,$.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,$.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===xi?-1:0}withIndex(e){if(e===qn||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new M(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===qn||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(oe),s=n.getIterator(oe);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===qn?null:this.indexMap_.get(e.toString())}}M.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class KC extends M{constructor(){super(new Ve(ed),M.EMPTY_NODE,Ut.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return M.EMPTY_NODE}isEmpty(){return!1}}const xi=new KC;Object.defineProperties($,{MIN:{value:new $(er,M.EMPTY_NODE)},MAX:{value:new $(In,xi)}});jy.__EMPTY_NODE=M.EMPTY_NODE;_e.__childrenNodeConstructor=M;WC(xi);HC(xi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=!0;function me(t,e=null){if(t===null)return M.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),j(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new _e(n,me(e))}if(!(t instanceof Array)&&YC){const n=[];let r=!1;if(ke(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=me(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new $(o,c)))}}),n.length===0)return M.EMPTY_NODE;const i=Fo(n,$C,o=>o.name,ed);if(r){const o=Fo(n,oe.getCompare());return new M(i,me(e),new Ut({".priority":o},{".priority":oe}))}else return new M(i,me(e),Ut.Default)}else{let n=M.EMPTY_NODE;return ke(t,(r,s)=>{if(Ct(t,r)&&r.substring(0,1)!=="."){const i=me(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(me(e))}}VC(me);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td extends xl{constructor(e){super(),this.indexPath_=e,j(!z(e)&&U(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?ar(e.name,n.name):i}makePost(e,n){const r=me(e),s=M.EMPTY_NODE.updateChild(this.indexPath_,r);return new $(n,s)}maxPost(){const e=M.EMPTY_NODE.updateChild(this.indexPath_,xi);return new $(In,e)}toString(){return ri(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC extends xl{compare(e,n){const r=e.node.compareTo(n.node);return r===0?ar(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return $.MIN}maxPost(){return $.MAX}makePost(e,n){const r=me(e);return new $(n,r)}toString(){return".value"}}const Dy=new JC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(t){return{type:"value",snapshotNode:t}}function $r(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function si(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ii(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function XC(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){j(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(si(n,a)):j(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange($r(n,r)):o.trackChildChange(ii(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(oe,(s,i)=>{n.hasChild(s)||r.trackChildChange(si(s,i))}),n.isLeafNode()||n.forEachChild(oe,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(ii(s,i,o))}else r.trackChildChange($r(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?M.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.indexedFilter_=new nd(e.getIndex()),this.index_=e.getIndex(),this.startPost_=oi.getStartPost_(e),this.endPost_=oi.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new $(n,r))||(r=M.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=M.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(M.EMPTY_NODE);const i=this;return n.forEachChild(oe,(o,a)=>{i.matches(new $(o,a))||(s=s.updateImmediateChild(o,M.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new oi(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new $(n,r))||(r=M.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=M.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=M.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(M.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,M.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(f,y)=>d(y,f)}else o=this.index_.getCompare();const a=e;j(a.numChildren()===this.limit_,"");const c=new $(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let f=s.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const y=f==null?1:o(f,c);if(h&&!r.isEmpty()&&y>=0)return i!=null&&i.trackChildChange(ii(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(si(n,d));const g=a.updateImmediateChild(n,M.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange($r(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}}else return r.isEmpty()?e:h&&o(u,c)>=0?(i!=null&&(i.trackChildChange(si(u.name,u.node)),i.trackChildChange($r(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,M.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=oe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return j(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return j(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:er}hasEnd(){return this.endSet_}getIndexEndValue(){return j(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return j(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:In}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return j(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===oe}copy(){const e=new rd;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function eN(t){return t.loadsAllData()?new nd(t.getIndex()):t.hasLimit()?new ZC(t):new oi(t)}function tN(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function nN(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function rN(t,e){const n=t.copy();return n.index_=e,n}function kf(t){const e={};if(t.isDefault())return e;let n;if(t.index_===oe?n="$priority":t.index_===Dy?n="$value":t.index_===qn?n="$key":(j(t.index_ instanceof td,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ve(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=ve(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ve(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ve(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ve(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Tf(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==oe&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo extends Ny{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=vi("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(j(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=Bo.getListenId_(e,r),a={};this.listens_[o]=a;const c=kf(e._queryParams);this.restRequest_(i+".json",c,(u,h)=>{let d=h;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(i,d,!1,r),Zn(this.listens_,o)===a){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",s(f,null)}})}unlisten(e,n){const r=Bo.getListenId_(e,n);delete this.listens_[r]}get(e){const n=kf(e._queryParams),r=e._path.toString(),s=new Jr;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+T_(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=ei(a.responseText)}catch{Be("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Be("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(){this.rootNode_=M.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(){return{value:null,children:new Map}}function Oy(t,e,n){if(z(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=U(e);t.children.has(r)||t.children.set(r,Uo());const s=t.children.get(r);e=Z(e),Oy(s,e,n)}}function Rc(t,e,n){t.value!==null?n(e,t.value):iN(t,(r,s)=>{const i=new Y(e.toString()+"/"+r);Rc(s,i,n)})}function iN(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ke(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=10*1e3,lN=30*1e3,aN=5*60*1e3;class cN{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new oN(e);const r=Af+(lN-Af)*Math.random();Ps(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;ke(e,(s,i)=>{i>0&&Ct(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Ps(this.reportStats_.bind(this),Math.floor(Math.random()*2*aN))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(vt||(vt={}));function sd(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function id(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function od(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=vt.ACK_USER_WRITE,this.source=sd()}operationForChild(e){if(z(this.path)){if(this.affectedTree.value!=null)return j(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Y(e));return new zo(G(),n,this.revert)}}else return j(U(this.path)===e,"operationForChild called for unrelated child."),new zo(Z(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,n){this.source=e,this.path=n,this.type=vt.LISTEN_COMPLETE}operationForChild(e){return z(this.path)?new li(this.source,G()):new li(this.source,Z(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=vt.OVERWRITE}operationForChild(e){return z(this.path)?new tr(this.source,G(),this.snap.getImmediateChild(e)):new tr(this.source,Z(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=vt.MERGE}operationForChild(e){if(z(this.path)){const n=this.children.subtree(new Y(e));return n.isEmpty()?null:n.value?new tr(this.source,G(),n.value):new Wr(this.source,G(),n)}else return j(U(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Wr(this.source,Z(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(z(e))return this.isFullyInitialized()&&!this.filtered_;const n=U(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function dN(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(XC(o.childName,o.snapshotNode))}),ys(t,s,"child_removed",e,r,n),ys(t,s,"child_added",e,r,n),ys(t,s,"child_moved",i,r,n),ys(t,s,"child_changed",e,r,n),ys(t,s,"value",e,r,n),s}function ys(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>fN(t,a,c)),o.forEach(a=>{const c=hN(t,a,i);s.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function hN(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function fN(t,e,n){if(e.childName==null||n.childName==null)throw Yr("Should only compare child_ events.");const r=new $(e.childName,e.snapshotNode),s=new $(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(t,e){return{eventCache:t,serverCache:e}}function Ds(t,e,n,r){return wl(new kn(e,n,r),t.serverCache)}function My(t,e,n,r){return wl(t.eventCache,new kn(e,n,r))}function $o(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function nr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ya;const pN=()=>(ya||(ya=new Ve(Jb)),ya);class J{constructor(e,n=pN()){this.value=e,this.children=n}static fromObject(e){let n=new J(null);return ke(e,(r,s)=>{n=n.set(new Y(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:G(),value:this.value};if(z(e))return null;{const r=U(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Z(e),n);return i!=null?{path:he(new Y(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(z(e))return this;{const n=U(e),r=this.children.get(n);return r!==null?r.subtree(Z(e)):new J(null)}}set(e,n){if(z(e))return new J(n,this.children);{const r=U(e),i=(this.children.get(r)||new J(null)).set(Z(e),n),o=this.children.insert(r,i);return new J(this.value,o)}}remove(e){if(z(e))return this.children.isEmpty()?new J(null):new J(null,this.children);{const n=U(e),r=this.children.get(n);if(r){const s=r.remove(Z(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new J(null):new J(this.value,i)}else return this}}get(e){if(z(e))return this.value;{const n=U(e),r=this.children.get(n);return r?r.get(Z(e)):null}}setTree(e,n){if(z(e))return n;{const r=U(e),i=(this.children.get(r)||new J(null)).setTree(Z(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new J(this.value,o)}}fold(e){return this.fold_(G(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(he(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,G(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(z(e))return null;{const i=U(e),o=this.children.get(i);return o?o.findOnPath_(Z(e),he(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,G(),n)}foreachOnPath_(e,n,r){if(z(e))return this;{this.value&&r(n,this.value);const s=U(e),i=this.children.get(s);return i?i.foreachOnPath_(Z(e),he(n,s),r):new J(null)}}foreach(e){this.foreach_(G(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(he(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.writeTree_=e}static empty(){return new _t(new J(null))}}function Rs(t,e,n){if(z(e))return new _t(new J(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Le(s,e);return i=i.updateChild(o,n),new _t(t.writeTree_.set(s,i))}else{const s=new J(n),i=t.writeTree_.setTree(e,s);return new _t(i)}}}function Oc(t,e,n){let r=t;return ke(n,(s,i)=>{r=Rs(r,he(e,s),i)}),r}function Pf(t,e){if(z(e))return _t.empty();{const n=t.writeTree_.setTree(e,new J(null));return new _t(n)}}function Mc(t,e){return cr(t,e)!=null}function cr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Le(n.path,e)):null}function Df(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(oe,(r,s)=>{e.push(new $(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new $(r,s.value))}),e}function bn(t,e){if(z(e))return t;{const n=cr(t,e);return n!=null?new _t(new J(n)):new _t(t.writeTree_.subtree(e))}}function Lc(t){return t.writeTree_.isEmpty()}function Vr(t,e){return Ly(G(),t.writeTree_,e)}function Ly(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(j(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=Ly(he(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(he(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(t,e){return zy(e,t)}function mN(t,e,n,r,s){j(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Rs(t.visibleWrites,e,n)),t.lastWriteId=r}function gN(t,e,n,r){j(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Oc(t.visibleWrites,e,n),t.lastWriteId=r}function yN(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function vN(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);j(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&xN(a,r.path)?s=!1:ct(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return wN(t),!0;if(r.snap)t.visibleWrites=Pf(t.visibleWrites,r.path);else{const a=r.children;ke(a,c=>{t.visibleWrites=Pf(t.visibleWrites,he(r.path,c))})}return!0}else return!1}function xN(t,e){if(t.snap)return ct(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ct(he(t.path,n),e))return!0;return!1}function wN(t){t.visibleWrites=Fy(t.allWrites,_N,G()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function _N(t){return t.visible}function Fy(t,e,n){let r=_t.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)ct(n,o)?(a=Le(n,o),r=Rs(r,a,i.snap)):ct(o,n)&&(a=Le(o,n),r=Rs(r,G(),i.snap.getChild(a)));else if(i.children){if(ct(n,o))a=Le(n,o),r=Oc(r,a,i.children);else if(ct(o,n))if(a=Le(o,n),z(a))r=Oc(r,G(),i.children);else{const c=Zn(i.children,U(a));if(c){const u=c.getChild(Z(a));r=Rs(r,G(),u)}}}else throw Yr("WriteRecord should have .snap or .children")}}return r}function By(t,e,n,r,s){if(!r&&!s){const i=cr(t.visibleWrites,e);if(i!=null)return i;{const o=bn(t.visibleWrites,e);if(Lc(o))return n;if(n==null&&!Mc(o,G()))return null;{const a=n||M.EMPTY_NODE;return Vr(o,a)}}}else{const i=bn(t.visibleWrites,e);if(!s&&Lc(i))return n;if(!s&&n==null&&!Mc(i,G()))return null;{const o=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(ct(u.path,e)||ct(e,u.path))},a=Fy(t.allWrites,o,e),c=n||M.EMPTY_NODE;return Vr(a,c)}}}function bN(t,e,n){let r=M.EMPTY_NODE;const s=cr(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(oe,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=bn(t.visibleWrites,e);return n.forEachChild(oe,(o,a)=>{const c=Vr(bn(i,new Y(o)),a);r=r.updateImmediateChild(o,c)}),Df(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=bn(t.visibleWrites,e);return Df(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function CN(t,e,n,r,s){j(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=he(e,n);if(Mc(t.visibleWrites,i))return null;{const o=bn(t.visibleWrites,i);return Lc(o)?s.getChild(n):Vr(o,s.getChild(n))}}function NN(t,e,n,r){const s=he(e,n),i=cr(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=bn(t.visibleWrites,s);return Vr(o,r.getNode().getImmediateChild(n))}else return null}function SN(t,e){return cr(t.visibleWrites,e)}function EN(t,e,n,r,s,i,o){let a;const c=bn(t.visibleWrites,e),u=cr(c,G());if(u!=null)a=u;else if(n!=null)a=Vr(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),f=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let y=f.getNext();for(;y&&h.length<s;)d(y,r)!==0&&h.push(y),y=f.getNext();return h}else return[]}function IN(){return{visibleWrites:_t.empty(),allWrites:[],lastWriteId:-1}}function Wo(t,e,n,r){return By(t.writeTree,t.treePath,e,n,r)}function ld(t,e){return bN(t.writeTree,t.treePath,e)}function Rf(t,e,n,r){return CN(t.writeTree,t.treePath,e,n,r)}function Vo(t,e){return SN(t.writeTree,he(t.treePath,e))}function jN(t,e,n,r,s,i){return EN(t.writeTree,t.treePath,e,n,r,s,i)}function ad(t,e,n){return NN(t.writeTree,t.treePath,e,n)}function Uy(t,e){return zy(he(t.treePath,e),t.writeTree)}function zy(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;j(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),j(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,ii(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,si(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,$r(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,ii(r,e.snapshotNode,s.oldSnap));else throw Yr("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const $y=new TN;class cd{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new kn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ad(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:nr(this.viewCache_),i=jN(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(t){return{filter:t}}function PN(t,e){j(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),j(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function DN(t,e,n,r,s){const i=new kN;let o,a;if(n.type===vt.OVERWRITE){const u=n;u.source.fromUser?o=Fc(t,e,u.path,u.snap,r,s,i):(j(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!z(u.path),o=Ho(t,e,u.path,u.snap,r,s,a,i))}else if(n.type===vt.MERGE){const u=n;u.source.fromUser?o=ON(t,e,u.path,u.children,r,s,i):(j(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=Bc(t,e,u.path,u.children,r,s,a,i))}else if(n.type===vt.ACK_USER_WRITE){const u=n;u.revert?o=FN(t,e,u.path,r,s,i):o=MN(t,e,u.path,u.affectedTree,r,s,i)}else if(n.type===vt.LISTEN_COMPLETE)o=LN(t,e,n.path,r,i);else throw Yr("Unknown operation type: "+n.type);const c=i.getChanges();return RN(e,o,c),{viewCache:o,changes:c}}function RN(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=$o(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(Ry($o(e)))}}function Wy(t,e,n,r,s,i){const o=e.eventCache;if(Vo(r,n)!=null)return e;{let a,c;if(z(n))if(j(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=nr(e),h=u instanceof M?u:M.EMPTY_NODE,d=ld(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const u=Wo(r,nr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=U(n);if(u===".priority"){j(jn(n)===1,"Can't have a priority with additional path components");const h=o.getNode();c=e.serverCache.getNode();const d=Rf(r,n,h,c);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=Z(n);let d;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();const f=Rf(r,n,o.getNode(),c);f!=null?d=o.getNode().getImmediateChild(u).updateChild(h,f):d=o.getNode().getImmediateChild(u)}else d=ad(r,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,h,s,i):a=o.getNode()}}return Ds(e,a,o.isFullyInitialized()||z(n),t.filter.filtersNodes())}}function Ho(t,e,n,r,s,i,o,a){const c=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(z(n))u=h.updateFullNode(c.getNode(),r,null);else if(h.filtersNodes()&&!c.isFiltered()){const y=c.getNode().updateChild(n,r);u=h.updateFullNode(c.getNode(),y,null)}else{const y=U(n);if(!c.isCompleteForPath(n)&&jn(n)>1)return e;const x=Z(n),_=c.getNode().getImmediateChild(y).updateChild(x,r);y===".priority"?u=h.updatePriority(c.getNode(),_):u=h.updateChild(c.getNode(),y,_,x,$y,null)}const d=My(e,u,c.isFullyInitialized()||z(n),h.filtersNodes()),f=new cd(s,d,i);return Wy(t,d,n,s,f,a)}function Fc(t,e,n,r,s,i,o){const a=e.eventCache;let c,u;const h=new cd(s,e,i);if(z(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Ds(e,u,!0,t.filter.filtersNodes());else{const d=U(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=Ds(e,u,a.isFullyInitialized(),a.isFiltered());else{const f=Z(n),y=a.getNode().getImmediateChild(d);let x;if(z(f))x=r;else{const g=h.getCompleteChild(d);g!=null?Ju(f)===".priority"&&g.getChild(Ey(f)).isEmpty()?x=g:x=g.updateChild(f,r):x=M.EMPTY_NODE}if(y.equals(x))c=e;else{const g=t.filter.updateChild(a.getNode(),d,x,f,h,o);c=Ds(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Of(t,e){return t.eventCache.isCompleteForChild(e)}function ON(t,e,n,r,s,i,o){let a=e;return r.foreach((c,u)=>{const h=he(n,c);Of(e,U(h))&&(a=Fc(t,a,h,u,s,i,o))}),r.foreach((c,u)=>{const h=he(n,c);Of(e,U(h))||(a=Fc(t,a,h,u,s,i,o))}),a}function Mf(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function Bc(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;z(n)?u=r:u=new J(null).setTree(n,r);const h=e.serverCache.getNode();return u.children.inorderTraversal((d,f)=>{if(h.hasChild(d)){const y=e.serverCache.getNode().getImmediateChild(d),x=Mf(t,y,f);c=Ho(t,c,new Y(d),x,s,i,o,a)}}),u.children.inorderTraversal((d,f)=>{const y=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!h.hasChild(d)&&!y){const x=e.serverCache.getNode().getImmediateChild(d),g=Mf(t,x,f);c=Ho(t,c,new Y(d),g,s,i,o,a)}}),c}function MN(t,e,n,r,s,i,o){if(Vo(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(z(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Ho(t,e,n,c.getNode().getChild(n),s,i,a,o);if(z(n)){let u=new J(null);return c.getNode().forEachChild(qn,(h,d)=>{u=u.set(new Y(h),d)}),Bc(t,e,n,u,s,i,a,o)}else return e}else{let u=new J(null);return r.foreach((h,d)=>{const f=he(n,h);c.isCompleteForPath(f)&&(u=u.set(h,c.getNode().getChild(f)))}),Bc(t,e,n,u,s,i,a,o)}}function LN(t,e,n,r,s){const i=e.serverCache,o=My(e,i.getNode(),i.isFullyInitialized()||z(n),i.isFiltered());return Wy(t,o,n,r,$y,s)}function FN(t,e,n,r,s,i){let o;if(Vo(r,n)!=null)return e;{const a=new cd(r,e,s),c=e.eventCache.getNode();let u;if(z(n)||U(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Wo(r,nr(e));else{const d=e.serverCache.getNode();j(d instanceof M,"serverChildren would be complete if leaf node"),h=ld(r,d)}h=h,u=t.filter.updateFullNode(c,h,i)}else{const h=U(n);let d=ad(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),d!=null?u=t.filter.updateChild(c,h,d,Z(n),a,i):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(c,h,M.EMPTY_NODE,Z(n),a,i):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Wo(r,nr(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||Vo(r,G())!=null,Ds(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new nd(r.getIndex()),i=eN(r);this.processor_=AN(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(M.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(M.EMPTY_NODE,a.getNode(),null),h=new kn(c,o.isFullyInitialized(),s.filtersNodes()),d=new kn(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=wl(d,h),this.eventGenerator_=new uN(this.query_)}get query(){return this.query_}}function UN(t){return t.viewCache_.serverCache.getNode()}function zN(t){return $o(t.viewCache_)}function $N(t,e){const n=nr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!z(e)&&!n.getImmediateChild(U(e)).isEmpty())?n.getChild(e):null}function Lf(t){return t.eventRegistrations_.length===0}function WN(t,e){t.eventRegistrations_.push(e)}function Ff(t,e,n){const r=[];if(n){j(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Bf(t,e,n,r){e.type===vt.MERGE&&e.source.queryId!==null&&(j(nr(t.viewCache_),"We should always have a full cache before handling merges"),j($o(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=DN(t.processor_,s,e,n,r);return PN(t.processor_,i.viewCache),j(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,Vy(t,i.changes,i.viewCache.eventCache.getNode(),null)}function VN(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(oe,(i,o)=>{r.push($r(i,o))}),n.isFullyInitialized()&&r.push(Ry(n.getNode())),Vy(t,r,n.getNode(),e)}function Vy(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return dN(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qo;class Hy{constructor(){this.views=new Map}}function HN(t){j(!Qo,"__referenceConstructor has already been defined"),Qo=t}function QN(){return j(Qo,"Reference.ts has not been loaded"),Qo}function qN(t){return t.views.size===0}function ud(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return j(i!=null,"SyncTree gave us an op for an invalid query."),Bf(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(Bf(o,e,n,r));return i}}function Qy(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=Wo(n,s?r:null),c=!1;a?c=!0:r instanceof M?(a=ld(n,r),c=!1):(a=M.EMPTY_NODE,c=!1);const u=wl(new kn(a,c,!1),new kn(r,s,!1));return new BN(e,u)}return o}function GN(t,e,n,r,s,i){const o=Qy(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),WN(o,n),VN(o,n)}function KN(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=Tn(t);if(s==="default")for(const[c,u]of t.views.entries())o=o.concat(Ff(u,n,r)),Lf(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||i.push(u.query));else{const c=t.views.get(s);c&&(o=o.concat(Ff(c,n,r)),Lf(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!Tn(t)&&i.push(new(QN())(e._repo,e._path)),{removed:i,events:o}}function qy(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Cn(t,e){let n=null;for(const r of t.views.values())n=n||$N(r,e);return n}function Gy(t,e){if(e._queryParams.loadsAllData())return bl(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Ky(t,e){return Gy(t,e)!=null}function Tn(t){return bl(t)!=null}function bl(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qo;function YN(t){j(!qo,"__referenceConstructor has already been defined"),qo=t}function JN(){return j(qo,"Reference.ts has not been loaded"),qo}let XN=1;class Uf{constructor(e){this.listenProvider_=e,this.syncPointTree_=new J(null),this.pendingWriteTree_=IN(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function dd(t,e,n,r,s){return mN(t.pendingWriteTree_,e,n,r,s),s?Zr(t,new tr(sd(),e,n)):[]}function ZN(t,e,n,r){gN(t.pendingWriteTree_,e,n,r);const s=J.fromObject(n);return Zr(t,new Wr(sd(),e,s))}function dn(t,e,n=!1){const r=yN(t.pendingWriteTree_,e);if(vN(t.pendingWriteTree_,e)){let i=new J(null);return r.snap!=null?i=i.set(G(),!0):ke(r.children,o=>{i=i.set(new Y(o),!0)}),Zr(t,new zo(r.path,i,n))}else return[]}function wi(t,e,n){return Zr(t,new tr(id(),e,n))}function e1(t,e,n){const r=J.fromObject(n);return Zr(t,new Wr(id(),e,r))}function t1(t,e){return Zr(t,new li(id(),e))}function n1(t,e,n){const r=hd(t,n);if(r){const s=fd(r),i=s.path,o=s.queryId,a=Le(i,e),c=new li(od(o),a);return pd(t,i,c)}else return[]}function Go(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||Ky(o,e))){const c=KN(o,e,n,r);qN(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=c.removed;if(a=c.events,!s){const h=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(f,y)=>Tn(y));if(h&&!d){const f=t.syncPointTree_.subtree(i);if(!f.isEmpty()){const y=i1(f);for(let x=0;x<y.length;++x){const g=y[x],_=g.query,v=Zy(t,g);t.listenProvider_.startListening(Os(_),ai(t,_),v.hashFn,v.onComplete)}}}!d&&u.length>0&&!r&&(h?t.listenProvider_.stopListening(Os(e),null):u.forEach(f=>{const y=t.queryToTagMap.get(Nl(f));t.listenProvider_.stopListening(Os(f),y)}))}o1(t,u)}return a}function Yy(t,e,n,r){const s=hd(t,r);if(s!=null){const i=fd(s),o=i.path,a=i.queryId,c=Le(o,e),u=new tr(od(a),c,n);return pd(t,o,u)}else return[]}function r1(t,e,n,r){const s=hd(t,r);if(s){const i=fd(s),o=i.path,a=i.queryId,c=Le(o,e),u=J.fromObject(n),h=new Wr(od(a),c,u);return pd(t,o,h)}else return[]}function Uc(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(f,y)=>{const x=Le(f,s);i=i||Cn(y,x),o=o||Tn(y)});let a=t.syncPointTree_.get(s);a?(o=o||Tn(a),i=i||Cn(a,G())):(a=new Hy,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=M.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((y,x)=>{const g=Cn(x,G());g&&(i=i.updateImmediateChild(y,g))}));const u=Ky(a,e);if(!u&&!e._queryParams.loadsAllData()){const f=Nl(e);j(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const y=l1();t.queryToTagMap.set(f,y),t.tagToQueryMap.set(y,f)}const h=_l(t.pendingWriteTree_,s);let d=GN(a,e,n,h,i,c);if(!u&&!o&&!r){const f=Gy(a,e);d=d.concat(a1(t,e,f))}return d}function Cl(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=Le(o,e),u=Cn(a,c);if(u)return u});return By(s,e,i,n,!0)}function s1(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,h)=>{const d=Le(u,n);r=r||Cn(h,d)});let s=t.syncPointTree_.get(n);s?r=r||Cn(s,G()):(s=new Hy,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new kn(r,!0,!1):null,a=_l(t.pendingWriteTree_,e._path),c=Qy(s,e,a,i?o.getNode():M.EMPTY_NODE,i);return zN(c)}function Zr(t,e){return Jy(e,t.syncPointTree_,null,_l(t.pendingWriteTree_,G()))}function Jy(t,e,n,r){if(z(t.path))return Xy(t,e,n,r);{const s=e.get(G());n==null&&s!=null&&(n=Cn(s,G()));let i=[];const o=U(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const u=n?n.getImmediateChild(o):null,h=Uy(r,o);i=i.concat(Jy(a,c,u,h))}return s&&(i=i.concat(ud(s,t,r,n))),i}}function Xy(t,e,n,r){const s=e.get(G());n==null&&s!=null&&(n=Cn(s,G()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,u=Uy(r,o),h=t.operationForChild(o);h&&(i=i.concat(Xy(h,a,c,u)))}),s&&(i=i.concat(ud(s,t,r,n))),i}function Zy(t,e){const n=e.query,r=ai(t,n);return{hashFn:()=>(UN(e)||M.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?n1(t,n._path,r):t1(t,n._path);{const i=eC(s,n);return Go(t,n,null,i)}}}}function ai(t,e){const n=Nl(e);return t.queryToTagMap.get(n)}function Nl(t){return t._path.toString()+"$"+t._queryIdentifier}function hd(t,e){return t.tagToQueryMap.get(e)}function fd(t){const e=t.indexOf("$");return j(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Y(t.substr(0,e))}}function pd(t,e,n){const r=t.syncPointTree_.get(e);j(r,"Missing sync point for query tag that we're tracking");const s=_l(t.pendingWriteTree_,e);return ud(r,n,s,null)}function i1(t){return t.fold((e,n,r)=>{if(n&&Tn(n))return[bl(n)];{let s=[];return n&&(s=qy(n)),ke(r,(i,o)=>{s=s.concat(o)}),s}})}function Os(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(JN())(t._repo,t._path):t}function o1(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Nl(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function l1(){return XN++}function a1(t,e,n){const r=e._path,s=ai(t,e),i=Zy(t,n),o=t.listenProvider_.startListening(Os(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)j(!Tn(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((u,h,d)=>{if(!z(u)&&h&&Tn(h))return[bl(h).query];{let f=[];return h&&(f=f.concat(qy(h).map(y=>y.query))),ke(d,(y,x)=>{f=f.concat(x)}),f}});for(let u=0;u<c.length;++u){const h=c[u];t.listenProvider_.stopListening(Os(h),ai(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new md(n)}node(){return this.node_}}class gd{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=he(this.path_,e);return new gd(this.syncTree_,n)}node(){return Cl(this.syncTree_,this.path_)}}const c1=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},zf=function(t,e,n){if(!t||typeof t!="object")return t;if(j(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return u1(t[".sv"],e,n);if(typeof t[".sv"]=="object")return d1(t[".sv"],e);j(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},u1=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:j(!1,"Unexpected server value: "+t)}},d1=function(t,e,n){t.hasOwnProperty("increment")||j(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&j(!1,"Unexpected increment value: "+r);const s=e.node();if(j(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},ev=function(t,e,n,r){return vd(e,new gd(n,t),r)},yd=function(t,e,n){return vd(t,new md(e),n)};function vd(t,e,n){const r=t.getPriority().val(),s=zf(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=zf(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new _e(a,me(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new _e(s))),o.forEachChild(oe,(a,c)=>{const u=vd(c,e.getImmediateChild(a),n);u!==c&&(i=i.updateImmediateChild(a,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Sl(t,e){let n=e instanceof Y?e:new Y(e),r=t,s=U(n);for(;s!==null;){const i=Zn(r.node.children,s)||{children:{},childCount:0};r=new xd(s,r,i),n=Z(n),s=U(n)}return r}function ur(t){return t.node.value}function wd(t,e){t.node.value=e,zc(t)}function tv(t){return t.node.childCount>0}function h1(t){return ur(t)===void 0&&!tv(t)}function El(t,e){ke(t.node.children,(n,r)=>{e(new xd(n,t,r))})}function nv(t,e,n,r){n&&!r&&e(t),El(t,s=>{nv(s,e,!0,r)}),n&&r&&e(t)}function f1(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function _i(t){return new Y(t.parent===null?t.name:_i(t.parent)+"/"+t.name)}function zc(t){t.parent!==null&&p1(t.parent,t.name,t)}function p1(t,e,n){const r=h1(n),s=Ct(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,zc(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,zc(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1=/[\[\].#$\/\u0000-\u001F\u007F]/,g1=/[\[\].#$\u0000-\u001F\u007F]/,va=10*1024*1024,_d=function(t){return typeof t=="string"&&t.length!==0&&!m1.test(t)},rv=function(t){return typeof t=="string"&&t.length!==0&&!g1.test(t)},y1=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),rv(t)},Ko=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Qu(t)||t&&typeof t=="object"&&Ct(t,".sv")},bi=function(t,e,n,r){r&&e===void 0||Ci(yl(t,"value"),e,n)},Ci=function(t,e,n){const r=n instanceof Y?new RC(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Bn(r));if(typeof e=="function")throw new Error(t+"contains a function "+Bn(r)+" with contents = "+e.toString());if(Qu(e))throw new Error(t+"contains "+e.toString()+" "+Bn(r));if(typeof e=="string"&&e.length>va/3&&vl(e)>va)throw new Error(t+"contains a string greater than "+va+" utf8 bytes "+Bn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(ke(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!_d(o)))throw new Error(t+" contains an invalid key ("+o+") "+Bn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);OC(r,o),Ci(t,a,r),MC(r)}),s&&i)throw new Error(t+' contains ".value" child '+Bn(r)+" in addition to actual children.")}},v1=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=ri(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!_d(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(DC);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&ct(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},x1=function(t,e,n,r){const s=yl(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];ke(e,(o,a)=>{const c=new Y(o);if(Ci(s,a,he(n,c)),Ju(c)===".priority"&&!Ko(a))throw new Error(s+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(c)}),v1(s,i)},bd=function(t,e,n,r){if(!rv(n))throw new Error(yl(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},w1=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),bd(t,e,n)},Il=function(t,e){if(U(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},_1=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!_d(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!y1(n))throw new Error(yl(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function jl(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!Xu(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function sv(t,e,n){jl(t,n),iv(t,r=>Xu(r,e))}function rt(t,e,n){jl(t,n),iv(t,r=>ct(r,e)||ct(e,r))}function iv(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(C1(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function C1(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();As&&Ee("event: "+n.toString()),Xr(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1="repo_interrupt",S1=25;class E1{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new b1,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Uo(),this.transactionQueueTree_=new xd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function I1(t,e,n){if(t.stats_=Ku(t.repoInfo_),t.forceRestClient_||sC())t.server_=new Bo(t.repoInfo_,(r,s,i,o)=>{$f(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Wf(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ve(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new $t(t.repoInfo_,e,(r,s,i,o)=>{$f(t,r,s,i,o)},r=>{Wf(t,r)},r=>{j1(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=cC(t.repoInfo_,()=>new cN(t.stats_,t.server_)),t.infoData_=new sN,t.infoSyncTree_=new Uf({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=wi(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Cd(t,"connected",!1),t.serverSyncTree_=new Uf({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const u=o(a,c);rt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function ov(t){const n=t.infoData_.getNode(new Y(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Ni(t){return c1({timestamp:ov(t)})}function $f(t,e,n,r,s){t.dataUpdateCount++;const i=new Y(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=Do(n,u=>me(u));o=r1(t.serverSyncTree_,i,c,s)}else{const c=me(n);o=Yy(t.serverSyncTree_,i,c,s)}else if(r){const c=Do(n,u=>me(u));o=e1(t.serverSyncTree_,i,c)}else{const c=me(n);o=wi(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=Hr(t,i)),rt(t.eventQueue_,a,o)}function Wf(t,e){Cd(t,"connected",e),e===!1&&P1(t)}function j1(t,e){ke(e,(n,r)=>{Cd(t,n,r)})}function Cd(t,e,n){const r=new Y("/.info/"+e),s=me(n);t.infoData_.updateSnapshot(r,s);const i=wi(t.infoSyncTree_,r,s);rt(t.eventQueue_,r,i)}function kl(t){return t.nextWriteId_++}function k1(t,e,n){const r=s1(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=me(s).withIndex(e._queryParams.getIndex());Uc(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=wi(t.serverSyncTree_,e._path,i);else{const a=ai(t.serverSyncTree_,e);o=Yy(t.serverSyncTree_,e._path,i,a)}return rt(t.eventQueue_,e._path,o),Go(t.serverSyncTree_,e,n,null,!0),i},s=>(es(t,"get for query "+ve(e)+" failed: "+s),Promise.reject(new Error(s))))}function T1(t,e,n,r,s){es(t,"set",{path:e.toString(),value:n,priority:r});const i=Ni(t),o=me(n,r),a=Cl(t.serverSyncTree_,e),c=yd(o,a,i),u=kl(t),h=dd(t.serverSyncTree_,e,c,u,!0);jl(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(f,y)=>{const x=f==="ok";x||Be("set at "+e+" failed: "+f);const g=dn(t.serverSyncTree_,u,!x);rt(t.eventQueue_,e,g),$c(t,s,f,y)});const d=Sd(t,e);Hr(t,d),rt(t.eventQueue_,d,[])}function A1(t,e,n,r){es(t,"update",{path:e.toString(),value:n});let s=!0;const i=Ni(t),o={};if(ke(n,(a,c)=>{s=!1,o[a]=ev(he(e,a),me(c),t.serverSyncTree_,i)}),s)Ee("update() called with empty data.  Don't do anything."),$c(t,r,"ok",void 0);else{const a=kl(t),c=ZN(t.serverSyncTree_,e,o,a);jl(t.eventQueue_,c),t.server_.merge(e.toString(),n,(u,h)=>{const d=u==="ok";d||Be("update at "+e+" failed: "+u);const f=dn(t.serverSyncTree_,a,!d),y=f.length>0?Hr(t,e):e;rt(t.eventQueue_,y,f),$c(t,r,u,h)}),ke(n,u=>{const h=Sd(t,he(e,u));Hr(t,h)}),rt(t.eventQueue_,e,[])}}function P1(t){es(t,"onDisconnectEvents");const e=Ni(t),n=Uo();Rc(t.onDisconnect_,G(),(s,i)=>{const o=ev(s,i,t.serverSyncTree_,e);Oy(n,s,o)});let r=[];Rc(n,G(),(s,i)=>{r=r.concat(wi(t.serverSyncTree_,s,i));const o=Sd(t,s);Hr(t,o)}),t.onDisconnect_=Uo(),rt(t.eventQueue_,G(),r)}function D1(t,e,n){let r;U(e._path)===".info"?r=Uc(t.infoSyncTree_,e,n):r=Uc(t.serverSyncTree_,e,n),sv(t.eventQueue_,e._path,r)}function R1(t,e,n){let r;U(e._path)===".info"?r=Go(t.infoSyncTree_,e,n):r=Go(t.serverSyncTree_,e,n),sv(t.eventQueue_,e._path,r)}function O1(t){t.persistentConnection_&&t.persistentConnection_.interrupt(N1)}function es(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ee(n,...e)}function $c(t,e,n,r){e&&Xr(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function M1(t,e,n,r,s,i){es(t,"transaction on "+e);const o={path:e,update:n,onComplete:r,status:null,order:sy(),applyLocally:i,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=Nd(t,e,void 0);o.currentInputSnapshot=a;const c=o.update(a.val());if(c===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Ci("transaction failed: Data returned ",c,o.path),o.status=0;const u=Sl(t.transactionQueueTree_,e),h=ur(u)||[];h.push(o),wd(u,h);let d;typeof c=="object"&&c!==null&&Ct(c,".priority")?(d=Zn(c,".priority"),j(Ko(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(Cl(t.serverSyncTree_,e)||M.EMPTY_NODE).getPriority().val();const f=Ni(t),y=me(c,d),x=yd(y,a,f);o.currentOutputSnapshotRaw=y,o.currentOutputSnapshotResolved=x,o.currentWriteId=kl(t);const g=dd(t.serverSyncTree_,e,x,o.currentWriteId,o.applyLocally);rt(t.eventQueue_,e,g),Tl(t,t.transactionQueueTree_)}}function Nd(t,e,n){return Cl(t.serverSyncTree_,e,n)||M.EMPTY_NODE}function Tl(t,e=t.transactionQueueTree_){if(e||Al(t,e),ur(e)){const n=av(t,e);j(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&L1(t,_i(e),n)}else tv(e)&&El(e,n=>{Tl(t,n)})}function L1(t,e,n){const r=n.map(u=>u.currentWriteId),s=Nd(t,e,r);let i=s;const o=s.hash();for(let u=0;u<n.length;u++){const h=n[u];j(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Le(e,h.path);i=i.updateChild(d,h.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,u=>{es(t,"transaction put response",{path:c.toString(),status:u});let h=[];if(u==="ok"){const d=[];for(let f=0;f<n.length;f++)n[f].status=2,h=h.concat(dn(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Al(t,Sl(t.transactionQueueTree_,e)),Tl(t,t.transactionQueueTree_),rt(t.eventQueue_,e,h);for(let f=0;f<d.length;f++)Xr(d[f])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Be("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}Hr(t,e)}},o)}function Hr(t,e){const n=lv(t,e),r=_i(n),s=av(t,n);return F1(t,s,r),r}function F1(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],u=Le(n,c.path);let h=!1,d;if(j(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)h=!0,d=c.abortReason,s=s.concat(dn(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=S1)h=!0,d="maxretry",s=s.concat(dn(t.serverSyncTree_,c.currentWriteId,!0));else{const f=Nd(t,c.path,o);c.currentInputSnapshot=f;const y=e[a].update(f.val());if(y!==void 0){Ci("transaction failed: Data returned ",y,c.path);let x=me(y);typeof y=="object"&&y!=null&&Ct(y,".priority")||(x=x.updatePriority(f.getPriority()));const _=c.currentWriteId,v=Ni(t),p=yd(x,f,v);c.currentOutputSnapshotRaw=x,c.currentOutputSnapshotResolved=p,c.currentWriteId=kl(t),o.splice(o.indexOf(_),1),s=s.concat(dd(t.serverSyncTree_,c.path,p,c.currentWriteId,c.applyLocally)),s=s.concat(dn(t.serverSyncTree_,_,!0))}else h=!0,d="nodata",s=s.concat(dn(t.serverSyncTree_,c.currentWriteId,!0))}rt(t.eventQueue_,n,s),s=[],h&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Al(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Xr(r[a]);Tl(t,t.transactionQueueTree_)}function lv(t,e){let n,r=t.transactionQueueTree_;for(n=U(e);n!==null&&ur(r)===void 0;)r=Sl(r,n),e=Z(e),n=U(e);return r}function av(t,e){const n=[];return cv(t,e,n),n.sort((r,s)=>r.order-s.order),n}function cv(t,e,n){const r=ur(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);El(e,s=>{cv(t,s,n)})}function Al(t,e){const n=ur(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,wd(e,n.length>0?n:void 0)}El(e,r=>{Al(t,r)})}function Sd(t,e){const n=_i(lv(t,e)),r=Sl(t.transactionQueueTree_,e);return f1(r,s=>{xa(t,s)}),xa(t,r),nv(r,s=>{xa(t,s)}),n}function xa(t,e){const n=ur(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(j(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(j(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(dn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?wd(e,void 0):n.length=i+1,rt(t.eventQueue_,_i(e),s);for(let o=0;o<r.length;o++)Xr(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function U1(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Be(`Invalid query segment '${n}' in query '${t}'`)}return e}const Vf=function(t,e){const n=z1(t),r=n.namespace;n.domain==="firebase.com"&&Kt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Kt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Kb();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new yy(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Y(n.pathString)}},z1=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(s=B1(t.substring(h,d)));const f=U1(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const y=e.slice(0,u);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{const x=e.indexOf(".");r=e.substring(0,x).toLowerCase(),n=e.substring(x+1),i=r}"ns"in f&&(i=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",$1=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=Hf.charAt(n%64),n=Math.floor(n/64);j(n===0,"Cannot push at time == 0");let o=i.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=Hf.charAt(e[s]);return j(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ve(this.snapshot.exportVal())}}class V1{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return j(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return z(this._path)?null:Ju(this._path)}get ref(){return new Dt(this._repo,this._path)}get _queryIdentifier(){const e=Tf(this._queryParams),n=qu(e);return n==="{}"?"default":n}get _queryObject(){return Tf(this._queryParams)}isEqual(e){if(e=Nt(e),!(e instanceof ts))return!1;const n=this._repo===e._repo,r=Xu(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+PC(this._path)}}function H1(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ed(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===qn){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==er)throw new Error(r);if(typeof e!="string")throw new Error(s)}if(t.hasEnd()){if(t.getIndexEndName()!==In)throw new Error(r);if(typeof n!="string")throw new Error(s)}}else if(t.getIndex()===oe){if(e!=null&&!Ko(e)||n!=null&&!Ko(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(j(t.getIndex()instanceof td||t.getIndex()===Dy,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function dv(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Dt extends ts{constructor(e,n){super(e,n,new rd,!1)}get parent(){const e=Ey(this._path);return e===null?null:new Dt(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Qr{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Y(e),r=ci(this.ref,e);return new Qr(this._node.getChild(n),r,oe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new Qr(s,ci(this.ref,r),oe)))}hasChild(e){const n=new Y(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function D(t,e){return t=Nt(t),t._checkNotDeleted("ref"),e!==void 0?ci(t._root,e):t._root}function ci(t,e){return t=Nt(t),U(t._path)===null?w1("child","path",e):bd("child","path",e),new Dt(t._repo,he(t._path,e))}function Rt(t,e){t=Nt(t),Il("push",t._path),bi("push",e,t._path,!0);const n=ov(t._repo),r=$1(n),s=ci(t,r),i=ci(t,r);let o;return o=Promise.resolve(i),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function ns(t){return Il("remove",t._path),St(t,null)}function St(t,e){t=Nt(t),Il("set",t._path),bi("set",e,t._path,!1);const n=new Jr;return T1(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function De(t,e){x1("update",e,t._path);const n=new Jr;return A1(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function H(t){t=Nt(t);const e=new uv(()=>{}),n=new Pl(e);return k1(t._repo,t,n).then(r=>new Qr(r,new Dt(t._repo,t._path),t._queryParams.getIndex()))}class Pl{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new W1("value",this,new Qr(e.snapshotNode,new Dt(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new V1(this,e,n):null}matches(e){return e instanceof Pl?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function Q1(t,e,n,r,s){const i=new uv(n,void 0),o=new Pl(i);return D1(t._repo,t,o),()=>R1(t._repo,t,o)}function q1(t,e,n,r){return Q1(t,"value",e)}class Dl{}class G1 extends Dl{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){bi("endAt",this._value,e._path,!0);const n=nN(e._queryParams,this._value,this._key);if(dv(n),Ed(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ts(e._repo,e._path,n,e._orderByCalled)}}class K1 extends Dl{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){bi("startAt",this._value,e._path,!0);const n=tN(e._queryParams,this._value,this._key);if(dv(n),Ed(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ts(e._repo,e._path,n,e._orderByCalled)}}class Y1 extends Dl{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){H1(e,"orderByChild");const n=new Y(this._path);if(z(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new td(n),s=rN(e._queryParams,r);return Ed(s),new ts(e._repo,e._path,s,!0)}}function Yt(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return bd("orderByChild","path",t),new Y1(t)}class J1 extends Dl{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(bi("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new G1(this._value,this._key)._apply(new K1(this._value,this._key)._apply(e))}}function Jt(t,e){return new J1(t,e)}function Xt(t,...e){let n=Nt(t);for(const r of e)n=r._apply(n);return n}HN(Dt);YN(Dt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="FIREBASE_DATABASE_EMULATOR_HOST",Wc={};let Z1=!1;function eS(t,e,n,r){t.repoInfo_=new yy(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function tS(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Kt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ee("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Vf(i,s),a=o.repoInfo,c;typeof process<"u"&&hf&&(c=hf[X1]),c?(i=`http://${c}?ns=${a.namespace}`,o=Vf(i,s),a=o.repoInfo):o.repoInfo.secure;const u=new oC(t.name,t.options,e);_1("Invalid Firebase Database URL",o),z(o.path)||Kt("Database URL must point to the root of a Firebase Database (not including a child path).");const h=rS(a,t,u,new iC(t.name,n));return new sS(h,t)}function nS(t,e){const n=Wc[e];(!n||n[t.key]!==t)&&Kt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),O1(t),delete n[t.key]}function rS(t,e,n,r){let s=Wc[e.name];s||(s={},Wc[e.name]=s);let i=s[t.toURLString()];return i&&Kt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new E1(t,Z1,n,r),s[t.toURLString()]=i,i}class sS{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(I1(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Dt(this._repo,G())),this._rootInternal}_delete(){return this._rootInternal!==null&&(nS(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Kt("Cannot call "+e+" on a deleted database.")}}function hv(t=Zg(),e){const n=gi(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=x_("database");r&&iS(n,...r)}return n}function iS(t,e,n,r={}){t=Nt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Kt("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Kt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new so(so.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:w_(r.mockUserToken,t.app.options.projectId);i=new so(o)}eS(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(t){Vb(Rb),En(new qt("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return tS(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Pt(ff,pf,t),Pt(ff,pf,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function Si(t,e,n){var r;if(t=Nt(t),Il("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const s=(r=void 0)!==null&&r!==void 0?r:!0,i=new Jr,o=(c,u,h)=>{let d=null;c?i.reject(c):(d=new Qr(h,new Dt(t._repo,t._path),oe),i.resolve(new lS(u,d)))},a=q1(t,()=>{});return M1(t._repo,t._path,e,o,a,s),i.promise}$t.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};$t.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};oS();var aS="firebase",cS="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pt(aS,cS,"app");const fv="@firebase/installations",Id="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=1e4,mv=`w:${Id}`,gv="FIS_v2",uS="https://firebaseinstallations.googleapis.com/v1",dS=60*60*1e3,hS="installations",fS="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},rr=new gl(hS,fS,pS);function yv(t){return t instanceof lr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv({projectId:t}){return`${uS}/projects/${t}/installations`}function xv(t){return{token:t.token,requestStatus:2,expiresIn:gS(t.expiresIn),creationTime:Date.now()}}async function wv(t,e){const r=(await e.json()).error;return rr.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function _v({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function mS(t,{refreshToken:e}){const n=_v(t);return n.append("Authorization",yS(e)),n}async function bv(t){const e=await t();return e.status>=500&&e.status<600?t():e}function gS(t){return Number(t.replace("s","000"))}function yS(t){return`${gv} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vS({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=vv(t),s=_v(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:n,authVersion:gv,appId:t.appId,sdkVersion:mv},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await bv(()=>fetch(r,a));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:xv(u.authToken)}}else throw await wv("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=/^[cdef][\w-]{21}$/,Vc="";function _S(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=bS(t);return wS.test(n)?n:Vc}catch{return Vc}}function bS(t){return xS(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=new Map;function Sv(t,e){const n=Rl(t);Ev(n,e),CS(n,e)}function Ev(t,e){const n=Nv.get(t);if(n)for(const r of n)r(e)}function CS(t,e){const n=NS();n&&n.postMessage({key:t,fid:e}),SS()}let Vn=null;function NS(){return!Vn&&"BroadcastChannel"in self&&(Vn=new BroadcastChannel("[Firebase] FID Change"),Vn.onmessage=t=>{Ev(t.data.key,t.data.fid)}),Vn}function SS(){Nv.size===0&&Vn&&(Vn.close(),Vn=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="firebase-installations-database",IS=1,sr="firebase-installations-store";let wa=null;function jd(){return wa||(wa=Jg(ES,IS,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(sr)}}})),wa}async function Yo(t,e){const n=Rl(t),s=(await jd()).transaction(sr,"readwrite"),i=s.objectStore(sr),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&Sv(t,e.fid),e}async function Iv(t){const e=Rl(t),r=(await jd()).transaction(sr,"readwrite");await r.objectStore(sr).delete(e),await r.done}async function Ol(t,e){const n=Rl(t),s=(await jd()).transaction(sr,"readwrite"),i=s.objectStore(sr),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&Sv(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kd(t){let e;const n=await Ol(t.appConfig,r=>{const s=jS(r),i=kS(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Vc?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function jS(t){const e=t||{fid:_S(),registrationStatus:0};return jv(e)}function kS(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(rr.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=TS(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:AS(t)}:{installationEntry:e}}async function TS(t,e){try{const n=await vS(t,e);return Yo(t.appConfig,n)}catch(n){throw yv(n)&&n.customData.serverCode===409?await Iv(t.appConfig):await Yo(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function AS(t){let e=await Qf(t.appConfig);for(;e.registrationStatus===1;)await Cv(100),e=await Qf(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await kd(t);return r||n}return e}function Qf(t){return Ol(t,e=>{if(!e)throw rr.create("installation-not-found");return jv(e)})}function jv(t){return PS(t)?{fid:t.fid,registrationStatus:0}:t}function PS(t){return t.registrationStatus===1&&t.registrationTime+pv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DS({appConfig:t,heartbeatServiceProvider:e},n){const r=RS(t,n),s=mS(t,n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:mv,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await bv(()=>fetch(r,a));if(c.ok){const u=await c.json();return xv(u)}else throw await wv("Generate Auth Token",c)}function RS(t,{fid:e}){return`${vv(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Td(t,e=!1){let n;const r=await Ol(t.appConfig,i=>{if(!kv(i))throw rr.create("not-registered");const o=i.authToken;if(!e&&LS(o))return i;if(o.requestStatus===1)return n=OS(t,e),i;{if(!navigator.onLine)throw rr.create("app-offline");const a=BS(i);return n=MS(t,a),a}});return n?await n:r.authToken}async function OS(t,e){let n=await qf(t.appConfig);for(;n.authToken.requestStatus===1;)await Cv(100),n=await qf(t.appConfig);const r=n.authToken;return r.requestStatus===0?Td(t,e):r}function qf(t){return Ol(t,e=>{if(!kv(e))throw rr.create("not-registered");const n=e.authToken;return US(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function MS(t,e){try{const n=await DS(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Yo(t.appConfig,r),n}catch(n){if(yv(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Iv(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Yo(t.appConfig,r)}throw n}}function kv(t){return t!==void 0&&t.registrationStatus===2}function LS(t){return t.requestStatus===2&&!FS(t)}function FS(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+dS}function BS(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function US(t){return t.requestStatus===1&&t.requestTime+pv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zS(t){const e=t,{installationEntry:n,registrationPromise:r}=await kd(e);return r?r.catch(console.error):Td(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $S(t,e=!1){const n=t;return await WS(n),(await Td(n,e)).token}async function WS(t){const{registrationPromise:e}=await kd(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t){if(!t||!t.options)throw _a("App Configuration");if(!t.name)throw _a("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw _a(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function _a(t){return rr.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="installations",HS="installations-internal",QS=t=>{const e=t.getProvider("app").getImmediate(),n=VS(e),r=gi(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},qS=t=>{const e=t.getProvider("app").getImmediate(),n=gi(e,Tv).getImmediate();return{getId:()=>zS(n),getToken:s=>$S(n,s)}};function GS(){En(new qt(Tv,QS,"PUBLIC")),En(new qt(HS,qS,"PRIVATE"))}GS();Pt(fv,Id);Pt(fv,Id,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo="analytics",KS="firebase_id",YS="origin",JS=60*1e3,XS="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ad="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ge=new Vu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},tt=new gl("analytics","Analytics",ZS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t){if(!t.startsWith(Ad)){const e=tt.create("invalid-gtag-resource",{gtagURL:t});return Ge.warn(e.message),""}return t}function Av(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function tE(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function nE(t,e){const n=tE("firebase-js-sdk-policy",{createScriptURL:eE}),r=document.createElement("script"),s=`${Ad}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function rE(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function sE(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const c=(await Av(n)).find(u=>u.measurementId===s);c&&await e[c.appId]}}catch(a){Ge.error(a)}t("config",s,i)}async function iE(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await Av(n);for(const c of o){const u=a.find(d=>d.measurementId===c),h=u&&e[u.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Ge.error(i)}}function oE(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,c]=o;await iE(t,e,n,a,c)}else if(i==="config"){const[a,c]=o;await sE(t,e,n,r,a,c)}else if(i==="consent"){const[a,c]=o;t("consent",a,c)}else if(i==="get"){const[a,c,u]=o;t("get",a,c,u)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){Ge.error(a)}}return s}function lE(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=oE(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function aE(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Ad)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=30,uE=1e3;class dE{constructor(e={},n=uE){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Pv=new dE;function hE(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function fE(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:hE(r)},i=XS.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw tt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function pE(t,e=Pv,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw tt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw tt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new yE;return setTimeout(async()=>{a.abort()},JS),Dv({appId:r,apiKey:s,measurementId:i},o,a,e)}async function Dv(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=Pv){var i;const{appId:o,measurementId:a}=t;try{await mE(r,e)}catch(c){if(a)return Ge.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw c}try{const c=await fE(t);return s.deleteThrottleMetadata(o),c}catch(c){const u=c;if(!gE(u)){if(s.deleteThrottleMetadata(o),a)return Ge.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw c}const h=Number((i=u==null?void 0:u.customData)===null||i===void 0?void 0:i.httpStatus)===503?nf(n,s.intervalMillis,cE):nf(n,s.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(o,d),Ge.debug(`Calling attemptFetch again in ${h} millis`),Dv(t,d,r,s)}}function mE(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(tt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function gE(t){if(!(t instanceof lr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class yE{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function vE(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xE(){if(Qg())try{await qg()}catch(t){return Ge.warn(tt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ge.warn(tt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function wE(t,e,n,r,s,i,o){var a;const c=pE(t);c.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&Ge.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>Ge.error(y)),e.push(c);const u=xE().then(y=>{if(y)return r.getId()}),[h,d]=await Promise.all([c,u]);aE(i)||nE(i,h.measurementId),s("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[YS]="firebase",f.update=!0,d!=null&&(f[KS]=d),s("config",h.measurementId,f),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e){this.app=e}_delete(){return delete Ms[this.app.options.appId],Promise.resolve()}}let Ms={},Gf=[];const Kf={};let ba="dataLayer",bE="gtag",Yf,Rv,Jf=!1;function CE(){const t=[];if(b_()&&t.push("This is a browser extension environment."),N_()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=tt.create("invalid-analytics-context",{errorInfo:e});Ge.warn(n.message)}}function NE(t,e,n){CE();const r=t.options.appId;if(!r)throw tt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ge.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw tt.create("no-api-key");if(Ms[r]!=null)throw tt.create("already-exists",{id:r});if(!Jf){rE(ba);const{wrappedGtag:i,gtagCore:o}=lE(Ms,Gf,Kf,ba,bE);Rv=i,Yf=o,Jf=!0}return Ms[r]=wE(t,Gf,Kf,e,Yf,ba,n),new _E(t)}function SE(t=Zg()){t=Nt(t);const e=gi(t,Jo);return e.isInitialized()?e.getImmediate():EE(t)}function EE(t,e={}){const n=gi(t,Jo);if(n.isInitialized()){const s=n.getImmediate();if(Ro(e,n.getOptions()))return s;throw tt.create("already-initialized")}return n.initialize({options:e})}function IE(t,e,n,r){t=Nt(t),vE(Rv,Ms[t.app.options.appId],e,n,r).catch(s=>Ge.error(s))}const Xf="@firebase/analytics",Zf="0.10.8";function jE(){En(new qt(Jo,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return NE(r,s,n)},"PUBLIC")),En(new qt("analytics-internal",t,"PRIVATE")),Pt(Xf,Zf),Pt(Xf,Zf,"esm2017");function t(e){try{const n=e.getProvider(Jo).getImmediate();return{logEvent:(r,s,i)=>IE(n,r,s,i)}}catch(n){throw tt.create("interop-component-reg-failed",{reason:n})}}}jE();const kE={apiKey:"AIzaSyCIZn8NmNqICZqkEevSpjTA33FhATJ_Dak",authDomain:"sherazpos.firebaseapp.com",databaseURL:"https://sherazpos-default-rtdb.firebaseio.com",projectId:"sherazpos",storageBucket:"sherazpos.appspot.com",messagingSenderId:"597415567946",appId:"1:597415567946:web:9eb38d977357f825273cb3",measurementId:"G-56K9B8HK61"},Pd=Xg(kE);SE(Pd);const Zt=hv(Pd),R=hv(Pd),TE=async t=>{try{const e=D(Zt,"areas/"),n=Rt(e);if((await Si(e,s=>{if(s=s||{},!Object.values(s).some(i=>i.name.toLowerCase()===t.name.toLowerCase()||i.shortForm.toLowerCase()===t.shortForm.toLowerCase()))return s[n.key]={...t,id:n.key},s})).committed)return await St(n,{...t,id:n.key}),n.key;throw new Error("Area already exists.")}catch(e){throw console.error("Failed to add area:",e),new Error("Failed to add area")}},Dd=async()=>{try{const t=D(Zt,"areas/"),e=await H(t);if(e.exists()){const n=[];return e.forEach(r=>{const s=r.val();n.push({id:r.key,...s})}),n}else return console.log("No areas found."),[]}catch(t){throw console.error("Failed to retrieve areas:",t),new Error("Failed to retrieve areas")}},ep=async t=>{try{t.discount=isNaN(t.discount)?0:t.discount,console.log(t);const e=Rt(D(R,"cashInvoices"));t.id=e.key,await St(e,t);for(const n of t.products){const r=Xt(D(R,"products"),Yt("productCode"),Jt(n.productCode)),i=(await H(r)).val();if(i){const o=Object.keys(i)[0],a=i[o],u=(isNaN(a.quantity)?0:parseInt(a.quantity))-parseInt(n.quantity);await De(D(R,`products/${o}`),{quantity:u})}}return console.log("Cash Invoice Added"),t.id}catch(e){console.error("Failed to add cash invoice and update product quantities:",e)}},AE=async(t,e)=>{try{const n=D(R,`cashInvoices/${t}`),s=(await H(n)).val();if(!s)throw new Error("Invoice not found");if(console.log(`Updates: ${JSON.stringify(e,null,2)} | Invoice ID: ${t}`),s.products&&s.products.length>0)for(const i of s.products){const o=Xt(D(R,"products"),Yt("productCode"),Jt(i.productCode)),c=(await H(o)).val();if(c){const u=Object.keys(c)[0],h=c[u],f=(isNaN(h.quantity)?0:Number(h.quantity||0))-Number(i.quantity||0);await De(D(R,`products/${u}`),{quantity:f})}}if(await De(n,e),e.products)for(const i of e.products){const o=Xt(D(R,"products"),Yt("productCode"),Jt(i.productCode)),c=(await H(o)).val();if(c){const u=Object.keys(c)[0],h=c[u],f=(isNaN(h.quantity)?0:Number(h.quantity||0))-Number(i.quantity);await De(D(R,`products/${u}`),{quantity:f})}}}catch(n){console.error("Failed to update cash invoice and product quantities:",n)}},PE=async t=>{try{const e=D(R,`cashInvoices/${t}`),r=(await H(e)).val();if(!r)throw new Error("Invoice not found");if(r.products&&r.products.length>0)for(const s of r.products){const i=Xt(D(R,"products"),Yt("productCode"),Jt(s.productCode)),a=(await H(i)).val();if(a){const c=Object.keys(a)[0],u=a[c],d=(isNaN(u.quantity)?0:Number(u.quantity))-Number(s.quantity);await De(D(R,`products/${c}`),{quantity:d})}}await ns(e)}catch(e){console.error("Failed to delete cash invoice and revert product quantities:",e)}},Ov=async()=>{try{const t=D(R,"cashInvoices"),e=await H(t);return e.val()?Object.values(e.val()):[]}catch(t){console.error("Failed to retrieve cash invoices:",t)}},DE=async t=>{try{const e=D(R,"cashInvoices"),n=await H(e);return(n.val()?Object.values(n.val()):[]).filter(i=>i.products.some(o=>o.productCode===t))}catch(e){return console.error("Failed to retrieve cash invoices by product code:",e),[]}},RE=async t=>{try{const e=Rt(D(R,"customers"));return await St(e,{...t,id:e.key}),e.key}catch(e){console.error("Failed to add customer:",e)}},OE=async()=>{try{const t=await H(D(R,"customers"));return t.exists()?Object.values(t.val()):[]}catch(t){console.error("Failed to retrieve customers:",t)}},ME=async()=>{try{const t=Xt(D(R,"customers"),Yt("accountType"),Jt("Supplier")),e=await H(t);return e.exists()?Object.values(e.val()):[]}catch(t){return console.error("Failed to retrieve suppliers:",t),[]}},LE=async()=>{try{const t=Xt(D(R,"customers"),Yt("accountType"),Jt("Customer")),e=await H(t);return e.exists()?Object.values(e.val()):[]}catch(t){return console.error("Failed to retrieve customers:",t),[]}},FE=async(t,e)=>{try{const n=D(R,`customers/${t}`);await De(n,e)}catch(n){console.error("Failed to update customer:",n)}},BE=async t=>{try{const e=D(R,`customers/${t}`);await ns(e)}catch(e){console.error("Failed to delete customer:",e)}},tp=async t=>{try{t.discount=isNaN(t.discount)?0:t.discount;const e=D(R,"deliveryNotes"),n=Rt(e);await St(n,t);const r=t.products.map(async s=>{if(s.productCode&&s.productCode!==""){const i=Xt(D(R,"products"),Yt("productCode"),Jt(s.productCode)),o=await H(i);if(o.exists()){const a=o.val();console.log(a);const c=Object.keys(a)[0],h=(isNaN(a.quantity)?0:parseInt(a.quantity))-parseInt(s.quantity);await De(D(R,`products/${c}`),{quantity:h})}}});return await Promise.all(r),n.key}catch(e){console.error("Failed to add delivery note and update product quantities:",e)}},Mv=async(t,e)=>{try{console.log(t);const n=D(R,`deliveryNotes/${t}`),r=await H(n);if(!r.exists())throw new Error("Delivery note not found");const s=r.val();let i=[];s.products&&s.products.length>0&&(i=s.products.map(async a=>{const c=Xt(D(R,"products"),Yt("productCode"),Jt(a.productCode)),u=await H(c);if(u.exists()){const h=u.val(),f=(isNaN(h.quantity)?0:Number(h.quantity||0))+Number(a.quantity),y=Object.keys(h)[0];await De(D(R,`products/${y}`),{quantity:f})}}));let o=[];e.products&&e.products.length>0&&(o=e.products.map(async a=>{const c=Xt(D(R,"products"),Yt("productCode"),Jt(a.productCode)),u=await H(c);if(u.exists()){const h=u.val(),f=(isNaN(h.quantity)?0:Number(h.quantity))-Number(a.quantity),y=Object.keys(h)[0];await De(D(R,`products/${y}`),{quantity:f})}})),await Promise.all([...i,...o]),await De(n,e)}catch(n){console.error("Failed to update delivery note and product quantities:",n)}},UE=async t=>{try{const e=D(R,`deliveryNotes/${t}`),n=await H(e);if(!n.exists())throw new Error("Delivery note not found");const r=n.val();let s=[];r.products&&r.products.length>0&&(s=r.products.map(async i=>{const o=D(R,`products/${i.productCode}`),a=await H(o);if(a.exists()){const c=a.val(),h=(isNaN(c.quantity)?0:Number(c.quantity))-Number(i.quantity),d=Object.keys(c)[0];await De(D(R,`products/${d}`),{quantity:h})}})),await ns(e),await Promise.all(s)}catch(e){console.error("Failed to delete delivery note and revert product quantities:",e)}},Lv=async()=>{try{const t=await H(D(R,"deliveryNotes"));return t.exists()?Object.entries(t.val()).map(([e,n])=>({id:e,...n})):[]}catch(t){console.error("Failed to retrieve delivery notes:",t)}},zE=async t=>{try{const e=await H(D(R,"deliveryNotes")),n=e.exists()?e.val():{};return Object.keys(n).flatMap(s=>{const i=n[s];return i.products.filter(a=>a.productCode===t).map(a=>({...i,...a}))})}catch(e){return console.error("Failed to retrieve delivery notes:",e),[]}},$E=async t=>{try{t.discount=isNaN(t.discount)?0:t.discount;const e=Rt(D(R,"quotations"));return await St(e,t),e.key}catch(e){console.error("Failed to add quotation:",e)}},WE=async(t,e)=>{try{console.log(t),await De(D(R,`quotations/${t}`),e)}catch(n){console.error("Failed to update quotation:",n)}},Ca=async t=>{try{await ns(D(R,`quotations/${t}`))}catch(e){console.error("Failed to delete quotation:",e)}},Rd=async()=>{try{const t=D(R,"quotations"),e=await H(t);return e.exists()?Object.entries(e.val()).map(([n,r])=>({id:n,...r})):[]}catch(t){console.error("Failed to get all quotations:",t)}},VE=async t=>{try{return(await Rd()).flatMap(r=>r.products.filter(i=>i.productCode===t).map(i=>({...r,...i})))}catch(e){return console.error("Failed to retrieve quotations:",e),[]}},Od=async t=>{const e=t.toLowerCase();try{const r=(await H(D(R,"products"))).val();return r?Object.values(r).find(i=>i.productCode===e):null}catch(n){return console.error("Failed to retrieve product:",n),null}},HE=async t=>{try{const e=t.productCode.toLowerCase();if(await Od(e)){alert("Product already exists with this code");return}const n=Rt(D(R,"products")),r=n.key,s=(t.alternatives||[]).filter(i=>i.productCode&&i.productCode.trim()!=="");if(await St(n,{...t,id:r,productCode:e,alternatives:s}),s.length>0)for(let i of s){const a=(await H(D(R,"products"))).val(),c=Object.values(a).find(u=>u.productCode===i.productCode);if(c){const u=D(R,`products/${c.id}`);await Si(u,h=>(h&&h.alternatives.push({productCode:e,brand:t.brand,name:t.name,sellingPrice1:t.sellingPrice1}),h))}}return r}catch(e){console.error("Failed to add product and manage alternatives:",e)}},Fv=async()=>{try{const t=await H(D(R,"products"));return t.exists()?Object.values(t.val()):[]}catch(t){return console.error("Failed to retrieve products:",t),[]}},QE=async(t,e)=>{try{const n=D(R,`products/${t}`),s=(await H(n)).val();if(!s)throw new Error(`Product with ID ${t} not found`);const i=s.productCode,o=(e.alternatives||[]).filter(a=>a.productCode&&a.productCode.trim()!=="");await De(n,e);for(let a of o){const u=(await H(D(R,"products"))).val(),h=Object.values(u).find(d=>d.productCode===a.productCode);if(h){const d=D(R,`products/${h.id}`);await Si(d,f=>(f&&(f.alternatives=f.alternatives.filter(y=>y.productCode!==i),f.alternatives.push({productCode:i,brand:e.brand||s.brand,name:e.name||s.name,sellingPrice1:e.sellingPrice1||s.sellingPrice1})),f))}}}catch(n){console.error("Failed to update product and manage alternatives:",n)}},qE=async t=>{try{const n=(await H(D(R,`products/${t}`))).val();if(!n)throw new Error(`Product with ID ${t} not found`);const r=n.productCode,s=n.alternatives||[];for(let i of s){const a=(await H(D(R,"products"))).val(),c=Object.values(a).find(u=>u.productCode===i.productCode);if(c){const u=D(R,`products/${c.id}`);await Si(u,h=>(h&&(h.alternatives=h.alternatives.filter(d=>d.productCode!==r)),h))}}await ns(D(R,`products/${t}`))}catch(e){console.error("Failed to delete product and manage alternatives:",e)}},GE=async t=>{try{const e=D(Zt,"categories"),n=Rt(e);return await St(n,{id:n.key,name:t.name,shortForm:t.shortForm,subCategories:t.subCategories||[]}),n.key}catch(e){throw console.error("Failed to add category:",e),new Error("Failed to add category")}},Ml=async()=>{try{const t=D(Zt,"categories"),e=await H(t);if(e.exists()){const n=[];return e.forEach(r=>{const s=r.val();n.push({id:r.key,...s})}),n}else return console.log("No categories found."),[]}catch(t){throw console.error("Failed to retrieve categories:",t),new Error("Failed to retrieve categories")}},KE=async(t,e)=>{try{const n=D(Zt,`categories/${t}/subCategories`),r=Rt(n);await St(r,{name:e.name,shortForm:e.shortForm})}catch(n){throw console.error("Failed to add subcategory:",n),new Error("Failed to add subcategory")}},YE=async()=>{try{const t=D(Zt,"categories"),e=await H(t),n=[];return e.exists()?(e.forEach(r=>{const s=r.key,i=D(Zt,`categories/${s}/subCategories`);H(i).then(o=>{o.exists()?o.forEach(a=>{const c=a.val();n.push({id:a.key,...c,categoryId:s})}):console.log(`No subcategories found for category ${s}.`)})}),n):(console.log("No categories found."),[])}catch(t){throw console.error("Failed to retrieve subcategories:",t),new Error("Failed to retrieve subcategories")}},JE=({machines:t,onSelectMachine:e})=>l.jsxs("select",{onChange:n=>e(n.target.value),className:"w-full border p-1 mb-2",children:[l.jsx("option",{value:"",children:"Select Machine"}),t.map(n=>l.jsxs("option",{value:n.id,children:[n.shortForm," : ",n.name]},n.id))]}),XE=({submachines:t,onSelectSubmachine:e})=>l.jsxs("select",{onChange:n=>e(n.target.value),className:"w-full border p-1 mb-2",children:[l.jsx("option",{value:"",children:"Select Submachine"}),t.map(n=>l.jsxs("option",{value:n.shortForm,children:[n.shortForm," : ",n.name]},n.shortForm))]}),ZE=({products:t,onSelectProduct:e})=>{const n=Object.keys(t.length>0?t[0]:{}),r=["alternatives","appliedModels","picture"],s=n.filter(o=>!r.includes(o)),i=o=>{e(o)};return l.jsxs("table",{className:"min-w-full max-w-full overflow-auto  border ",style:{zIndex:500},children:[l.jsx("thead",{children:l.jsx("tr",{className:"text-white bg-blue-800",children:s.map((o,a)=>l.jsx("th",{className:"py-1 px-4 text-sm font-normal border-b text-left",children:o.replace(/([A-Z])/g," $1").replace(/^./,c=>c.toUpperCase())},a))})}),l.jsx("tbody",{className:"bg-blue-100 ",children:t.map((o,a)=>l.jsx("tr",{className:"cursor-pointer hover:bg-gray-100 py-1 text-sm ",onClick:()=>i(o),children:s.map((c,u)=>l.jsx("td",{className:"py-2 px-4 border-b",children:typeof o[c]=="string"&&o[c].length>10?o[c].substring(0,10)+"...":o[c]},u))},a))})]})},Rn=({onProductSelect:t,productCode:e})=>{const[n,r]=b.useState(null),[s,i]=b.useState(null),[o,a]=b.useState([]);b.useEffect(()=>{(async()=>{const I=await Ml();a(I)})()},[]);const[c,u]=b.useState([]),[h,d]=b.useState(""),[f,y]=b.useState(""),[x,g]=b.useState(""),[_,v]=b.useState("");b.useEffect(()=>{(async()=>{const I=await Fv();u(I)})()},[]);const p=c.filter(N=>n&&!N.appliedModels.some(S=>S.make.toLowerCase()===n.shortForm.toLowerCase())||s&&!N.appliedModels.some(S=>S.type.toLowerCase()===s.shortForm.toLowerCase())?!1:N.name.toLowerCase().includes(h.toLowerCase())&&N.uniqueId.toLowerCase().includes(x.toLowerCase())&&N.productCode.toLowerCase().includes(_.toLowerCase())),m=N=>{const I=o.find(S=>S.id===parseInt(N));r(I),i(null)},w=N=>{const I=n.subCategories.find(S=>S.shortForm===N);i(I)},C=N=>{t(N)};return l.jsxs("div",{className:"flex min-h-[70vh] max-h-[70vh] bg-background scrollbar relative",style:{zIndex:100},children:[l.jsxs("div",{className:"w-[15%] p-4",children:[l.jsx("h2",{className:"font-bold mb-2",children:"Machines"}),l.jsx(JE,{machines:o,onSelectMachine:m}),n&&l.jsx(XE,{submachines:n.subCategories,onSelectSubmachine:w})]}),l.jsxs("div",{className:"w-[85%] p-4",children:[l.jsx("h2",{className:"mb-2",children:"Products"}),l.jsxs("div",{className:"mb-2 flex gap-2",children:[l.jsx("input",{type:"text",placeholder:"Search by Product Name",value:h,onChange:N=>d(N.target.value),className:"w-full border p-2 mb-2"}),l.jsx("input",{type:"text",placeholder:"Search by Product Code",value:e||_,onChange:N=>v(N.target.value),className:"w-full border p-2 mb-2"}),l.jsx("input",{type:"text",placeholder:"Search by OEM Code",value:f,onChange:N=>y(N.target.value),className:"w-full border p-2 mb-2"}),l.jsx("input",{type:"text",placeholder:"Search by Unique ID",value:x,onChange:N=>g(N.target.value),className:"w-full border p-2 mb-2"})]}),l.jsx("div",{className:"overflow-auto",style:{maxHeight:"50vh"},children:l.jsx(ZE,{products:p,onSelectProduct:C})})]})]})};function Bv({formData:t,onDataChange:e,Rows:n,mode:r}){const[s,i]=b.useState([]),[o,a]=b.useState(1),[c,u]=b.useState(!1),[h,d]=b.useState(null);b.useEffect(()=>{if(n&&n.length>0){i(n);const p=Math.max(...n.map(m=>m.siNo));a(p+1)}},[n]);const f=()=>{const p={siNo:o,type:"",productCode:"",brand:"",description:"",unit:"",quantity:1,gAmount:0,discount:0,totalVat:0},m=[...s,p];i(m),a(o+1),e(m)},y=p=>{const m=s.filter((w,C)=>C!==p);i(m),e(m)},x=(p,m,w)=>{const C=s.map((N,I)=>I===p?{...N,[m]:w}:N);i(C),e(C)},g=p=>{d(p),u(!0)},_=()=>{u(!1),d(null)},v=p=>{if(h!==null){let m=!1,w=s.map((C,N)=>N===h?{...C,brand:p.brand,description:p.name,unit:p.basicUnit,totalVat:Number(p.vatType),productCode:p.productCode,gAmount:Number(p.sellingPrice1)}:N!==h&&C.productCode===p.productCode?(m=!0,{...C,quantity:C.quantity+1}):C);m&&(w=w.filter((C,N)=>N!==h)),i(w),e(w)}_()};return l.jsxs("div",{className:"mt-6 min-h-[10vh] w-[98%] mx-auto",children:[l.jsx("button",{onClick:f,className:"bg-white text-black border-gray-300 border  px-6 py-2 mb-3 focus:scale-95",type:"button",children:"Add Product"}),l.jsx("div",{className:"min-h-[30vh] max-h-[30vh] scrollbar overflow-auto bg-blue-100",children:l.jsxs("table",{className:"w-full border-collapse border border-gray-300 bg-blue-100",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-blue-900 text-white",children:[l.jsx("th",{className:"border border-gray-300 px-1 italic font-bold text-sm bg-yellow-100 text-black",children:"S.I No"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Type"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Product Code"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Brand"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Description"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Unit"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Quantity"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"G. Amount"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Discount %"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Total VAT %"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Actions"})]})}),l.jsx("tbody",{children:s.map((p,m)=>l.jsxs("tr",{children:[l.jsx("td",{className:"border min-w-20 border-gray-300 text-center",children:p.siNo}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.type,onChange:w=>x(m,"type",w.target.value),className:"bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.productCode,onClick:()=>g(m),readOnly:!0,className:"w-full bg-transparent outline-none cursor-pointer focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.brand,onChange:w=>x(m,"brand",w.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.description,onChange:w=>x(m,"description",w.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.unit,onChange:w=>x(m,"unit",w.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.quantity,min:0,onChange:w=>x(m,"quantity",w.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.gAmount,min:0,onChange:w=>x(m,"gAmount",w.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.discount,min:0,onChange:w=>x(m,"discount",w.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.totalVat,min:0,onChange:w=>x(m,"totalVat",w.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 py-1 text-center px-1",children:l.jsx("button",{onClick:()=>y(m),className:"text-red-500",type:"button",children:"Delete"})})]},p.siNo))})]})}),c&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background",children:[l.jsx("button",{className:"text-red-500 mb-2",type:"button",onClick:_,children:"Close"}),l.jsx(Rn,{onProductSelect:v})]})})]})}function eI({formData:t,onDataChange:e,Rows:n,mode:r}){const[s,i]=b.useState([]),[o,a]=b.useState(1),[c,u]=b.useState(!1),[h,d]=b.useState(null);b.useEffect(()=>{if(n&&n.length>0){i(n);const p=Math.max(...n.map(m=>m.siNo));a(p+1)}},[n]);const f=()=>{const p={siNo:o,type:"",productCode:"",brand:"",description:"",unit:"",quantity:1,gAmount:0,discount:0,totalVat:0},m=[...s,p];i(m),a(o+1),e(m)},y=p=>{const m=s.filter((w,C)=>C!==p);i(m),e(m)},x=(p,m,w)=>{const C=s.map((N,I)=>I===p?{...N,[m]:w}:N);i(C),e(C)},g=p=>{d(p),u(!0)},_=()=>{u(!1),d(null)},v=p=>{if(h!==null){let m=!1,w=s.map((C,N)=>N===h?{...C,brand:p.brand,description:p.name,unit:p.basicUnit,totalVat:Number(p.vatType),productCode:p.productCode,gAmount:Number(p.sellingPrice1)}:N!==h&&C.productCode===p.productCode?(m=!0,{...C,quantity:C.quantity+1}):C);m&&(w=w.filter((C,N)=>N!==h)),i(w),e(w)}_()};return l.jsxs("div",{className:"mt-6 min-h-[10vh] w-[98%] mx-auto",children:[l.jsx("button",{onClick:f,className:"bg-white text-black border-gray-300 border  px-6 py-2 mb-3 focus:scale-95",type:"button",children:"Add Product"}),l.jsx("div",{className:"min-h-[30vh] max-h-[30vh] scrollbar overflow-auto bg-blue-100",children:l.jsxs("table",{className:"w-full border-collapse border border-gray-300 bg-blue-100",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-blue-900 text-white",children:[l.jsx("th",{className:"border border-gray-300 px-1 italic font-bold text-sm bg-yellow-100 text-black",children:"S.I No"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Type"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Product Code"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Brand"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Description"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Unit"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Quantity"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"G. Amount"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Discount %"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Total VAT %"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Actions"})]})}),l.jsx("tbody",{children:s.map((p,m)=>l.jsxs("tr",{children:[l.jsx("td",{className:"border min-w-20 border-gray-300 text-center",children:p.siNo}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.type,onChange:w=>x(m,"type",w.target.value),className:"bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.productCode,onClick:()=>g(m),readOnly:!0,className:"w-full bg-transparent outline-none cursor-pointer focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.brand,onChange:w=>x(m,"brand",w.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.description,onChange:w=>x(m,"description",w.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.unit,onChange:w=>x(m,"unit",w.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.quantity,min:0,onChange:w=>x(m,"quantity",w.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.gAmount,min:0,onChange:w=>x(m,"gAmount",w.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.discount,min:0,onChange:w=>x(m,"discount",w.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.totalVat,min:0,onChange:w=>x(m,"totalVat",w.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 py-1 text-center px-1",children:l.jsx("button",{onClick:()=>y(m),className:"text-red-500",type:"button",children:"Delete"})})]},p.siNo))})]})}),c&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background",children:[l.jsx("button",{className:"text-red-500 mb-2",type:"button",onClick:_,children:"Close"}),l.jsx(Rn,{onProductSelect:v})]})})]})}function tI({formData:t,onDataChange:e,Rows:n,mode:r}){const[s,i]=b.useState([]),[o,a]=b.useState(1),[c,u]=b.useState(!1),[h,d]=b.useState(null);b.useEffect(()=>{if(n&&n.length>0){i(n);const p=Math.max(...n.map(m=>m.siNo));a(p+1)}},[n]);const f=()=>{const p={siNo:o,type:"",productCode:"",brand:"",description:"",unit:"",quantity:1,gAmount:0,discount:0,totalVat:0},m=[...s,p];i(m),a(o+1),e(m)},y=p=>{const m=s.filter((w,C)=>C!==p);i(m),e(m)},x=(p,m,w)=>{const C=s.map((N,I)=>I===p?{...N,[m]:w}:N);i(C),e(C)},g=p=>{d(p),u(!0)},_=()=>{u(!1),d(null)},v=p=>{if(h!==null){let m=!1,w=s.map((C,N)=>N===h?{...C,brand:p.brand,description:p.name,unit:p.basicUnit,totalVat:Number(p.vatType),productCode:p.productCode,gAmount:Number(p.sellingPrice1)}:N!==h&&C.productCode===p.productCode?(m=!0,{...C,quantity:C.quantity+1}):C);m&&(w=w.filter((C,N)=>N!==h)),i(w),e(w)}_()};return l.jsxs("div",{className:"mt-6 min-h-[10vh] w-[98%] mx-auto",children:[l.jsx("div",{className:"min-h-[30vh] max-h-[30vh] scrollbar overflow-auto bg-blue-100",children:l.jsxs("table",{className:"w-full border-collapse border border-gray-300 bg-blue-100",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-blue-900 text-white",children:[l.jsx("th",{className:"border border-gray-300 px-1 italic font-bold text-sm bg-yellow-100 text-black",children:"S.I No"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Type"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Product Code"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Brand"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Description"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Unit"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Quantity"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"G. Amount"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Discount %"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Total VAT %"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Actions"})]})}),l.jsx("tbody",{children:s.map((p,m)=>l.jsxs("tr",{children:[l.jsx("td",{className:"border min-w-20 border-gray-300 text-center",children:p.siNo}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.type,onChange:w=>x(m,"type",w.target.value),className:"bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.productCode,onClick:()=>g(m),readOnly:!0,className:"w-full bg-transparent outline-none cursor-pointer focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.brand,onChange:w=>x(m,"brand",w.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.description,onChange:w=>x(m,"description",w.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:p.unit,onChange:w=>x(m,"unit",w.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.quantity,min:0,onChange:w=>x(m,"quantity",w.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.gAmount,min:0,onChange:w=>x(m,"gAmount",w.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.discount,min:0,onChange:w=>x(m,"discount",w.target.value),disabled:r==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:p.totalVat,min:0,onChange:w=>x(m,"totalVat",w.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:r==="delete"})}),l.jsx("td",{className:"border border-gray-300 py-1 text-center px-1",children:l.jsx("button",{onClick:()=>y(m),className:"text-red-500",type:"button",children:"Delete"})})]},p.siNo))})]})}),c&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background",children:[l.jsx("button",{className:"text-red-500 mb-2",type:"button",onClick:_,children:"Close"}),l.jsx(Rn,{onProductSelect:v})]})}),l.jsx("button",{onClick:f,className:"bg-white text-black border-gray-300 border  px-6 py-2 mb-3 focus:scale-95",type:"button",children:"Add Product"})]})}const nI=({mode:t,formData:e,totalDetails:n,onPaymentChange:r})=>{const[s,i]=b.useState(0),[o,a]=b.useState(0),[c,u]=b.useState(n.total||0);b.useEffect(()=>{if(n.total){const d=parseFloat(n.total);u(d),console.log("PaymentFields - Received totalAmount:",d)}else console.log("PaymentFields - formData.total is undefined or zero")},[n.total]),b.useEffect(()=>{if(e.payment==="Both"&&!isNaN(c)&&!isNaN(s)){const d=Math.max(c-s,0);a(d),console.log("Calculated Credit Amount:",d),r({cashAmount:s,creditAmount:d}),console.log("Passing to Parent - Cash Amount:",s,"Credit Amount:",d)}},[s,c,e.payment]);const h=d=>{const f=parseFloat(d.target.value)||0;f>c?(i(c),console.log("Cash Amount exceeded total, set to Total Amount:",c)):(i(f),console.log("Updated Cash Amount:",f))};return e.payment!=="Both"?null:l.jsxs("div",{className:"flex items-center col-span-2 gap-4",children:[l.jsxs("div",{className:"flex relative items-center flex-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"Cash Amount:"}),l.jsx("input",{type:"number",value:s||"",onChange:h,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!=="delete"?"bg-white":""}`,disabled:t==="delete",min:"0",max:c,step:"0.01"})]}),l.jsxs("div",{className:"flex relative items-center flex-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"Credit Amount:"}),l.jsx("input",{type:"number",value:o||"",className:"h-7 px-1 border border-gray-600 w-full ml-1 bg-gray-100",readOnly:!0})]})]})};function rI(t){if(!(t instanceof Date))throw new Error("Input must be a Date object");const e=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return`${e}/${n}/${r}`}function Uv({mode:t,initialInvoice:e}){var W;b.useState("unPaid");const[n,r]=b.useState(t||"none"),[s,i]=b.useState(e||null),[o,a]=b.useState(!1),[c,u]=b.useState([]),[h,d]=b.useState([]),[f,y]=b.useState([]),[x,g]=b.useState([]),[_,v]=b.useState([]),[p,m]=b.useState(!1),[w,C]=b.useState(!1),N=async()=>{const V=await Ov();y(V);const O=await Lv();v(O);const L=await Rd();g(L)};b.useEffect(()=>{const V=async()=>{const O=await Dd();u(O);const L=await LE();d(L)};N(),V()},[]);const I=V=>{var L,we;const O={...V,type:((L=V.type)==null?void 0:L.toLowerCase())||null,status:((we=V.status)==null?void 0:we.toLowerCase())||"unpaid"};i(O),a(!1),m(O.status==="paid"),console.log("Selected Invoice:",O)},S=V=>{r(V),i(null),a(V==="edit")},k=async()=>{var O;if(!s)return;const V=(O=s.invoiceType)==null?void 0:O.toLowerCase();if(console.log("Invoice type:",V),V==="delivery")try{i(L=>({...L,status:"paid"})),m(!0),await Mv(s.id,{...s,status:"paid"}),await N(),alert("Invoice marked as paid successfully")}catch(L){console.error("Error updating invoice status:",L),alert("Error updating invoice status")}},T=()=>{C(V=>!V)};return l.jsxs("div",{children:[l.jsx(c_,{cashInvoice:formData}),l.jsxs("div",{className:"w-[98%] mx-auto",children:[l.jsxs("nav",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>S("add"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Add"}),l.jsx("button",{onClick:()=>S("edit"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Edit"}),l.jsx("button",{onClick:()=>S("delete"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Delete"}),l.jsx("button",{onClick:T,className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:w?"Hide Quotation Table":"Show Quotation Table"})]}),w&&l.jsx(eI,{}),w&&l.jsx(tI,{}),n==="none"&&l.jsx(Na,{mode:"delete",initialInvoice:{},areas:c,customers:h,cb:N}),(n==="edit"||n==="delete")&&!s&&l.jsxs("div",{className:"h-[94vh] w-[85%] mx-auto mt-6 flex justify-between",children:[l.jsxs("div",{className:"relative",children:["Select Invoice: ",l.jsx("input",{type:"text"}),l.jsx(ee,{items:f,onSelect:I,style:{top:"top-[3px] left-[92%]"},columns:[{key:"id",label:"Id"},{key:"accountName",label:"Customer"},{key:"DocNo",label:"DocNo"},{key:"date",label:"Date"},{key:"total",label:"Total"}],name:"invoiceList",all:!0})]}),l.jsxs("div",{className:"relative",children:["Select Quotation: ",l.jsx("input",{type:"text"}),l.jsx(ee,{items:x,onSelect:I,style:{top:"top-[3px] left-[92%]"},columns:[{key:"id",label:"Id"},{key:"accountName",label:"Customer"},{key:"DocNo",label:"DocNo"},{key:"date",label:"Date"},{key:"total",label:"Total"}],name:"invoiceList",all:!0})]}),l.jsxs("div",{className:"relative",children:["Select Delivery Note: ",l.jsx("input",{type:"text"}),l.jsx(ee,{items:_,onSelect:I,style:{top:"top-[3px] left-[92%]"},columns:[{key:"id",label:"Id"},{key:"accountName",label:"Customer"},{key:"DocNo",label:"DocNo"},{key:"date",label:"Date"},{key:"total",label:"Total"}],name:"invoiceList",all:!0})]})]}),n==="add"&&l.jsx(Na,{mode:"add",initialInvoice:{terms:"Cash",branch:2,LOC:2,date:rI(new Date(Date.now()))},areas:c,customers:h,cb:N}),(n==="edit"||n==="delete")&&s&&l.jsx(Na,{mode:n,initialInvoice:s,areas:c,customers:h,cb:N}),s&&((W=s.invoiceType)==null?void 0:W.toLowerCase())==="delivery"&&l.jsx("button",{onClick:k,className:`mt-1 text-white px-4 py-2 w-full ${p?"bg-gray-500":"bg-blue-500"}`,disabled:s.status==="paid",children:p?"Paid":"Mark as Paid"})]})]})}const sI=[{shortForm:"UAE",name:"Dirham"},{shortForm:"USD",name:"American Dollar"}],iI=[{shortForm:"Cash",name:"Cash Invoice"},{shortForm:"Delivery",name:"Delivery Note"},{shortForm:"Quotation",name:"Quotation"}],oI=[{name:"Salesman 1"},{name:"Salesman 2"},{name:"Salesman 3"},{name:"Salesman 4"}],lI=[{name:"Cash"},{name:"Credit Card"},{name:"Both"}],aI=[{name:"Local"},{name:"International"}],le={id:"",terms:"Cash",LOC:"",DocNo:"",date:new Date(Date.now()),accCode:"",accountName:"",refNo:"",curr:"",rate:"",docType:"",note:"",docNo1:"",sMan:"",MDoc:"",payment:"Cash",delPlace:"",area:"",type:"",PONo:"",total:0,products:[]},nn={grossTotal:0,discount:0,disAmount:0,vatAmount:0,total:0,netTotal:0};function Na({mode:t,initialInvoice:e,fullheight:n,areas:r,customers:s,cb:i}){const[o,a]=b.useState(le),[c,u]=b.useState("Cash"),[h,d]=b.useState(e.invoiceType||null),[f,y]=b.useState(nn),[x,g]=b.useState({cashAmount:0,creditAmount:0}),_=O=>{g(O),a(L=>({...L,cashAmount:O.cashAmount,creditAmount:O.creditAmount}))},v=O=>{a(L=>({...L,accountName:O}))},p=O=>{a(L=>({...L,curr:O}))},m=O=>{a(L=>({...L,docType:O})),u(O)},w=O=>{a(L=>({...L,sMan:O}))},C=O=>{a(L=>({...L,payment:O}))},N=O=>{a(L=>({...L,area:O.name}))},I=O=>{a(L=>({...L,type:O}))},S=O=>{let L=0,we=0,Ye=0,On=0,A=0,B=0;O.forEach(F=>{const ne=Number(F.gAmount||0)*F.quantity,pe=Number(F.totalVat||0),dr=Number(F.discount||0);L+=ne;let Et=Number((ne*pe/100).toFixed(3));On+=Et;let rs=Number((ne+Et).toFixed(3)),Ot=Number((rs*dr/100).toFixed(3));Ye+=Ot}),we=Number((Ye/L*100).toFixed(3)),A=(L+On).toFixed(3),B=(A-Ye).toFixed(3),y({grossTotal:L,discount:we,disAmount:Ye,vatAmount:On,total:A,netTotal:B}),a(F=>({...F,products:O}))};b.useEffect(()=>{a(O=>({...O,id:e.id||le.id,terms:e.terms||le.terms,LOC:e.LOC||le.LOC,DocNo:e.DocNo||le.DocNo,date:e.date||le.date,accCode:e.accCode||le.accCode,accountName:e.accountName||"",refNo:e.refNo||le.refNo,curr:e.curr||le.curr,rate:e.rate|le.rate,docType:e.docType|le.docType,note:e.note||le.note,docNo1:e.docNo1||le.docNo1,sMan:e.sMan||le.sMan,MDoc:e.MDoc||le.MDoc,payment:e.payment||le.payment,delPlace:e.delPlace||le.delPlace,area:e.area||le.area,PONo:e.PONo||le.PONo,type:e.type||le.type,products:e.products||le.products,total:e.total||le.total})),y({grossTotal:e.grossTotal||nn.grossTotal,discount:e.discount||nn.discount,disAmount:e.disAmount||nn.disAmount,vatAmount:e.vatAmount||nn.vatAmount,total:e.total||nn.total,netTotal:e.netTotal||nn.netTotal}),u(e.invoiceType||"Cash"),d(e.invoiceType||null)},[e]);const k=O=>{const{name:L,value:we}=O.target;a(Ye=>({...Ye,[L]:we}))},T=async O=>{O.preventDefault();const{id:L,...we}=o;if(console.log(o),t==="add")ipcRenderer.send("open-invoice-window",o),c==="Cash"?(await ep({...we,...f,invoiceType:c}),alert("Cash Invoice Created")):c==="Delivery"?(await tp({...we,...f,invoiceType:c}),alert("Delivery Note Created")):(await $E({...we,...f,invoiceType:c}),alert("Quotation Created"));else if(t==="edit"){console.log(c+" "+h);let Ye=!0;h==="Cash"&&c==="Cash"&&await AE(L,{...we,...f}),h==="Delivery"&&c==="Delivery"&&await Mv(L,{...we,...f}),h==="Quotation"&&c==="Quotation"?await WE(L,{...we,...f}):h==="Quotation"&&c==="Cash"?(await ep({...we,...f,invoiceType:c}),await Ca(L)):h==="Quotation"&&c==="Delivery"?(await tp({...we,...f,invoiceType:c}),await Ca(L)):(Ye=!1,alert("Cannot change invoice type...")),Ye&&alert("Updated Invoice")}else t==="delete"&&(c==="Cash"?(await PE(L),alert("Cash Invoice deleted")):c==="Delivery"?(await UE(L),alert("Delivery Note deleted")):c==="Quotation"&&(await Ca(L),alert("Quotation deleted")));a(le),y(nn),i&&i()},[W,V]=b.useState(t==="delete");return l.jsxs("form",{onSubmit:T,className:`${n?"min-h-[100vh]  ":"min-h-[92vh]"}`,children:[l.jsx("div",{className:"mx-auto",children:l.jsxs("div",{className:"flex items-center w-[30%] mx-auto",children:[l.jsx("span",{className:"w-[35%] text-right inline-block",children:"Invoice Type:"}),l.jsxs("select",{name:"invoiceType",value:c,onChange:O=>u(O.target.value),className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete",children:[l.jsx("option",{value:"Cash",children:"Cash Invoice"}),l.jsx("option",{value:"Delivery",children:"Delivery Note"}),l.jsx("option",{value:"Quotation",children:"Quotation"})]})]})}),l.jsxs("div",{className:`w-[96%] mx-auto  grid grid-cols-6 gap-3 p-3 ${n?"mt-0":"mt-10"}`,children:[l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[35%] text-right inline-block",children:"Terms:"}),l.jsx("input",{type:"text",name:"terms",value:o.terms,onChange:k,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[50%] text-right inline-block",children:"Branch:"}),l.jsx("input",{type:"text",name:"branch",value:2,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:!0})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[13%] text-right inline-block",children:"Name:"}),l.jsx("input",{type:"text",name:"name",value:"Main Branch",className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:!0})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"LOC:"}),l.jsx("input",{type:"text",name:"LOC",value:o.LOC,onChange:k,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Doc.No:"}),l.jsx("input",{type:"number",name:"DocNo",value:o.DocNo,onChange:k,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[30%] text-right inline-block",children:"Date:"}),l.jsx("input",{type:"text",value:o.date,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:!0})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[36%] text-right inline-block",children:"Acc.Code:"}),l.jsx("input",{type:"text",name:"accCode",value:o.accCode,onChange:k,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2 relative",children:[l.jsx("span",{className:"w-[13%] text-right inline-block",children:"Name:"}),l.jsx("input",{type:"text",value:o.accountName,onChange:v,className:`h-7 px-1 border border-gray-600  w-full ml-1  ${t!="delete"?"bg-white":""} `,disabled:!0}),!W&&l.jsx(ee,{items:s,onSelect:v,style:{top:"top-1 left-[95%]"},columns:[{key:"name",label:"Name"},{key:"address",label:"Address"},{key:"mobile",label:"Mobile"},{key:"email",label:"Email"},{key:"description",label:"Description"},{key:"SAL",label:"SAL#"},{key:"area",label:"Area"},{key:"vatCode",label:"VAT code"},{key:"TmId",label:"TmID"}]})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Ref No:"}),l.jsx("input",{type:"text",name:"refNo",value:o.refNo,onChange:k,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1 relative",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Curr:"}),l.jsx("input",{type:"text",name:"curr",value:o.curr,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}    `,disabled:!0}),!W&&l.jsx(ee,{items:sI,onSelect:p,style:{top:"top-1 left-[93%]"},columns:[{key:"shortForm",label:"Short Form"},{key:"name",label:"Name"}]})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[30%] text-right inline-block",children:"Rate:"}),l.jsx("input",{type:"text",name:"rate",value:o.rate,onChange:k,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block text-nowrap",children:"Doc Type:"}),l.jsx("input",{type:"text",name:"Invoice Type",value:c,onChange:k,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0}),!W&&l.jsx(ee,{items:iI,onSelect:m,style:{top:"top-1 left-[92%]"},columns:[{key:"shortForm",label:"Type"},{key:"name",label:"Name"}]})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[13%] text-right inline-block",children:"Note:"}),l.jsx("input",{type:"text",name:"note",value:o.note,onChange:k,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Doc No:"}),l.jsx("input",{type:"text",name:"docNo1",value:o.docNo1,onChange:k,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"S.Man:"}),l.jsx("input",{type:"text",name:"sMan",value:o.sMan,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0}),!W&&l.jsx(ee,{items:oI,onSelect:w,style:{top:"top-1 left-[93%]"},columns:[{key:"name",label:"Name"}]})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[30%] text-right inline-block",children:"MDoc:"}),l.jsx("input",{type:"Number",name:"MDoc",value:o.MDoc,onChange:k,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"Payment:"}),l.jsx("input",{type:"text",name:"payment",value:o.payment,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0}),!W&&l.jsx(ee,{items:lI,onSelect:C,style:{top:"top-1 left-[92%]"},columns:[{key:"name",label:"Mode of Payment"}]})]}),l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[28%] text-right inline-block",children:"DelPlace:"}),l.jsx("input",{type:"text",name:"delPlace",value:o.delPlace,onChange:k,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[48%] text-right inline-block",children:"Area:"}),l.jsx("input",{type:"text",name:"area",value:o.area,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0}),!W&&l.jsx(ee,{items:r,onSelect:N,style:{top:"top-1 left-[92%]"},columns:[{key:"name",label:"Area Name"},{key:"shortForm",label:"Area ShortForm"}],all:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"PO No:"}),l.jsx("input",{type:"Number",name:"PONo",value:o.PONo,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:W,onChange:k})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Type:"}),l.jsx("input",{type:"text",name:"type",value:o.type,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0}),!W&&l.jsx(ee,{items:aI,onSelect:I,style:{top:"top-1 left-[93%]"},columns:[{key:"name",label:"Name"}]})]})]}),l.jsx("div",{children:l.jsx(Bv,{formData:o,onDataChange:S,Rows:e.products,mode:t})}),l.jsxs("div",{className:"grid grid-cols-4 gap-3 mt-4 mb-4",children:[l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Gross Total:"}),l.jsx("input",{value:f.grossTotal||0,name:"grossTotal",className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Discount%:"}),l.jsx("input",{type:"number",value:f.discount||0,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Amount:"}),l.jsx("input",{type:"number",name:"",value:f.disAmount||0,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Net Total:"}),l.jsx("input",{type:"number",name:"",value:f.netTotal||0,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Vat Amount:"}),l.jsx("input",{type:"number",name:"",value:f.vatAmount||0,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0})]}),l.jsxs("div",{className:"flex relative items-center col-span-1",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Total:"}),l.jsx("input",{type:"number",name:"",value:f.total||0,className:`h-7 px-1 border border-gray-600 w-full ml-1 ${t!="delete"?"bg-white":""}`,disabled:!0})]}),l.jsx(nI,{mode:t,formData:o,totalDetails:f,onPaymentChange:_})]}),!(t==="delete"&&!Object.keys(e).length===0)&&l.jsx("div",{className:"flex space-x-2 mt-2",children:l.jsxs("button",{type:"submit",onClick:T,className:"bg-white px-5 py-1 w-full border border-gray-100",children:[t," Invoice"]})})]})}const cI=()=>l.jsx("div",{children:l.jsx("div",{className:"border border-gray-400 ",children:l.jsxs("ul",{className:"flex gap-2 ml-6",children:[l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openCashInvoice")},className:"nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-95",children:l.jsxs("li",{className:"flex w-full h-full",children:[l.jsx("img",{src:hs,className:"lg:w-5 nah-h mr-1 w-4 lg:mr-5"}),"Quotation"]})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openInvoiceViewer")},className:"ml-1 mr-8    nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-75 transition-all",children:l.jsx("img",{src:fs,className:"lg:w-4 nav-ph w-3 "})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openPurchaseInvoice")},className:"nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-95",children:l.jsxs("li",{className:"flex w-full h-full",children:[l.jsx("img",{src:hs,className:"lg:w-5  mr-1 w-4 nah-h lg:mr-5"}),"Sales Order"]})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openInvoiceViewer")},className:"ml-1 mr-8    nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-75 transition-all",children:l.jsx("img",{src:fs,className:"lg:w-4 w-3 nav-ph"})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openCashInvoice")},className:"nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-95",children:l.jsxs("li",{className:"flex w-full h-full",children:[l.jsx("img",{src:hs,className:"lg:w-5 mr-1 w-4 nah-h lg:mr-5"}),"Delivery Note"]})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openInvoiceViewer")},className:"ml-1 mr-8    nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-75 transition-all",children:l.jsx("img",{src:fs,className:"lg:w-4 w-3 nav-ph"})}),l.jsx("button",{className:"nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-95",onClick:()=>{window.electron.ipcRenderer.send("openCashInvoice")},children:l.jsxs("li",{className:"flex w-full h-full",children:[l.jsx("img",{src:hs,className:"lg:w-5 mr-1 w-4 nah-h lg:mr-5"}),"Cash Invoice"]})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openInvoiceViewer")},className:"ml-1 mr-8 nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-75 transition-all",children:l.jsx("img",{src:fs,className:"lg:w-4 w-3 nav-ph"})}),l.jsx("button",{className:"nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-95",onClick:()=>{window.electron.ipcRenderer.send("openReturn")},children:l.jsxs("li",{className:"flex w-full h-full",children:[l.jsx("img",{src:hs,className:"lg:w-5 mr-1 w-4 nah-h lg:mr-5"}),"Product Return"]})}),l.jsx("button",{onClick:()=>{window.electron.ipcRenderer.send("openReturn")},className:"ml-1 mr-8 nav-p flex gap-1 justify-center items-center text-xs font-semibold active:scale-75 transition-all",children:l.jsx("img",{src:fs,className:"lg:w-4 w-3 nav-ph"})})]})})}),uI=""+new URL("open-092cw3Jk.png",import.meta.url).href,dI=({selectedProduct:t,setSelectedProduct:e})=>{const[n,r]=b.useState(!1),s=()=>{r(!0)},i=()=>{r(!1)};b.useEffect(()=>(window.addEventListener("keydown",c=>{c.code==="Escape"&&n&&i()}),()=>window.addEventListener("keydown",c=>{c.code==="Escape"&&n&&i()})),[n]);const o=c=>{e(c),i()},a=async c=>{const{value:u}=c.target;e(d=>({...d,productCode:u}));const h=await Od(u);h&&e(h)};return l.jsx(l.Fragment,{children:l.jsxs("div",{className:"w-[96%] font-medium mx-auto gap-8  flex justify-between",children:[l.jsxs("div",{className:"flex flex-col gap-1  2xl:w-[30%] w-[50%]",children:[l.jsxs("div",{className:"flex w-full ",children:[l.jsx("span",{className:"font-bold w-[35%] 2xl:w-[25%] text-blue-800 text-sm",children:"Product Code:"}),l.jsxs("div",{className:"text-sm 2xl:w-[75%] w-[65%] border uppercase bg-blue-100 border-gray-600 px-1 flex items-center justify-between",children:[l.jsx("input",{type:"text",className:"bg-transparent w-full outline-none",value:t.productCode||"",onChange:a}),l.jsx("button",{onClick:s,children:l.jsx("img",{src:uI,alt:"Open Search",className:"w-4 h-4"})})]})]}),n&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center ",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background  ",children:[l.jsx("button",{className:"text-red-500 mb-2",onClick:i,children:"Close"}),l.jsx(Rn,{onProductSelect:o})]})}),l.jsxs("div",{className:"flex border  w-full",children:[l.jsx("span",{className:"font-bold w-[35%] 2xl:w-[25%]  text-blue-800 text-sm",children:"Description:"}),l.jsx("div",{className:"text-sm   2xl:w-[75%]  w-[65%]   border  uppercase bg-white border-gray-600 px-1 ",children:t.description||"NA"})]}),l.jsxs("div",{className:"flex border  w-full",children:[l.jsx("span",{className:"font-bold w-[35%] 2xl:w-[25%]  text-red-950 text-sm",children:"Specification:"}),l.jsx("div",{className:"text-sm h-14 overflow-y-scroll 2xl:w-[75%]  w-[65%]   border  uppercase bg-blue-100 border-gray-600 px-1 ",children:t.description2||"NA"})]}),l.jsxs("div",{className:"flex border justify-between  items-center",children:[l.jsxs("div",{className:`flex justify-between    items-center  2xl:w-[40%] \r
                        w-[50%]  2xl:gap-0  gap-8`,children:[l.jsx("span",{className:"font-bold text-center text-red-950 text-sm 2xl:w-[90%] w-full   ",children:"Pack Qty:"}),l.jsx("div",{className:"bg-white w-[6rem] border border-gray-600 px-1",children:t.quantity||"NA"})]}),l.jsxs("div",{className:"flex justify-between items-center w-[40%]",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"Unit:"}),l.jsx("div",{className:"bg-white w-24 border border-gray-600 px-1",children:t.basicUnit||"NA"})]})]}),l.jsxs("div",{className:"flex border  w-full",children:[l.jsx("span",{className:"font-bold w-[35%] 2xl:w-[25%]  text-red-950 text-sm",children:"Max Order:"}),l.jsx("div",{className:"text-sm  2xl:w-[75%]  w-[65%]   border  uppercase bg-white border-gray-600 px-1 text-right ",children:t.maxOrder||"NA"})]}),l.jsxs("div",{className:"flex border  w-full",children:[l.jsx("span",{className:"font-bold w-[35%] 2xl:w-[25%]  text-red-950 text-sm",children:"Re-Order:"}),l.jsx("div",{className:"text-sm  2xl:w-[75%]  w-[65%]   border  uppercase bg-white border-gray-600 px-1 text-right ",children:t.reOrder||"NA"})]})]}),l.jsxs("div",{className:"flex flex-col gap-2  2xl:w-[30%] w-[50%] ",children:[l.jsxs("div",{className:"flex items-center   justify-center    ",children:[l.jsx("span",{className:"text-sm 2xl:w-[20%] w-[30%] font-bold text-center  text-red-950",children:"OEM No:"}),l.jsx("div",{className:" ml-1 text-sm     w-[80%]  border  uppercase bg-white border-gray-600 px-1",children:"0"})]}),l.jsxs("div",{className:"flex items-center  justify-center    ",children:[l.jsx("span",{className:"text-sm  2xl:w-[20%] w-[30%] text-center font-bold   text-red-950",children:"Lst Suppl:"}),l.jsx("div",{className:" ml-1 text-sm     w-[80%]  border  uppercase bg-white border-gray-600 px-1",children:t.lastSupplier||"NA"})]}),l.jsxs("div",{className:"flex justify-between ",children:[l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[4.8rem]  text-center font-bold   text-red-950",children:"Lst Pur.Cst:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white w-[40%]  border  uppercase  border-gray-600 px-1",children:t.lastPurCost||"NA"})]}),l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[3.8rem]  text-center font-bold   text-red-950",children:"AvgCost:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white  w-[70%] border  uppercase  border-gray-600 px-1",children:t.averageCost||"NA"})]})]}),l.jsx("div",{children:l.jsxs("div",{className:"flex items-center  justify-center    ",children:[l.jsx("span",{className:"text-sm 2xl:w-[20%] w-[30%]  font-bold text-left  text-red-950",children:"Sell Price2:"}),l.jsx("div",{className:" ml-1 text-sm text-right  w-[80%]  border  uppercase bg-white border-gray-600 px-1",children:t.sellingPrice2||"NA"})]})}),l.jsxs("div",{className:"flex justify-between ",children:[l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[4.8rem]  text-center font-bold   text-red-950",children:"Sell Price1:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white w-[40%]  border  uppercase  border-gray-600 px-1",children:t.sellingPrice1||"NA"})]}),l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[3.8rem]  text-center font-bold   text-red-950",children:"Margin%:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white  w-[70%] border  uppercase  border-gray-600 px-1",children:t.averageCost&&t.sellingPrice1?(t.sellingPrice1-t.averageCost)/100:0})]})]}),l.jsxs("div",{className:"flex justify-between ",children:[l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[4.8rem]  text-right font-bold   text-red-950",children:"Vat out:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white w-[40%]  border  uppercase  border-gray-600 px-1",children:t.vatType||"NA"})]}),l.jsxs("div",{className:"flex items-center   w-[60%]    ",children:[l.jsx("span",{className:"text-sm w-[3.8rem]  text-right font-bold   text-red-950",children:"%:"}),l.jsx("div",{className:" ml-1 text-right text-sm bg-white  w-[70%] border  uppercase  border-gray-600 px-1",children:"0"})]})]}),l.jsxs("div",{className:"flex items-center  justify-center    ",children:[l.jsx("span",{className:"text-sm  2xl:w-[20%] w-[50%] text-center font-bold   text-red-950",children:"vat Price:"}),l.jsx("div",{className:" ml-1 text-sm      w-[80%]  border  uppercase bg-white border-gray-600 px-1",children:"Local purchase"})]})]}),l.jsxs("div",{className:"flex flex-col  gap-[5px] 2xl:w-[30%] w-[50%] ",children:[l.jsxs("div",{className:"flex items-center w-full ",children:[l.jsx("span",{className:"text-sm 2xl:w-[12%] w-[30%]  font-bold  text-red-950",children:"Brand:"}),l.jsx("div",{className:"  text-sm   mr-1  2xl:w-[30%] w-[40%]  border  uppercase bg-white border-gray-600 px-1",children:t.brand||"NA"}),l.jsx("div",{className:"  text-sm     w-[60%]  border  uppercase bg-white border-gray-600 px-1",children:t.brand||"NA"})]}),l.jsxs("div",{className:"flex gap-3   ",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"Dept:"}),l.jsx("div",{className:"  text-sm     w-[90%]  border  uppercase bg-white border-gray-600 px-1",children:t.department||"NA"})]}),l.jsxs("div",{className:"flex w-full justify-between  items-center",children:[l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm  ",children:"Group:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:t.category||"NA"})]}),l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"Sub.Grp:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:t.subCategory||"NA"})]})]}),l.jsxs("div",{className:"flex w-full justify-between  items-center",children:[l.jsxs("div",{className:"flex justify-between gap-6 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm  ",children:"Loc:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:"2"})]}),l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"Stk.Typ:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:"HY"})]})]}),l.jsxs("div",{className:"flex w-full justify-between  items-center",children:[l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm  ",children:"Origin:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:t.origin||"NA"})]}),l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-blue-800 text-sm",children:"Unq.ID:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:t.uniqueId||"NA"})]})]}),l.jsxs("div",{className:"flex w-full justify-between  items-center",children:[l.jsxs("div",{className:"flex justify-between gap-5 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm  ",children:"ETA:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:"//"})]}),l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"ETD:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:"//"})]})]}),l.jsxs("div",{className:"flex w-full justify-between  items-center",children:[l.jsxs("div",{className:"flex justify-between -ml-5 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm  ",children:"Prod Type:"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:"HY"})]}),l.jsxs("div",{className:"flex justify-between gap-1 items-center",children:[l.jsx("span",{className:"font-bold  text-red-950 text-sm",children:"Qty"}),l.jsx("div",{className:"bg-white w-36 border border-gray-600 px-1",children:t.quantity||"NA"})]})]})]})]})})},Xe=({name:t,data:e,columns:n,highlightColumn:r,height:s,handleRowClick:i})=>{const o=c=>typeof c!="string"?c:c.length>13?c.slice(0,13)+"...":c,a=n.length>0?n:[];return l.jsxs("div",{className:`${s?"h-80":"min-h-full"} bg-blue-100 max-h-52 overflow-auto scrollbar`,children:[l.jsx("div",{className:"bg-gray-500 font-semibold text-sm mb-2 text-white text-center uppercase",children:t}),l.jsx("div",{className:"max-h-52",children:l.jsxs("table",{className:"w-full ",children:[l.jsx("thead",{children:l.jsx("tr",{children:a.map((c,u)=>l.jsx("th",{className:`text-left text-sm px-2 py-0 border-r-2 border-r-gray-400 ${u===0?"bg-yellow-200 italic font-bold":"bg-blue-800 text-white font-medium"}`,children:c.header},u))})}),l.jsx("tbody",{children:e.length>0?e.map((c,u)=>l.jsx("tr",{onClick:()=>i&&i(c),children:a.map((h,d)=>{var f;return l.jsx("td",{className:`px-2 py-1 font-semibold border-r-2 border-r-gray-300 text-[0.85rem] uppercase whitespace-nowrap ${u===0&&h.key===r?"bg-orange-400":""}`,children:h.render?h.render(c):o(((f=c[h.key])==null?void 0:f.toString())||"")},d)})},u)):l.jsx("tr",{children:a.map((c,u)=>l.jsx("td",{className:"px-2 py-1 border-r-2 border-r-gray-300 text-[0.85rem] uppercase whitespace-nowrap",children:""},u))})})]})})]})},hI=async t=>{try{const e=Rt(D(R,"purchaseInvoices")),n=e.key;await St(e,{...t,id:n});for(const r of t.products){const s=D(R,`products/${r.productCode}`),i=await H(s);if(i.exists()){const o=i.val(),a=(parseInt(o.quantity)||0)+parseInt(r.quantity);await De(s,{quantity:a,lastSupplier:t.supplierName,lastPurCost:parseFloat(r.price)})}else console.warn(`Product with productCode ${r.productCode} not found.`)}return n}catch(e){throw console.error("Failed to add purchase invoice and update product quantities:",e),e}},fI=async(t,e)=>{try{const n=D(R,`purchaseInvoices/${t}`),r=await H(n);if(!r.exists())throw new Error(`Purchase invoice with ID ${t} not found.`);const s=r.val(),i=new Map(s.products.map(o=>[o.productCode,o]));for(const o of e.products){const a=i.get(o.productCode),c=Number(o.quantity)-(a?Number(a.quantity):0),u=D(R,`products/${o.productCode}`),h=await H(u);if(h.exists()){const d=h.val();await De(u,{quantity:Number(d.quantity||0)+Number(c)})}else console.warn(`Product with productCode ${o.productCode} not found.`)}await De(n,e)}catch(n){throw console.error("Failed to update purchase invoice and adjust product quantities:",n),n}},zv=async()=>{try{const t=await H(D(R,"purchaseInvoices"));return t.exists()?Object.values(t.val()):[]}catch(t){throw console.error("Failed to retrieve purchase invoices:",t),t}},pI=async t=>{try{await ns(D(R,`purchaseInvoices/${t}`))}catch(e){throw console.error("Failed to delete purchase invoice:",e),e}},mI=async t=>{try{const e=await H(D(R,"purchaseInvoices"));return e.exists()?Object.values(e.val()).flatMap(s=>s.products.filter(i=>i.productCode===t).map(i=>({id:s.id,invoiceNo:s.invoiceNo,supplierName:s.supplierName,supplierId:s.supplierId,date:s.date,productCode:i.productCode,name:i.name,quantity:i.quantity,price:i.price,total:Number(i.quantity)*Number(i.price)}))):[]}catch(e){throw console.error("Failed to retrieve purchase invoices with product details:",e),e}},gI=""+new URL("example-I_cYwQiU.png",import.meta.url).href,np=()=>{const[t,e]=b.useState({productNo:"",name:"",supplierName:"",oemCode:"",uniqueId:"",description:"",specification:"",packQty:"HY",unit:"HY",maxOrder:0,reOrder:0,oemNo:0,lstSuppl:"Local purchase",lstPurCst:14.78,avgCost:14.78,sellPrice2:0,sellPrice1:14.78,margin:0,vatOut:14.78,vatPrice:"Local purchase",brand:"Origin",dept:0,group:"HY",subGrp:"HY",loc:"HY",stkTyp:"HY",origin:"HY",eta:"",etd:"",prodType:"HY",qty:"HY",alternatives:[],appliedModels:[]}),[n,r]=b.useState([]),[s,i]=b.useState([]),[o,a]=b.useState([]),[c,u]=b.useState([]);b.useEffect(()=>{t&&(async()=>{const y=await DE(t.productCode);r(y);const x=await VE(t.productCode);i(x);const g=await zE(t.productCode);a(g);const _=await mI(t.productCode);u(_)})()},[t]);const h=async f=>{if(!f)return;const y=await Od(f);e(y)},d=[];return l.jsxs("div",{className:"bg-background min-h-[100vh]",children:[l.jsx(cI,{}),l.jsx("div",{className:"border-b border-t border-b-gray-300 border-t-gray-300",children:l.jsxs("div",{className:"xl:w-[100%] w-[100%] m-auto flex flex-wrap items-center justify-center gap-3",children:[l.jsxs("div",{className:"w-[50%] flex gap-10 items-center",children:[l.jsxs("div",{className:"w-[20%] flex items-center",children:[l.jsxs("label",{htmlFor:"Branch",className:"text-sm font-semibold",children:["Branch:"," "]}),l.jsx("input",{type:"text",id:"Branch",className:"outline-none border border-gray-700 w-[99%] text-center ml-2 bg-white font-semibold",value:2,disabled:!0})]}),l.jsxs("div",{className:"flex items-center w-[80%]",children:[l.jsxs("label",{htmlFor:"Name",className:"text-sm font-semibold",children:["Name:"," "]}),l.jsx("input",{type:"text",id:"Name",className:"outline-none border w-[90%] border-gray-700 ml-2 bg-white px-2 font-semibold",value:t.name,disabled:!0})]})]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsx("a",{href:"/",className:"text-blue-500 underline text-xs",children:"edit"}),l.jsx("a",{href:"/",className:"text-blue-500 underline text-xs",children:"Product transactions"}),l.jsx("a",{href:"/",className:"text-blue-500 underline text-xs",children:"Transaction Search"}),l.jsx("a",{href:"/",className:"text-blue-500 underline text-xs",children:"Product Search"}),l.jsx("a",{href:"/",className:"text-blue-500 underline text-xs",children:"Duplicate"})]})]})}),l.jsxs("div",{className:"flex mt-5",children:[l.jsx("div",{className:"w-[76%]",children:l.jsx(dI,{selectedProduct:t,setSelectedProduct:e})}),l.jsx("div",{className:"w-[22%] border  mr-2",children:l.jsx(Xe,{name:"Multilocation",data:d,columns:[{key:"station",header:"Station"},{key:"lastPrice",header:"Last Price"},{key:"qty",header:"Qty"},{key:"location",header:"Location"}],highlightColumn:"station",heighValue:10})})]}),l.jsxs("div",{className:"mt-5",children:[l.jsxs("div",{className:"w-[97%] max-h-[20vh] flex justify-between 2xl:gap-0 gap-4 mx-auto",children:[l.jsxs("div",{className:"w-[12%] 2xl:w-[15%] flex flex-col items-center justify-center overflow-hidden",children:[l.jsx("div",{className:"w-full min-h-5 bg-gray-500"}),l.jsx("div",{className:"w-80 h-56 bg-no-repeat",style:{backgroundPosition:"center",backgroundSize:"contain",backgroundImage:`url(${t.picture||gI})`}})]}),l.jsx("div",{className:"w-[14.5%] 2xl:w-[22%]",children:l.jsx(Xe,{name:"Applied Model",data:t.appliedModels,columns:[{key:"make",header:"Make"},{key:"type",header:"Type"},{key:"remarks",header:"Remarks"}],highlightColumn:"Make"})}),l.jsx("div",{className:"w-40%",children:l.jsx(Xe,{name:"Purchase History",data:c,columns:[{key:"Br",header:"Br"},{key:"id",header:"GRN.No"},{key:"date",header:"Pur.Date"},{key:"Type",header:"Type"},{key:"supplierName",header:"Supplier Name"},{key:"quantity",header:"Qty"},{key:"price",header:"Unit Price"},{key:"total",header:"Total"}],highlightColumn:"UnitPrice"})}),l.jsx("div",{className:"w-[30%] 2xl:w-[23%]",children:l.jsx(Xe,{name:"Product Details",data:t.alternatives,columns:[{key:"productCode",header:"Product Code"},{key:"brand",header:"Brand"},{key:"name",header:"Product Name"},{key:"sellingPrice1",header:"Selling"}],handleRowClick:f=>{h(f.productCode)},highlightColumn:"productCode"})})]}),l.jsxs("div",{className:"w-[97%] flex min-h-[30vh] justify-between mx-auto mt-8",children:[l.jsx("div",{className:"w-[33%]",children:l.jsx(Xe,{name:"Quotation History",data:s,columns:[{key:"Br",header:"Br"},{key:"id",header:"Qutn.No"},{key:"date",header:"Qutn Date"},{key:"accountName",header:"Customer"},{key:"quantity",header:"Qty"},{key:"gAmount",header:"Unit Price"},{key:"total",header:"Total"}],highlightColumn:"Br"})}),l.jsx("div",{className:"w-[33%]",children:l.jsx(Xe,{name:"Delivery Note History",data:o,columns:[{key:"Br",header:"Br"},{key:"id",header:"DO.No"},{key:"date",header:"DO Date"},{key:"type",header:"Doc.Type"},{key:"accountName",header:"Customer"},{key:"quantity",header:"Qty"},{key:"gAmount",header:"Unit Price"},{key:"total",header:"Total"}],highlightColumn:"Br"})}),l.jsx("div",{className:"w-[32%]",children:l.jsx(Xe,{name:"Sales History",data:n,columns:[{key:"Br",header:"Br"},{key:"id",header:"Bill.No"},{key:"date",header:"Bill Date"},{key:"type",header:"Type"},{key:"accountName",header:"Customer"},{key:"quantity",header:"Qty"},{key:"gAmount",header:"Unit Price"}],highlightColumn:"Customer"})})]})]})]})},yI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAABk9JREFUeF7t3MFOG1EQRNGB//9mElkiyiKyGbUxVZM+bMOj+9Wdm7KNkrfDlwQkcDeBN9lIQAL3EyCIp0MCDxIgiMdDAgTxDEhgloAGmeXm1JIECLIEtGvOEiDILDenliRAkCWgXXOWAEFmuTm1JAGCLAHtmrMECDLLzaklCRBkCWjXnCVAkFluTi1JgCBLQLvmLAGCzHJzakkCBFkC2jVnCRBklptTSxIgyBLQrjlLgCCz3JxakgBBloB2zVkCBJnl5tSSBAiyBLRrzhIgyCw3p5YkQJAloF1zlgBBZrk5tSQBgiwB7ZqzBAgyy82pJQkQZAlo15wlQJBZbk4tSYAgS0C75iwBgsxyc2pJAgRZAto1ZwkQZJabU0sSIMgS0K45S4Ags9ycWpIAQZaAds1ZAgSZ5ebUkgQIsgS0a84SIMgsN6eWJECQJaBdc5YAQWa5ObUkAYIsAe2aswQIMsvNqSUJEGQJaNecJUCQWW5OLUmAIHnQH8dx3OPw6ziO9/yKezcgSJ49QfIM7m5AkDwcguQZEKSYwe1l1KMvf4kF4Qk/GP7naILkGWiQYgYEKYajQfJwCJJnoEGKGRCkGI4GycMhSJ6BBilmQJBiOBokD+eRIH6THuZDkDCA4zgIkmfgJVYxA4IUw9EgeTgEyTPQIMUMCFIMR4Pk4RAkz0CDFDMgSDEcDZKHQ5A8Aw1SzIAgxXA0SB4OQfIMNEgxA4IUw9EgeTgEyTPQIMUMCFIMR4Pk4RAkz0CDFDMgSDEcDZKHQ5A8Aw1SzIAgxXA0SB4OQfIMNEgxA4IUw9EgeTgEyTPQIMUMCFIMR4Pk4RAkz0CDFDMgSDEcDZKHQ5A8Aw1SzIAgxXA0SB4OQfIMNEgxA//1aDEcDZKHQ5A8Aw1SzIAgxXA0SB4OQfIMNEgxA4IUw9EgeTg+xcoz0CDFDAhSDEeD5OEQJM9AgxQzIEgxHA2Sh+NNep6BBilmQJBiOBokD4cgeQYapJgBQYrhaJA8nI/jOO5xuMnznl9x7wZXFuTRg3UVojcBrszgbM6XFf3KcL56aXIWnu97fQIEeX3G/0wgSCD04UiCDIN75hhBnknv589e8tXKJZf+ZEuQn3/In5l4yWftkksT5JnnNHb2ks/aJZcmSOwhf2bwJZ+1Sy79San9Y94/LwEf/Y7jdpUrMzgrjDfpZ5Pyff8k8JXoGwSqfSyEn0dDkDyDuxsQJA/nq0/jMAoyEn4w/JMfNmAUZCT8YPgnBLnsm9t8rN+zAUG+J8dnfop/cvtMei8+S5AXB3zixxPkREipbyFIKvm/cwmSZ+BTrGIGBCmGo0HycHzMm2egQYoZEKQYjgbJwyFInoEGKWZAkGI4GiQPhyB5BhqkmAFBiuFokDwcguQZaJBiBgQphqNB8nAIkmegQYoZEKQYjgbJwyFInoEGKWZAkGI4GiQPhyB5BhqkmAFBiuFokDwcguQZaJBiBgQphqNB8nAIkmegQYoZEKQYjgbJwyFInoEGKWZAkGI4GiQPhyB5BhqkmAFBiuFokDwcguQZaJBiBgQphqNB8nAIkmegQYoZEKQYjgbJwyFInoEGKWZAkGI4GiQPhyB5BhqkmAFBiuFokDwcguQZaJBiBgQphqNB8nAIkmegQYoZEKQYjgbJwyFInoEGKWZAkGI4GiQPhyB5BhqkmAFBiuFokDwcguQZaJBiBo8Euf3Ze/Hu//1qGiSP+OM4jnscCBLmQ5AwAOO7EyBINx/bhRMgSBiA8d0JEKSbj+3CCRAkDMD47gQI0s3HduEECBIGYHx3AgTp5mO7cAIECQMwvjsBgnTzsV04AYKEARjfnQBBuvnYLpwAQcIAjO9OgCDdfGwXToAgYQDGdydAkG4+tgsnQJAwAOO7EyBINx/bhRMgSBiA8d0JEKSbj+3CCRAkDMD47gQI0s3HduEECBIGYHx3AgTp5mO7cAIECQMwvjsBgnTzsV04AYKEARjfnQBBuvnYLpwAQcIAjO9OgCDdfGwXToAgYQDGdydAkG4+tgsnQJAwAOO7EyBINx/bhRMgSBiA8d0JEKSbj+3CCRAkDMD47gQI0s3HduEECBIGYHx3AgTp5mO7cAIECQMwvjsBgnTzsV04AYKEARjfnQBBuvnYLpwAQcIAjO9OgCDdfGwXTuA35fycyVmrI7cAAAAASUVORK5CYII=",vI=({AppliedModel:t,Alternative:e,mode:n,onAlternativeChange:r,onAppliedModelChange:s,categories:i})=>{const[o,a]=b.useState([]),[c,u]=b.useState([]),[h,d]=b.useState("alternative"),[f,y]=b.useState(!1),[x,g]=b.useState([]);b.useEffect(()=>{t&&a(t),e&&u(e)},[t,e]),b.useEffect(()=>{s(o)},[o]),b.useEffect(()=>{r(c)},[c]);const _=S=>{const{productCode:k,brand:T,name:W,sellingPrice1:V}=S;u(O=>[...O,{productCode:k,brand:T,name:W,sellingPrice1:V}]),y(!1)},v=S=>{if(S.preventDefault(),h==="applied"){const k={make:"",type:"",remarks:""};a(T=>[...T,k]),g(T=>[...T,[]])}else y(!0)},p=(S,k)=>{k==="applied"?(a(T=>T.filter((W,V)=>V!==S)),g(T=>T.filter((W,V)=>V!==S))):u(T=>T.filter((W,V)=>V!==S))},m=S=>{d(S)},w=(S,k,T)=>{a(W=>W.map((V,O)=>O===S?{...V,[k]:T}:V))},C=(S,k)=>{w(S,"type",k.shortForm)},N=(S,k)=>{g(T=>T.map((W,V)=>V===S?k.subCategories:W)),w(S,"make",k.shortForm)},I=()=>{y(!1)};return l.jsxs("div",{className:"relative w-full flex flex-col",children:[l.jsxs("div",{className:"flex justify-center gap-2",children:[l.jsx("button",{onClick:()=>m("applied"),className:"px-6 py-1 text-sm bg-white border border-gray-300",type:"button",children:"Applied Model"}),l.jsx("button",{onClick:()=>m("alternative"),className:"px-6 py-1 text-sm bg-white border border-gray-300",type:"button",children:"Alternative"}),l.jsx("button",{onClick:v,className:"px-3 bg-white border border-gray-300 text-sm",type:"button",children:l.jsx("img",{src:yI,alt:"",className:"w-6 h-6"})})]}),h==="applied"&&l.jsx("div",{className:"min-h-32 bg-blue-100 mt-2 ml-2",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-blue-800 text-white",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-2 py-1 text-sm bg-yellow-200 font-bold italic text-black",children:"Make"}),l.jsx("th",{className:"px-2 py-1 text-sm",children:"Type"}),l.jsx("th",{className:"px-1 py-1 text-sm font-normal",children:"Remarks"}),l.jsx("th",{className:"py-1 text-sm font-normal",children:"Actions"})]})}),l.jsx("tbody",{children:o.map((S,k)=>l.jsxs("tr",{children:[l.jsxs("td",{className:"border text-sm relative",children:[l.jsx("div",{className:"px-1 py-1 text-xs w-full h-full whitespace-nowrap overflow-hidden text-ellipsis",children:l.jsx("input",{type:"text",value:S.make.length>6?S.make.substring(0,6)+"...":S.make,className:"w-full py-1 px-1 h-full outline-none bg-white",disabled:n==="delete"||!0,title:S.make})}),n!=="delete"&&l.jsx(ee,{items:i,onSelect:T=>N(k,T),columns:[{key:"shortForm",label:"Category ID"},{key:"name",label:"Category Name"}],style:{top:"top-4 left-[78%]"},all:!0})]}),l.jsxs("td",{className:"border text-sm relative",children:[l.jsx("div",{className:"px-1 py-1 text-xs w-full h-full whitespace-nowrap overflow-hidden text-ellipsis",children:l.jsx("input",{type:"text",value:S.type.length>6?S.type.substring(0,6)+"...":S.type,className:"w-full py-1 px-1 h-full outline-none bg-white",disabled:n==="delete",title:S.type})}),n!=="delete"&&l.jsx(ee,{items:x[k]||[],onSelect:T=>C(k,T),columns:[{key:"name",label:"Category Name"},{key:"shortForm",label:"Short Form"}],style:{top:"top-4 left-[78%]"},all:!0})]}),l.jsx("td",{className:"px-4 py-2 border text-sm",children:l.jsx("input",{type:"text",value:S.remarks,onChange:T=>w(k,"remarks",T.target.value),className:"  px-2 py-1 text-sm w-full bg-transparent outline-none focus:bg-white",disabled:n==="delete"})}),l.jsx("td",{className:"px-4 py-2 border text-sm",children:l.jsx("button",{onClick:()=>p(k,"applied"),className:"px-2 py-1 text-sm bg-red-500 text-white rounded",type:"button",children:"Delete"})})]},k))})]})}),h==="alternative"&&l.jsx("div",{className:"min-h-32 bg-blue-100 mt-2 ml-2",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-blue-800 text-white",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-2 border text-sm bg-orange-400 font-normal",children:"Alternate Id"}),l.jsx("th",{className:"px-1 border text-sm font-normal",children:"Brand"}),l.jsx("th",{className:"border text-sm font-normal",children:"Actions"})]})}),l.jsx("tbody",{children:c.map((S,k)=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-1 border text-sm border-r-gray-300 border-r-2",children:S.productCode}),l.jsx("td",{className:"px-4 py-1 border text-sm border-r-gray-300 border-r-2",children:S.brand}),l.jsx("td",{className:"px-4 py-1 border text-sm border-r-gray-300 border-r-2",children:l.jsx("button",{onClick:()=>p(k,"alternative"),className:"px-2 py-1 text-sm bg-red-500 text-white rounded",type:"button",children:"Delete"})})]},k))})]})}),h==="alternative"&&f&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center ",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background  ",children:[l.jsx("button",{className:"text-red-500 mb-2",onClick:I,children:"Close"}),l.jsx(Rn,{onProductSelect:_})]})})]})},xI=async t=>{try{const e=D(Zt,"brands/"),n=Rt(e);if((await Si(e,s=>{if(s=s||{},!Object.values(s).some(o=>o.name.toLowerCase()===t.name.toLowerCase()||o.shortForm.toLowerCase()===t.shortForm.toLowerCase()))return s[n.key]={...t,id:n.key},s})).committed)return await St(n,{...t,id:n.key}),n.key;throw new Error("Brand already exists.")}catch(e){throw console.error("Failed to add brand:",e),new Error("Failed to add brand")}},$v=async()=>{try{const t=D(Zt,"brands/"),e=await H(t);if(e.exists()){const n=[];return e.forEach(r=>{const s=r.val();n.push({id:r.key,...s})}),n}else return console.log("No brands found."),[]}catch(t){throw console.error("Failed to retrieve brands:",t),new Error("Failed to retrieve brands")}},wI=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result),r.onerror=s=>n(s)}),rp=async t=>await wI(t),Hc=[{shortForm:"EX1",Description:"No Vat",Vatpercentage:"0.00",startDate:"12/0/0"},{shortForm:"EX2",Description:"Standard Vat",Vatpercentage:"5",startDate:"12/0/0"}];function _I(){const[t,e]=b.useState("none"),[n,r]=b.useState(null),[s,i]=b.useState(!1),[o,a]=b.useState(!1),[c,u]=b.useState([]),[h,d]=b.useState([]),[f,y]=b.useState([]),x=async()=>{const w=await $v();d(w);const C=await Ml();y(C)},g=async()=>{const w=await Fv();u(w)};b.useEffect(()=>{g(),x()},[]);const _=w=>{r(w),i(!1),m()},v=w=>{e(w),r(null),i(w==="edit")},p=()=>{a(!0)},m=()=>{a(!1)};return l.jsx("div",{children:l.jsxs("div",{className:"w-[98%] mx-auto",children:[l.jsxs("nav",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>v("add"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Add"}),l.jsx("button",{onClick:()=>v("edit"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Edit"}),l.jsx("button",{onClick:()=>v("delete"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Delete"})]}),t==="none"&&l.jsx(Ea,{mode:"delete",initialProduct:{},cb:g,handleActionChange:v,brands:h,categories:f}),(t==="edit"||t==="delete")&&!n&&l.jsxs("div",{className:"h-[94vh] flex flex-col items-center",children:[l.jsxs("div",{children:["Select Product:"," ",l.jsx("input",{type:"text",disabled:!0,className:"bg-white"}),l.jsxs("button",{className:"w-6 relative",onClick:p,children:[l.jsx("img",{src:Mg,className:"w-4 h-4 absolute -top-3 -left-5     "})," "]})]}),o&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center ",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background  ",children:[l.jsx("button",{className:"text-red-500 mb-2",onClick:m,children:"Close"}),l.jsx(Rn,{onProductSelect:_})]})})]}),t==="add"&&l.jsx(Ea,{mode:"add",initialProduct:{branch:1},cb:g,handleActionChange:v,brands:h,categories:f}),(t==="edit"||t==="delete")&&n&&l.jsx(l.Fragment,{children:l.jsx(Ea,{mode:t,initialProduct:n,cb:g,handleActionChange:v,brands:h,categories:f})})]})})}const Sa={id:"",name:"",productCode:"",brand:"",description:"",description2:"",department:"",category:"",basicUnit:"",status:"",class:"",subCategory:"",uniqueId:"",sellingPrice1:"",sellingPrice2:"",sellingPrice3:"",picture:"",reOrder:"",hsCode:"",minOrder:"",maxOrder:"",shelfLife:"",vatType:"",origin:"",alternatives:[],appliedModels:[]};function Ea({mode:t,initialProduct:e,cb:n,handleActionChange:r,brands:s,categories:i}){const[o,a]=b.useState(t==="delete"),c=S=>{const{name:k,value:T}=S.target;h(W=>({...W,[k]:T}))},[u,h]=b.useState(Sa),[d,f]=b.useState(null);b.useEffect(()=>{h(t==="edit"||t==="delete"?{id:e.id||"",branch:e.branch||"",name:e.name||"",productCode:e.productCode||"",brand:e.brand||"",description:e.description||"",description2:e.description2||"",department:e.department||"",category:e.category||"",basicUnit:e.basicUnit||"",status:e.status||"",class:e.class||"",subCategory:e.subCategory||"",uniqueId:e.uniqueId||"",copyAllBranch:e.copyAllBranch||"NO",sellingPrice1:e.sellingPrice1||"",sellingPrice2:e.sellingPrice2||"",sellingPrice3:e.sellingPrice3||"",picture:e.picture||"",reOrder:e.reOrder||"",hsCode:e.hsCode||"",minOrder:e.minOrder||"",maxOrder:e.maxOrder||"",shelfLife:e.shelfLife,vatType:e.vatType||"",origin:e.origin||"",barCode:e.barCode||"",appliedModels:e.appliedModels||[],alternatives:e.alternatives||[]}:Sa)},[t,e]);const[y,x]=b.useState(null),g=S=>{x(S.target.files[0])},_=[],v=S=>{h(k=>({...k,brand:S||""}))},p=S=>{const k=i.find(T=>T.shortForm===S);k&&k.subCategories&&typeof k.subCategories=="object"?k.subCategories=Object.values(k.subCategories):k.subCategories=[],h(T=>({...T,category:k?k.name:""})),f(k)},m=S=>{h(k=>({...k,subCategory:S||""}))},w=S=>{const k=Hc.find(T=>T.shortForm===S);h(T=>({...T,vatType:k?k.Vatpercentage:""}))},C=async S=>{S.preventDefault();const{id:k,...T}=u;if(t==="add"){if(y){const V=await rp(y);T.picture=V}await HE(T)&&alert("Product Added Successfully")}else if(t==="edit"){if(y){const W=await rp(y);T.picture=W}await QE(k,T),alert("Product Updated Successfully")}else t==="delete"&&(await qE(k),alert("Product Deleted Successfully"));n&&n(),h(Sa),x(null)},N=S=>{h(k=>({...k,appliedModels:S}))},I=S=>{h(k=>({...k,alternatives:S}))};return l.jsx("form",{onSubmit:C,className:"min-h-[92vh] ",children:l.jsxs("div",{className:"w-[100%]  mx-auto mt-4",children:[l.jsxs("div",{className:"flex justify-between  py-10 px-2 shadow-lg",children:[l.jsxs("div",{className:"flex flex-col gap-2 w-[45%] ",children:[l.jsxs("div",{className:"flex w-full ",children:[l.jsxs("div",{className:"w-1/4 flex items-center",children:[l.jsx("span",{className:"w-1/2  text-right inline-block",children:"Branch:"}),l.jsx("input",{type:"number",name:"branch",value:1,onChange:c,className:"w-1/2 h-7 px-1 border  border-gray-600 ml-1",disabled:!0})]}),l.jsxs("div",{className:"w-3/4 flex items-center",children:[l.jsx("span",{className:"w-1/4 text-right inline-block",children:"Name:"}),l.jsx("input",{type:"text",name:"name",value:u.name,onChange:c,className:"uppercase  w-3/4 h-7 border px-1 border-gray-600 ml-1",disabled:o})]})]}),l.jsxs("div",{className:"flex w-full",children:[l.jsxs("div",{className:"relative w-1/4 flex items-center",children:[l.jsx("span",{className:"w-1/2 text-right mr-[2px] inline-block",children:"Brand:"}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",name:"brand",value:u.brand||"",className:`${t=="edit"||t=="add"?"bg-white":""} w-full px-2 h-7   border border-gray-600`,disabled:!0}),!o&&l.jsx(ee,{items:s,onSelect:v,style:{top:"top-1 left-[75%]"},columns:[{key:"shortForm",label:"Brand Id"},{key:"name",label:"Name"}]})]})]}),l.jsxs("div",{className:"w-3/4 flex items-center",children:[l.jsx("span",{className:"2xl:w-1/4 w-1/2 text-right inline-block",children:"Product Code:"}),l.jsx("input",{type:"text",name:"productCode",value:u.productCode,onChange:c,className:"uppercase w-3/4 h-7  border px-1 border-gray-600 ml-1",disabled:o})]})]}),l.jsxs("div",{className:"w-full flex items-center",children:[l.jsx("span",{className:"w-[12.5%]  text-left inline-block",children:"Description:"}),l.jsx("input",{type:"text",name:"description",value:u.description,onChange:c,className:" w-[87.5%] h-7  border px-1 border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-full flex items-center",children:[l.jsx("span",{className:"w-[15%]  text-left inline-block ",children:"Description2:"}),l.jsx("input",{type:"text",name:"description2",value:u.description2,onChange:c,className:" w-[85%] h-7 border px-1  border-gray-600 ",disabled:o})]})]}),l.jsxs("div",{className:"flex flex-col gap-2 w-[45%]",children:[l.jsxs("div",{className:"flex w-full  justify-between",children:[l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Department:"}),l.jsx("input",{type:"text",name:"department",value:u.department,onChange:c,className:"flex-1 h-7 px-1 border  border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Class:"}),l.jsx("input",{type:"text",name:"class",value:u.class,onChange:c,className:"uppercase flex-1 h-7  border px-1 border-gray-600 ml-1",disabled:o})]})]}),l.jsxs("div",{className:"flex w-full  justify-between",children:[l.jsxs("div",{className:" relative w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Category:"}),l.jsx("input",{type:"text",name:"category",value:u.category||"",className:` ${t=="edit"||t=="add"?"bg-white":""} flex-1 h-7 px-1 border border-gray-600 ml-1 `,disabled:!0}),!o&&l.jsx(ee,{items:i,onSelect:p,style:{top:"top-1 left-[92%]"},columns:[{key:"shortForm",label:"Category Id"},{key:"name",label:"Category Name"}]})]}),l.jsxs("div",{className:"w-[45%] relative flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Sub.Category:"}),l.jsx("input",{type:"text",name:"subCategory",value:u.subCategory||"",disabled:!0,className:` ${t=="edit"||t=="add"?"bg-white":""} flex-1 h-7 px-1 border border-gray-600 ml-1 `}),!o&&l.jsx(ee,{items:d?d.subCategories:[],onSelect:m,style:{top:"top-1 left-[94%]"},columns:[{key:"shortForm",label:"Sub Category Id"},{key:"name",label:"Category Name"}]})]})]}),l.jsxs("div",{className:"flex w-full  justify-between",children:[l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Basic Unit:"}),l.jsx("input",{type:"text",name:"basicUnit",value:u.basicUnit,onChange:c,className:"flex-1 h-7      px-1 border border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"UniqueID:"}),l.jsx("input",{type:"text",name:"uniqueId",value:u.uniqueId,onChange:c,className:"uppercase      flex-1 h-7 border px-1 border-gray-600 ml-1",disabled:o})]})]}),l.jsxs("div",{className:"flex w-full  justify-between",children:[l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Status:"}),l.jsx("input",{type:"text",name:"status",value:u.status,onChange:c,className:"flex-1 h-7      px-1 border border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[45%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Copy In Branches:"}),l.jsxs("select",{name:"copyAllBranch",value:u.copyAllBranch,onChange:c,className:"uppercase      flex-1 h-7 border px-1 border-gray-600 ml-1",disabled:o,children:[l.jsx("option",{value:"Yes",children:"Yes"}),l.jsx("option",{value:"No",children:"No"})]})]})]})]})]}),l.jsxs("div",{className:"py-5 px-2  shadow-lg mt-6 ",children:[l.jsx("h1",{className:"ml-4 text-lg font-medium",children:"General"}),l.jsxs("div",{className:"w-[95%] mx-auto mt-5  flex gap-2 flex-wrap",children:[l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Selling Price 1:"}),l.jsx("input",{type:"number",name:"sellingPrice1",value:u.sellingPrice1,onChange:c,className:"flex-1 h-7 px-1 border       border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Re-Order:"}),l.jsx("input",{type:"number",name:"reOrder",value:u.reOrder,onChange:c,className:"flex-1 h-7 px-1 border      border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Origin:"}),l.jsx("input",{type:"text",name:"origin",value:u.origin,onChange:c,className:"flex-1 h-7 px-1 border       border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Selling Price 2:"}),l.jsx("input",{type:"number",name:"sellingPrice2",value:u.sellingPrice2,onChange:c,className:"flex-1 h-7 px-1 border       border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Min-Order:"}),l.jsx("input",{type:"number",name:"minOrder",value:u.minOrder,onChange:c,className:"flex-1 h-7 px-1 border      border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"HS code:"}),l.jsx("input",{type:"text",name:"hsCode",value:u.hsCode,onChange:c,className:"flex-1 h-7 px-1 border  border-gray-600 ml-1     ",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Selling Price 3:"}),l.jsx("input",{type:"number",name:"sellingPrice3",value:u.sellingPrice3,onChange:c,className:"flex-1 h-7 px-1 border  border-gray-600 ml-1     ",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Max-Order:"}),l.jsx("input",{type:"number",name:"maxOrder",value:u.maxOrder,onChange:c,className:"flex-1 h-7 px-1 border  border-gray-600 ml-1     ",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Bar Code:"}),l.jsx("input",{type:"number",name:"barCode",value:u.barCode,onChange:c,className:"flex-1 h-7      px-1 border  border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] flex items-center flex-col",children:[l.jsxs("div",{className:"flex justify-between w-[100%]",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Picture:"}),l.jsx("input",{type:"file",name:"picture",onChange:g,className:"flex-1 h-7      px-1 border  border-gray-600 ml-1",disabled:o})]}),u.picture&&l.jsx("p",{children:bI(u.picture)})]}),l.jsxs("div",{className:"w-[30%] flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Shelf Life:"}),l.jsx("input",{type:"text",name:"shelfLife",value:u.shelfLife,onChange:c,className:"flex-1 h-7      px-1 border  border-gray-600 ml-1",disabled:o})]}),l.jsxs("div",{className:"w-[30%] relative flex items-center ",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Vat type:"}),l.jsx("input",{type:"text",name:"vatType",value:u.vatType,disabled:!0,className:` ${t=="edit"||t=="add"?"bg-white":""} flex-1 h-7      px-1 border  border-gray-600 ml-1 `}),!o&&l.jsx(ee,{items:Hc,onSelect:w,style:{top:"top-1 left-[94%]"},columns:[{key:"shortForm",label:"VAT Code"},{key:"Description",label:"Description"},{key:"Vatpercentage",label:"VAT Percentage"}]})]})]})]}),l.jsxs("div",{className:"mt-8 flex",children:[l.jsx("div",{className:"w-[70%] min-h-36 ",children:l.jsx(Xe,{data:_,columns:[{key:"unit",header:"Unit"},{key:"Fraction",header:"Fraction"},{key:"GWeight",header:"Gross Weight"},{key:"NetWeight",header:"Net Weight"},{key:"length",header:"Length"},{key:"height",header:"Height"},{key:"breadth",header:"Breadth"},{key:"volume",header:"Volume"},{key:"packingSize",header:"Packing Size"},{key:"ID",header:"ID"}],highlightColumn:"unit",name:"Details"})}),l.jsx("div",{className:"w-[30%]",children:l.jsx(vI,{Alternative:e.alternatives,AppliedModel:e.appliedModels,onAlternativeChange:I,onAppliedModelChange:N,categories:i})})]}),!(Object.keys(e).length===0&&t==="delete")&&l.jsxs("button",{type:"submit",onClick:C,className:"  bg-white   px-5 py-1 w-full  border border-gray-100 mt-2",children:[t," product"," "]})]})})}function bI(t){const e=t.split("\\"),r=e[e.length-1].split(";");return r[r.length-1]}function CI({initialRows:t,onDataChange:e,mode:n}){const[r,s]=b.useState([]),[i,o]=b.useState(!1),[a,c]=b.useState(null);b.useEffect(()=>{t&&t.length>0&&s(t)},[t]);const u=()=>{const g={productCode:"",name:"",quantity:1,price:""},_=[...r,g];s(_),e(_)},h=g=>{const _=r.filter((v,p)=>p!==g);s(_),e(_)},d=(g,_,v)=>{const p=r.map((m,w)=>w===g?{...m,[_]:v}:m);s(p),e(p)},f=g=>{c(g),o(!0)},y=()=>{o(!1),c(null)},x=g=>{if(a!==null){const _=r.map((v,p)=>p===a?{...v,productCode:g.productCode,name:g.name,price:g.sellingPrice1}:v);s(_),e(_)}y()};return l.jsxs("div",{className:"mt-6 min-h-[10vh] w-[98%] mx-auto",children:[n!=="none"&&n!=="Delete"&&l.jsx("button",{onClick:u,className:"bg-white text-black border-gray-300 border px-6 py-2 mb-3 focus:scale-95",type:"button",children:"Add Product"}),l.jsx("div",{className:"min-h-[30vh] max-h-[30vh] scrollbar overflow-auto bg-blue-100",children:l.jsxs("table",{className:"w-full border-collapse border border-gray-300 bg-blue-100 ",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-blue-900 text-white",children:[l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Product Code"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Name"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Quantity"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Price"}),l.jsx("th",{className:"border border-gray-300 px-1 font-normal text-sm",children:"Actions"})]})}),l.jsx("tbody",{children:r.map((g,_)=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:g.productCode,onClick:()=>f(_),readOnly:!0,className:"w-full bg-transparent outline-none cursor-pointer focus:bg-white",disabled:n==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"text",value:g.name,onChange:v=>d(_,"name",v.target.value),disabled:n==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:g.quantity,onChange:v=>d(_,"quantity",v.target.value),className:"w-full bg-transparent outline-none focus:bg-white",disabled:n==="delete"})}),l.jsx("td",{className:"border border-gray-300 px-1",children:l.jsx("input",{type:"number",value:g.price,onChange:v=>d(_,"price",v.target.value),disabled:n==="delete",className:"w-full bg-transparent outline-none focus:bg-white"})}),l.jsx("td",{className:"border border-gray-300 py-1 text-center px-1",children:l.jsx("button",{onClick:()=>h(_),className:"text-red-500",children:"Delete"})})]},_))})]})}),i&&l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50",children:l.jsxs("div",{className:"p-4 rounded shadow-lg max-w-[95vw] min-w-[95vw] bg-background",children:[l.jsx("button",{className:"text-red-500 mb-2",onClick:y,children:"Close"}),l.jsx(Rn,{onProductSelect:x})]})})]})}function Wv(t){if(!(t instanceof Date))throw new Error("Input must be a Date object");const e=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return`${e}/${n}/${r}`}function Vv({mode:t,initialInvoice:e}){const[n,r]=b.useState(t||"none"),[s,i]=b.useState(e||null),[o,a]=b.useState([]),[c,u]=b.useState([]),h=async()=>{const y=await zv();u(y)};b.useEffect(()=>{(async()=>{const x=await ME();a(x),h()})()},[]);const d=y=>{i(y)},f=y=>{r(y),i(null)};return l.jsx("div",{children:l.jsxs("div",{className:"w-[98%] mx-auto",children:[l.jsxs("nav",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>f("Add"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Add"}),l.jsx("button",{onClick:()=>f("Edit"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Edit"}),l.jsx("button",{onClick:()=>f("Delete"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Delete"})]}),n==="none"&&l.jsx(Ia,{mode:"none",initialInvoice:{},suppliers:o,cb:h}),(n==="Edit"||n==="Delete")&&!s&&l.jsx("div",{className:"h-[94vh] flex flex-col items-center",children:l.jsxs("div",{children:["Select Invoice: ",l.jsx("input",{type:"text"}),l.jsx(ee,{items:c,onSelect:d,style:{top:"top-11 left-[895px]"},columns:[{key:"id",label:"Invoice No"},{key:"supplierName",label:"Supplier Name"}],all:!0})]})}),n==="Add"&&l.jsx(Ia,{mode:"Add",initialInvoice:{},suppliers:o,cb:h}),(n==="Edit"||n==="Delete")&&s&&l.jsx(Ia,{mode:n,initialInvoice:s,suppliers:o,cb:h})]})})}const sp={supplierId:"",supplierName:"",products:[],invoiceNo:"",date:Wv(new Date)},Ia=({initialInvoice:t,mode:e,fullHeight:n,suppliers:r,cb:s})=>{const[i,o]=b.useState(sp),[a,c]=b.useState(e==="Delete");b.useEffect(()=>{o({supplierId:t.supplierId||"",supplierName:t.supplierName||"",products:t.products||[],invoiceNo:t.id||"",date:t.date?t.date:Wv(new Date)})},[t]);const u=async y=>{const{invoiceNo:x,...g}=i;y.preventDefault(),e==="Edit"?(await fI(x,g),alert("Purchase Invoice edited")):e==="Add"?(await hI(g),alert("Purchase Invoice added")):e==="Delete"&&(await pI(x),alert("Purchase Invoice deleted")),o(sp),s&&s()},h=y=>{o(x=>({...x,supplierName:y.name,supplierId:y.id}))},d=y=>{o(x=>({...x,products:y}))},f=y=>y?y.reduce((x,g)=>x+g.quantity*g.price,0).toFixed(2):0;return l.jsxs("form",{onSubmit:u,className:` ${n?"min-h-[99vh]":"min-h-[88.4vh]"}     bg-background`,children:[l.jsxs("div",{className:`flex justify-around    ${n?"":"mt-10"}  border w-[70%] mx-auto`,children:[l.jsxs("div",{className:`flex items-center relative ${n?"mt-20":""}`,children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Supplier Name:"}),l.jsx("input",{type:"text",value:i.supplierName,className:`h-7 px-1 border border-gray-600 ml-1 ${!a&&e!=="none"?"bg-white":""}`,disabled:a||e==="none",readOnly:!0}),!a&&e!=="none"&&l.jsx(ee,{items:r,onSelect:h,style:{top:"top-1 left-[284px]"},columns:[{key:"id",label:"Supplier ID"},{key:"name",label:"Supplier Name"}],all:!0})]}),l.jsxs("div",{className:`flex items-center relative ${n?"mt-20":""}`,children:[l.jsx("span",{className:"w-[30%] text-right inline-block",children:"Supplier Id:"}),l.jsx("input",{type:"text",value:i.supplierId,className:`h-7 px-1 border border-gray-600 ml-1 ${!a&&e!=="none"?"bg-white":""}`,disabled:a||e==="none",readOnly:!0})]}),l.jsx("div",{className:`flex items-center relative ${n?"mt-20":""}`,children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"w-[50%] text-right inline-block",children:"Date:"}),l.jsx("input",{type:"text",value:i.date,className:`h-7 px-1 border border-gray-600 ml-1 ${!a&&e!=="none"?"bg-white":""}`,disabled:!0,readOnly:!0})]})})]}),l.jsx("div",{className:"mt-16",children:l.jsx(CI,{initialRows:t.products,mode:e,onDataChange:d})}),l.jsxs("div",{className:"flex ml-4 mt-5 items-center",children:[l.jsx("span",{className:"text-right inline-block",children:"Total Price:"}),l.jsx("input",{type:"text",value:f(i.products),className:"h-7 px-1 bg-white border border-gray-600 ml-1",disabled:!0})]}),e!=="none"&&l.jsxs("button",{type:"submit",className:"w-full mt-5 py-1 bg-white border-gray-300",children:[e," Invoice"]})]})},NI=()=>{const[t,e]=b.useState([]),[n,r]=b.useState([]),[s,i]=b.useState([]),[o,a]=b.useState([]);b.useEffect(()=>{const g=async()=>{const v=await Ov();e(v)},_=async()=>{const v=await zv();a(v)};g(),_(),c(),u()},[]);const c=async()=>{const g=await Lv();r(g)},u=async()=>{const g=await Rd();i(g)},[h,d]=b.useState(!0),[f,y]=b.useState({}),x=g=>{y(g),d(!1)};return l.jsxs(l.Fragment,{children:[h&&l.jsxs("div",{className:"min-h-[100vh]",children:[l.jsxs("div",{className:"min-h-[20vh] flex   justify-center",children:[l.jsxs("div",{className:"flex  border relative mt-10 justify-center mx-auto w-[30%]",children:[l.jsx("span",{className:"mr-2",children:"Select Cash Invoice:"}),l.jsx("input",{type:"text",className:"border w-[55%] h-7 px-1 text-sm bg-white cursor-pointer",placeholder:"View Invoices",disabled:!0,readOnly:!0}),l.jsx(ee,{items:t,columns:[{key:"DocNo",label:"Bill No"},{key:"date",label:"Bill Date"},{key:"accCode",label:"Account"},{key:"accountName",label:"Account Name"},{key:"total",label:"Amount"},{key:"doctype",label:"DOC type"},{key:"sMan",label:"S.Id"},{key:"payment",label:"Tr.type"}],onSelect:x,style:{top:"top-[5px] left-[88%] "},all:!0,name:"invoiceList"})]}),l.jsxs("div",{className:"flex  border relative mt-10 justify-center mx-auto w-[40%]",children:[l.jsx("span",{className:"mr-2",children:"Select Purchase Invoice:"}),l.jsx("input",{type:"text",className:"border w-[40%] h-7 px-1 text-sm bg-white cursor-pointer",placeholder:"View Invoices",disabled:!0,readOnly:!0}),l.jsx(ee,{items:o,columns:[{key:"invoiceNo",label:"Bill No"},{key:"supplierId",label:"Supplier ID"},{key:"supplierName",label:"Supplier Name"},{key:"date",label:"Date"}],onSelect:x,style:{top:"top-[5px] left-[81%] "},all:!0,name:"invoiceList"})]})]}),l.jsxs("div",{className:"min-h-[20vh] flex   justify-center",children:[l.jsxs("div",{className:"flex  border relative mt-10 justify-center mx-auto w-[30%]",children:[l.jsx("span",{className:"mr-2",children:"Select Delivery Note:"}),l.jsx("input",{type:"text",className:"border w-[55%] h-7 px-1 text-sm bg-white cursor-pointer",placeholder:"View Invoices",disabled:!0,readOnly:!0}),l.jsx(ee,{items:n,columns:[{key:"DocNo",label:"Bill No"},{key:"date",label:"Bill Date"},{key:"accCode",label:"Account"},{key:"accountName",label:"Account Name"},{key:"total",label:"Amount"},{key:"doctype",label:"DOC type"},{key:"sMan",label:"S.Id"},{key:"payment",label:"Tr.type"}],onSelect:x,style:{top:"top-[5px] left-[88%] "},all:!0,name:"invoiceList"})]}),l.jsxs("div",{className:"flex  border relative mt-10 justify-center mx-auto w-[40%]",children:[l.jsx("span",{className:"mr-2 w-[26%] text-right",children:"Select Quotation :"}),l.jsx("input",{type:"text",className:"border w-[40%] h-7 px-1 text-sm bg-white cursor-pointer",placeholder:"View Invoices",disabled:!0,readOnly:!0}),l.jsx(ee,{items:s,columns:[{key:"DocNo",label:"Bill No"},{key:"date",label:"Bill Date"},{key:"accCode",label:"Account"},{key:"accountName",label:"Account Name"},{key:"total",label:"Amount"},{key:"doctype",label:"DOC type"},{key:"sMan",label:"S.Id"},{key:"payment",label:"Tr.type"}],onSelect:x,style:{top:"top-[5px] left-[80%] "},all:!0,name:"invoiceList"})]})]})]}),Object.keys(f).includes("supplierName")?l.jsx("div",{div:!0,className:"w-[95%] mx-auto mt-1",children:l.jsx(Vv,{mode:"Edit",initialInvoice:f})}):Object.keys(f).length>0&&l.jsx("div",{className:"w-[95%] mx-auto mt-1",children:l.jsx(Uv,{mode:"edit",initialInvoice:f})})]})};function SI(){const[t,e]=b.useState("none"),[n,r]=b.useState(null),[s,i]=b.useState([]),[o,a]=b.useState([]),c=async()=>{const f=await Dd();i(f)},u=async()=>{const f=await OE();a(f)};b.useEffect(()=>{c(),u()},[]);const h=f=>{r(f)},d=f=>{e(f),r(null)};return l.jsx("div",{children:l.jsxs("div",{className:"w-[98%] mx-auto",children:[l.jsxs("nav",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>d("add"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Add"}),l.jsx("button",{onClick:()=>d("edit"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Edit"}),l.jsx("button",{onClick:()=>d("delete"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Delete"})]}),t==="none"&&l.jsx(ja,{areas:s,mode:"delete",initialSupplier:{},cb:u,customers:o}),(t==="edit"||t==="delete")&&!n&&l.jsx("div",{className:"h-[94vh] flex flex-col items-center",children:l.jsxs("div",{children:["Select Supplier: ",l.jsx("input",{type:"text"}),l.jsx(ee,{items:o,onSelect:f=>h(f),style:{top:"top-11 left-[56%]"},columns:[{key:"name",label:"Supplier Name"},{key:"address",label:"Address"},{key:"mobile",label:"Mobile"}],all:!0})]})}),t==="add"&&l.jsx(ja,{mode:"add",areas:s,initialSupplier:{},cb:u,customers:o}),(t==="edit"||t==="delete")&&n&&l.jsx(ja,{areas:s,mode:t,initialSupplier:n,cb:u})]})})}const ip={id:"",name:"",accountType:"Customer",referenceId:"",createdOn:new Date().toISOString().split("T")[0],supplierName:"",area:"",deliveryPlace:"",creditLimit:"",address:"",telephone:"",mobile:"",email:"",salId:"",vatCode:"",tmId:"",legalName:"",active:"Yes"};function ja({mode:t,initialSupplier:e,areas:n,cb:r,customers:s}){const[i,o]=b.useState(ip);b.useEffect(()=>{o({id:e.id||"",name:e.name||"",accountType:e.accountType||"Customer",referenceId:e.referenceId||"",createdOn:e.createdOn||new Date().toISOString().split("T")[0],supplierName:e.supplierName||"",area:e.area||"",deliveryPlace:e.deliveryPlace||"",creditLimit:e.creditLimit||"",address:e.address||"",telephone:e.telephone||"",mobile:e.mobile||"",email:e.email||"",description:e.description||"",salId:e.salId||"",vatCode:e.vatCode||"",tmId:e.tmId||"",legalName:e.legalName||"",active:e.active||"Yes"})},[e]);const a=d=>{const{name:f,value:y}=d.target;o(x=>({...x,[f]:y}))},c=d=>{o(f=>({...f,area:d.name}))},u=async d=>{d.preventDefault();const{id:f,...y}=i;if(t==="add"){const x=await RE(y);alert(x?"Customer added sucessfully":"Failed to add customer")}else t==="edit"?(await FE(f,y),alert("Customer Updated Sucessfully")):t==="delete"&&(await BE(f),alert("Customer Deleted Sucessfully"));r&&r(),o(ip)},h=d=>{o(f=>({...f,vatCode:d||""}))};return l.jsxs("form",{onSubmit:u,className:"min-h-[88.5vh]",children:[l.jsxs("div",{className:"w-[96%] mx-auto grid grid-cols-9 gap-3 p-2 mt-10",children:[l.jsxs("div",{className:"flex items-center col-span-1",children:[l.jsx("span",{className:"w-[74%] text-right inline-block",children:"Branch:"}),l.jsx("input",{type:"text",name:"branch",value:1,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:!0})]}),l.jsx("div",{className:"flex items-center col-span-2",children:l.jsx("input",{type:"text",name:"branchName",value:"Main Branch",className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:!0})}),l.jsxs("div",{className:"flex items-center col-span-2 border ",children:[l.jsx("span",{className:"w-[60%] text-right inline-block",children:"Acc.Type:"}),l.jsxs("select",{name:"accountType",value:i.accountType,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete",children:[l.jsx("option",{value:"Customer",children:"Customer"}),l.jsx("option",{value:"Supplier",children:"Supplier"})]})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[50%] text-right inline-block",children:"Reference ID:"}),l.jsx("input",{type:"text",name:"referenceId",value:i.referenceId,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Date:"}),l.jsx("input",{type:"date",name:"createdOn",value:i.createdOn,onChange:a,className:"h-7 w-full px-1 border border-gray-600  ml-1",disabled:!0})]}),l.jsxs("div",{className:"flex items-center col-span-3",children:[l.jsx("span",{className:"w-[14.5%] text-right inline-block",children:"Name:"}),l.jsx("input",{type:"text",name:"name",value:i.name,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2 relative",children:[l.jsx("span",{className:"w-[60%] text-right inline-block",children:"Area:"}),l.jsx("input",{type:"text",name:"area",value:i.area,className:`h-7 px-1 border border-gray-600  w-full ml-1   ${t!=="delete"&&"bg-white"} `,disabled:!0}),t!=="delete"&&l.jsx(ee,{items:n,onSelect:c,style:{top:"top-[25%] left-[94%] "},columns:[{key:"name",label:"Area Name"},{key:"shortForm",label:"Short Form"}],all:!0})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[50%] text-right inline-block",children:"Del.Place:"}),l.jsx("input",{type:"text",name:"deliveryPlace",value:i.deliveryPlace,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Credit Limit:"}),l.jsx("input",{type:"text",name:"creditLimit",value:i.creditLimit,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-3",children:[l.jsx("span",{className:"w-[14%] text-right inline-block",children:"Address:"}),l.jsx("input",{type:"text",name:"address",value:i.address,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[60%] text-right inline-block",children:"Tel.No:"}),l.jsx("input",{type:"text",name:"telephone",value:i.telephone,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[50%] text-right inline-block",children:"Mob:"}),l.jsx("input",{type:"text",name:"mobile",value:i.mobile,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"Sal.Id:"}),l.jsx("input",{type:"text",name:"salId",value:i.salId,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-3",children:[l.jsx("span",{className:"w-[15%] text-right inline-block",children:"Email:"}),l.jsx("input",{type:"email",name:"email",value:i.email,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[60%] text-right inline-block",children:"Active:"}),l.jsxs("select",{name:"active",value:i.active,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete",children:[l.jsx("option",{value:"Yes",children:"Yes"}),l.jsx("option",{value:"No",children:"No"})]})]}),l.jsxs("div",{className:" relative flex items-center col-span-2 ",children:[l.jsx("span",{className:"w-[33%]   text-right inline-block",children:"Vat type:"}),l.jsx("input",{type:"text",name:"vatType",value:i.vatCode,disabled:!0,className:` ${t=="edit"||t=="add"?"bg-white":""} flex-1 h-7      px-1 border  border-gray-600 ml-1 `}),t!=="delete"&&l.jsx(ee,{items:Hc,onSelect:h,style:{top:"top-1 left-[92%]"},columns:[{key:"shortForm",label:"VAT Code"},{key:"Description",label:"Description"},{key:"Vatpercentage",label:"VAT Percentage"},{key:"startDate",label:"Start Date"}]})]}),l.jsxs("div",{className:"flex items-center col-span-2",children:[l.jsx("span",{className:"w-[40%] text-right inline-block",children:"TmID:"}),l.jsx("input",{type:"text",name:"tmId",value:i.tmId,onChange:a,className:"h-7 px-1 border border-gray-600 w-full ml-1",disabled:t==="delete"})]}),l.jsxs("div",{className:"flex items-center col-span-3",children:[l.jsx("span",{className:"w-[30%]   inline-block",children:"Legal Name:"}),l.jsx("input",{type:"text",name:"legalName",value:i.legalName,onChange:a,className:"h-7 px-1 border border-gray-600 w-full",disabled:t==="delete"})]})]}),l.jsx("div",{className:" mt-7 min-h-[40vh]",children:l.jsx(Xe,{data:t==="add"?s:[i],name:"Details",columns:[{key:"id",header:"Id"},{key:"name",header:"Name"},{key:"accountType",header:"Account Type"},{key:"referenceId",header:"Reference ID"},{key:"createdOn",header:"Date"},{key:"area",header:"Area"},{key:"deliveryPlace",header:"Delivery Place"},{key:"creditLimit",header:"Credit Limit"},{key:"address",header:"Address"},{key:"telephone",header:"Telephone Number"},{key:"mobile",header:"Mobile Number"},{key:"salId",header:"Sales ID"},{key:"email",header:"Email"},{key:"active",header:"Active?"},{key:"vatCode",header:"VAT Code"},{key:"tmId",header:"Tm ID"},{key:"legalName",header:"Legal Name"}],highlightColumn:"Id",height:40})}),l.jsxs("div",{className:"mt-2",children:[(t==="add"||t==="edit")&&l.jsxs("button",{type:"submit",className:" px-5 py-1   bg-white w-full  ",children:[t==="add"?"Add":"Update"," Customer"]}),t==="delete"&&Object.keys(e).length!=0&&l.jsx("button",{type:"submit",className:" px-5 py-1  bg-white w-full  ",children:"Delete Customer"})]})]})}const op={name:"",shortForm:""},EI=()=>{const[t,e]=b.useState(op),[n,r]=b.useState([]),s=async()=>{const c=await Dd();r(c)};b.useEffect(()=>{s()},[]);const i=c=>{const{name:u,value:h}=c.target;e(d=>({...d,[u]:h}))},o=async c=>{if(c.preventDefault(),n.some(h=>h.shortForm.toLowerCase()===t.shortForm.toLowerCase()||h.name.toLowerCase()===t.name.toLowerCase()))return alert("This area already exists.");await TE(t),e(op),await s()},a=c=>{console.log("Deleting brand with ID: ${brandId}"+c)};return l.jsxs("div",{className:"min-h-[100vh]",children:[l.jsx("h1",{className:"text-center relative top-10  text-3xl",children:"Add Area"}),l.jsxs("form",{className:" mt-28",onSubmit:o,children:[l.jsxs("div",{className:"flex justify-between w-[80%] mx-auto",children:[l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter Name:"}),l.jsx("input",{type:"text",name:"name",className:"ml-1 px-2",onChange:i,required:!0,value:t.name})]}),l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter Shortform:"}),l.jsx("input",{type:"text",name:"shortForm",className:"ml-1 px-2",onChange:i,required:!0,value:t.shortForm})]})]}),l.jsx("div",{className:"w-[80%] mx-auto mt-16 h-[40vh]",children:l.jsx(Xe,{name:"Available Areas",data:n,columns:[{key:"name",header:"Area Name"},{key:"shortForm",header:"Short Form"},{key:"delete",header:"Delete",render:c=>l.jsx("button",{type:"button",onClick:()=>a(c.shortForm),children:"Delete"})}]})}),l.jsx("div",{className:"w-[80%] mx-auto mt-4",children:l.jsx("button",{type:"submit",className:"bg-white border border-gray-300 w-full  py-1 px-3 ",children:"Add"})})]})]})},lp={name:"",shortForm:""},II=()=>{const[t,e]=b.useState(lp),[n,r]=b.useState([]),s=async()=>{const c=await $v();r(c)};b.useEffect(()=>{s()},[]);const i=c=>{const{name:u,value:h}=c.target;e(d=>({...d,[u]:h}))},o=async c=>{if(c.preventDefault(),n.some(h=>h.shortForm.toLowerCase()===t.shortForm.toLowerCase()))return alert("This brand already exists.");await xI(t),e(lp),s()},a=c=>{console.log("Deleting brand with ID: ${brandId}"+c)};return l.jsxs("div",{className:"min-h-[100vh]",children:[l.jsx("h1",{className:"text-center relative top-10  text-3xl",children:"Add Brand"}),l.jsxs("form",{className:" mt-28",onSubmit:o,children:[l.jsxs("div",{className:"flex justify-between w-[80%] mx-auto",children:[l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter Name:"}),l.jsx("input",{type:"text",name:"name",className:"ml-1 px-2",onChange:i,required:!0,value:t.name})]}),l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter ID:"}),l.jsx("input",{type:"text",name:"shortForm",className:"ml-1 px-2",onChange:i,required:!0,value:t.shortForm})]})]}),l.jsx("div",{className:"w-[80%] mx-auto mt-16",children:l.jsx(Xe,{name:"Available Areas",data:n,columns:[{key:"shortForm",header:"Brand Id"},{key:"name",header:"Brand Name"},{key:"delete",header:"Delete",render:c=>l.jsx("button",{type:"button",onClick:()=>a(c.shortForm),children:"Delete"})}]})}),l.jsx("div",{className:"w-[80%] mx-auto mt-4",children:l.jsx("button",{type:"submit",className:"bg-white border border-gray-300 w-full  py-1 px-3 ",children:"Add"})})]})]})},ap={name:"",shortForm:"",category:""},jI=()=>{const[t,e]=b.useState([]),[n,r]=b.useState(ap),[s,i]=b.useState(null),[o,a]=b.useState([]),c=async()=>{const x=await Ml();e(x)},u=async()=>{const x=await YE();a(x)};b.useEffect(()=>{c(),u()},[]);const h=x=>{i(x),r(g=>({...g,category:x.name}))},d=x=>{const{name:g,value:_}=x.target;r(v=>({...v,[g]:_}))},f=async x=>{if(x.preventDefault(),!s)return alert("Please select a category first");const g={name:n.name,shortForm:n.shortForm};await KE(s.id,g),a(_=>[..._,g]),r(ap)},y=x=>{console.log("Deleting brand with ID: ${brandId}"+x)};return l.jsxs("div",{className:"min-h-[100vh]",children:[l.jsx("h1",{className:"text-center relative top-10 text-3xl",children:"Add Sub-Category"}),l.jsxs("form",{className:"mt-28",onSubmit:f,children:[l.jsxs("div",{className:"grid grid-cols-2 gap-5 w-[80%] mx-auto",children:[l.jsxs("div",{className:"col-span-1",children:[l.jsx("span",{children:"Enter Name:"}),l.jsx("input",{type:"text",name:"name",className:"ml-1 px-2",onChange:d,required:!0,value:n.name||""})]}),l.jsxs("div",{className:"col-span-1",children:[l.jsx("span",{children:"Enter ID:"}),l.jsx("input",{type:"text",name:"shortForm",className:"ml-1 px-2",onChange:d,required:!0,value:n.shortForm||""})]}),l.jsxs("div",{className:"relative col-span-1 -left-6",children:[l.jsx("span",{className:"w-[29%] border inline-block",children:"Enter Category:"}),l.jsx("input",{type:"text",className:"ml-1 px-2 bg-white",value:s?s.name:"",disabled:!0}),l.jsx(ee,{items:t,columns:[{key:"shortForm",label:"Category ID"},{key:"name",label:"Category Name"}],all:!0,onSelect:h,style:{top:"top-[5px] left-[76%]"}})]})]}),l.jsx("div",{className:"w-[80%] mx-auto mt-12",children:l.jsx(Xe,{name:"Details",data:o.length>0?o:[{name:"No results found",shortForm:""}],columns:[{key:"shortForm",header:"SubCategory Id"},{key:"name",header:"SubCategory Name"},{key:"delete",header:"Delete",render:x=>l.jsx("button",{type:"button",onClick:()=>y(x.shortForm),children:"Delete"})}]})}),l.jsx("div",{className:"w-[80%] mx-auto mt-10",children:l.jsx("button",{type:"submit",className:"bg-white border border-gray-300 w-full py-1 px-3",children:"Add"})})]})]})},cp={name:"",shortForm:""},up=()=>{const[t,e]=b.useState(cp),[n,r]=b.useState([]),s=c=>{const{name:u,value:h}=c.target;e(d=>({...d,[u]:h}))},i=async()=>{const c=await Ml();r(c)};b.useEffect(()=>{i()},[]);const o=async c=>{if(c.preventDefault(),n.some(d=>d.shortForm.toLowerCase()===t.shortForm.toLowerCase())){alert("This category already exists.");return}const h=await GE(t);i(),h&&e(cp)},a=c=>{console.log("Deleting brand with ID: ${brandId}"+c)};return l.jsxs("div",{className:"min-h-[100vh]",children:[l.jsx("h1",{className:"text-center relative top-10  text-3xl",children:"Add Category"}),l.jsxs("form",{className:" mt-28",onSubmit:o,children:[l.jsxs("div",{className:"flex justify-between w-[80%] mx-auto",children:[l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter Name:"}),l.jsx("input",{type:"text",name:"name",className:"ml-1 px-2",onChange:s,required:!0,value:t.name})]}),l.jsxs("div",{className:"",children:[l.jsx("span",{children:"Enter ID:"}),l.jsx("input",{type:"text",name:"shortForm",className:"ml-1 px-2",onChange:s,required:!0,value:t.shortForm})]})]}),l.jsx("div",{className:"w-[80%] mx-auto mt-16",children:l.jsx(Xe,{name:"Available Categories",data:n,columns:[{key:"shortForm",header:"Category Id"},{key:"name",header:"Category Name"},{key:"delete",header:"Delete",render:c=>l.jsx("button",{type:"button",onClick:()=>a(c.shortForm),children:"Delete"})}]})}),l.jsx("div",{className:"w-[80%] mx-auto mt-4",children:l.jsx("button",{type:"submit",className:"bg-white border border-gray-300 w-full  py-1 px-3 ",children:"Add"})})]})]})},kI=()=>{const[t,e]=b.useState("none"),[n,r]=b.useState(null);b.useState([]);const s=o=>{e(o),r(null)},i=()=>{window.confirm("Are you sure you want to return this invoice?")&&alert("Return successful!")};return l.jsxs("div",{className:"w-[98%] mx-auto",children:[l.jsxs("nav",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>s("add"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Add"}),l.jsx("button",{onClick:()=>s("delete"),className:"bg-gray-100 px-5 py-1 active:scale-95 border border-gray-300 mt-2",children:"Delete"})]}),l.jsx("div",{className:"mt-4 h-[80vh] overflow-auto border border-gray-200",children:l.jsx(Bv,{formData:n,onDataChange:o=>r(o),mode:t})}),l.jsx("div",{className:"flex space-x-2 mt-4",children:l.jsx("button",{onClick:i,className:"bg-white text-gray-500 px-5 py-1 w-full active:scale-95 border border-gray-300",children:"Return"})})]})},TI={},AI=Object.freeze(Object.defineProperty({__proto__:null,default:TI},Symbol.toStringTag,{value:"Module"})),Hv=qv(AI);var dp={};const hp=Hv,Qc=Hv,fp=Qc.join(__dirname,"path.txt");function PI(){let t;if(hp.existsSync(fp)&&(t=hp.readFileSync(fp,"utf-8")),dp.ELECTRON_OVERRIDE_DIST_PATH)return Qc.join(dp.ELECTRON_OVERRIDE_DIST_PATH,t||"electron");if(t)return Qc.join(__dirname,"dist",t);throw new Error("Electron failed to install correctly, please delete node_modules/electron and try installing again")}var pp=PI();function DI(){const[t,e]=b.useState(null);return b.useEffect(()=>{const n=r=>{r.key==="Escape"&&(console.log({path:window.location}),window.location.hash!=="#/"&&window.location.hash!==""&&window.close())};return window.addEventListener("keydown",n),pp.ipcRenderer.on("load-invoice-data",(r,s)=>{e(s)}),()=>{window.removeEventListener("keydown",n),pp.ipcRenderer.removeAllListeners("load-invoice-data")}},[]),l.jsx(i_,{children:l.jsxs("div",{className:"bg-background",children:[l.jsxs(n_,{children:[l.jsx(Oe,{path:"/",element:l.jsx(np,{})}),l.jsx(Oe,{path:"/ProductMastery",element:l.jsx(_I,{})}),l.jsx(Oe,{path:"/CashInvoice",element:l.jsx(Uv,{})}),l.jsx(Oe,{path:"/selectProduct",element:l.jsx(Rn,{})}),l.jsx(Oe,{path:"/InvoiceViewer",element:l.jsx(NI,{})}),l.jsx(Oe,{path:"/Return",element:l.jsx(kI,{})}),l.jsx(Oe,{path:"/PurchaseInvoice",element:l.jsx(Vv,{})}),l.jsx(Oe,{path:"/CustomerMastery",element:l.jsx(SI,{})}),l.jsx(Oe,{path:"/AddArea",element:l.jsx(EI,{})}),l.jsx(Oe,{path:"/AddBrand",element:l.jsx(II,{})}),l.jsx(Oe,{path:"/AddSubCategory",element:l.jsx(jI,{})}),l.jsx(Oe,{path:"/AddCategory",element:l.jsx(up,{})}),l.jsx(Oe,{path:"/PrintReport",element:l.jsx(up,{})}),l.jsx(Oe,{path:"*",element:l.jsx(np,{})})," "]}),t?l.jsx(ProductList,{invoiceData:t}):l.jsx("p",{children:"Loading..."})]})})}ka.createRoot(document.getElementById("root")).render(l.jsx(Ep.StrictMode,{children:l.jsx(DI,{})}));
